(this["webpackJsonpmirrorfly-webchat"]=this["webpackJsonpmirrorfly-webchat"]||[]).push([[4],{441:function(e,t,a){},457:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOIAAAArCAYAAABl91SrAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAA4qADAAQAAAABAAAAKwAAAADLaE8DAAAlmklEQVR4Ae19CXgUx7Fw9czeklb3LSEJgRH3JcQNxuY0GHPYxIEcjhPjxEfiJM5L/L88Qpz4d2zHiZM4L47jAx/BNj6wuYw5AwbELcQhIQRCB7ql1WqlvXen/+pZze7sJa0wvP85VvOtpqe7qrqmuqq6u7pnABhIAxIYkMD/dwkQSqkSuUjAn4A/M/6shBCK14F0EyRwgVLVZ59BdI0BlFFRAAW50P2tsYTJfSB9hSVA7F1dXyO1Lb8gLkcnpCfvEWJjNqtUqgo0RtdXWC435dFLrtK4I9XulWdquaWNRhik16IH1NGdswZzr66aRi7flEYHiH4pJKAgTYa/cv/150RwCUCXzC7ipo0tcuSmv4cj5W40xpYvxVN8SZg8Wu1euO0Mef5wFcTaXAQI8p0eS8YpeRjd0EBXZWQQy5fkUQbYvMESUNCr1xK5zfuAaQUtKdfSRTPu5FbcPtk5YcS7Tqdzi1Kp3HuD2/zKkjtdw33nQCXEos/DRPEfQIMRYPs5WHxbAbkVb3fgbyB9BSWgAIcLcKGIekGB1DUCfWsb0NKKFOHOOd+j986/1eFwvILG+DGOjnX/DvIprafD9pwTltV2cJAd564dl8vvmjuctH+RZzt5hcaeqBHuL2sEVUYcdObHc1txqlkfSNPipNNd7sBSgBpsvc5ARmPNgCEGi6fPkvJrNLG6HZK6HH2CBgGosSQ7FbrGZ0Mz6ri3dy600GgtgUxeCS05caQjCPEGFyh89NhECQdGqw3g+HngL9fp6JGSMcLau9c55kyaj6PjnxQKRTEy+6UNLJysoEkv7qHv7q8guTYnhaRorvuaUZhw+DJ9bvqQ65uGH62k+j/tE35zqpZ8vdMKiigNOCZmwYyTV+lvC/PIRZ98AeI0YMEpP4Zo/JMWw2VJMdDsXzpwF4kEDl2kGX87IPz4XAOZa3d7dDgSPAmG4LxkdAa05SSTB7CsmpUjzZgtJ+B75+vptwpzydauLvpiTMz16QejF0mSGaIPXBwh23HOtLsYuMu1SXDvgvl09ZJ8V172GyZKX9GTLzaC+FqKPEepIRYM783F2G4SJH1/CzqExsixPZDH6uD+rWdhnKHHlRgsEIcrtXuj1HAIDWQ70ux3gGpfOaw9Vk3W1LZDPM44STvSVvN00Zaz5AS26meIw9PhtaxY+vNrKFopcag780dwjclK+FgqG7hGLoHjVyDxZA0Zf6EJxik5ACbP/ppjjAraEBVDZ550rga0p2tg/P5KGMfxcK1uOMRizU2Nl4Q0RIkh4kS9vFQD/O/fVAkHThcIj33j15rbiu7G0fHnODoeQMX1DuUSzo2+ooHowLT/Vmj4P2uhc8csoFYtRE9h2y1P97etbjt819Dt25lx4eNdbITMIcnw4LOfklNI71p/aH5SQqf/cTddVW+g8QLO7BkuXqHLCvFVTTQnkFZGMveHtbMh+YOT7ruaOiERHQCMySTnZg3l7p8znsjMMxBz4D6cBLBPObMdeCtOS+eOgh1X2uAfdis4w8EHlwsQpRLaUtzKq1KdwQak2yYoTVYC3TaqMDsJ2unNTb0aImta1C6LDfgDJwlXdkXt+u6KQvrtpRudOemb0EieQBDbzTBIStdzYL4lGVqffgS69z4K5iOxaIQeadjKVJ5M//5aHFQlCIKfx0RbJMeqyKLp+eTB/VfpU3PyCM7N+04IG/fWPvfqmjaY5HD5jJthugVCLE4S5JhXjCUtKLOHhqZxz316HhLHpQDkJ8C5O6YQU98tDkCElQD2KcXpSH4y1H53Af/pHUOJPSxsiIpyLPswoJz1KEW6YkQN+IDaG3/bpyHKmyStHaB4/g0QjpxJFR75+qPOqWOncikJz3R20n16PXTeCINERVVA9+YEaDo2CYRDz4Bp+0hw1sjZuO48ZcMV9ljP4OWl02Ck8Nl5srYgk9uHhfu9FWEy+/dTRUmFc3mtgXyzvgOjn/52KAa+QAiyQ5Eayogpid+UNUwzA8URSgDNBfuAdUJomUdIxh8MdcVD07/4Zt31e8glTifwB0+C4qGngPzu1UKh+OzLWnPrf7lcrjnIePwXYZS2fhIDHa8ugs7dv4euba+D4ZUbZoSML0rdonAFNMbA378uuVN2lrrWbzpCvWuFUM+Cz0jqOMfQI5V05clqIcaFXjOQloBKwZQjXEIafHs71VdWUpyc9p1wXZ5oNF6/bLG9RPzp+26pfxCM7jUTTezooHGYZye0rishrsJgoLEXLtDrmulgp3pGr96E3k/ORONmfctGxf+B1K8R0cOPx+uQtg7gX9oEwqmyeHrP/Ifo7ZPnO/Ky2HT1bYS7ip4/4ieg9KQSOsvGQtf2xeCo+ibYT+eBy9BvJ9GnvHrxcnZcVWw+7ZqVpqf3I52/hqO17RRozzXAypI6OttkDRwKPVgoA8wEe2csJztOmFN/uck+yWJ3F5mdfNN7x53nyCTF4VUh1tvMKZyuh5kvbBHu1CjB9o8Dzk/nzlIcySPEtu0sjXfYoRD3JfUt3QB5yW7LrFv4YwtHEoPEe2kpjdrb6J779DZhLnaG8f9upTvuGgynRo4kjgYTTfrwqDP3cpsypx3xh6SAdeYtcOH2EaRGwg+8tlIas6MY9E0dMOJULeif2ibcasLVAk/AYnFxl9dtplWjUqGmQwU1DxaSPtdpkjx+9j5M5YlQ6HRD7cuf2/Y/MENdifpDD1bS5NJqGFnRBIlsa2J4GrQOzoWjq5B/OW+Sg/XI/MZMIymbObH5Lg1Ww02bKF+mh9hoJ3C3pkNnYQTPKueX5Teh0zl+CuIGJ4DzB4vBeB2G6CNJ3AJwx85h0LdeJZw4P4IunfOYc8b4YTQ18SMU8r9QmG0+6OAcwnBgP5QLze/dBpYz94Kjeho4ruKI1O/gZTDxECXMM7BOC5cw8gk7z9P/3FbiLFkyXnkkFJzN6Z59qtr93Zp2IVq0t1BAFI0wxNT0/TKIOl/HP7il1Pk1i00YLIDbbDDzNY/GwWNI5mAgqT0XYdW5Jvhpt52MxtM3rvQ4fipu+z75z8PUtq1EuKe+k9yGZ1b1LFBR1cqZO7qEj64Y6Ev5CaSW0drVCA/sOMs9itHhwegX7Fl6OlunFn7/j320/tltwrdL6hTjDRaKWzkELrdS67UO+uHGPfSF1XOJ31YKm4o7Ep1jN+wU7t13keRi1HkERof15U0kC/lhkUpmdEadkjafiIHqW1LpoU9L6ceLxpKKwGeS3+NBhrhLBu2Tuy7Q2U6By+EI7TJZVcfzY2DtppN03F93C4sbTdxU5DHJgfK83EJbp5nJM0jjPR8dbFpcyzHnd2OMUKTtRj1hhhjCoRY7Iaf6ivAzjQIUarX77wh0UsTpx59dx2F2RbOw2q2E7t9t59Z9IUNk7RLGbFMbcJ/sB3qxOk4or1oGq+aPdQ7NO4yG9iwa4+Ww/Jk2TISuwz8FS3EROGoyQTDj1CT0KBOWRj8qcALjmcL0goP7fymfned/3NpKzyUnk65A0GNVrsdKal25LOIaLlEh2Isy2H0nrbHNBvpAeYMrs2djX91pFRJm5JNlWO1niJ+V0rx1W+nqsiYywu5pS4Fr2QmJWvhPp1sQcN9ycnMXaK09405DJ2uBrPy8HA5jprbNRAu+9wa972Qt5PXgq9tMMCU1Fn7eZaXmsw1kapMJoj34FOoxZssTck9OrIi/jVHzJEr2tDvH1VRyv77YBLOudQjRuF/KTkTKE5uWJvMcJNcaYNTVdjKlps15+z8OuF54YLYi7CGF3Wcgpr4LvlHZClo3W7/jzg8Gvu4oyqNPfniaFF5oJEOMFqpziL6TAp7PzcqMo+sQzmeI6ITYyMWWAzcysUgCW3JQCO5LuxsyzHZyX2UL4O6G8iTq+RnU8140wp+zj0ppyt/3CiuutJI1g5OhXRcNv/vChih5DPEgQOlF4GsbtcLx8yOE760c7Jg3ZQyuHZ/ief4AMuqNDLY1nBve1bxjrbPhz/OUtHYouIxogOFHKv/H+AJ3rK/66DCznfLbzjhmpMbAHQjt63B2U+z49s832Wd3mPvodNGT+msq4/psHVGYzc5MlyzKauii0GWH1Vj9EwYjpbP1kNfYSTNtDsHr5jstoN1bTqc7UT9QQRXMsUjJgc3ZHGSQzU6LsGz7NQMML71Gk20ONjx7Uls3KD8rgyKXSyAdVuDlokCaYHWSnBYzzZXg2fVQhfu7j71DvlltoFO7bFTpsRc5hC/PBhGjhf1oUqsJ5l1tF7IffN3F//07iq0+KF/uYAUQi0C1cnlgFBpe3Aerr7ZTjS1gcmtDo8MTSCN8FKQcygEfpveVuQQb4VUaZcW+9MfB/eDO1i6oPNwGo1Oj6MKndpCdCBF2Su+PjcNnJYw32chC7HelgqM7B6WT7htgiFIzuDXOetZgBG7PUSCnyzTC0luLXD/51kuuoTkfsNHRaDSanV0nHzfVPLXG2bE3rVXdoUmJd4HiBnIhcRP2GkKwclj2CA0GmrzrnOOhU1W0fOJgcpbVVzXT1B/9s/uFmnaXWqb/clRvHpeC6E2DHYsVTy2hYaDS+Bupy01Svcg9ma4uULpcbl4Oyoyl2RR6/iVaG+Xak6PhKiPRaXerrA7KiZHiHpqMo2YjhJW2xU6uEk5R1QMObx2k6S/sdj13roEFpUK3K8EGXo04anbbYFiX1f3sf2xy2p5dpdwdCMP2iWzMq8jEgdKB8gbQsGuolBbDBR/kYJ3GiPTmJUIR66tMZCx4RJw1GqpO1NL3k6NgdHM3LGw3CRNQv2txsAnHtrcltjb848dCwZVWGJSfRAxWB/fm2olgCm7Fi3I9GaYOaJDoGjnc6uBf+5gov/7zDPL+rh+aGqoOmWpf/dx48eGfOls35YKrVWM2u4Ad4Oltmnc9XPSKI3Ya6zjPT4Gy45hlycrtToGvbHIVPre9+y6J1rbT1g+2ljjjPFsgPnh2REqO683LlEuiIV4lpWGdLCoPi+T6QYg3bJ7DInbMoIOjsv6RWjY1y0sSHHeOEfavmMR/IlETsB/6wmX12BJkxQuWMVnCJ6smwucM30xp+s4Lzl0fnXbFOV0COgRmMP6/OA22myjgq1zMCPA5AupxCk3qjULBkUvudbj2HivxJV2ZIQpoPIE8upGnwDJ0bVCYQ2H5RPK8hO93FYUYTuh+kBHe9PRrCJJj04g5J47blxgFZy41CRp8hLXvF4MmEsI7j0Ke2yXcbbIK3OBE4eDKSVDFDDisd4yEaF8wbIQkZy+B4uGnQJitzHXOOg9CNp6fVWM52izTPxMeCWP5BDxExOMkLHgbvK9WIq+nqCxMYeQpNY6DQQmcubTOrbHgtFSqazKC7tRVuvzxjdbDBak08clPrCNwp16qFq+xOiLkpyigosnFmW0yaxIjbf6wXkSmMKiwfinE6InuSTRUcVPZD9hzjCtaDc6hqVzn4ET+0OgcvvuWVNizsIjfip2KAvYkMfIX2BZWMRlHqYh7cArXnp3A7yvM4cyZcbDztkH87vx8z7r49T2uH398xnlLYPhewRN3QSpvuW0Et+9cLXl6Hk4UOSWX39bpWrP9nDD2ahtNR0fGSdKw46NWtnDjn99uXbh+P72wfo5sLWWz9RivBC1xzngkNE5L7Fnx5HJBGnceo7pXJudxB4YUcgd8UIBRIgd2qadfcZ2Z39pou+ftAywG3nuyuKlx80F18afrfUsmPwzGEtMVn0r4Vd81FUoOXxH2xGromOLLsNDeaU1AgHo/oIAbXEwqX3rDOaPJRGfkJ3OOzASyd8V4EEf4m2qIEh/E2AX6rRRUJfFgWCSAZWI30BRUNFQIlkwYPmfKEYc7XYqbaowoXXEE8LTL/iqw4YJ07tUmo7Co2i4MwSmGyBWzl2YjHX+2xvbIqSuQ2dThxpM9PoVRKghMzFXUDs/gNVdbnWlmOV2xE31t+OUYDRkdVieGyf2A2I0b3Gig8qmlCILc6bXEuGQsv+9rhcqX0yYo9hWS0FsFYlg/xHQtWU+cy8bxxbcOV6xbPU15QBaZEZvYX0Lj1u+wLLI5XCr5hqgKnxm3ECofnqvYMHm44kU2MuwXMeDYyQb6cUG68/43jjgfP3aFZmPQxTvbajUJUa16fqGm28nWUqUeFM9f5hzlopPqUmJJ94oJin+OSdU884NFpFoqD3ll8kSHs+mYbd6npWRej1qFBJUK0el36zX2P+D9r6Qy/yszbuYwkXaIVIjvjj6zzXW+rdvdcqaOpk3NVT6CYE+EAPUWbdsM8SYLWdtkckN2IjkyMp37HB0OrnxRD71QNzHDBEMw/Kyr1YLq7TTovGiCrluNYB9mBRrlWWJ3MmNEOGaMN3VkDDACZhSXW4R9i8Yo3RuL3Y8Yzb6NaZOFQkWDa3mnRQAHvq3hTchoRixnGpfNf4BxjxE4j7rDz7jENgJGvR5k0ejkmsceOpAnEdYFuMALqtMqiTM3kduSrNf+csnEPl5NY4oUQFunJjA9nzs0fxT/HyuLFKdZlCgwXTC455y75k5wy4JKDCYrjhjmjeA3zMlS/G0oGqEcjykmOrHXcCpKKpvc65o6aZKkw2xgcbpoUUmNfTji+BmiyF8Aj8wZ3zNRvfXJOzW/SEggYjxY3lZwnj2nAEqOWDgxKCjrq2BgsQQjxA4VH7qPxA/GsComf3EGxQ5DBac7xvP7dpxzFys5YemJWuGB0mr68thccjUY0lMiuO0Tz9VBUZwWTHFquvP2bN8Jq/8RQ5QzpjArIOFgPERV6qBzhhG6ppvAneUAN3JiRGNkIpSmqXK8G5EPMgJGlA2AqCjfnqN6qbrNOXlHiWuavK2aluDOwmmda3gmd3RGgebtzSfMjwGbWsqViT1EMBpGJhBMNA5ZJcIy8KAkLhKZV5bXUIhVc415idyOP3y9DyNEVJEvP3yAnATelhhF/rmySFmC3jig1tPWxTrHTCq44uWMMePAKfzZwkGKnUOHhp7OIT3L1pP01aEpjntbO4VEt+wsIR6M12kUJB6NFW1A9rKAqOz+EhiVxcMD0zVPR2aEyHOPTOePUh/LT1dt5AjX59QUo5W2RD13Zv86uXxleckJyvtVVs2yozNJ3Y/edGwvr6dTS2qcae8fc6/C4mcCwLy3HRa6rqrFDUNTSdWC0YqjKEevhX9BQ5QLkLl2KcnLWZl/HYstaRrUoNiWCOpaDXRN6wTreDO49QJII2N8z5pRongjrqIhih5ORk2cibphcr7m0sv/svy+rM7xanULKmGYxOHudXaCsmXOSM2m5UXK8s3HUJdFZZLptJiV3XtpYSiRiYbB+6VAeXk2c1ggI3A9GaMhhmUTFE0f+eGHuulxDuL0ylev4ciV9Fjhsp8x+KrFHJ76ycP9YS2O9N6aGHxLVs3RC5NGKqu9hSEydxYSy5JnjYcQtxB5x20pTzLhtkZmvGZkyWXxQ2WtnlJcIzJFD+gTfE/01Ngh5LyE2+dVlL8bdCpaMapA91Z/D30H02eDPfIlOljsK3HyGAzFSgpzlTuOVjnXnqwR0raVCst3VNK/YfverToJa8txx6R1WxxTtCpw4lLo/N1TFBd+KFXi1TuPl5VFkBW3xkEYnAXCiHwQNCpkW+o0zKGyCiMGgzBhOAgqpX+dUgHC2GEgTBwBvF0N+hN6SN6YCvGbkoC/ogIX+ghcUkIHPgpbg9/QxDo98CcqKht+ABbN1u5cOlG3gb2eFATXg4enR6zThik/njletxmVGbuIKVIgXey8kAEY1gqrC4BnxaGS6JUZvO+nR95mDo/Qf0qjrwwf12StybjGDNWcVGbFEwBikEaGh+9Ygt0ttOKpnT6niohbhSOqZ1+ih4aAgS4l58rscNp0UjviDIF1sqwdlr/Y4D7khYkkI8kzEthIYZhzQLpsje4dtkLgfnMWaVw+UXkIDzM4cd90THGJbUUIMMDTWE9eqHdDtJo2zrqF+yRD73/q7LoMEdUIhJFD8MDc80DefBrovYuwhJV6zFGYMxngrd8BeQtH6ZXzxBpPHdYvnQPk9acA3nkOhMUzcasDPW2TGhJ2J0D6f2eC7nA0ONF7MkM04i/AoYd6xn6WefiU+PVcPSSyCbHekir8aelEbYt/vQ9nwmBlxZJxyhenZUtnOtFIep7de2UdGI4rkRT+kZSHXcMlEcZnhExJCc6j8WRVOAz/8hCGyLa60Df2mtRI3rM+9bWNWxg4IgoxOIJpe0XGymgNn4yuGHd2fPgsr1MRiNf4R/m9ywUJFnk2W9w4dehPEoV6vaNKmIZ6HET4nvTizRtNXxmdDjZ8N1J94qrrAWPAyw+1LXTW1lLnbbiWhKI8rnZYmupTL3JP5joNER+cGdQEjF2PKwC6YLr3XIyogktmAxk1FGBYLgh3zsZH8SibKK7FswBG5gMZMgjgDk8dm7jyNh50l3WQ8d9ZkPy3dKCXlWBA39t5o41RbgBiHhuXjbxtd8TVJcXxPxiahouiANjUWAI/WRr73PIp0Re9gkRdC4QTDZKVh0oBND3K6pFPELiAIzXzzPJfwBZKEI5UwJ6JGaIct8fLSyDhrhjQwfPdAtsX8OKbzE6MaAvjTlU50AP3nrRK11I0ZIy4+vA1GBipbnUVJ+cFvOnODFAG55lJ9DYGhWmbyfVGJlFZ8U8EZCfkqC7OLuDfdbvc3MlqZ+6GHd23yVnZX2Z/7EytU6Xiafe9RdzOBSG+Y3tdhsgMx7nvKNCGFhAa8XfCfzrv2nUYhGtNQJvbgOIpG3lybT8AQnU9CHg+1bXzc1kVHgTAfwo0yMR/JUDub3JBuyUODHUcdKJBis49AqHICAZlPWsun3IwBfAcAmda60nrMYAxIkNxaFK+coNOTfE4NBuFcDRQENc3ZmhfWlao3YhTUn9OgpSJVYe1ROxcrPP+0E2xfEByuVEZr9OQPKTwmQL5khQ+oK3A2+wk1W7cdG734DNDEcCJJ2BaOoXCd47YRuGoKF/0y9Ap+efBzgU7S2xpTjwu5OHfg58RR9wahbuRzTp8CJgNwSN77EiTA1/Lo+4ehxVCjpHSkcN5VoiMb6YXfTPD9OHuSbpfD00GwWIVkj466V7E3tBgNC/W0ozXDtoK2F7nrcP4lnumaF6WtyXlI5zjSODSleBbF2fBevv9wGk1QCqueidLzJi4nYfAtuj7gCfpQFFZ01PHajBss3kv2M9dAgH3KFQXr2KZWCoRZhBiidKghvQ3MsBUFgXdd7QDKbRDTAqegsHHC6MFMhrhsmgggZ4z8B5Rf7AgpuXePzb+evJQtaOm2Sl6t2kFmqNP3pf05PPfCaAtjnDYWXI6okKE6UDaozR+ZMLAioYTUNcfZRPbCsT39yF+bPTc3DddUf3eId50ttqdhoepveI+V22PVXHCA0+8LTTiR7NOT+kJSjDD3FIB0Z8dNOY/v8X2sNHsSpMHetiHJjBIcWpEBn8p6Jyb6GwCeAzFVF9lcvn3BRtBvegMGE1ZwKo3tGnDSP0T73afenareVJ1K0ypn2SbjXI58MJ2y3fK650ZLO4wb7Tm72i0PYEqf2rXZYisZ5RoDnxFtThys2FVMih25AtPIwN/qVpsiZV76jwGxE4NK/A7OEwdOG+NCOr3h7XBOzmIPRoLmjo1mC8ZwTKvG7TDHF6j90OI5IYpNlNkeaeJ+87M8/mnd3+cXo3vAz5RfMmQzkJ/HfaES1EhN86RnqhMMhrsFaiQusX2L9iTs58vBW3aS1UMNtDwAu8l2FBXMYgUwEjYIJKPQHqS6sTP3jbsqWywDzZbffuqNnztoKTKPQfXermd1vZ31/yxefsg/OrVI68YdA6ne3JZnWvZxXrHKLvdh8OoRqu4bjzFc3TtksSaP/maEbdziBSZlJcHsCyvCs5jvKxnRBRCfasyGCGyErGbkBG5rvSBOSFP8WRGPLfJancPOVBmWzotn2/fX25fYLG5Y+eNUlluHa56JRyJ6zJEj9lRPAXsdZZIX8ozs2MbSNI9a1rK91YXmkUOlVpbpwXl+yqw46uKzuUduL5M6HOdEooa4yukYuMgFSrht0kNWM5+fSSmOTLjEjsvhDaJdhjMgwzT1w7jiRld4DytH4oREh+N0xHBt5WWjVe9cvqyeuX+s+Y0cUrfw5kFZ5N7S7vzKq4pnsBPQC5v7HDix7Koqt4gpLR1OqMDv9+DR+LwHCtXhrAbR6aQJt8DMju0eR4v8BkjXQdLxETnyuQdQuYSTD+v4nFI0elFTvNYhXr/1CGW0s3HnVPqO1yziivtuvJrrlwmvxWT1LtGegN8wcwovDYSXNdHiWRcocCuty48LYWVB/5QHDhxdKTLkpbgsD8ch/nyUBi9lgWOKKjYsrGsV9TQldhRXkWQILAsULm8VcwQA00v8J4BuxCMjeAB3InrFolYH9dQ+IH0wpCYPjL6zOt7jS90dtmfOH3FHit/HJavbcbX6ZuhAHoJ7rNji4NT1N2LJ+q2PTgj6czrodoSZyn+z+j/ea9QSIFlTKaRG0wgdth7sV9D9U1ojMX4bYkD75H3juhhSmuHc8T2Eshr73JFjcpSdE0eolwfGstTykFqIgjx+t5g/pfU4WiKyxVFWwKOPfFxuEZnu339SmoMn/tF6FAJOPSi6i9givjmvOf1L6ZQPT/2sjTuKwUnDU7pcT9OgpOueGwtCDYK9xB45uFldFmeYAgc3wzvM+GaDDiEDcTHt+DxwHef6CLAgtti/zJ/nO5XhUPUnUp2HExyOBFex+YqncsmR71958yoDfJTJFLrKA6UUzCPKjHMIUFFcGWOjckpcpvpmyh7RkazH6PsHHw5OEpL943MVpbV4+tyxRXWOJvdpZw5THlwWJaqtLdGFSQ7baP7qUdXt584A8XdrdDq8j9GIJeJClfdU6ISIUfJ9mRv5FP3xqKsDl2sMG4YcCnJG/BT6GWymoiysVruAE5Pc3E09cLrVNCdlqi4jni5h8SIbE3ndkUnhu4E7+6cSgG2zCQlbrz4p7wUlbu1neJUlyZINeyDuLFafo90L10XTNCbPjxisLV24CtBbK2HSaPi8JA6rceF/2UJLtw1Uac9nZGgMLUZHN6ppQIPbcfqoHtUulYWuQxHAc/T4pG1TftbXtWqdXhImf/J5xfMg1qNbKQOj8NO78fH8DBzVHTz2Bzlk/Mm6DbPGqJrDIUxPE8D+FEsaGjxiZ/HqezXZ8bCi2+GwuitDAN5wf6sN4Q+6vAhRWPs7WGDSYzJjb9y/HLrxjgd/BYPu8PkoSrITeXeDYb0L1HYtKofaZbPK1Yvn7PmWkdN9IvGyzlNLltMT9/7QWcptfDr5JFXsqPTMPJzQ5/ar52wN6xJQXiNj9Jvwmmpv8cIi+SrKEhTP7NyZuy3Pz5sBLauZwozLEt9aMmEmEvv+MD6lVswNmr7sYqou7cd68y02nG00RAYk6uqXDoteu9fAygtnp7Zeb6saWNNi+OR2hYHsLcZioZHtaYkK38VAApxBYpTq2fHntmwyz0CgyYqNsJmpyivFRVEbdRqoSEQPvAeDz1duXu6fkuHyfnDmia7iq3VJg7VmW8foz9kaVJXBcKHu181J6V7/1X6d6XC+K+cFOV9lxtta8pq7Mno8cFqYyMGagL2i1aNk6t4JeSmqStuHxt1YOwg9Vt8YsyJWbLzlIFtrJmtM529Qj6oarLf3WTAKQ7OWOZOiGleMEm/+cVA4DD3M26JgrJqK45b+E5liqq52/HFR4i8FNx2iMHYBB6Qj43i2X+HEHFie4SPvd5WXpCpAEOXDUZmq44k62lxXwT8rOmT1taY446GdZ8Y6x4qsxvZ655+KQtHwixV1H1Hhy14w6/iS3RTXuecvfNU5/orTTZIiVOdyc+OeWHNdG3NF3mEo+XmiaeuWH57vtalyUrgm0YP1v52aVHMhVA08aNIsY31hvsaO9zL3JReHJ6j2fCdOfrj6FiCXC+O3Mlv7jPde6LSskKlpLbZo/Tv3jU5OmLZI376thPm+w6cN83Hl6+Nk4ZFfbB6ln4btoU7s9eX6lttwz45YU2L0cFjpVX2OHYcLkarQK+vupaeyO+MitHv7M9/6rNpN4292tX+/cZ2x8L8NCUMH6Red/uYmEOh5BGKY3zGqPcOGYc0tLri3FFJJ3+2wP+tkFA4fZUhTeX7xcYlZgv9YapesXHRpJi3kZ+IZhEM91t/ab7v4HnbyxpccswZpVv7t+8nbUD8Xg+i+xkiY9BAaeyfm87O22ys+80le9cwq4Absz3p38EQpWcZuA5I4GZIYMNeY/7uUsub73zePW3WSN3hhROiHv7Fivhe14eMj6CQQgJ6y/XpYz/4TdaEX86KTr0QzSv7PQW8GQ84QHNAAv/bJYAf9eVxXTi1rM4+LS2Wd2Ow6vz9M5TNkfAdZIgS0tKYjA9/lTLmnsUxmVsHKXWdbJ+DBW4iDLhJZAauAxL4ykig7J2u+PJa26NlNfjVrAxF3bAMfmdKSnRTJALoNRA+TZ90cb+l/bHENtXaz82td+k5XpGjjgp5RCeSxgZgBiTw7yqBXaeNhb98u21BfbujKD6aGIZmKt9dOFHTZ5BGkod3/ScVhLq+ikGccnvtJKPbyRfEx5c8rh/W6xe8Q9EYKBuQwL+LBP6yy5xhNlmX41fqIF7Hwc7T3fjurLDqaIVtHO556OaO1382eXT0w48vjq+J9JkjMsRIiQ3ADUjg310CLCr6+GuNq7YeM73APozM4+Zle7cbrHYhIT6ad+WlqV9/aEnCxjWz4w/2Rxa9Tk37Q2gAdkACXxEJuPBL5tXx0Ypmg8k5CPeNY7rspGLeOH21Rsn/Bb/pvGP1rLiONf0UxsCI2E+BDYAPSGD9esplzmhJzk/UDomK4uMOV1jPNHS4jEWaVNuqVbIPY/VDVP8PzbltFaMV8UQAAAAASUVORK5CYII="},466:function(e,t,a){},485:function(e,t,a){},497:function(e,t,a){},517:function(e,t,a){},532:function(e,t,a){},539:function(e,t,a){},540:function(e,t,a){},541:function(e,t,a){},546:function(e,t){},573:function(e,t,a){},574:function(e,t,a){},575:function(e,t,a){},660:function(e,t,a){},661:function(e,t,a){},662:function(e,t,a){},701:function(e,t,a){},704:function(e,t,a){},706:function(e,t,a){},707:function(e,t,a){},708:function(e,t,a){},709:function(e,t,a){},710:function(e,t,a){},711:function(e,t,a){},712:function(e,t,a){},713:function(e,t,a){},714:function(e,t,a){},715:function(e,t,a){},716:function(e,t,a){},717:function(e,t,a){},718:function(e,t,a){},719:function(e,t,a){},720:function(e,t,a){},721:function(e,t,a){},722:function(e,t,a){},723:function(e,t,a){},729:function(e,t,a){},730:function(e,t,a){e.exports=a.p+"static/media/blocked_user.4354b18d.svg"},731:function(e,t,a){},739:function(e,t,a){"use strict";a.r(t),a.d(t,"history",(function(){return yi}));var n=a(0),r=a.n(n),o=a(437),l=a(535),i=a(439),c=a(3),s=a(17),d=a(1),u=a(9),m=a.n(u),p=a(16),h=a(68),v=a(69),f=a(140),g=a(137),b=a(136),E=a(18),C=(a(272),a(15)),y=a(4),O=a.n(y),j=a(2),N=function(e){return function(e){return new Promise((function(t,a){e({type:j.S,payload:{}}),e({type:j.Ub,payload:{}}),e({type:j.Pb,payload:{}}),e({type:j.N,payload:{}}),t(!0)}))}},k=a(23),S=a(64),w=a(40),D=(a(539),a(540),a(270),a(541),a(21)),M=a(66),I=a(489),T=(a(495),a(456),a(496)),P=(a(471),a(497),a(53)),A=a(12),L=a(737),x=a(11),U=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).getStyle=function(){var t=e.state,a=t.webWidth,n=t.webHeight,r=t.visibility;return{width:"".concat(a,"px"),height:"".concat(n,"px"),visibility:r?"visible":"hidden"}},e._onClick=function(){e.state.palyStatus?(e.player.pause(),e.setState({palyStatus:!1})):(e.setState({palyStatus:!0}),e.player.play())},e.myCallback=function(){e.setState({palyStatus:!1});var t=document.querySelectorAll(".AudioDetails");[].forEach.call(t,(function(e){e.classList.remove("default")}))},e.state={visibility:!1,webWidth:0,webHeight:0,palyStatus:!0},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.player=Object(L.a)(this.videoNode,this.props,(function(){var t=document&&document.querySelector(".vjs-tech"),a=document&&document.getElementById("video-player-".concat(e.props.msgId)),n=document&&document.getElementById("video-caption-".concat(e.props.msgId));if(a){var r=a.offsetWidth,o=a.offsetHeight,l=0;n&&(l=n.offsetHeight+e.props.captionMargin);var i=Object(x.d)(e.props.webWidth,e.props.webHeight,r,o-l),c=i.webWidth,s=i.webHeight;e.setState({webWidth:c,webHeight:s,visibility:!0})}t&&e.props.handlePlay&&(t.addEventListener("play",(function(){return e.props.handlePlay(!0)})),t.addEventListener("pause",(function(){return e.props.handlePlay(!1)})))}))}},{key:"componentWillUnmount",value:function(){if(this.player){this.player.dispose();var e=document.getElementById("webrtc-call-screen");if(e){var t=e.querySelectorAll("video");t.length&&t.forEach((function(e){e.play()}))}}}},{key:"render",value:function(){var e=this,t=this.state.palyStatus,a=void 0===t||t,n=this.props,o=n.deleteOption,l=void 0!==o&&o,i=n.msgId,c=n.autoPlay,s=n.fileType,d=void 0===s?"":s;return r.a.createElement("div",{"data-jest-id":"jest_onClick",onClick:"audio"===d?function(){return e._onClick()}:null},"audio"===d&&r.a.createElement("i",{className:"AudioDetails ".concat(!0===a?"default":"")},"recording"!==this.props.audioType?r.a.createElement(w.D,null):r.a.createElement(w.B,null),r.a.createElement("span",{className:"audioDuration"},this.props.audioDuration)),l&&r.a.createElement("div",{className:"uploadImagePreview"}),r.a.createElement("div",{style:"video"===this.props.fileType?this.getStyle():{},"data-vjs-player":!0},r.a.createElement("video",{preload:"auto","data-msgid":i,autoPlay:c,className:"video-js",onEnded:function(){return e.myCallback()},ref:function(t){return e.videoNode=t}})))}}]),a}(r.a.Component),R=a(41),F=function(e,t){return function(e,t){var a=t?t.toString().toLowerCase():"";return".doc"===a||".docx"===a||"application/msword"===e?w.Cd:".xls"===a||".xlsx"===a||"application/vnd.ms-excel"===e?w.jb:".txt"===a||"text/plain"===e?w.od:".pdf"===a||"application/pdf"===e?w.tc:".csv"===a||"application/csv"===e?w.S:".ppt"===a||".pptx"===a||"application/ppt"===e||"application/pptx"===e?w.wc:".zip"===a||"application/zip"===e||"application/x-zip-compressed"===e?w.Dd:".rar"===a||"application/rar"===e||"application/vnd.rar"===e?w.Dc:w.uc}(e,t)},B=a(10),_=a(13),V=a(7);a(573);var G,H=function(e){return r.a.createElement("div",{className:"spiner"},r.a.createElement("div",{className:"spin"}))},J=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).getFile=function(){var t=Object(p.a)(m.a.mark((function t(a,n,r,o){var l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",null);case 2:if("video"!==n){t.next=14;break}return t.next=5,A.a.getMediaURL(a,o);case 5:if(200!==(l=t.sent).statusCode){t.next=10;break}return t.abrupt("return",l.data.blobUrl);case 10:return console.log("error in loading media file"),t.abrupt("return","");case 12:t.next=15;break;case 14:return t.abrupt("return",e.localDb.getImageByKey(a,Object(x.t)(n),o).then((function(e){return window.URL.createObjectURL(e)})).catch((function(){return r})));case 15:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),e.handleDisplayMedia=Object(p.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.allSettled(e.state.mediaList.map(function(){var t=Object(p.a)(m.a.mark((function t(a,n){var o,l,i,c,s,d,u,p,h,v,f,g,b,E,C,y,O,j,N,k,S,D,I,P,A,L,_,V,G,H,J,q;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=null===a||void 0===a||null===(o=a.msgBody)||void 0===o||null===(l=o.media)||void 0===l?void 0:l.audioType,c=a.msgBody?a.msgBody:a,s=c.message_type,d=c.media,u=(d=void 0===d?{}:d).fileName,p=void 0===u?null:u,h=d.file_url,v=void 0===h?null:h,f=d.file_key,g=void 0===f?null:f,b=d.file_size,E=void 0===b?null:b,C=d.caption,y=void 0===C?null:C,O=d.thumb_image,j=void 0===O?null:O,N=d.duration,k=void 0===N?null:N,S=d.is_uploading,D=void 0===S?2:S,I=d.originalWidth,P=d.originalHeight,A=a.msgId,L=Object(B.j)(E),j=Object(x.M)(j),_={},V=Object(R.b)(p),G=F(null,V),t.t0=s,t.next="image"===t.t0?14:"file"===t.t0?26:"audio"===t.t0?28:"video"===t.t0?40:52;break;case 14:if(1!==D){t.next=18;break}t.t1=v,t.next=21;break;case 18:return t.next=20,e.getFile(v,"image",j,g);case 20:t.t1=t.sent;case 21:if((H=t.t1)&&""!==H){t.next=24;break}return t.abrupt("break",54);case 24:return _={class:"type-image",imageURL:H,fileName:p,media:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"imageZoomWrapper"},r.a.createElement(T.b,null,(function(e){var t=e.zoomIn,a=e.zoomOut,n=e.resetTransform;Object(M.a)(e,["zoomIn","zoomOut","resetTransform"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tools zoomTools"},r.a.createElement("button",{onClick:t},r.a.createElement(w.Ed,null)),r.a.createElement("button",{onClick:a},r.a.createElement(w.Fd,null)),r.a.createElement("button",{onClick:n},r.a.createElement(w.Gd,null))),r.a.createElement(T.a,null,r.a.createElement("img",{src:H,alt:""})))}))),y?r.a.createElement("p",{className:"legend image-caption"},y):"")},t.abrupt("break",54);case 26:return _={class:"type-image file",imageURL:G,media:p&&L?r.a.createElement("div",{className:"type-thumb-image"},r.a.createElement("p",{className:"legend document-name"},"".concat(p," , ").concat(L))):""},t.abrupt("break",54);case 28:if(1!==D){t.next=32;break}t.t2=v,t.next=35;break;case 32:return t.next=34,e.getFile(v,"audio",{},g);case 34:t.t2=t.sent;case 35:if((J=t.t2)&&""!==J){t.next=38;break}return t.abrupt("break",54);case 38:return _={class:"type-media audio",imageURL:"recording"!==i?w.k:w.o,media:r.a.createElement("div",{className:"video-wrapper1",duration:Object(x.Y)(k)},r.a.createElement(U,Object.assign({},e.videoControls(J,A,e.props.selectedMessageData.msgId===A),{fileType:"audio",handlePlay:e.handlePlayPause,audioDuration:Object(x.Y)(k),audioType:i,palyStatus:e.state.palyStatus})))},t.abrupt("break",54);case 40:if(1!==D){t.next=44;break}t.t3=v,t.next=47;break;case 44:return t.next=46,e.getFile(v,"video",{},g);case 46:t.t3=t.sent;case 47:if((q=t.t3)&&""!==q){t.next=50;break}return t.abrupt("break",54);case 50:return _={class:"type-media video",imageURL:j,media:r.a.createElement("div",{className:"video-wrapper1",id:"video-player-".concat(A)},r.a.createElement(U,Object.assign({},e.videoControls(q,A,e.props.selectedMessageData.msgId===A,j),{palyStatus:e.state.palyStatus,webWidth:I,webHeight:P,captionMargin:30,index:n,fileType:"video"})),y?r.a.createElement("p",{className:"legend image-caption",id:"video-caption-".concat(A),style:{minHeight:"70px",marginTop:"".concat(30,"px")}},y):"")},t.abrupt("break",54);case 52:return _={},t.abrupt("break",54);case 54:return t.abrupt("return",r.a.createElement("div",{key:A,className:_.class,id:A+n},r.a.createElement("img",{src:_.imageURL,alt:_.fileName}),_.media));case 55:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())));case 1:case"end":return t.stop()}}),t)}))),e.handleOnKeyPress=function(t){switch(t.keyCode){case 27:e.props.handleMediaClose();break;case 37:e.Previous&&e.Previous.click();break;case 39:e.Next&&e.Next.click()}},e.handleOnKeyPress=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(t.keyCode){case 27:e.props.handleMediaClose();break;case 37:e.Previous&&e.Previous.click();break;case 39:e.Next&&e.Next.click()}return!0},e.handleDeleteMedia=function(){var t=e.state.mediaList.findIndex((function(t){return t.msgId===e.props.messageData.data.msgId})),a=Object(D.a)(e.state.mediaList);a.splice(t,1),e.setState({mediaList:a},(function(){e.diplayMedia("delete")}))},e.diplayMedia=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=[];e.handleDisplayMedia().then((function(e){return e.forEach((function(e){"fulfilled"===e.status&&a.push(e.value)}))})).then((function(){e.setState(Object(d.a)(Object(d.a)({previewData:a},"delete"===t&&{selectedItem:0!==e.tempSelectedItem?e.tempSelectedItem-1:e.tempSelectedItem}),"add"===t&&{selectedItem:e.tempSelectedItem+1}))}))},e.handleGetMedia=Object(p.a)(m.a.mark((function t(){var a,n,r,o,l,i,c,s,d,u=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=u.length>0&&void 0!==u[0]?u[0]:"",n=e.props,r=n.jid,"broadcast"!==(o=n.chatType)){t.next=7;break}l=Object(V.c)(r),A.a.getBroadcastChatMedia(l,a),t.next=12;break;case 7:return i=Object(V.c)(r,o),t.next=10,A.a.getMediaMessages(i,a);case 10:(c=t.sent)&&200===c.statusCode&&c.data.length&&(s=new Set(e.state.mediaList.map((function(e){return e.msgId}))),(d=[].concat(Object(D.a)(e.state.mediaList),Object(D.a)(c.data.filter((function(e){return!s.has(e.msgId)&&_.G.includes(e.message_type)}))))).sort((function(e,t){return t.timestamp>e.timestamp?1:-1})),e.setState({mediaList:d,loadMore:!1},(function(){return e.diplayMedia()})));case 12:case"end":return t.stop()}}),t)}))),e.loadMoreMedia=function(){var t,a=e.state.mediaList,n=null===(t=a[a.length-1])||void 0===t?void 0:t.msgId;n&&e.handleGetMedia(n)},e.handlePlayPause=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({palyStatus:t})},e.handleMediaOnChange=function(t,a){var n,r=((null===a||void 0===a||null===(n=a.props)||void 0===n?void 0:n.id)||"").slice(0,-1);if(r){var o=e.props.starredMessages,l=(o=void 0===o?{}:o).data,i=(void 0===l?[]:l).some((function(e){return e.msgId===r}));e.setState({starStatusCheck:i,seletedMsgId:r})}e.tempSelectedItem=t,t>=e.state.mediaList.length-_.r&&!e.state.loadMore&&(e.setState({loadMore:!0}),e.loadMoreMedia());var c=document&&document.querySelectorAll&&document.querySelectorAll(".AudioDetails");[].forEach.call(c,(function(e){e.classList.add("default"),e.classList.remove("playAudio")})),document.getElementById("imagePreviewContainer").querySelectorAll("video, audio").forEach((function(e){if(e){var n=e.getAttribute("data-msgid");n&&n+t===a.props.id?e.play():(e.currentTime=0,e.pause())}}))},e.getTransformMatrix=function(e){var t=e.style.getPropertyValue("transform");return new DOMMatrixReadOnly(t)},e.setTransformMatrix=function(t,a){t.style="transform: translate3d(".concat(Math.abs(a),"px, 0, 0)"),e.setState({lastTranslateX:a})},e.handleStyleChange=function(t){var a=e.getTransformMatrix(t).m41;e.setTransformMatrix(t,a),new MutationObserver((function(a){a.forEach((function(a){var n=e.getTransformMatrix(a.target).m41;e.state.lastTranslateX!==n&&n&&e.setTransformMatrix(t,n)}))})).observe(t,{attributes:!0,attributeFilter:["style"]})},e.initializeMutation=function(){var t=setInterval((function(){var a=document.querySelector(".thumbs.animated");a&&(e.handleStyleChange(a),clearInterval(t),t=0)}),100)},e.initialCall=function(){var t=e.state,a=t.mediaList,n=void 0===a?[]:a,r=t.allowInitialCall,o=void 0!==r&&r,l=t.selectedItem,i=void 0===l?0:l,c=e.props.starredMessages,s=(c=void 0===c?{}:c).data,d=void 0===s?[]:s;if(n.length>0&&!o){var u=d.some((function(e){return e.msgId===n[i].msgId}));e.setState({allowInitialCall:!0,starStatusCheck:u,seletedMsgId:n[i].msgId})}},e.imageOnLoad=function(e){e.target.classList.remove("image-load"),e.target.style.display="block"},e.customRenderThumb=function(t){return t.map((function(t,a){var n,o,l,i,c,s,d,u,m=null===(n=t.props)||void 0===n||null===(o=n.children[0])||void 0===o||null===(l=o.props)||void 0===l?void 0:l.src,p=null===(i=t.props)||void 0===i||null===(c=i.children[1])||void 0===c||null===(s=c.props)||void 0===s?void 0:s.duration,h="type-media video"===(null===(d=t.props)||void 0===d?void 0:d.className)?"video-icon":"",v="type-image file"===(null===(u=t.props)||void 0===u?void 0:u.className)?"File":"";return r.a.createElement("div",{key:a,className:"thumb-img ".concat(h||v," img-load")},r.a.createElement("img",{src:m,key:"".concat(a,"-Img"),alt:"",onLoad:e.imageOnLoad,className:"image-load",style:{display:"none"}}),r.a.createElement(H,null),p&&r.a.createElement("p",{className:"audio-duration",key:"".concat(a,"-Duration")},p))}))},e.handlePrev=function(t,a){return a&&r.a.createElement("button",{type:"button",onClick:t,title:"Previous",ref:function(t){return e.Previous=t},"aria-label":"previous slide / item",className:"control-arrow control-prev"})},e.handleNext=function(t,a){return a&&r.a.createElement("button",{type:"button",onClick:t,ref:function(t){return e.Next=t},title:"Next","aria-label":"next slide / item",className:"control-arrow control-next"})},e.videoControls=function(e,t,a,n){return{autoplay:a,msgId:t,controls:!0,sources:[{src:e,type:"video/mp4"}],poster:n}},e.getSelectedMsgObj=function(){return e.tempSelectedItem>-1&&e.state.mediaList.length>0&&e.state.mediaList[e.tempSelectedItem]||{}},e.downloadFile=function(){if(e.tempSelectedItem>-1&&e.state.mediaList.length>0){var t=e.state.mediaList[e.tempSelectedItem];if(t&&Object.keys(t).length>0){var a=t.msgBody,n=(a=void 0===a?{}:a).media,r=(n=void 0===n?{}:n).file_url,o=n.fileName,l=n.file_key,i=a.message_type,c=void 0===i?"":i,s="file"===c?o:"";Object(B.i)(r,c,s,l)}}},e.getSelectedMsgId=function(){var t=e.getSelectedMsgObj();return t&&Object.keys(t).length>0?t.msgId:""},e.getSelectedFavouriteStatus=function(){var t=e.getSelectedMsgObj();if(t&&Object.keys(t).length>0){var a=e.state.favouriteMsgs[t.msgId];return void 0!==a?a:t.favouriteStatus}return 0},e.handleStarMessage=Object(p.a)(m.a.mark((function t(){var a,n,r,o,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state,n=a.starStatusCheck,r=void 0!==n&&n,o=a.seletedMsgId,l=void 0===o?"":o,A.a.updateFavouriteStatus(Object(V.c)(e.props.jid),[l],!r),e.setState({starStatusCheck:!r});case 3:case"end":return t.stop()}}),t)}))),e.state={mediaList:[],previewData:[],selectedItem:0,loadMore:!1,lastTranslateX:!1,isPlaying:!1,palyStatus:!0,NeedDevelopment:!1,favouriteMsgs:{},starStatusCheck:!1,allowInitialCall:!1,seletedMsgId:""},e.tempSelectedItem=0,e.localDb=new P.a,e.myAudioElemet=r.a.createRef(),document.addEventListener("keydown",e.handleOnKeyPress,!1),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.initializeMutation();var t=Object(B.k)().filter((function(e){return e&&e.msgBody&&_.G.includes(e.msgBody.message_type)&&0===e.deleteStatus}));if(t.length){t.sort((function(e,t){return t.timestamp>e.timestamp?1:-1}));var a=t.findIndex((function(t){return t.msgId===e.props.selectedMessageData.msgId}));this.tempSelectedItem=a,this.setState({mediaList:t,selectedItem:a},(function(){e.diplayMedia(),a<=_.o&&e.loadMoreMedia()})),0===this.state.previewData.length&&this.failedComponentDidMount()}else this.handleGetMedia(),0===this.state.previewData.length&&this.failedComponentDidMount()}},{key:"componentDidUpdate",value:function(e,t){if(this.initialCall(),e.messageData.id!==this.props.messageData.id&&(!this.props.messageData.data||"recallMessage"!==this.props.messageData.data.msgType&&"carbonRecallMessage"!==this.props.messageData.data.msgType&&"delete_message"!==this.props.messageData.data.clearType||this.handleDeleteMedia()),e.groupsData&&e.groupsData.id!==this.props.groupsData.id){var a,n=this.props.jid.split("@")[0],r=null===(a=this.props.groupsData)||void 0===a?void 0:a.data.find((function(e){return(null===e||void 0===e?void 0:e.groupId)===n}));if(null===r||void 0===r?void 0:r.isAdminBlocked)return this.props.handleMediaClose()}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleOnKeyPress,!1)}},{key:"failedComponentDidMount",value:function(){var e=this;this.initializeMutation();var t=Object(B.k)().filter((function(e){return e&&e.msgBody&&_.G.includes(e.msgBody.message_type)&&0===e.deleteStatus}));if(t.length){t.sort((function(e,t){return t.timestamp>e.timestamp?1:-1}));var a=t.findIndex((function(t){return t.msgId===e.props.selectedMessageData.msgId}));this.tempSelectedItem=a,this.setState({mediaList:t,selectedItem:a},(function(){e.diplayMedia(),a<=_.o&&e.loadMoreMedia()}))}else this.handleGetMedia()}},{key:"render",value:function(){var e=this,t=this.state,a=t.previewData,o=t.selectedItem,l=t.starStatusCheck,i=void 0!==l&&l;return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:"imagePreviewContainer imagePreviewWrapper",id:"imagePreviewContainer",ref:"imagePreviewContainer"},r.a.createElement("div",{className:"preview-options"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("i",{className:"",title:"Download",onClick:this.downloadFile},r.a.createElement(w.zc,null))),r.a.createElement("li",{onClick:function(){return e.handleStarMessage()}},r.a.createElement("i",{className:"icon-star",title:!0===i?"Star":"Unstar"},r.a.createElement(w.Bc,{fill:"#fff",id:"starFillId",style:{display:i?"none":"inline-block"}}),r.a.createElement(w.Cc,{id:"starFillId",style:{display:i?"inline-block":"none"}}))),this.state.NeedDevelopment&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("i",{className:"",title:"Find in Chat"},r.a.createElement(w.xc,null))),r.a.createElement("li",null,r.a.createElement("i",{className:"",title:"Forward"},r.a.createElement(w.Ac,null)))),r.a.createElement("li",null,r.a.createElement("i",{className:"preview-close",title:"Close",onClick:this.props.handleMediaClose},r.a.createElement(w.yc,null))))),a.length&&r.a.createElement(I.Carousel,{key:this.state.mediaList[0].msgId,renderArrowPrev:this.handleNext,renderArrowNext:this.handlePrev,selectedItem:o,onChange:this.handleMediaOnChange,onClickThumb:this.handleMediaOnChange,renderThumbs:this.customRenderThumb,transitionTime:"10",thumbWidth:"120",swipeable:!1},a)))))}}]),a}(r.a.Component),q=Object(o.b)((function(e){return{messageData:e.messageData,starredMessages:e.starredMessages,groupsData:e.groupsData}}),null)(J),W=a(70),K=a.n(W),z=a(139),Y=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(h.a)(this,a),(n=t.call(this,e)).checkNotFound=function(e){var t=n.props.avatar,a=void 0===t?w.Rc:t,r=n.props.chatType;void 0!==r&&"groupchat"===r&&(a=K.a),e.target.src=a};var r=n.props.avatar,o=void 0===r?w.Rc:r;return n.state={profileImg:o},n.localDb=new P.a,n.mounted=!1,n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.handleProfileImg()}},{key:"componentDidUpdate",value:function(e,t){e.rostersnap===this.props.rostersnap&&e.chatType===this.props.chatType||this.handleProfileImg()}},{key:"handleProfileImg",value:function(){var e=this,t=this.props.avatar,a=void 0===t?w.Rc:t,n=this.props,r=n.rostersnap,o=n.chatType;void 0!==o&&"groupchat"===o&&(a=K.a),r?this.localDb.getImageByKey(r,"profileimages").then((function(t){if(e.props.rostersnap){var a=window.URL.createObjectURL(t);e.setState({profileImg:a})}})).catch((function(t){e.mounted&&e.setState({profileImg:a})})):this.setState({profileImg:a})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){return r.a.createElement(z.a,{name:this.props.name,chatType:this.props.chatType,imageToken:this.props.rostersnap})}}]),a}(n.Component),Z=a(27),X=a(51),Q=a(20),$=a(25),ee=a(457),te=a.n(ee),ae=a(42),ne=a(84),re=a(28),oe=function(e){var t;return r.a.createElement("div",{className:"calleeProfilesList"},(null===(t=e.rosterData)||void 0===t?void 0:t.participantsData)&&e.rosterData.participantsData.map((function(e,t){return t<3&&r.a.createElement("div",{className:"calleeProfiles",key:t},r.a.createElement(z.a,{chatType:"chat",imageToken:e.image,name:e.initialName}))})),e.rosterData.participantsData.length>3&&r.a.createElement("div",{className:"calleeProfiles"},r.a.createElement("span",{className:"moreText"},"+",e.rosterData.participantsData.length-3)))},le=a(6),ie=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).audio=new Audio("sounds/ringtone.wav"),n.componentDidMount=function(){n.props.callParticiapants({open:!1,modelType:"callparticipants"}),document.querySelectorAll("audio").forEach((function(e){e.pause()})),n.handleIncomingCallAudio(),n.callingTimer=setTimeout((function(){n.endCall()}),3e4)},n.checkMediaPermission=function(e){var t=n.props.popUpData.modalProps.statusCode,a=e.popUpData.modalProps.statusCode;t&&t!==a&&n.declineCall()},n.endCall=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(n.callingTimer),t=n.props.callConnectionDate,A.a.endCall(),Object($.c)(),Object(ne.f)(),Z.a.update(t.data.roomId,{endTime:Z.a.initTime(),sessionStatus:Q.k}),setTimeout((function(){Object(le.c)("callingComponent",!1),Object(le.a)("roomName"),Object(le.a)("callType"),Object(le.a)("call_connection_status"),Object(le.c)("hideCallScreen",!1),c.a.dispatch(Object(C.k)({showComponent:!1,showCalleComponent:!1,stopSound:!0,callStatusText:null}))}),Q.z);case 7:case"end":return e.stop()}}),e)}))),n.attendCall=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.preventMultipleClick){e.next=2;break}return e.abrupt("return");case 2:if(n.preventMultipleClick=!0,n.stopAudio(),clearTimeout(n.callingTimer),Object($.a)(),!n.props.callConnectionDate||!n.props.callConnectionDate.data){e.next=14;break}return t=n.props.callConnectionDate,a={},e.next=11,A.a.answerCall();case 11:a=e.sent,console.log("attend call",a),200!==a.statusCode?(a.message!==Q.A&&re.b.error(Q.y),Object(le.a)("roomName"),Object(le.a)("callType"),Object(le.a)("call_connection_status"),Object(le.c)("hideCallScreen",!1),Object(le.c)("callingComponent",!1),Object(le.c)("hideCallScreen",!1),c.a.dispatch(Object(C.k)({showComponent:!1,showCalleComponent:!1,stopSound:!0,callStatusText:null}))):(Object(le.c)("connecting",!0),c.a.dispatch(Object(C.k)({showComponent:!0,showCalleComponent:!1})),Z.a.update(t.data.roomId,{startTime:Z.a.initTime(),callState:2}));case 14:case"end":return e.stop()}}),e)}))),n.declineCall=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(n.callingTimer),Object($.a)(),n.stopAudio(),!n.props.callConnectionDate||!n.props.callConnectionDate.data){e.next=9;break}return t=n.props.callConnectionDate,e.next=7,A.a.declineCall();case 7:200===(a=e.sent).statusCode?(Z.a.update(t.data.roomId,{endTime:Z.a.initTime(),sessionStatus:Q.k}),Object($.c)(),setTimeout((function(){Object(le.a)("roomName"),Object(le.a)("callType"),Object(le.a)("call_connection_status"),Object(le.c)("hideCallScreen",!1),c.a.dispatch(Object(C.k)({showComponent:!1,showCalleComponent:!1,callStatusText:null})),Object(ne.f)()}),Q.z)):console.log("Error occured ",a.errorMessage);case 9:case"end":return e.stop()}}),e)}))),n.handleHideCallScreen=function(e){e.stopPropagation(),n.props.hideCallScreen()},n.handleIncomingCallAudio=function(){setTimeout((function(){n.audio.load(),n.props.stopSound?n.stopAudio():n.playAudio()}),500)},n.handleTernayAvoid=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n.props.callStatus===Q.q.toLowerCase()?Object(x.e)(n.props.callStatus):"Incoming ".concat(e?"Group":""," ").concat(t," Call...")},n.checkOneToManyCall=function(){var e=n.props.callConnectionDate.data;return"onetomany"===e.callMode&&null===e.groupId},n.preventMultipleClick=!1,n.audio.autoplay=!0,n.audio.muted=!0,n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){var t;(null===(t=this.props.adminBlockData)||void 0===t?void 0:t.data)&&Object.keys(this.props.adminBlockData.data).length&&this.stopAudio(),this.checkMediaPermission(e)}},{key:"playAudio",value:function(){this.audio.muted=!1;var e=this.audio.play();this.audio.loop=!0,void 0!==e&&e.then((function(e){})).catch((function(e){console.info(e)}))}},{key:"stopAudio",value:function(){this.audio.loop=!1,this.audio.pause(),this.audio.currentTime=0}},{key:"componentWillUnmount",value:function(){this.stopAudio(),clearTimeout(this.callingTimer)}},{key:"getGroupDetails",value:function(e){var t={},a=Object(ae.a)(e);return t.displayName=a.groupName,t.image=a.groupImage,t.jid=a.groupId,t.chatType="groupchat",t}},{key:"render",value:function(){var e=this.props.callConnectionDate,t={},a=!1,n="";if(e&&e.data){var o="";if("onetoone"===(n=e.data).callMode)o=n.to,t=Object(V.j)(o);else if("onetomany"===n.callMode)if(a=!0,""!==n.groupId&&null!==n.groupId&&void 0!==n.groupId)o=n.groupId.includes("@")?n.groupId.split("@")[0]:n.groupId,(t=Object(d.a)({},this.getGroupDetails(o))).chatType="groupchat";else{var l=n.userList.split(",");t=Object($.d)(l)}}var i=t.chatType,c="";e&&e.data&&("audio"===e.data.callType||"Audio"===e.data.callType?c="Audio":"video"!==e.data.callType&&"Video"!==e.data.callType||(c="Video"));var s=this.handleTernayAvoid(a,c),u=Object(V.m)(t,t.initialName);return r.a.createElement("div",{className:"calling-Popup webcall-calling"},r.a.createElement("div",{className:"optionButton visible"},r.a.createElement("div",null,r.a.createElement("span",{title:"Back to chat",className:"BackToChat",onClick:this.handleHideCallScreen},r.a.createElement("i",{className:"backIcon"},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(w.p,null))))),this.checkOneToManyCall()&&r.a.createElement("div",{className:"callDetails"},r.a.createElement("div",{style:{visibility:"hidden"},className:"logosm"},r.a.createElement("img",{src:te.a,alt:"Logo"})),r.a.createElement(oe,{rosterData:t}),r.a.createElement("div",{className:"calleeDetails"},r.a.createElement("span",{className:"callerName"},t.displayName),r.a.createElement("span",{className:"callingStatus"},r.a.createElement("span",null,r.a.createElement("span",null," ",s," "),this.props.callStatus&&this.props.callStatus.toLowerCase()!==Q.q&&r.a.createElement("div",{className:"callingAnimation incoming"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})))))),!this.checkOneToManyCall()&&r.a.createElement("div",{className:"avatar",id:"dominantSpeakerAvatar"},r.a.createElement("div",{className:"calling-animation-wrapper"},r.a.createElement(Y,{name:u,chatType:i,rostersnap:t.image}),r.a.createElement("div",{className:"ripple-1"}),r.a.createElement("div",{className:"ripple-2"}),r.a.createElement("div",{className:"ripple-3"})),r.a.createElement("div",{className:"calleeDetails"},r.a.createElement("div",{className:"calle-info"},r.a.createElement("span",{className:"callerName"},t.displayName),"onetomany"===e.data.callMode&&e.data.groupId&&r.a.createElement("span",{className:"memmber-details",onClick:this.toggleMemberNames},"(",n&&n.userList&&n.userList.split(",").length>0?n.userList.split(",").length-1:0," ",n.userList.split(",").length-1>1?"members":"member",")")),r.a.createElement("span",{className:"callingStatus"},r.a.createElement("span",null,r.a.createElement("span",null," ",s," "),this.props.callStatus&&this.props.callStatus.toLowerCase()!==Q.q&&r.a.createElement("div",{className:"callingAnimation incoming"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})))))),r.a.createElement("div",{className:"button-group-center"},r.a.createElement("span",{className:"attenCall",onClick:this.attendCall},r.a.createElement("i",null,r.a.createElement(w.h,null))),r.a.createElement("span",{className:"rejectCall",onClick:this.declineCall},r.a.createElement("i",null,r.a.createElement(w.Kc,null)))))}}]),a}(n.Component),ce={callParticiapants:X.b},se=Object(o.b)((function(e){return{callConnectionDate:e.callConnectionDate,popUpData:e.popUpData,rosterData:e.rosterData,adminBlockData:e.adminBlockData}}),ce)(ie),de=(a(574),a(149)),ue=a.n(de),me=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).backToHome=function(){c.a.dispatch(Object(C.k)({showComponent:!1,showCalleComponent:!1}))},n.state={},n}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"NetworkError"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("h1",null,"Oops..."),r.a.createElement("p",null,r.a.createElement("p",null,"Sorry Couldn't start the call because of network error. Please check your internet connection and try again")),r.a.createElement("div",{className:"buttons",onClick:this.backToHome},r.a.createElement("a",null,"Back To Home "))),r.a.createElement("div",{className:"space"},r.a.createElement("div",{className:"blackhole"},r.a.createElement("img",{src:ue.a,alt:"logo"}))))}}]),a}(n.Component),pe=a(146),he=(a(575),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleAudioMute=function(t){var a=c.a.getState().callLogData,n=(a=void 0===a?{}:a).callAudioMute,r=void 0!==n&&n;t.stopPropagation(),e.props.handleAudioMute(!r)},e.handleVideoMute=function(t){t.stopPropagation(),e.props.handleVideoMute(!e.props.videoMute)},e.handleEndCall=function(t){t.stopPropagation(),e.props.handleEndCall()},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.audioControl,a=e.videoControl,n=e.cssClassName,o=e.videoPermissionDisabled;return r.a.createElement("div",{className:"caling-button-group button-group-center"},t&&r.a.createElement("span",{className:"".concat(n,"  ").concat(this.props.audioMute?"mute":""),title:"Mute / Unmute",onClick:this.handleAudioMute},r.a.createElement("i",{className:this.props.audioMute?"audioBtn mute":"audioBtn "},this.props.audioMute?r.a.createElement(w.l,null):r.a.createElement(w.m,null))),r.a.createElement("span",{title:"Hangup",className:"btnHangup rejectCall",onClick:this.handleEndCall},r.a.createElement("i",null,r.a.createElement(w.Kc,null))),a&&r.a.createElement("span",{className:"".concat(n,"  ").concat(this.props.videoMute?"mute":""," ").concat(o?"not-allowed":""," "),title:o?"Camera Permission Disabled":"Start / Stop Camera",onClick:o?void 0:this.handleVideoMute},r.a.createElement("i",{className:this.props.videoMute?"videoBtn mute":"videoBtn"},this.props.videoMute?r.a.createElement(w.zd,null):r.a.createElement(w.Ad,null))))}}]),a}(n.Component)),ve=Object(o.b)((function(e){return{activeChatData:e.activeChatData}}),null)(he),fe=a(138),ge=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleLangChange=function(e){n.props.showComponent(e)},n.endCall=Object(p.a)(m.a.mark((function e(){var t,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null===(t=n.props)||void 0===t||null===(a=t.callConnectionDate)||void 0===a?void 0:a.data,A.a.endCall(),Object(ne.f)(),Z.a.update(r.roomId,{endTime:Z.a.initTime(),sessionStatus:Q.k}),Object(le.c)("callingComponent",!1),Object(le.a)("roomName"),Object(le.a)("callType"),Object(le.a)("call_connection_status"),c.a.dispatch(Object(C.k)({showComponent:!1,showCalleComponent:!1}));case 9:case"end":return e.stop()}}),e)}))),n.handleHideCallScreen=function(e){e.stopPropagation(),n.props.hideCallScreen()},n.state={loading:!0,callstate:"",vCardData:"",callType:!1,connectingIssue:!1},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.startTimer()}},{key:"startTimer",value:function(){var e=this;G=setTimeout((function(){e.setState({connectingIssue:!0,loading:!1}),e.endCall()}),3e4)}},{key:"componentWillUnmount",value:function(){clearTimeout(G)}},{key:"getGroupDetails",value:function(e){var t={},a=Object(ae.a)(e);return t.displayName=a.groupName,t.image=a.groupImage,t.jid=a.groupId,t.chatType="groupchat",t}},{key:"render",value:function(){var e=JSON.parse(Object(le.e)("call_connection_status")),t={};if(e){var a="";"onetoone"===e.callMode?(a=e.to,t=Object(V.j)(a)):"onetomany"===e.callMode&&(""!==e.groupId&&null!==e.groupId&&void 0!==e.groupId?(a=e.groupId.includes("@")?e.groupId.split("@")[0]:e.groupId,t=this.getGroupDetails(a)):(a=e.from,t=Object(V.j)(a)))}var n=t.chatType,o="";e.from&&e.to&&(o=e.to?e.to.includes("@")?e.to.split("@")[0]:e.to:e.from.includes("@")?e.from.split("@")[0]:e.from);var l=Object(V.m)(t,t.initialName);return r.a.createElement("div",{className:"calling-Popup webcall-calling",style:{width:"100%",height:"100%"}},r.a.createElement("div",{className:"optionButton visible"},r.a.createElement("span",{title:"Back to chat",className:"BackToChat",onClick:this.handleHideCallScreen},r.a.createElement("i",{className:"backIcon"},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(pe.a,null)))),r.a.createElement("div",{className:"callDetails"},r.a.createElement("div",{className:"logosm",style:{display:"none"}},r.a.createElement("img",{src:te.a,alt:"Logo"})),r.a.createElement("span",{className:"callingStatus Connecting"},r.a.createElement("span",null,"Connecting ",r.a.createElement("div",{className:"callingAnimation connect"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})))),r.a.createElement("span",{className:"callerName"},t.displayName?t.displayName:o)),r.a.createElement("div",{className:"avatar",id:"dominantSpeakerAvatar"},r.a.createElement(fe.a,{name:l,chatType:n,temporary:!1,imageToken:t.image})),r.a.createElement(ve,{handleEndCall:this.endCall,handleAudioMute:this.handleAudioMute,handleVideoMute:this.handleVideoMute,videoMute:!1,audioMute:!1,audioControl:!1,videoControl:!1}),this.state.connectingIssue&&"true"===Object(le.e)("connecting")&&r.a.createElement(me,null))}}]),a}(n.Component),be=Object(o.b)((function(e){return{callConnectionDate:e.callConnectionDate,showConfrenceData:e.showConfrenceData}}),null)(ge),Ee=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).setStream=function(){n.props.stream&&(n.videoTag.current.srcObject=n.props.stream,n.props.muted&&(n.videoTag.current.muted=!0))},n.videoTag=r.a.createRef(),n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){e.id!==this.props.id&&this.setStream()}},{key:"componentDidMount",value:function(){this.setStream()}},{key:"render",value:function(){return r.a.createElement("video",{id:this.uniqueId,ref:this.videoTag,playsInline:!0,autoPlay:!0,style:this.props.inverse?{transform:"scaleX(-1)"}:{}})}}]),a}(n.Component),Ce=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).setStream=function(){n.props.stream&&(n.audioTag.current.srcObject=n.props.stream,n.props.muted&&(n.audioTag.current.muted=!0))},n.audioTag=r.a.createRef(),n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){e.id!==this.props.id&&this.setStream()}},{key:"componentDidMount",value:function(){this.setStream()}},{key:"render",value:function(){return r.a.createElement("audio",{ref:this.audioTag,autoPlay:!0})}}]),a}(n.Component),ye=a(150),Oe=a(151),je=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).setPinUser=function(t,a){t.stopPropagation(),e.props.setPinUser&&c.a.dispatch(Object(C.f)(a))},e}return Object(v.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){var a,n,r,o;return!!(this.props.showConfrenceDataId!==e.showConfrenceDataId||this.props.stream&&e.stream&&this.props.stream.id!==e.stream.id||this.props.stream&&e.stream&&this.props.stream.video!==e.stream.video||this.props.stream&&e.stream&&this.props.stream.audio!==e.stream.audio||this.props.rosterData.image!==e.rosterData.image||e.videoMuted!==this.props.videoMuted||e.audioMuted!==this.props.audioMuted||e.callStatus!==this.props.callStatus||e.userStatus!==this.props.userStatus||e.tileView!==this.props.tileView||(null===(a=e.tileViewStyle)||void 0===a?void 0:a.width)!==(null===(n=this.props.tileViewStyle)||void 0===n?void 0:n.width)||(null===(r=e.tileViewStyle)||void 0===r?void 0:r.height)!==(null===(o=this.props.tileViewStyle)||void 0===o?void 0:o.height)||e.videoTrackId!==this.props.videoTrackId||e.audioTrackId!==this.props.audioTrackId||e.pinUserJid!==this.props.pinUserJid||e.setPinUser!==this.props.setPinUser||e.jid!==this.props.jid)}},{key:"render",value:function(){var e=this,t=this.props,a=t.videoMuted,n=t.audioMuted,o=t.stream,l=t.rosterData,i=t.pinUserJid,c=t.userStatus,s=t.inverse,d=void 0!==l.displayName&&null!==l.displayName?l.displayName:l.nickname,u=l.username?l.username:l.fromUser,m=Object(V.h)(),p=!1;u===m.fromUser&&(p=!0);var h=Object(le.e)("token"),v="";c&&c.toLowerCase()!==Q.o&&(c.toLowerCase()===Q.m?v=Q.a:c.toLowerCase()===Q.s?v=Q.h:c.toLowerCase()===Q.t?v=Q.i:c.toLowerCase()===Q.n||c.toLowerCase()===Q.p||c.toLowerCase()===Q.v||c.toLowerCase()===Q.q?v=Object(x.e)(c.toLowerCase()):c.toLowerCase()===Q.r&&(v=Object(x.e)(Q.q)));var f="RemoteVideo-contianer ";this.props.setPinUser&&i===this.props.jid&&(f+="pin-user");var g,b=Object(V.m)(l,(g=l).fromUser===m.fromUser?m.nickName:g.initialName);return r.a.createElement("span",{key:this.props.elKey,style:this.props.tileViewStyle,className:"".concat(f).concat(c&&c.toLowerCase()!==Q.o?" user-connecting":""),onClick:function(t){return e.setPinUser(t,e.props.jid)}},(a||!o.video||this.props.callStatus&&this.props.callStatus.toLowerCase()===Q.q)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{name:b,chatType:"chat",userToken:h,temporary:!1,imageToken:l.image})),r.a.createElement("span",{className:"ParticipantInfo"},d),o&&o.video&&!a&&this.props.callStatus&&this.props.callStatus.toLowerCase()!==Q.q&&r.a.createElement(Ee,{stream:o.video,muted:p,id:o.video.id,inverse:s}),o&&o.screenshare&&this.props.callStatus&&this.props.callStatus.toLowerCase()!==Q.q&&r.a.createElement(Ee,{stream:o.screenshare,muted:p,id:o.screenshare.id,inverse:s}),o&&o.audio&&r.a.createElement(Ce,{stream:o.audio,muted:p,id:o.audio.id}),r.a.createElement("div",{className:"remoteCallStatus"},n&&r.a.createElement("i",{title:"Participant is muted",className:"AudioOffRemote"},r.a.createElement(ye.a,null)),a&&r.a.createElement("i",{title:"Participant has stopped the camera",className:"videoOffRemote"},r.a.createElement(Oe.a,null)),r.a.createElement(r.a.Fragment,null,!n&&r.a.createElement("div",{className:"audio_indication left height_adjust transistion_adjust ".concat(Object($.g)(60))},r.a.createElement("div",{className:"audio_indicator audio_indicator_1"}),r.a.createElement("div",{className:"audio_indicator audio_indicator_2"}),r.a.createElement("div",{className:"audio_indicator audio_indicator_3"})))),!this.props.tileView&&r.a.createElement(r.a.Fragment,null,this.props.setPinUser&&r.a.createElement(r.a.Fragment,null,i===this.props.jid?r.a.createElement("i",{onClick:function(t){return e.setPinUser(t,e.props.jid)},className:"pinned active"},r.a.createElement(w.Mb,null)):r.a.createElement("i",{onClick:function(t){return e.setPinUser(t,e.props.jid)},className:"pinned"},r.a.createElement(w.Lb,null)))),c&&""!==v&&c.toLowerCase()!==Q.o&&r.a.createElement("div",{className:"overlay-text"},v))}}]),a}(r.a.Component),Ne=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).audio=new Audio("sounds/outgoingRinging.wav"),n.audioConnecting=new Audio("sounds/outgoingRinging.wav"),n.endCall=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopAudio(),t=n.props.callConnectionDate,A.a.endCall(),Object($.c)(),Object(ne.f)(),Z.a.update(t.data.roomId,{endTime:Z.a.initTime(),sessionStatus:Q.k}),setTimeout((function(){Object(le.a)("roomName"),Object(le.a)("callType"),Object(le.a)("call_connection_status"),Object(le.c)("hideCallScreen",!1),Object(le.c)("callingComponent",!1),Object(le.c)("hideCallScreen",!1),c.a.dispatch(Object(C.k)({showComponent:!1,showCalleComponent:!1,stopSound:!0,callStatusText:null})),n.setState({sendEnd:!0})}),Q.z);case 7:case"end":return e.stop()}}),e)}))),n.displayGroupMemberNames=function(){var e=n.props.callConnectionDate;if(e&&e.data&&"onetomany"===e.data.callMode){var t=e.data.userList.split(","),a=[];return t.length>0?(t.map((function(e){var t=Object(V.j)(e);a.push(t)})),a.map((function(e){var t=e.displayName,a=e.name,n=e.username,o=e.jid,l=e.GroupUser,i=t||a||o||n||Object(x.v)(l);return r.a.createElement("li",null,i)}))):[]}return[]},n.toggleMemberNames=function(){n.setState({showMemberNames:!n.state.showMemberNames})},n.handleAudioMute=function(e){},n.handleVideoMute=function(e){},n.handleHideCallScreen=function(e){e.stopPropagation(),n.props.hideCallScreen()},n.getRosterDataForCall=function(){var e="",t={},a=n.props.callConnectionDate.data;if("onetoone"===a.callMode)e=a.to,t=Object(V.j)(e);else if("onetomany"===a.callMode)if(""!==a.groupId&&null!==a.groupId&&void 0!==a.groupId)e=a.groupId.includes("@")?a.groupId.split("@")[0]:a.groupId,t=n.getGroupDetails(e);else{var r=a.userList.split(",");t=Object($.d)(r)}return t},n.isOneToManyCall=function(){var e=n.props.callConnectionDate.data;return"onetomany"===e.callMode&&!e.groupId},n.state={callConnectionDate:"",showMemberNames:!1,callingUiStatus:"Trying to connect"},n.timer=null,n.uiChangetimer=null,n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.callConnectionDate&&this.props.callConnectionDate.data&&this.setState({callConnectionDate:this.props.callConnectionDate.data}),document.querySelectorAll("audio").forEach((function(e){e.pause()})),this.uiChangetimer=setTimeout((function(){e.setState({callingUiStatus:"User seems to be offline, Trying to connect"})}),1e4),this.timer=setTimeout((function(){e.endCall()}),3e4)}},{key:"componentDidUpdate",value:function(e){var t;(null===(t=this.props.adminBlockData)||void 0===t?void 0:t.data)&&Object.keys(this.props.adminBlockData.data).length&&this.stopAudio()}},{key:"playAudio",value:function(e){var t=null;e?(this.stopConnectingAudio(),t=this.audio.play(),this.audio.loop=!0):(t=this.audioConnecting.play(),this.audioConnecting.loop=!0),void 0!==t&&t.then((function(e){})).catch((function(e){console.info(e)}))}},{key:"stopAudio",value:function(){this.audio.loop=!1,this.audio.pause(),this.audio.currentTime=0,this.stopConnectingAudio()}},{key:"stopConnectingAudio",value:function(){this.audioConnecting.loop=!1,this.audioConnecting.pause(),this.audioConnecting.currentTime=0}},{key:"componentWillUnmount",value:function(){this.stopAudio(),clearTimeout(this.timer),clearTimeout(this.uiChangetimer)}},{key:"getGroupDetails",value:function(e){var t={},a=Object(ae.a)(e);return t.displayName=a.groupName,t.image=a.groupImage,t.jid=a.groupId,t.chatType="groupchat",t.initialName="",t}},{key:"render",value:function(){var e=this.props,t=e.callConnectionDate,a=e.callStatus;if(!t||!t.data)return null;var n=this.getRosterDataForCall(),o=Object(V.m)(n,n.initialName),l=t.data,i=Object(d.a)({},this.props.vCardData.data),c=n.chatType;this.audio.load(),this.props.stopSound?this.stopAudio():this.playAudio(l.roomId);var s="audio"===t.data.callType||"Audio"===t.data.callType?"Audio ":"Video ",u="";t.data.from&&t.data.to&&(u=t.data.to?t.data.to.includes("@")?t.data.to.split("@")[0]:t.data.to:t.data.from.includes("@")?t.data.from.split("@")[0]:t.data.from);var m=!0;"Audio"===s&&(m=!1);var p=this.state.callingUiStatus;i.nickname="You";var h=this.props.showConfrenceData.data.localVideoMuted,v=this.props.showConfrenceData.data.localAudioMuted,f=this.props.showConfrenceData.data.localStream;return r.a.createElement("div",{className:"calling-Popup webcall-calling"},r.a.createElement("div",{className:"optionButton visible"},r.a.createElement("div",null,r.a.createElement("span",{title:"Back to chat",className:"BackToChat",onClick:this.handleHideCallScreen},r.a.createElement("i",{className:"backIcon"},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(pe.a,null))))),this.isOneToManyCall()&&r.a.createElement("div",{className:"callDetails"},r.a.createElement("div",{style:{visibility:"hidden"},className:"logosm"},r.a.createElement("img",{src:te.a,alt:"Logo"})),r.a.createElement(oe,{rosterData:n}),r.a.createElement("div",{className:"calleeDetails"},r.a.createElement("div",{className:"calle-info"},r.a.createElement("span",{className:"callerName",title:n.displayName},n.displayName?n.displayName:u),"onetomany"===t.data.callMode&&t.data.groupId&&r.a.createElement("span",{className:"memmber-details",onClick:this.toggleMemberNames},"(",l.userList&&l.userList.split(",").length>0?l.userList.split(",").length:0," ",l.userList.split(",").length>1?"members":"member",")",this.state.showMemberNames&&r.a.createElement("div",{className:"popup-group-member"},r.a.createElement("ul",{className:"group-member-list"},this.displayGroupMemberNames())))),r.a.createElement("span",{className:"callingStatus"},r.a.createElement("span",null,"Calling"===a?p:Object(x.e)(a)," ",("Calling"===a||"Ringing"===a)&&r.a.createElement("div",{className:"callingAnimation call"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})))))),!this.isOneToManyCall()&&r.a.createElement("div",{className:"avatar-wrapper"},r.a.createElement("div",{className:"avatar",id:"dominantSpeakerAvatar"},r.a.createElement("div",{className:"calling-animation-wrapper"},r.a.createElement(Y,{name:o,chatType:c,rostersnap:n.image,jid:n.username?n.username:n.jid}),r.a.createElement("div",{className:"ripple-1"}),r.a.createElement("div",{className:"ripple-2"}),r.a.createElement("div",{className:"ripple-3"})),r.a.createElement("div",{className:"calleeDetails"},r.a.createElement("div",{className:"calle-info"},r.a.createElement("span",{className:"callerName"},n.displayName?n.displayName:u),"onetomany"===t.data.callMode&&t.data.groupId&&r.a.createElement("span",{className:"memmber-details"},"(",l.userList&&l.userList.split(",").length>0?l.userList.split(",").length:0," ",l.userList.split(",").length>1?"members":"member",")",this.state.showMemberNames&&r.a.createElement("div",{className:"popup-group-member"},r.a.createElement("ul",{className:"group-member-list"},this.displayGroupMemberNames())))),r.a.createElement("span",{className:"callingStatus"},r.a.createElement("span",{className:"".concat(a===Q.h?"call-state-busy":""," call-status")},"Calling"===a?p:Object(x.e)(a)," ",("Calling"===a||"Ringing"===a)&&r.a.createElement("div",{className:"callingAnimation call"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}))))))),r.a.createElement("div",null,f&&r.a.createElement("div",{className:"content-body"},r.a.createElement("div",{className:"RemoteVideo-wrapper"},r.a.createElement("div",{"data-overlap-id":"call-thumbnail-view-local",className:"RemoteVideo-list"},r.a.createElement(je,{elKey:"local-user-video-".concat(i.fromUser),videoMuted:h,audioMuted:!v,stream:f,rosterData:i,jid:i.fromUser,showConfrenceDataId:this.props.showConfrenceData.id,pinUserJid:null,setPinUser:!1,callStatus:a,inverse:!0})))),r.a.createElement(ve,{cssClassName:"disabled-btn",handleEndCall:this.endCall,handleAudioMute:this.handleAudioMute,handleVideoMute:this.handleVideoMute,videoMute:!!h,audioMute:!0,audioControl:!0,videoControl:m})))}}]),a}(n.Component),ke=Object(o.b)((function(e){return{callConnectionDate:e.callConnectionDate,vCardData:e.vCardData,activeChatData:e.activeChatData,showConfrenceData:e.showConfrenceData,rosterData:e.rosterData,adminBlockData:e.adminBlockData}}),null)(Ne),Se=a(93),we=a(32),De=a.n(we);var Me=function(e,t){var a=function(e,t){if("recent-chat"===t)return function(e){var t=e.getHours(),a=e.getMinutes(),n=t>=12?"pm":"am";return(t=(t%=12)||12)+":"+(a=a<10?"0"+a:a)+" "+n}(e);var a=Se.DateTime.fromMillis(Date.now()),n=Se.DateTime.fromJSDate(e),r=a.diff(n,"minutes").toObject().minutes;if(!r)return null;var o=Math.round(r);return 0===o?"Now":1===o?"".concat(o," min ago"):o<60?"".concat(o," mins ago"):n.toFormat("HH:mm")}(e,t),n=function(e){var t=Se.DateTime.fromMillis(Date.now()),a=Se.DateTime.fromJSDate(e),n=t.diff(a,"days").toObject().days;if(!n)return null;var r=Math.round(n);if(0===r)return"Today";if(1===r)return"Yesterday";if(r>1&&r<=6)return Se.DateTime.fromJSDate(e).toFormat("cccc");var o=e.getFullYear()===(new Date).getFullYear();return Se.DateTime.fromJSDate(e).toFormat(o?"d MMM":"d MMM yyyy")}(e);return"recent-chat"===t?"Today"===n?a:n:a.match(/Now|mins? ago/i)?a:n};function Ie(e,t){var a=t.getUTCHours();return function(e){if(0===e)return 0;e=Number(e);var t=Math.floor(e/3600);return t>0?t:0}(e)-a<=24}var Te,Pe=function(e){var t=function(e){var t=new Date;return t.setSeconds(t.getSeconds()-e),t}(e),a=new Date,n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r={hour:"numeric",minute:"numeric"};return 0===e?"Online":t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()?"last seen today at ".concat(t.toLocaleTimeString("en-US",r)):t.getDate()===a.getDate()-1&&t.getMonth()===a.getMonth()||t.getMonth()===a.getMonth()-1&&Ie(e,a)?"last seen yesterday at ".concat(t.toLocaleTimeString("en-US",r)):t.getDate()!==a.getDate()-1&&t.getDate()!==a.getDate()-2&&t.getDate()!==a.getDate()-3&&t.getDate()!==a.getDate()-4&&t.getDate()!==a.getDate()-5&&t.getDate()!==a.getDate()-6||t.getMonth()!==a.getMonth()?t.getDate().toString().length>1?"last seen ".concat(t.getDate(),"-").concat(n[t.getMonth()],"-").concat(t.getFullYear()):"last seen ".concat(0,t.getDate(),"-").concat(n[t.getMonth()],"-").concat(t.getFullYear()):"last seen on ".concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]," at ").concat(t.toLocaleTimeString("en-US",r))},Ae=function(e){return De()(e+"+00:00").local().format("YYYY-MM-DD HH:mm:ss")},Le=a(5),xe=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).isUserBlocked=function(e){e=Object(V.c)(e);var t=n.props.blockedContact.data,a=n.props.contactsWhoBlockedMe.data;return t.indexOf(e)>-1||a.indexOf(e)>-1},n.getLastSeenSeconds=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",-1);case 2:return t=Object(V.c)(t),e.next=5,A.a.getLastSeen(t);case 5:if(!(a=e.sent)||200!==a.statusCode){e.next=9;break}return c.a.dispatch((r=a.data,{type:j.ab,payload:{id:O()(),data:r}})),e.abrupt("return",null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.seconds);case 9:return e.abrupt("return",-1);case 10:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateLastSeen=function(){var e=Object(p.a)(m.a.mark((function e(t,a,r){var o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(t=Object(V.c)(t),o=n.state.seconds,l="",n.isUserBlocked(t)){e.next=13;break}if(e.t0=r,e.t0){e.next=11;break}return e.next=10,n.getLastSeenSeconds(t);case 10:e.t0=e.sent;case 11:o=e.t0,l=-1!==o?Pe(o):"";case 13:a=a||(o>0?Le.Y:Le.Z),n.setState({seconds:o,lastSeen:l,userPresenceStatus:a});case 15:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.state={seconds:-1,lastSeen:"",userPresenceStatus:""},n.timer=0,n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.props.jid)&&this.updateLastSeen(t);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,o,l,i=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(V.c)(this.props.jid),t.jid!==this.props.jid&&this.updateLastSeen(this.props.jid),r=this.props.presenceData,o=r.fromUserJid,l=r.status,o===n&&l!==this.state.userPresenceStatus&&(l===Le.Y?this.timer=setTimeout(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.updateLastSeen(n,l);case 1:case"end":return e.stop()}}),e)}))),500):this.updateLastSeen(n,l)),this.props.contactsWhoBlockedMe.id===t.contactsWhoBlockedMe.id&&this.props.blockedContact.id===t.blockedContact.id||this.updateLastSeen(n),this.props.isAppOnline!==t.isAppOnline&&(this.props.isAppOnline||this.state.userPresenceStatus!==Le.Z||this.updateLastSeen(n,void 0,1),this.props.isAppOnline&&this.state.userPresenceStatus===Le.Y&&this.updateLastSeen(n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){return r.a.createElement("h6",null,this.state.lastSeen)}}]),a}(n.Component),Ue=Object(o.b)((function(e){var t;return{lastActivity:e.lastActivityData,presenceData:e.presenceData&&e.presenceData.data||{},blockedContact:e.blockedContact,contactsWhoBlockedMe:e.contactsWhoBlockedMe,isAppOnline:null===e||void 0===e||null===(t=e.appOnlineStatus)||void 0===t?void 0:t.isOnline}}),null)(xe),Re=a(50),Fe=function(e){var t=e.typingId,a=e.typingData,r=e.fromUserId,o=e.chatType,l=Object(n.useState)({isTyping:!1,displayName:""}),i=Object(Re.a)(l,2),c=i[0],s=i[1];return Object(n.useEffect)((function(){if(t){var e=function(e,t,a){if(Object(B.V)(e)){var n,r=t.filter((function(e){return e.groupId&&e.groupId.indexOf(a)>-1&&e.displayName}));return r.length&&(null===(n=r[0])||void 0===n?void 0:n.displayName.concat(" typing..."))}return t.find((function(e){return e.fromUserId.indexOf(a)>-1&&!e.groupId}))&&"typing..."}(o,a,r),n=!!e,l=c.displayName,i=c.isTyping;if(l===e&&i)return;s({isTyping:n,displayName:e})}else;}),[r,t]),c},Be=function(e){var t=e.fromUserId,a=e.chatType,n=e.jid,l=e.contactNames,i=Object(o.d)((function(e){return e})).typingData,c=(i=void 0===i?{}:i).id,s=i.data,d=Fe({typingId:c,typingData:void 0===s?[]:s,fromUserId:t,chatType:a}),u=d.isTyping,m=d.displayName;return r.a.createElement(r.a.Fragment,null," ",u?r.a.createElement("span",{className:"txtTyping"},m):r.a.createElement(r.a.Fragment,null,"chat"===a&&r.a.createElement(Ue,{jid:n}),"groupchat"===a&&r.a.createElement("h6",null,l)))},_e=a(448),Ve=a.n(_e),Ge=a(141),He=a.n(Ge),Je=a(438),qe=a.n(Je),We=(a(441),a(52)),Ke=a.n(We),ze=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.a)(this,a),e=t.call(this,n);var r=n.containerId,o=n.divclass,l=void 0===o?null:o;return e.modalRoot=document&&document.getElementById&&document.getElementById(r),e.element=document&&document.createElement&&document.createElement("div"),l&&e.element.classList.add(l),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.modalRoot&&this.modalRoot.appendChild(this.element)}},{key:"componentWillUnmount",value:function(){this.modalRoot&&this.modalRoot.removeChild(this.element)}},{key:"render",value:function(){return Object(We.createPortal)(this.props.children,this.element)}}]),a}(n.Component),Ye=(a(517),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.popUpToggleAction,a=e.dispatchAction,n=e.headerLabel,o=e.closeLabel,l=e.actionLabel,i=e.infoLabel,c=function(){Object(R.a)()&&a()};return r.a.createElement("div",{className:"popup-wrapper BlockedPopUp"},r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-label"},r.a.createElement("label",null,n)),r.a.createElement("div",{className:"popup-noteinfo"},r.a.createElement("button",{type:"button",className:"popup btn-cancel",name:"btn-cancel",onClick:t},o),r.a.createElement("button",{type:"button",className:"popup btn-action",name:"btn-action",onClick:c},l)),r.a.createElement("div",{className:"blockedInfo"},r.a.createElement("p",null,r.a.createElement("i",null,r.a.createElement(w.t,null)),r.a.createElement("span",null,i))))))}),Ze=function(e){var t=e.popUpToggleAction,a=e.dispatchAction,n=e.headerLabel,o=e.closeLabel,l=e.actionLabel,i=e.label;return r.a.createElement("div",{className:"popup-wrapper BlockedPopUp"},r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-label"},r.a.createElement("label",null,n)),r.a.createElement("div",{className:"popup-noteinfo"},r.a.createElement("button",{type:"button",className:"popup btn-cancel",name:"btn-cancel",onClick:t},o),r.a.createElement("button",{type:"button",className:"popup btn-action",name:"btn-action",onClick:function(){Object(x.R)()?Object(R.a)()&&a("ClearAction"===i?{isclear:!0}:{isclear:!1}):Object(x.a)()}},l)))))},Xe=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,a),(e=t.call(this,n)).handleGetMedia=Object(p.a)(m.a.mark((function t(){var a,n,r,o,l,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.chatType,n=void 0===a?"":a,r=Object(B.m)(),"broadcast"!==n){t.next=6;break}A.a.getBroadcastChatMedia(r),t.next=13;break;case 6:if(t.t0=A.a,!t.t0){t.next=11;break}return t.next=10,A.a.getMediaMessages(r);case 10:t.t0=t.sent;case 11:(o=t.t0)&&200===o.statusCode&&o.data.length&&(l=new Set(e.state.mediaList.map((function(e){return e.msgId}))),(i=[].concat(Object(D.a)(e.state.mediaList),Object(D.a)(o.data.filter((function(e){return!l.has(e.msgId)}))))).sort((function(e,t){return t.timestamp>e.timestamp?1:-1})),e.setState({mediaList:i}));case 13:case"end":return t.stop()}}),t)}))),e.handleMediaShow=function(t){if(document.getElementById("msgContent").querySelectorAll("video, audio").forEach((function(e){return e.pause()})),e.state.mediaList.length>0){var a=e.props.chatType,n={jid:Object(B.m)(),chatType:a?"chat":"groupchat",selectedMessageData:e.state.mediaList[0]};c.a.dispatch(Object(S.b)(n))}},e.handleSelectedMediaAction=function(t){var a={jid:Object(B.m)(),chatType:e.props.chatType,selectedMessageData:t};c.a.dispatch(Object(S.b)(a))},e.getImage=function(t){return t?e.localDb.getImageByKey(t,Object(x.t)("image")).then((function(e){return window.URL.createObjectURL(e)})).catch((function(e){return null})):null},e.state={mediaList:""},e.localDb=new P.a,e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(B.k)(),(a=t.filter((function(e){return e&&e.msgBody&&_.w.includes(e.msgBody.message_type)&&0===e.deleteStatus}))).sort((function(e,t){return t.timestamp>e.timestamp?1:-1})),this.setState({mediaList:a}),a.length<3?this.handleGetMedia():a.length=3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){return this.props.chatType?c.a.dispatch(Object(S.a)()):c.a.dispatch({type:j.N,payload:{}})}},{key:"componentDidUpdate",value:function(e,t){e.SingleChatMediaData&&this.props.SingleChatMediaData&&e.SingleChatMediaData.id!==this.props.SingleChatMediaData.id&&this.props.SingleChatMediaData.data.length&&0!==this.props.SingleChatMediaData.data.length&&this.setState({Media:this.props.SingleChatMediaData.data.reverse()}),e.GroupChatMediaData&&this.props.GroupChatMediaData&&e.GroupChatMediaData.id!==this.props.GroupChatMediaData.id&&this.props.GroupChatMediaData.data.length&&0!==this.props.GroupChatMediaData.data.length&&this.setState({Media:this.props.GroupChatMediaData.data.reverse()})}},{key:"render",value:function(){var e=this,t=(this.state||{}).mediaList,a=void 0===t?[]:t;return r.a.createElement("div",null,r.a.createElement("div",{className:"contactinfo-media"},r.a.createElement("h5",null,r.a.createElement("span",{className:"media"},E.l),0!==a.length&&r.a.createElement("span",{className:"count",onClick:this.handleMediaShow,"data-jest-id":"jesthandleMediaShow"},r.a.createElement("i",null,r.a.createElement(w.pc,null)))),0!==a.length&&r.a.createElement("ul",{className:"mediadocs"},a.map((function(t,a){var n,o,l=null===t||void 0===t||null===(n=t.msgBody)||void 0===n||null===(o=n.media)||void 0===o?void 0:o.audioType,i=(null===t||void 0===t?void 0:t.msgBody)?null===t||void 0===t?void 0:t.msgBody:t,c=i.message_type,s=i.media,d=(s=void 0===s?{}:s).fileName,u=void 0===d?null:d,m=s.thumb_image,p=void 0===m?null:m,h=s.duration,v=void 0===h?"":h,f=s.file_url,g=void 0===f?"":f,b=p?"data:image/png;base64,".concat(p):g,E=Object(R.b)(u),C=F(null,E);return"image"===c?r.a.createElement("li",{onClick:function(){return e.handleSelectedMediaAction(t)},key:a},r.a.createElement("img",{src:b,alt:""})):"video"===c?r.a.createElement("li",{onClick:function(){return e.handleSelectedMediaAction(t)},key:a,className:"media-video"},r.a.createElement("img",{src:b,alt:""}),r.a.createElement("div",{className:"overlay"},r.a.createElement("img",{src:w.Qd,className:"video-icon",alt:""}))):"audio"===c?r.a.createElement("li",{key:a,className:"media-audio"},r.a.createElement("span",{className:"media-inner"},r.a.createElement("span",{className:"media-text"},Object(x.Y)(v)),r.a.createElement("img",{alt:"",src:"recording"!==l?w.Hd:w.Id}))):"file"===c?r.a.createElement("li",{key:a,className:"media-file"},r.a.createElement("span",{className:"media-inner"},r.a.createElement("span",{className:"media-text"},u),r.a.createElement("img",{src:C,alt:""}))):""}))),0===a.length&&r.a.createElement("div",{className:"noMedia"},r.a.createElement("i",null,r.a.createElement(w.qc,null)),r.a.createElement("span",{className:""},"No Media Found"))))}}]),a}(r.a.Component),Qe=Object(o.b)((function(e){return{SingleChatMediaData:e.SingleChatMediaData,GroupChatMediaData:e.GroupChatMediaData,singleChatMsgHistoryData:e.singleChatMsgHistoryData,groupChatMsgHistoryData:e.groupChatMessage}}),null)(Xe),$e=a(536),et=(a(531),a(532),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleShowEmojis=function(e){var t=n.props.closeParentMenu;n.setState({showEmojis:!0},(function(){t&&t(),document.addEventListener("click",n.closeMenu)}))},n.closeMenu=function(e){null===n.emojiPicker||n.emojiPicker.contains(e.target)||n.setState({showEmojis:!1},(function(){return document.removeEventListener("click",n.closeMenu)}))},n.addEmoji=function(e){var t=e.native;n.props.onEmojiClick(t)},n.state={showEmojis:!1},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.showEmoji!==this.props.showEmoji&&this.setState({showEmojis:this.props.showEmoji})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.showEmojis&&r.a.createElement("span",{className:"emojiPicker-container",style:Object(x.u)(),ref:function(t){return e.emojiPicker=t}},r.a.createElement($e.a,{enableFrequentEmojiSort:!1,onSelect:this.addEmoji})),r.a.createElement("i",{className:"em em-slightly_smiling_face",onClick:function(t){return e.handleShowEmojis()}}))}}]),a}(r.a.Component)),tt=a(59),at=a(79),nt=function(e){var t=e.status,a=e.blocked,n=e.userId;if("undefined"===typeof a&&n&&(a=Object(at.b)(n)),a)return"";var o=t||Le.m;return r.a.createElement("span",{className:"status",title:o},r.a.createElement("span",{className:"status-text"},He()(o)))},rt=a(657),ot=a.n(rt),lt=function(){var e="";return window.getSelection?e=window.getSelection():document.getSelection?e=document.getSelection():document.selection&&(e=document.selection.createRange().text),e&&e.toString&&e.toString()},it=function(e){var t;if(!e)return 0;var a=0,n=e.ownerDocument||e.document,r=n.defaultView||n.parentWindow,o=n.selection;if("undefined"!=typeof r.getSelection){if((o=r.getSelection()).rangeCount>0){var l=r.getSelection().getRangeAt(0),i=l.cloneRange();i.selectNodeContents(e),i.setEnd(l.endContainer,l.endOffset),a=i.toString().length}}else if("Control"!==(null===(t=o)||void 0===t?void 0:t.type)){var c,s,d=null===(c=o)||void 0===c?void 0:c.createRange(),u=null===n||void 0===n||null===(s=n.body)||void 0===s?void 0:s.createTextRange();u.moveToElementText(e),u.setEndPoint("EndToEnd",d),a=u.text.length}return a},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ot.a.substr(t,0,e)},st=function(e,t){if(e&&t>=0){var a=window.getSelection(),n=function e(t,a,n){if(n||((n=document.createRange()).selectNode(t),n.setStart(t,0)),0===a.count)n.setEnd(t,a.count);else if(t&&a.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<a.count?a.count-=t.textContent.length:(n.setEnd(t,a.count),a.count=0);else for(var r=0;r<t.childNodes.length&&(n=e(t.childNodes[r],a,n),0!==a.count);r++);return n}(e.parentNode,{count:t});n&&(n.collapse(!1),a.removeAllRanges(),a.addRange(n))}},dt=function(e,t){e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()},ut=a(451),mt=a.n(ut),pt=(a(452),a(110)),ht=a.n(pt),vt={showZoomer:!0,enableExif:!0,enableOrientation:!0,viewport:{width:200,height:200,type:"square"},boundary:{width:300,height:300}},ft={showZoomer:!1,enableExif:!0,enableOrientation:!0,viewport:{width:"100%",height:"100%"}},gt=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleProfileCameraClose=function(t){e.props.closePopUp()},e.validateBeforeUpload=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({file:t});var a=t.name;return/\.(jpe?g|png|gif|bmp)$/i.test(a)?{error:!1}:{messsage:E.k,error:!0}},e.fileChangedHandler=function(t){var a=t.target.files[0],n=e.validateBeforeUpload(a);t.target.value="",n.error?(ht.a.error(n.messsage),t.preventDefault()):e.props.updateProfileImage(a)},e.handleTick=function(t){e.props.cropImage()},e}return Object(v.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props,o=a.loader,l=a.cameraPopup;return r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"file",accept:"image/*",id:"ProfileUpload",onChange:this.fileChangedHandler,onClick:null===(e=this.props)||void 0===e?void 0:e.closeDropDown,"data-jest-id":"jestfileChangedHandler"}),r.a.createElement("label",{className:"UploadLabel",htmlFor:"ProfileUpload"}),l&&r.a.createElement("div",{className:"camera-container"},r.a.createElement("div",{className:"camera-popup-visible"},r.a.createElement("div",{className:"userprofile-header"},r.a.createElement("i",{"data-jest-id":"jesthandleProfileCameraClose",onClick:function(e){return t.handleProfileCameraClose(e)}},r.a.createElement(w.N,null)),r.a.createElement("h5",null,E.i)),r.a.createElement("div",{className:"cameraview"},r.a.createElement("div",{id:"CameraContainer"})),r.a.createElement("div",{className:"popup-controls"},!o&&r.a.createElement(n.Fragment,null,r.a.createElement("i",{className:"reset picturerReset",title:"Re capture"},r.a.createElement("label",{htmlFor:"Reset"},r.a.createElement(w.Nc,null),r.a.createElement("input",{id:"Reset",type:"file",accept:"image/*",className:"imageSelect",onChange:this.fileChangedHandler}))),r.a.createElement("i",{className:"pictureUpdate",title:"Update Profile"},r.a.createElement(w.jd,{onClick:this.handleTick,"data-jest-id":"jesthandleTick"}))),o&&r.a.createElement("img",{src:w.Md,alt:"loader",style:{width:30,height:29}})))))}}]),a}(r.a.Component),bt=a(658),Et=a.n(bt),Ct=(a(659),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).stopCameraStream=function(){var e=document.querySelector(".react-html5-camera-photo > video");e&&e.srcObject&&(e.srcObject.getTracks().forEach((function(e){return e.stop()})),e.srcObject=null)},n.state={cameraLoader:!1,onCameraError:!1},n}return Object(v.a)(a,[{key:"handleTakePhoto",value:function(e){if(e&&"data:"!==e&&"data:,"!==e){this.stopCameraStream();var t=Object(x.j)(e,"image.png");this.props.sendFile(t)}}},{key:"onCameraError",value:function(e){this.props.onCameraCheck(e)}},{key:"onCameraStart",value:function(e){this.props.onCameraCheck(!1),this.setState({cameraLoader:!1})}},{key:"componentWillUnmount",value:function(){this.stopCameraStream()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.cameraLoader&&r.a.createElement("div",{className:"loader"},r.a.createElement("img",{src:w.Nd,alt:"loader",style:{width:40,height:40,marginTop:-10}})),r.a.createElement(Et.a,{imageType:bt.IMAGE_TYPES.JPG,isImageMirror:!0,isSilentMode:!0,sizeFactor:1,onCameraError:function(t){e.onCameraError(t)},onTakePhoto:function(t){e.handleTakePhoto(t)},isDisplayStartCameraError:!0}))}}]),a}(r.a.Component)),yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.removeProfileImage,a=e.handleProfileRemovephotoClose;return r.a.createElement("div",{className:"removephoto-container"},r.a.createElement("div",{className:"removephoto-popup"},r.a.createElement("div",{className:"removephoto-label"},r.a.createElement("label",null,E.V)),r.a.createElement("div",{className:"removephoto-noteinfo remove"},r.a.createElement("button",{type:"button",name:"btn-cancel",className:"btn-cancel",onClick:function(e){return a(e)}},E.g),r.a.createElement("button",{type:"button",name:"btn-remove",className:"btn-removephoto",onClick:function(e){return t(e)}},E.T))))},Ot=new P.a,jt=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).cropImageProfileImg=function(){Te.result({type:"base64",size:"original"}).then((function(e){var t=n.state.filename,a=void 0===t?"":t,r=Object(x.j)(e,a);n.setState({loaderIcon:!0},(function(){return n.handleSaveImage(r)}))}))},n.handleSaveImage=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t,e.next=4,A.a.setGroupProfile(Object(V.b)(n.props.jid),n.props.groupName,a);case 4:if(200!==(r=e.sent).statusCode&&(o=r.message,setTimeout((function(){navigator.onLine||(o=_.E),o&&ht.a.error(o)}),150)),200!==r.statusCode){e.next=13;break}return e.next=9,Object(x.l)(t);case 9:l=e.sent,Ot.setImage(r.fileToken,l,"profileimages"),n.setState({imageToken:r.fileToken}),ht.a.success(_.H);case 13:n.handleProfileCameraPopupClose(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),ht.a.error(e.t0.message),n.handleProfileCameraPopupClose();case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),n.updateProfileImg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Te&&Te.destroy(),e){var t=e.name,a=void 0===t?"":t;n.setState({filename:a,camImage:e,cameraPopup:!0},(function(){var t=document.getElementById("CameraContainer");Te=new mt.a(t,vt);var a=new FileReader;a.onload=function(e){Te.bind({url:e.target.result}).then((function(){Object.assign(document.querySelector(".cr-viewport").style,{width:"200px",height:"200px"}),Te.setZoom(0)}))},a.readAsDataURL(e)}))}},n.handleVCardClose=function(){n.setState({viewEmojiUsername:!1,viewEmojiStatus:!1,viewEdit:!0,viewEditStatus:!0,viewTick:!0,viewTickStatus:!0,charCount:!1,charCountStatus:!1,showImgDropDown:!1,showProfilePhotoRemove:!1})},n.removeProfileImage=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(x.a)()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,A.a.setGroupProfile(Object(V.b)(n.props.jid),n.props.groupName,"");case 4:200===(a=e.sent).statusCode?(n.setState({imageToken:"",showImgDropDown:!1,showProfilePhotoRemove:!1}),ht.a.success("Profile picture removed successfully")):(r=a.message,o=void 0===r?"":r,ht.a.error(o));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setWebcamImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.size>0){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var a=t.result;n.setState({photoTaken:!0,camImageDisplay:a,camImage:e},(function(){return n.updateProfileImg(e)}))}}else n.setState({showProfileCamera:!0})},n.onCameraCheck=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=void 0===t?"":t;"NotAllowedError"===a?n.setState({onCameraPermissionDenied:!0}):"NotFoundError"===a&&n.setState({onCameraError:!0})},n.handleProfileImgDropDown=function(e){!1===n.state.showImgDropDown?(n.setState({showImgDropDown:!0}),c.a.dispatch(Object(k.j)(!0))):(n.setState({showImgDropDown:!1}),c.a.dispatch(Object(k.j)(!1)))},n.handleProfileImageShow=function(e){n.setState({showProfileImg:!0,showImgDropDown:!1}),c.a.dispatch(Object(k.j)(!0))},n.getImageUrl=function(e){n.setState({profileImg:e})},n.handleProfileImgClose=function(e){n.setState({showProfileImg:!1}),c.a.dispatch(Object(k.j)(!1))},n.handleProfileCameraShow=function(e,t){"reset"!==t&&Object(x.a)()||n.setState({showProfileCamera:!0,showImgDropDown:!1,photoTaken:!1,cameraLoader:!0})},n.handleProfilePhotoRemoveShow=function(e){Object(x.a)()||n.setState({showProfilePhotoRemove:!0,showImgDropDown:!1})},n.handleProfileRemovephotoClose=function(e){n.setState({showProfilePhotoRemove:!1})},n.handleProfileCameraClose=function(e){n.handleProfileCameraPopupClose()},n.handleProfileCameraPopupClose=function(){n.setState({showProfileCamera:!1,photoTaken:!0,onCameraError:!1,onCameraPermissionDenied:!1,loaderIcon:!1,cameraPopup:!1,showImgDropDown:!1})},n.checkNotFound=function(e){e.target.src=w.Rc},n.state={profileBlopData:"",profileImg:"",showImgDropDown:!1,showProfileImg:!1,profileCamera:!1,showProfileCamera:!1,photoTaken:!1,camImage:"",cameraLoader:!1,onCameraError:!1,onCameraPermissionDenied:!1,filename:"image",loaderIcon:!1,cameraPopup:!1,imageURL:w.Qc,imageToken:e.imageToken},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.handleProfileImg(this.state.imageURL)}},{key:"componentDidUpdate",value:function(e){var t=this.props.chatType;Object(B.V)(t)&&this.props.imageToken!==e.imageToken&&this.setState({imageToken:this.props.imageToken})}},{key:"handleProfileImg",value:function(e){e!==w.Rc?this.setState({profileImg:e}):(this.setState({profileImg:w.Rc,showProfileImg:!1}),c.a.dispatch(Object(k.j)(!1)))}},{key:"handleCropImageProfileUpdate",value:function(){var e=this;this.setState({loaderIcon:!0},(function(){return e.cropImageProfileImg()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.profileImg,o=t.showImgDropDown,l=t.showProfileImg,i=t.showProfileCamera,s=t.showProfilePhotoRemove,d=t.photoTaken,u=t.onCameraError,m=t.loaderIcon,p=t.cameraPopup,h=t.onCameraPermissionDenied,v=t.imageToken,f=this.props,g=f.chatType,b=f.blocked,C=f.temporary;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"userprofile-popup"},r.a.createElement("div",{className:"profile-image"},r.a.createElement(qe.a,{onOutsideClick:function(){c.a.dispatch(Object(k.j)(!1)),e.setState({showImgDropDown:!1})}},r.a.createElement(z.a,{chatType:g,blocked:b,temporary:C,imageToken:v,getImageUrl:this.getImageUrl,onclickHandler:function(t){return a!==w.Qc?e.handleProfileImageShow(t):null}}),r.a.createElement("i",{className:"camera-edit",onClick:function(t){return e.handleProfileImgDropDown(t)}},r.a.createElement(w.db,null)),o&&r.a.createElement("ul",{className:"profile-dropdown"},a&&r.a.createElement(r.a.Fragment,null,a!==w.Qc&&r.a.createElement("li",{title:E.Z,onClick:function(t){return e.handleProfileImageShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.Bd,null)),r.a.createElement("span",null,E.Z)),r.a.createElement("li",{title:E.X,onClick:function(t){return e.handleProfileCameraShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.id,null)),r.a.createElement("span",null,E.X)),a!==w.Qc&&r.a.createElement("li",{title:E.U,onClick:function(t){return e.handleProfilePhotoRemoveShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.Lc,null)),r.a.createElement("span",null,E.U)),r.a.createElement("li",{className:"upload_photo",title:E.Y},r.a.createElement("label",{className:"UploadLabel",htmlFor:"ProfileUpload"}),r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.td,null)),r.a.createElement("span",{className:"uploadphoto"},r.a.createElement("span",null,E.Y),r.a.createElement(gt,{type:E.t,loader:m,cameraPopup:p,cropImage:this.cropImageProfileImg,updateProfileImage:this.updateProfileImg,closePopUp:this.handleProfileCameraPopupClose})))),!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{title:E.Y},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.td,null)),r.a.createElement("span",{className:"uploadphoto"},r.a.createElement("span",null,E.Y),r.a.createElement(gt,{type:E.t,loader:m,cameraPopup:p,cropImage:this.cropImageProfileImg,updateProfileImage:this.updateProfileImg,closePopUp:this.handleProfileCameraPopupClose}))),r.a.createElement("li",{title:E.X,onClick:function(t){return e.handleProfileCameraShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.id,null)),r.a.createElement("span",null,E.X)))),l&&r.a.createElement("div",{className:"Viewphoto-container"},r.a.createElement("div",{className:"Viewphoto-preview"},r.a.createElement("img",{src:a,alt:"vcard-profile"}),r.a.createElement("i",{className:"preview-close",onClick:function(t){return e.handleProfileImgClose(t)}},r.a.createElement(w.N,null)))),i&&r.a.createElement("div",{className:"camera-container"},u&&r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.e),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.d),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",name:"btn-cancel",className:"btn-okay",onClick:function(t){return e.handleProfileCameraClose(t)}},"Okay"))),h&&r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.s),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.f),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",className:"btn-okay",name:"btn-cancel"},"Okay","onClick=",(function(t){return e.handleProfileCameraClose(t)})))),!u&&!h&&r.a.createElement("div",{className:"camera-popup-visible"},r.a.createElement("div",{className:"userprofile-header"},r.a.createElement("i",{onClick:function(t){return e.handleProfileCameraClose(t)}},r.a.createElement(w.N,null)),d?r.a.createElement("h5",null,E.i):r.a.createElement("h5",null,E.X)),r.a.createElement("div",{className:"cameraview"},d&&r.a.createElement("div",{id:"CameraContainer"}),!d&&r.a.createElement(Ct,{sendFile:this.setWebcamImage,onCameraCheck:this.onCameraCheck})),d&&r.a.createElement("div",{className:"popup-controls"},!this.state.loaderIcon&&r.a.createElement("i",{title:"Re capture"},r.a.createElement(w.Nc,{onClick:function(t){return e.handleProfileCameraShow(t,"reset")}})),this.state.loaderIcon?r.a.createElement("img",{src:w.Md,alt:"loader"}):r.a.createElement("i",{title:"Update Profile",onClick:function(t){return e.handleCropImageProfileUpdate()}},r.a.createElement(w.jd,null))))),s&&r.a.createElement(yt,{removeProfileImage:this.removeProfileImage,handleProfileRemovephotoClose:this.handleProfileRemovephotoClose})))))}}]),a}(r.a.Component),Nt=Object(o.b)((function(e,t){return{vCardData:e.vCardData}}),null)(jt),kt=function(e){var t=e.isAdmin,a=e.groupuniqueId,o=e.members,l=(o=void 0===o?{}:o).GroupUser,i=o.userId,s=o.username,d=o.image,u=o.userId,m=o.emailId,p=o.status,h=o.statusMsg,v=o.userType,f=Object(V.d)(Object(V.e)(u))||Object(x.v)(u),g=Object(n.useState)(!1),b=Object(Re.a)(g,2),E=b[0],C=b[1];Object(n.useEffect)((function(){t||C(!1)}),[t]);var y=u||s||l,O=function(){t&&C(!E)},j=p||h||"",N=Object(V.o)(i),k=Object(V.l)(e.members),S=Object(le.e)("token"),D=Object(V.n)(e.members);return r.a.createElement("li",null,r.a.createElement(qe.a,{onOutsideClick:function(){E&&O()}},r.a.createElement("div",{className:"user-profile-name"},r.a.createElement(fe.a,{chatType:"chat",userToken:S,temporary:!1,imageToken:d,emailId:m,userId:y,name:N?k:f}),r.a.createElement("div",{className:"profile-name"},r.a.createElement("span",null,r.a.createElement("h4",{className:N?"":"participant"},f),D?r.a.createElement("h6",{className:"profile-nickname",title:k},"~ ",k):"",!N&&t&&r.a.createElement("i",{className:E?"menu-icon open":"menu-icon",onClick:O},r.a.createElement(w.ab,null)," ")),r.a.createElement("h6",{className:"profile-status"},r.a.createElement(nt,{status:j,userId:y}),"o"===v&&r.a.createElement("span",{className:"adminicon"},"Admin")),E&&!Object(V.o)(y)&&r.a.createElement("ul",{className:"menu-dropdown"},"o"!==v&&r.a.createElement("li",{onClick:function(){var e=Object(V.c)(y);c.a.dispatch(Object(X.b)({groupuniqueId:a,userjid:e,displayName:f,open:!0,modelType:"action",title:"Make "+f+" an admin for this group?",activeclass:"make-admin",action:"groupMakeAdmin"})),C(!1)}},r.a.createElement("span",null,"Make admin")),r.a.createElement("li",{onClick:function(){var e=Object(V.c)(y),t="o"===v?1:0;C(!1),c.a.dispatch(Object(X.b)({groupuniqueId:a,userjid:e,displayName:f,checkAdmin:t,open:!0,title:"Remove "+f+" from this group?",activeclass:"remove-participant",modelType:"action",action:"groupRemoveMember"}))}},r.a.createElement("span",null,"Remove from Group")))))))},St=(a(660),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?1:t,n=e.checked,o=void 0!==n&&n,l=e.handleClick;return r.a.createElement("label",{className:"switch"},r.a.createElement("input",{onChange:function(){},className:o?"active":"",type:"checkbox",id:"Status-".concat(a),checked:!!o}),r.a.createElement("span",{className:"slider round"}),r.a.createElement("label",{onClick:l,className:"overlay-click"}))}),wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isChatMute,a=e.handleChatMuteAction,o=e.chatId,l=Object(n.useState)(t),i=Object(Re.a)(l,2),c=i[0],s=i[1];return Object(n.useEffect)((function(){var e=Object(le.e)("tempMuteUser");(e?JSON.parse(e):{})[o]?s(!0):s(t)}),[t]),r.a.createElement("div",{className:"about-no"},r.a.createElement("i",{className:"MuteIcon"},c?r.a.createElement(w.G,null):r.a.createElement(w.H,null)),r.a.createElement("span",{className:"Mutetext"},"Mute"),r.a.createElement(St,{handleClick:function(){return a(!t)},id:1,checked:c}))},Dt=(a(661),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.textInfo,a=void 0===t?"":t,n=e.children,o=void 0===n?"":n,l=e.textHeading,i=void 0===l?"":l,c=e.textActionBtn,s=void 0===c?"":c,d=e.jestActionBtn,u=void 0===d?"":d,m=e.jestCancelBtn,p=void 0===m?"":m,h=e.textCancelBtn,v=void 0===h?"":h,f=e.btnCancelClass,g=void 0===f?"":f,b=e.btnActionClass,E=void 0===b?"":b,C=e.handleCancel,y=void 0===C?function(){}:C,O=e.handleAction,j=void 0===O?function(){}:O;return r.a.createElement(ze,{containerId:"container"},r.a.createElement("div",{className:"action_poppup_wraper"},r.a.createElement(qe.a,{onOutsideClick:y},r.a.createElement("div",{className:"action_poppup_inner"},r.a.createElement("div",{className:"action_poppup_label"},r.a.createElement("h4",null,i),r.a.createElement("label",null,a)),o,r.a.createElement("div",{className:"action_poppup_noteinfo"},v&&r.a.createElement("button",{type:"button",className:"btn-cancel ".concat(g),"data-id":p,onClick:y},v),s&&r.a.createElement("button",{type:"button",className:"btn-action  ".concat(E),"data-id":u,onClick:function(e){return j(e)}},s))))))}),Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isAdmin,a=e.vCardData,l=e.groupuniqueId,i=e.participants,c=void 0===i?[]:i,s=e.ClearPopupAction,d=e.deletePopupAction,u=e.dispatchExitAction,m=e.handleChatMuteAction,p=e.contactPermission,h=e.reportGroupChatAction,v=void 0===h?function(){}:h,f=Object(n.useState)(!1),g=Object(Re.a)(f,2),b=g[0],E=g[1],C=function(){p?e.handleNewParticipants():E(!0)},y=function(){console.log("closing permission popup")},O=!c.find((function(e){return Object(V.o)(e.userId)})),j=Object(x.o)(),N=Object(o.d)((function(e){return e.activeChatData}))||{},k=N.data,S=(k=void 0===k?{}:k).chatId,D=void 0===S?"":S,M=k.recent,I=(M=void 0===M?{}:M).muteStatus,T=void 0===I?0:I,P=M.archiveStatus,A=void 0===P?0:P;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"contactinfo-about-no action"},!O&&r.a.createElement(r.a.Fragment,null,1===A&&j?r.a.createElement("div",{className:"text-disbaled"},r.a.createElement(w.t,null),r.a.createElement("span",null,"Archived chats are muted")):r.a.createElement(wt,{chatId:D,isChatMute:1===T,handleChatMuteAction:m}))),r.a.createElement("div",{className:"contactinfo-media group-members"},r.a.createElement("h5",null,r.a.createElement("span",{className:"media"},"Participants"),r.a.createElement("span",{className:"count"},c.length)),r.a.createElement("ul",null,t&&r.a.createElement(r.a.Fragment,null,b&&r.a.createElement(Dt,{textActionBtn:"Ok",handleAction:y,textHeading:"Contact permission",textInfo:Le.a}),r.a.createElement("li",{className:"addMembers",onClick:C,"data-jest-id":"jesthandleNewParticipants"},r.a.createElement("div",{className:"user-profile-name"},r.a.createElement("div",{className:"profile-image"},r.a.createElement(w.a,null)),r.a.createElement("div",{className:"profile-name"},r.a.createElement("span",null,r.a.createElement("h3",null,"Add Participants")))))),c&&c.map((function(e,n){return r.a.createElement(kt,{key:n,members:e,isAdmin:t,groupuniqueId:l,vCardData:a})}))),r.a.createElement("div",{className:"contactinfo-about-no action"},r.a.createElement("div",{className:"about-no",onClick:s,"data-jest-id":"jestClearPopupAction"},r.a.createElement("i",{className:"deleteIcon"},r.a.createElement(w.I,null)),r.a.createElement("span",{className:"delete"},"Clear Chat")),O?r.a.createElement("div",{className:"about-no","data-jest-id":"jestdeletePopupAction",onClick:d},r.a.createElement("i",{className:"deleteIcon"},r.a.createElement(w.T,null)),r.a.createElement("span",{className:"delete"},"Delete Group")):r.a.createElement("div",{className:"about-no grp-exit",onClick:u,"data-jest-id":"jestdispatchExitAction"},r.a.createElement("i",null,r.a.createElement(w.Ab,null)),r.a.createElement("span",{className:"delete"},"Exit Group")),r.a.createElement("div",{"data-jest-id":"jestGroupReportAction",className:"about-no",onClick:v},r.a.createElement("i",{className:"reportIcon"},r.a.createElement(w.Bb,null)),r.a.createElement("span",{className:"report"},"Report Group")))))},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isBlocked,a=e.ClearPopupAction,n=e.popUpToggleAction,l=e.deletePopupAction,i=e.handleChatMuteAction,c=e.reportSingleChatAction,s=void 0===c?function(){}:c,d=Object(x.o)(),u=Object(o.d)((function(e){return e.activeChatData}))||{},m=u.data,p=(m=void 0===m?{}:m).chatId,h=void 0===p?"":p,v=m.recent,f=(v=void 0===v?{}:v).muteStatus,g=void 0===f?0:f,b=v.archiveStatus,E=void 0===b?0:b;return r.a.createElement("div",{className:"contactinfo-about-no"},1===E&&d?r.a.createElement("div",{className:"text-disbaled"},r.a.createElement(w.t,null)," ",r.a.createElement("span",null,"Archived chats are muted")):r.a.createElement(wt,{chatId:h,handleChatMuteAction:i,isChatMute:1===g}),t&&r.a.createElement("div",{"data-jest-id":"jestpopUpToggleAction",className:"about-no",onClick:n},r.a.createElement("i",{className:"UnBlockIcon"},r.a.createElement(w.pd,null)),r.a.createElement("span",{className:"btn-block unblock"},"Unblock Contact")),!t&&r.a.createElement("div",{"data-jest-id":"jestpopUpToggleAction",className:"about-no",onClick:n},r.a.createElement("i",{className:"BlockedIcon"},r.a.createElement(w.r,null)),r.a.createElement("span",{className:"btn-block"},"Block Contact")),r.a.createElement("div",{className:"about-no","data-jest-id":"jestClearPopupAction",onClick:a},r.a.createElement("i",{className:"deleteIcon"},r.a.createElement(w.I,null)),r.a.createElement("span",{className:"delete"},"Clear Chat")),r.a.createElement("div",{"data-jest-id":"jestdeletePopupAction",className:"about-no",onClick:l},r.a.createElement("i",{className:"deleteIcon"},r.a.createElement(w.T,null)),r.a.createElement("span",{className:"delete"},"Delete Chat")),r.a.createElement("div",{"data-jest-id":"jestSingleReportAction",className:"about-no",onClick:s},r.a.createElement("i",{className:"reportIcon"},r.a.createElement(w.Qb,null)),r.a.createElement("span",{className:"report"},"Report")))},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleContactMedia,a=void 0===t?function(){}:t;return r.a.createElement("div",{className:"mediainfo-popup"},r.a.createElement("div",{className:"mediainfo"},r.a.createElement("div",{className:"mediainfo-header"},r.a.createElement("i",{onClick:a},r.a.createElement(w.qb,null)),r.a.createElement("h4",null,"Media & docs")),r.a.createElement("div",{className:"mediainfo-media"},r.a.createElement("ul",{className:"mediadocs"},r.a.createElement("li",null,r.a.createElement("img",{src:w.Rd,alt:""})),r.a.createElement("li",{className:"media-video"},r.a.createElement("img",{src:w.Sd,alt:""}),r.a.createElement("div",{className:"overlay"},r.a.createElement("img",{src:w.Qd,className:"video-icon",alt:""}))),r.a.createElement("li",null,r.a.createElement("img",{src:w.Td,alt:""})),r.a.createElement("li",{className:"media-audio"},r.a.createElement("span",{className:"media-inner"},r.a.createElement("span",{className:"media-text"},"03:24"),r.a.createElement("img",{src:w.Od,alt:""}))),r.a.createElement("li",{className:"media-file"},r.a.createElement("span",{className:"media-inner"},r.a.createElement("span",{className:"media-text"},"Short-stories.txt"),r.a.createElement("img",{src:w.Pd,alt:""})))))))},Pt=function(){return r.a.createElement("div",{className:"MediaInDetails"},r.a.createElement("div",{className:"contactinfo-header"},r.a.createElement("i",{className:"backtoInfo"},r.a.createElement(w.xb,null)),r.a.createElement("ul",{className:"tabs"},r.a.createElement("li",{className:"active"},"Media"),r.a.createElement("li",null,"Docs"),r.a.createElement("li",null,"Links"))),r.a.createElement("div",{className:"MediaDetails"},r.a.createElement("div",{className:"MediaImage"},r.a.createElement("ul",null,r.a.createElement("li",{className:"img"},r.a.createElement("img",{src:w.Sc,alt:"alt-img"})),r.a.createElement("li",{className:"img"},r.a.createElement("img",{src:w.Sc,alt:"alt-img"})),r.a.createElement("li",{className:"video"},r.a.createElement("img",{src:w.Sc,alt:"alt-img"}))))))},At=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n,o,l,i,s;return Object(h.a)(this,a),(s=t.call(this,e)).updateLocalUserGroupState=function(){var e=s.props,t=e.groupsMemberListData,a=(t=void 0===t?{}:t).data,n=(a=void 0===a?{}:a).groupJid,r=e.participants,o=(void 0===r?[]:r).find((function(e){return Object(V.o)(e.userId)})),l=o&&"o"===o.userType,i=s.state.isLocalUserInGroup,c=s.state.viewEdit;s.setState({isAdmin:!!l,groupuniqueId:n,isLocalUserInGroup:!!o,viewEdit:!o||c,exitGroup:!o},(function(){if(i&&!s.state.isLocalUserInGroup){var e,t,a,n,r,o,l=null===(e=s.props)||void 0===e||null===(t=e.popUpData)||void 0===t||null===(a=t.modalProps)||void 0===a?void 0:a.modelType,d=null===(n=s.props)||void 0===n||null===(r=n.popUpData)||void 0===r||null===(o=r.modalProps)||void 0===o?void 0:o.action;("participants"===l||["groupRemoveMember","groupMakeAdmin"].indexOf(d)>-1)&&(s.props.closePopup(),s.props.onInfoClose(!0)),!c&&s.state.viewEdit&&s.props.onInfoClose(!0)}}))},s.handleBlockUserData=function(){var e=s.props.blockedContact.data,t=Object(B.m)(),a=e.indexOf(t)>-1;s.setState({isBlocked:a})},s.handleContactInfoImg=function(e){if(""!==s.props.rosterImage){var t=s.state.showContactProfileImg;s.setState({showContactProfileImg:!t},(function(){s.props.handlePopUpClassActive(!t)}))}},s.handleContactMedia=function(){var e=s.state.contactInfoMediaGrid;s.setState({contactInfoMediaGrid:!e})},s.isChat=function(){var e,t,a,n;return Object(B.X)(null===(e=s.props)||void 0===e||null===(t=e.activeChatData)||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.recent)||void 0===n?void 0:n.chatType)},s.handleSaveGroupName=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(x.R)()){e.next=3;break}return Object(x.a)(),e.abrupt("return");case 3:a=s.state.groupName.trim(),s.props.rosterName!==a&&(n=s.props.rosterImage,r=Object(B.m)(),A.a.setGroupProfile(r,a,n)),s.setState({viewEdit:!0,groupName:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleGroupName=function(e){var t=e.target.value,a=void 0===t?"":t,n=ct(E.G,a);s.setState({groupName:n,groupNameCount:s.findNegativeValue(n,E.G)})},s.handleGroupNameCount=function(){var e=s.state.groupName,t=ct(E.G,e);s.setState({groupName:t,groupNameCount:s.findNegativeValue(t,E.G)})},s.onEmojiClickUsername=function(e){var t=s.state.groupName,a=void 0===t?"":t;if(s.findNegativeValue(a,E.G)>0){var n=s.userNameCursorPostion,r="";if(s.userNameSelectedText===s.state.groupName)r=e,n=e.length;else r=s.state.groupName.substring(0,n)+e+s.state.groupName.substring(n),n+=e.length;var o=s.findNegativeValue(r,E.G);s.setState({groupNameCount:o,groupName:r},(function(){s.userNameCursorPostion=n,dt(document.getElementById("username"),n)})),o===E.G?s.setState({viewTick:!0}):s.setState({viewTick:!1})}},s.handleEdit=function(e){s.setState({viewEdit:!1})},s.handleNewParticipants=function(){if(s.state.isAdmin){var e=s.props,t=e.rosterName,a=e.participants,n=(void 0===a?[]:a).map((function(e){var t=e.userId,a=e.username,n=e.GroupUser;return t||a||n}));s.props.addParticiapants({open:!0,modelType:"participants",groupName:t,groupMembers:n,groupuniqueId:s.state.groupuniqueId})}},s.dispatchAction=function(){var e=s.state.isBlocked;s.setState({showModal:!1},Object(p.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Object(B.m)(),!e){t.next=8;break}return t.next=4,A.a.unblockUser(a);case 4:(n=t.sent)&&200===n.statusCode&&(Object(B.Q)(a,Le.g),s.setState({isBlocked:!1}),s.props.updateBlockedContactAction(a,Le.X),re.b.success("".concat(s.props.rosterName||"User"," has been Unblocked"))),t.next=12;break;case 8:return t.next=10,A.a.blockUser(a);case 10:(r=t.sent)&&200===r.statusCode&&(Object(B.Q)(a,Le.g),s.setState({isBlocked:!0}),s.props.updateBlockedContactAction(a),re.b.success("".concat(s.props.rosterName||"User"," has been Blocked")));case 12:case"end":return t.stop()}}),t)}))))},s.checkMessageExist=function(){var e=Object(B.x)(Object(B.l)());return!e||!Array.isArray(e)||0!==e.length||(re.b.info("There is no conversation."),!1)},s.deleteOrClearAction=function(e){var t=e.isclear;if(s.isChat()){var a=Object(B.m)();s.setState({showModal:!1,showDeletePopup:!1,showClearPopup:!1},(function(){t?A.a.clearChat(a):A.a.deleteChat(a),s.props.onInfoClose()}))}else s.setState({showModal:!1,showDeletePopup:!1,showClearPopup:!1},(function(){var e=Object(B.m)();t?A.a.clearChat(e):A.a.userDeleteGroup(e),s.props.onInfoClose()}))},s.toastNoInternet=function(){Object(x.R)()||Object(x.a)()},s.popUpToggleAction=function(){var e=s.state.showModal;s.setState({showModal:!e})},s.deletePopupAction=function(){var e=s.state.showDeletePopup;s.setState({showDeletePopup:!e})},s.reportChatAction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s.state.isDeletedAccount||s.state.isAdminBlocked?re.b.error(s.state.isDeletedAccount?"Cannot report deleted user":"This user no longer available"):s.setState({showReportPopup:t,reportPopup:e})},s.reportConfirmAction=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,o,l,i,c,d,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.detail<=1)){e.next=16;break}if(!Object(x.a)()){e.next=3;break}return e.abrupt("return");case 3:if(!s.state.isDeletedAccount&&!s.state.isAdminBlocked){e.next=5;break}return e.abrupt("return");case 5:if(a=s.props,n=a.activeChatId,r=void 0===n?"":n,o=a.activeChatData.data,l=o.chatJid,i=void 0===l?"":l,c=o.chatType,d=void 0===c?"":c,0!==(u=Object(B.C)(r,Le.V)).length){e.next=12;break}re.b.error("No Messages To Report"),s.setState({showReportPopup:!1}),e.next=16;break;case 12:return e.next=14,A.a.reportUserOrGroup(i,d,u);case 14:re.b.success("Report sent"),s.setState({showReportPopup:!1});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.ClearPopupAction=function(){if(s.checkMessageExist()){var e=s.state.showClearPopup;s.setState({showClearPopup:!e})}},s.dispatchExitAction=function(){if(Object(x.R)()){var e=s.props,t=e.groupsMemberListData,a=(t=void 0===t?{}:t).data,n=(a=void 0===a?{}:a).groupJid,r=e.participants,o=(void 0===r?[]:r).find((function(e){return Object(V.o)(e.userId)})),l=!(!o||"o"!==o.userType),i=o.userJid;c.a.dispatch(Object(X.b)({groupuniqueId:n,userjid:i,checkAdmin:l,open:!0,title:"Are you sure you want to Exit from the group ?",activeclass:"remove-participant",modelType:"action",action:"ExitGroup"})),s.setState({exitGroup:!1})}else Object(x.a)()},s.handleMediaInDetail=function(){s.setState({showMediaInDetailPopup:!0})},s.findNegativeValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t-Ve()(e).length;return a>=0?t-Ve()(e).length:0},s.blockPopUpRender=function(){var e=s.state.isBlocked,t=void 0!==e&&e,a=s.props.rosterName;return r.a.createElement(Ye,{closeLabel:"Cancel",dispatchAction:s.dispatchAction,popUpToggleAction:s.popUpToggleAction,actionLabel:"".concat(t?"Unblock":"Block"),headerLabel:"".concat(t?"Unblock":"Block"," ").concat(a," ?"),infoLabel:"".concat(t?"On unblocking, this contact will be able to call you or send messages to you.":"On blocking, this contact will not be able to call you or send messages to you.")})},s.confirmationPopUpDelete=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?"Are you sure you want to Delete the ".concat(s.isChat()?"chat":"Group"," ?"):"Are you sure you want to Clear the chat ?"},s.confirmMationUpRender=function(){var e=s.state.showDeletePopup;return r.a.createElement(Ze,{dispatchAction:s.deleteOrClearAction,closeLabel:e?"No":"Cancel",actionLabel:"".concat(e?"Delete":"Clear"),headerLabel:s.confirmationPopUpDelete(e),label:"".concat(e?"DeleteAction":"ClearAction"),popUpToggleAction:e?s.deletePopupAction:s.ClearPopupAction})},s.handleChatMuteAction=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(x.a)()){e.next=2;break}return e.abrupt("return");case 2:a=Object(B.m)(),A.a.updateMuteNotification(a,t),n={fromUserId:Object(x.O)(a),isMuted:t},c.a.dispatch(Object(k.n)(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.state={displayName:"",image:"",status:"",jid:"",isBlocked:!1,showContactProfileImg:!1,contactInfoMediaGrid:!1,showModal:!1,groupName:e.rosterName,viewEdit:!0,showDeletePopup:!1,showReportPopup:!1,reportPopup:"",showClearPopup:!1,showMediaInDetailPopup:!1,isLocalUserInGroup:!0,groupNameCount:"0",exitGroup:!1,confirmExitGroup:!1,isAdminBlocked:null===(n=s.props)||void 0===n||null===(o=n.roster)||void 0===o?void 0:o.isAdminBlocked,isDeletedAccount:null===(l=s.props)||void 0===l||null===(i=l.roster)||void 0===i?void 0:i.isDeletedUser},s.userNameCursorPostion=0,s.userNameSelectedText="",s.userStatusCursorPostion=0,s.userStatusSelectedText="",s}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.isChat()?this.handleBlockUserData():(this.updateLocalUserGroupState(),this.handleGroupNameCount())}},{key:"componentDidUpdate",value:function(e,t){var a,n=this.props.chatType;if(Object(B.V)(n)&&this.props.rosterName!==e.rosterName&&this.setState({groupName:this.props.rosterName}),this.props.groupsMemberListData.id!==(null===e||void 0===e||null===(a=e.groupsMemberListData)||void 0===a?void 0:a.id)&&this.updateLocalUserGroupState(),e.rosterData.id!==this.props.rosterData.id){var r,o=null===(r=this.props.roster)||void 0===r?void 0:r.userId,l=this.props.rosterData.data,i=(void 0===l?[]:l).find((function(e){return e.userId===o}));this.setState({isAdminBlocked:null===i||void 0===i?void 0:i.isAdminBlocked,isDeletedAccount:null===i||void 0===i?void 0:i.isDeletedUser}),((null===i||void 0===i?void 0:i.isDeletedUser)||(null===i||void 0===i?void 0:i.isAdminBlocked))&&(this.state.showReportPopup&&re.b.error((null===i||void 0===i?void 0:i.isDeletedUser)?"Cannot report deleted user":"This user no longer available"),this.setState({showReportPopup:!1}))}if(e.groupsData.id!==this.props.groupsData.id){var c=this.props.activeChatData.data.chatId,s=void 0===c?"":c,d=this.props.groupsData.data,u=(void 0===d?[]:d).find((function(e){return e.userId===s}));this.setState({isAdminBlocked:null===u||void 0===u?void 0:u.isAdminBlocked}),(null===u||void 0===u?void 0:u.isAdminBlocked)&&this.setState({showReportPopup:!1})}if(e.groupsMemberListData.id!==this.props.groupsMemberListData.id){var m=this.props.groupsMemberListData.data.participants,p=void 0===m?[]:m,h=this.props.vCardData.data.fromUser,v=void 0===h?"":h,f=p.find((function(e){return e.userId===v}));f?"o"===(null===f||void 0===f?void 0:f.userType)&&this.setState({isAdmin:!0}):this.setState({isAdmin:!1})}}},{key:"render",value:function(){var e,t,a,o,l,i,c,s,d,u=this,m=Object(V.m)(this.props.roster,this.props.rosterName),p=this.state,h=p.showModal,v=p.contactInfoMediaGrid,f=p.viewEdit,g=p.showReportPopup,b=p.isAdminBlocked,C=p.isAdmin,y=p.groupuniqueId,O=p.isBlocked,j=p.showDeletePopup,N=p.showClearPopup,k=p.showMediaInDetailPopup,S=p.exitGroup,D=p.groupName,M=Object(B.m)();return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:"contactinfo-popup groupinfo-popup"},r.a.createElement("div",{className:"contactinfo"},r.a.createElement(qe.a,{onOutsideClick:function(e){if(!e.target.classList.contains("popup"))if(u.state.showClearPopup)u.ClearPopupAction();else if(u.state.showDeletePopup)u.deletePopupAction();else{if(!u.state.showModal)return u.state.showReportPopup?"":void u.props.onInfoClose();u.popUpToggleAction()}}},(j||N||h)&&r.a.createElement(ze,{containerId:"container"},j||N?this.confirmMationUpRender():this.blockPopUpRender()),r.a.createElement("div",{className:"contactinfo-header"},r.a.createElement("i",{onClick:this.props.onInfoClose},r.a.createElement(w.N,null)),r.a.createElement("h4",null,this.isChat()?"Contact info":"Group info")),this.isChat()&&r.a.createElement("div",{className:"single-details-container"},r.a.createElement("div",{className:"contactinfo-image-block"},r.a.createElement(fe.a,{chatType:"chat",temporary:!1,emailContactInfo:!0,imageToken:this.props.rosterImage,blocked:Object(at.b)(M),emailId:null===(e=this.props.roster)||void 0===e?void 0:e.emailId,profileImageView:this.handleContactInfoImg,name:m}),r.a.createElement("span",{title:this.props.rosterName},this.props.rosterName)),this.state.showContactProfileImg&&r.a.createElement(ze,{containerId:"container"},r.a.createElement("div",{className:"Viewphoto-container"},r.a.createElement("div",{className:"Viewphoto-preview"},r.a.createElement(z.a,{chatType:"chat",blocked:Object(at.b)(M),temporary:!1,imageToken:this.props.rosterImage}),r.a.createElement("i",{className:"preview-close",onClick:this.handleContactInfoImg},r.a.createElement(w.N,null))))),(this.props.roster.emailId||this.props.mobileNumber||this.props.userstatus)&&r.a.createElement("div",{className:"contactinfo-about-no"},r.a.createElement("h5",null,this.props.roster.emailId?E.a:E.b),this.props.userstatus&&r.a.createElement("div",{className:"about-no"},r.a.createElement("i",{className:"statusIcon"},r.a.createElement(w.gd,null)),r.a.createElement(nt,{userId:M,status:this.props.userstatus})),(this.props.roster.emailId||this.props.mobileNumber)&&r.a.createElement("div",{className:"about-no"},r.a.createElement("i",null,this.props.roster.emailId?r.a.createElement(w.jc,null):r.a.createElement(w.sd,null)),r.a.createElement("span",null,this.props.roster.emailId?this.props.roster.emailId:Object(x.v)(this.props.mobileNumber)))),r.a.createElement(Qe,{jid:this.props.jid,chatType:null===(t=this.props)||void 0===t||null===(a=t.activeChatData)||void 0===a||null===(o=a.data)||void 0===o||null===(l=o.recent)||void 0===l?void 0:l.chatType}),r.a.createElement(It,{handleChatMuteAction:this.handleChatMuteAction,isBlocked:O,ClearPopupAction:this.ClearPopupAction,popUpToggleAction:this.popUpToggleAction,deletePopupAction:this.deletePopupAction,reportSingleChatAction:function(){return u.reportChatAction("single",!0)},isAdminBlocked:b})),!this.isChat()&&r.a.createElement("div",{className:"group-details-container"},r.a.createElement("div",{className:"contactinfo-image-block"},r.a.createElement(Nt,{chatType:"groupchat",blocked:!1,temporary:!1,imageToken:this.props.rosterImage,jid:M,groupName:this.props.rosterName}),r.a.createElement("div",{className:"groupinfo-details"},!f&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",value:D,id:"username",name:"userName",maxLength:this.findNegativeValue(D,E.G)>0?1e3:0,onChange:this.handleGroupName,autoFocus:!0,onMouseUp:function(e){u.userNameCursorPostion=e.target.selectionStart},onKeyUp:function(e){u.userNameCursorPostion=e.target.selectionStart},onBlur:function(e){u.userNameSelectedText=lt()}}),r.a.createElement("span",{className:"group-count"},this.state.groupNameCount)),!f&&r.a.createElement("i",{className:"emoji"},r.a.createElement(et,{onEmojiClick:this.onEmojiClickUsername})),f&&r.a.createElement("h4",{title:this.state.groupName},He()(this.state.groupName))),r.a.createElement("div",{className:"groupinfo-controls"},this.state.isLocalUserInGroup&&(f?r.a.createElement("i",{className:"editgroupedit",onClick:this.handleEdit},r.a.createElement(w.cb,null)):r.a.createElement("i",{className:"editgroupdone",onClick:this.handleSaveGroupName},r.a.createElement(w.X,null))))),r.a.createElement(Qe,{chatType:null===(i=this.props)||void 0===i||null===(c=i.activeChatData)||void 0===c||null===(s=c.data)||void 0===s||null===(d=s.recent)||void 0===d?void 0:d.chatType}),r.a.createElement(Mt,{handleChatMuteAction:this.handleChatMuteAction,isAdmin:C,exitGroup:S,groupuniqueId:y,vCardData:this.props.vCardData,participants:this.props.participants,ClearPopupAction:this.ClearPopupAction,deletePopupAction:this.deletePopupAction,dispatchExitAction:this.dispatchExitAction,handleNewParticipants:this.handleNewParticipants,reportGroupChatAction:function(){return u.reportChatAction("group",!0)},contactPermission:this.props.contactPermission})),k&&r.a.createElement(Pt,null)))),v&&r.a.createElement(Tt,{handleContactMedia:this.handleContactMedia})),g&&r.a.createElement(Dt,{textActionBtn:"Report",btnActionClass:"red",textCancelBtn:"Cancel",textHeading:"Report ".concat(this.props.rosterName,"?"),handleAction:function(e){return u.reportConfirmAction(e)},handleCancel:function(){return u.setState({showReportPopup:!1})},textInfo:"The last 5 messages from this contact will be forwarded to admin. \n                            ".concat("single"===this.state.reportPopup?"This contact will not be notified.":"","\n                            ").concat("group"===this.state.reportPopup?"No one in this group will be notified.":"","\n                            ")}))}}]),a}(r.a.Component),Lt={addParticiapants:X.b,updateBlockedContactAction:tt.c,closePopup:X.a},xt=Object(o.b)((function(e){var t;return{activeChatData:e.activeChatData,rosterData:e.rosterData,blockedContact:e.blockedContact,vCardData:e.vCardData,groupsData:e.groupsData,groupsMemberListData:e.groupsMemberListData,contactsWhoBlockedMe:e.contactsWhoBlockedMe,popUpData:e.popUpData,contactPermission:null===e||void 0===e||null===(t=e.contactPermission)||void 0===t?void 0:t.data}}),Lt)(At),Ut="",Rt="",Ft=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).filterProfileFromRoster=function(e){var t=n.props.rosterData.rosterNames;return t&&t.has(e)?t.get(e):{}},n.filterProfileFromGroup=function(e){var t=n.props.groupsData,a=(t=void 0===t?{}:t).data;return(void 0===a?[]:a).find((function(t){return e.indexOf(t.groupId)>-1}))},n.setUserDetails=function(){var e=n.props.userData.data.roster,t=e.image,a=e.groupImage,r=Object(V.d)(e),o=e.isAdminBlocked;n.setState({displayName:r,image:t||a,userstatus:e.status,emailId:e.emailId,localRoster:e,isAdminBlocked:o,isDeletedUser:e.isDeletedUser})},n.deleteAndDispatchAction=function(){Object(le.a)("roomName"),Object(le.a)("callType"),Object(le.a)("call_connection_status"),Object(le.c)("hideCallScreen",!1),Object(le.c)("callingComponent",!1),Object(le.c)("hideCallScreen",!1),c.a.dispatch(Object(C.k)({showComponent:!1,showCalleComponent:!1,stopSound:!0,callStatusText:null}))},n.makeOne2OneCall=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l,i,s,u,p,h,v,f,g,b,y;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isRoomExist()&&!n.preventMultipleClick){e.next=2;break}return e.abrupt("return");case 2:if(!n.state.isAdminBlocked&&!n.state.isDeletedUser){e.next=4;break}return e.abrupt("return");case 4:if(n.preventMultipleClick=!0,Object(le.e)("connection_status")!==_.k){e.next=49;break}if(l=null===(a=n.props)||void 0===a||null===(r=a.vCardData)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.fromUser,i=n.props,s=i.activeChatId,u=i.userData.data.roster,p="",s=s+"@"+E.S,h=null,Object($.i)(),"onetoone",l=l+"@"+E.S,v=u.image,f={callMode:"onetoone",callStatus:"CALLING",callType:t,to:s,from:l,userList:s,userAvatar:v},console.log("make call callConnectionStatus",f),Object(le.c)("call_connection_status",JSON.stringify(f)),Object(le.c)("callType",t),Object(le.c)("callingComponent",!0),Object(le.c)("callFrom",Object(le.e)("loggedInUserJidWithResource")),c.a.dispatch(Object(C.a)(f)),g=c.a.getState().showConfrenceData,b=g.data,c.a.dispatch(Object(C.k)({localStream:null===b||void 0===b?void 0:b.localStream,localVideoMuted:null===b||void 0===b?void 0:b.localVideoMuted,localAudioMuted:null===b||void 0===b?void 0:b.localAudioMuted,showComponent:!0,callStatusText:"Calling"})),n.preventMultipleClick=!1,e.prev=27,"audio"!==t){e.next=35;break}return Object(ne.d)(!0),e.next=32,A.a.makeVoiceCall([s],null);case 32:h=e.sent,e.next=40;break;case 35:if("video"!==t){e.next=40;break}return Object(ne.d)(!1),e.next=39,A.a.makeVideoCall([s],null);case 39:h=e.sent;case 40:200!==h.statusCode&&h.message===n.premissionConst?n.deleteAndDispatchAction():(p=h.roomId,Object(le.c)("roomName",p),Z.a.insert({callMode:f.callMode,callState:1,callTime:Z.a.initTime(),callType:f.callType,fromUser:f.from,roomId:p,userList:f.userList}),y=Object(d.a)(Object(d.a)({},f),{},{roomId:p}),Object(le.c)("call_connection_status",JSON.stringify(y)),c.a.dispatch(Object(C.a)(y))),e.next=47;break;case 43:e.prev=43,e.t0=e.catch(27),console.log("Error in making call",e.t0),e.t0.message!==n.premissionConst&&n.deleteAndDispatchAction();case 47:e.next=51;break;case 49:re.b.error(_.E),n.preventMultipleClick=!1;case 51:case"end":return e.stop()}}),e,null,[[27,43]])})));return function(t){return e.apply(this,arguments)}}(),n.closePopup=function(){c.a.dispatch(Object(X.a)())},n.showCallParticipants=function(e){if(!n.isRoomExist()&&!n.state.isAdminBlocked)if(Object(le.e)("connection_status")===_.k){var t=n.props,a=t.groupMemberDetails,r=void 0===a?[]:a,o=t.activeChatId,l=[];if(r.map((function(e){var t,a,r,o=e.userJid,i=e.username,c=e.GroupUser,s=o||i||c;s!==(null===(t=n.props)||void 0===t||null===(a=t.vCardData)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.fromUser)&&l.push(s)})),0===l.length)return re.b.error("You are only one member in the group"),!1;1===l.length?n.makeGroupCall(e,l):(Ut=o+"@mix."+E.S,n.props.callParticiapants({open:!0,modelType:"callparticipants",groupName:Rt,groupMembers:l,groupuniqueId:n.state.groupuniqueId,groupMemberDetails:r,makeGroupCall:n.makeGroupCall,callType:e,currentCallUsersLength:0,selectDefault:!0,closePopup:n.closePopup}))}else re.b.error(_.E)},n.makeGroupCall=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,o,l,i,s,u,p,h,v,f,g,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"!==Object(le.e)("connection_status")){e.next=42;break}if(i=null===(r=n.props)||void 0===r||null===(o=r.vCardData)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.fromUser,s=n.props.activeChatId,u=[],"onetomany",i=i+"@"+E.S,a.length>0?a.forEach((function(e){e!==i&&(e.includes("@")?u.push(e):u.push(e+"@"+E.S))})):u=[s],p="",h=null,Object($.i)(),v={callMode:"onetomany",callStatus:"CALLING",to:Ut,callType:t,from:i,userList:u.join(","),groupId:Ut},Object(le.c)("call_connection_status",JSON.stringify(v)),Object(le.c)("callType",t),Object(le.c)("callingComponent",!0),Object(le.c)("callFrom",Object(le.e)("loggedInUserJidWithResource")),f=c.a.getState().showConfrenceData,g=f.data,c.a.dispatch(Object(C.k)({localStream:null===g||void 0===g?void 0:g.localStream,localVideoMuted:null===g||void 0===g?void 0:g.localVideoMuted,localAudioMuted:null===g||void 0===g?void 0:g.localAudioMuted,showComponent:!0,callStatusText:"Calling"})),c.a.dispatch(Object(C.a)(v)),e.prev=20,"audio"!==t){e.next=28;break}return Object(ne.d)(!0),e.next=25,A.a.makeVoiceCall(u,Ut);case 25:h=e.sent,e.next=33;break;case 28:if("video"!==t){e.next=33;break}return Object(ne.d)(!1),e.next=32,A.a.makeVideoCall(u,Ut);case 32:h=e.sent;case 33:200!==h.statusCode&&h.message!==n.premissionConst?n.deleteAndDispatchAction():(p=h.roomId,Object(le.c)("roomName",p),Z.a.insert({callMode:v.callMode,callState:1,callTime:Z.a.initTime(),callType:v.callType,fromUser:v.from,roomId:p,userList:v.userList,groupId:v.groupId}),b=Object(d.a)(Object(d.a)({},v),{},{roomId:p}),c.a.dispatch(Object(C.a)(b)),Object(le.c)("call_connection_status",JSON.stringify(b)),Object($.j)()),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(20),console.log("Error in making call",e.t0),e.t0.message===n.premissionConst&&n.deleteAndDispatchAction();case 40:e.next=43;break;case 42:re.b.error(_.E);case 43:case"end":return e.stop()}}),e,null,[[20,36]])})));return function(t,a){return e.apply(this,arguments)}}(),n.backToRecentChat=function(){n.props.handlePopUpClassActive(!1)},n.handlePopUp=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.props.popUpData.modalProps.open;t&&!e||n.setState({viewContactStatus:!n.state.viewContactStatus})},n.canSendMessage=function(){var e,t,a,r,o,l,i,c=null===(e=n.props)||void 0===e||null===(t=e.userData)||void 0===t||null===(a=t.data)||void 0===a||null===(r=a.recent)||void 0===r?void 0:r.chatType,s=null===(o=n.props)||void 0===o||null===(l=o.vCardData)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.fromUser,d=n.props.groupsMemberListData,u=(d=void 0===d?{}:d).data,m=(u=void 0===u?{}:u).participants;return"chat"===c||!m||m.find((function(e){return s===e.userId}))},n.state={viewContactStatus:!1,blocked:!1,image:null,displayName:null,userstatus:null,emailId:null,localRoster:{},isAdminBlocked:!1,isDeletedUser:!1},n.preventMultipleClick=!1,n.premissionConst="Permission denied",n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.setUserDetails()}},{key:"componentDidUpdate",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,o,l,i,c,s,d,u,p,h,v,f,g,b,E,C;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=this.props.activeChatId,i=this.props.activeChatData.data,c=(i=void 0===i?{}:i).chatType,s=i.chatId,d=this.props.groupsData,u=(d=void 0===d?{}:d).id,p=this.props.rosterData.data,(null===t||void 0===t||null===(a=t.groupsData)||void 0===a?void 0:a.id)===u||!Object(B.V)(c)){e.next=12;break}return(h=this.filterProfileFromGroup(s))&&(v=h.groupImage,this.setState({displayName:Object(V.d)(h),image:v,userstatus:null})),e.abrupt("return",!0);case 12:if((null===t||void 0===t||null===(n=t.rosterData)||void 0===n?void 0:n.id)===(null===(r=this.props)||void 0===r||null===(o=r.rosterData)||void 0===o?void 0:o.id)||!Object(B.X)(c)){e.next=17;break}return g=this.filterProfileFromRoster(this.props.activeChatId),b=null===(f=p.find((function(e){return(null===e||void 0===e?void 0:e.userId)===l})))||void 0===f?void 0:f.isAdminBlocked,g&&(E=g.image,C=g.isDeletedUser,this.setState({displayName:Object(V.d)(g),image:E,userstatus:g.status,emailId:g.emailId,localRoster:g,isAdminBlocked:b,isDeletedUser:C})),e.abrupt("return",!0);case 17:if(t.activeChatId===l){e.next=20;break}return this.setUserDetails(),e.abrupt("return",!0);case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isRoomExist",value:function(){return null!==Object(le.e)("roomName")}},{key:"render",value:function(){var e=this,t=this.props||{},a=t.groupMemberDetails,o=t.activeChatId,l=t.displayNames,i=t.userData,c=(i=void 0===i?{}:i).data,s=(c=void 0===c?{}:c).chatId,d=void 0===s?"":s,u=c.recent,m=u.chatType,p=void 0===m?"":m,h=u.fromUserId,v=void 0===h?"":h,f=Object(le.e)("token"),g="chat"===p?w.Pc:w.Qc,b=this.canSendMessage(),E=this.state.localRoster.mobileNumber,C=this.state,y=C.image,O=C.displayName,j=C.emailId,N=Object(V.m)(this.state.localRoster,O);return Rt=O,this.props.blockedContact.data.indexOf(Object(V.c)(o))>-1&&(b=!1),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"conversation-header"},r.a.createElement("div",{className:"user-profile-name"},r.a.createElement("i",{className:"arrow-icon",onClick:this.backToRecentChat},r.a.createElement(w.b,null)),r.a.createElement("div",{className:"user-profile-name",onClick:this.handlePopUp},r.a.createElement(fe.a,{chatType:p||"chat",userToken:f,imageToken:this.state.isAdminBlocked?"":y,emailId:j,userId:Object(V.g)(o),name:N}),r.a.createElement("div",{className:"profile-name"},r.a.createElement("h4",null,O||v),!this.state.isAdminBlocked&&!this.state.isDeletedUser&&r.a.createElement(Be,{fromUserId:d,jid:o,contactNames:l,chatType:p})))),r.a.createElement("div",{className:"profile-options"},b&&("chat"===p||"groupchat"===p)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{title:this.props.showonGoingcallDuration?"You are already in call":"Audio call",onClick:"chat"===p?function(){return e.makeOne2OneCall("audio")}:function(){return e.showCallParticipants("audio")},className:"audioCall ".concat(this.props.showonGoingcallDuration||this.state.isAdminBlocked||this.state.isDeletedUser?"calldisabled":"")},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(w.j,null)),r.a.createElement("i",{title:this.props.showonGoingcallDuration?"You are already in call":"Video call",onClick:"chat"===p?function(){return e.makeOne2OneCall("video")}:function(){return e.showCallParticipants("video")},className:"videoCall ".concat(this.props.showonGoingcallDuration||this.state.isAdminBlocked||this.state.isDeletedUser?"calldisabled":"")},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(w.wd,null))))),this.state.viewContactStatus&&r.a.createElement(xt,{rosterName:O,rosterImage:y,activeChatId:o,chatType:p,userstatus:this.state.userstatus,onInfoClose:this.handlePopUp,avatarIcon:g,participants:a,handlePopUpClassActive:this.props.handlePopUpClassActive,mobileNumber:E,roster:this.state.localRoster,isAdminBlocked:this.state.isAdminBlocked}))}}]),a}(r.a.Component),Bt={callParticiapants:X.b},_t=Object(o.b)((function(e){return{popUpData:e.popUpData,messageData:e.messageData,blockedContact:e.blockedContact,vCardData:e.vCardData,groupsMemberListData:e.groupsMemberListData,rosterData:e.rosterData,groupsData:e.groupsData,contactsWhoBlockedMe:e.contactsWhoBlockedMe,activeChatData:e.activeChatData}}),Bt)(Ft),Vt=(a(662),a(65)),Gt=a(31),Ht=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(f.a)(n)),n}return Object(v.a)(a,[{key:"componentWillMount",value:function(){document.body.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.handleClick)}},{key:"handleClick",value:function(e){var t=this.refs.container,a=this.props.onClickOutside,n=e.target;"function"===typeof a&&(n===t||t.contains(n)||a(e))}},{key:"render",value:function(){return r.a.createElement("div",{ref:"container"},this.props.children)}}]),a}(n.Component),Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,a=e.msgId,o=e.recall,l=e.chatType,i=void 0===l?"":l,c=e.closeDropDown,s=e.messageInfoOptions,d=void 0===s||s,u=e.isSender,m=e.msgType,p=e.favouriteStatus,h=Object(B.X)(i),v=document&&document.getElementById("message-containner"),f=v&&v.clientHeight,g=Object(n.useState)(!1),b=Object(Re.a)(g,2),E=b[0],C=b[1];return r.a.useLayoutEffect((function(){var e=document.getElementById("".concat(a)),t=document.querySelector(".menu-dropdown");if(e){if(f-e.getBoundingClientRect().top-85<t.getBoundingClientRect().height){C(!0);var n=t.getBoundingClientRect().height+4,r="-".concat(n,"px");E&&(t.style.top=r)}else C(!1);t.style.display="block"}}),[E]),r.a.createElement(qe.a,{onOutsideClick:function(e){setTimeout((function(){e.preventDefault(),c&&c()}),100)}},r.a.createElement("ul",{style:{display:"none",padding:o?0:""},className:"menu-dropdown open ".concat(E?"popup-top":""),onClick:function(e){t(e),e.stopPropagation()}},!o&&r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"reply",title:"Reply"},r.a.createElement("i",null,r.a.createElement(w.Mc,null)),r.a.createElement("span",null,"Reply")),r.a.createElement("li",{className:"forward",title:"Forward"},r.a.createElement("i",null,r.a.createElement(w.pb,null)),r.a.createElement("span",null,"Forward")),0===p?r.a.createElement("li",{className:"Starred",title:"Starred"},r.a.createElement("i",null,r.a.createElement(w.dd,null)),r.a.createElement("span",null,"Star")):r.a.createElement("li",{className:"Starred",title:"UnStarred"},r.a.createElement("i",null,r.a.createElement(w.qd,null)),r.a.createElement("span",null,"Unstar"))),r.a.createElement("li",{className:"delete",title:"Delete"},r.a.createElement("i",null,r.a.createElement(w.U,null)),r.a.createElement("span",null,"Delete")),!h&&!o&&!u&&d&&r.a.createElement("li",{className:"messageinfo 1",title:"MessageInfo"},r.a.createElement("i",null,r.a.createElement(w.lc,null))," ",r.a.createElement("span",null,"Message Info")),_.w.includes(m)&&r.a.createElement("li",{className:"Download",title:"Download"},r.a.createElement("i",null,r.a.createElement(w.Z,null))," ",r.a.createElement("span",null,"Download")),u&&r.a.createElement("li",{className:"Report",title:"Report"},r.a.createElement("i",null,r.a.createElement(w.Nb,null)),r.a.createElement("span",null,"Report"))))},qt=r.a.memo((function(e){var t=e.isSender,a=void 0===t||t,n=e.chatType,o=void 0===n?"":n,l=e.messageInfoOptions,i=void 0===l||l,c=e.recall,s=e.handleDropDown,d=e.msgid,u=e.msgType,m=e.favouriteStatus,p=e.messageAction,h=void 0===p?function(){}:p,v=e.closeDropDown,f=e.messageObject;return r.a.createElement(Ht,{onClickOutside:s},r.a.createElement(Jt,{closeDropDown:v,msgId:d,recall:c,isSender:a,chatType:o,action:h,messageInfoOptions:i,msgType:u,favouriteStatus:m,messageObject:f}))}));function Wt(e){var t=e.msgid,a=e.timestamp,l=e.forward,i=e.forwardMessageId,c=e.favouriteStatus,s=e.selectedToForward,d=void 0===s?function(){}:s,u=Object(n.useState)(!1),m=Object(Re.a)(u,2),p=m[0],h=m[1],v=Object(o.c)();return Object(n.useEffect)((function(){return i===t&&!p&&l&&(h(!0),d(!0),v(Object(Vt.c)({msgId:t,timestamp:a,favouriteStatus:c}))),l||h(!1),function(){return d(!1)}}),[l,i]),r.a.createElement(n.Fragment,null,r.a.createElement("label",{className:"forwardLabel",htmlFor:"for"+t}),r.a.createElement("div",{className:"forwardedMessage"},r.a.createElement("div",{className:"selectForwardMessage"},r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{"data-jest-id":"jestHandleChange",checked:p,onChange:function(){v(!1===p?Object(Vt.c)({msgId:t,timestamp:a,favouriteStatus:c}):Object(Vt.d)(t)),h(!p),d(!p)},id:"for"+t,type:"checkbox"}),r.a.createElement("label",{htmlFor:"for"+t})))),r.a.createElement("div",null))}var Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.latitude,a=void 0===t?0:t,o=e.longitude,l=void 0===o?0:o,i=E.E,c="".concat(Le.w,"?center=").concat(a,",").concat(l,"&zoom=13&size=200x200&markers=color:red|").concat(a,",").concat(l,"&key=").concat(i);return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"message-location"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.google.com/maps/?q=".concat(a,",").concat(l)},r.a.createElement("img",{src:c,alt:"location-map"}))))},zt=(r.a.memo((function(e){var t=e.file_url,a=e.caption,n=Object(le.e)("token");return r.a.createElement(z.a,{chattype:null,temporary:!1,classProps:{"webchat-conver-image":!0},userToken:n,imageToken:t,imageType:"chatimages",caption:a})})),r.a.memo((function(e){var t=e.thumb_image,a=e.caption,n="data:image/png;base64,".concat(t);return r.a.createElement("img",{className:"webchat-conver-image ".concat(""===a?"no-caption":""),src:n,alt:"chat-img"})})),r.a.memo((function(e){var t=e.msgId,a=e.viewOriginalMessage,l=e.groupMemberDetails,i=e.chatType,c=r.a.createRef(),s=Object(n.useState)(!1),d=Object(Re.a)(s,2),u=d[0],m=d[1],p=Object(o.d)((function(e){var a,n;return(null===e||void 0===e||null===(a=e.replyMessageData)||void 0===a?void 0:a.data)?{replyMessageData:e.replyMessageData.data.find((function(e){return e&&e.replyMsgId===t})),rosterData:null===(n=e.rosterData)||void 0===n?void 0:n.data,vCardData:e.vCardData}:{}}));Object(n.useEffect)((function(){var e;m((e=c).offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)}),[u,p]);var h=(p||{}).replyMessageData;if(!h)return null;var v=h.replyMsgId,f=h.fromUserId,g=h.replyMsgContent,b=g.message,E=g.message_type,C=g.media,y=void 0===C?{}:C,O=g.location,j=(O=void 0===O?{}:O).latitude,N=O.longitude,k=g.contact,S=(k=void 0===k?{}:k).name,D=y.fileName,M=y.duration,I=y.caption,T=y.audioType,P=y.thumb_image,A=Object(R.b)(D),L=F(null,A),U=function(e){return e.length>90?e.substring(0,90).concat("..."):e};return r.a.createElement("div",{className:"reply-container",onClick:function(e){e.stopPropagation(),a(v,t)}},r.a.createElement("div",{className:"reply-text-message "},r.a.createElement("span",{className:"sender-name"},Object(V.o)(f)?"You":Object(B.X)(i)?function(e,t){var a=e.find((function(e){var a=e.username?e.username:e.userId;return t===a}));return Object(B.h)(a,t)}((p||{}).rosterData,f):Object(B.y)(f,l).nameToDisplay),Object(B.ab)(E)&&r.a.createElement("span",{id:"reply-".concat(t),ref:function(e){return c=e},className:"sender-sends"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:U(b)}})," "),u?r.a.createElement("span",{className:"sender-sends"},"..."):"","image"===E&&r.a.createElement("span",{className:"sender-sends ReplyCamera"},""===I?"Photo":U(I)),"video"===E&&r.a.createElement("span",{className:"sender-sends ReplyVideo"},""===I?"Video":U(I)),"audio"===E&&r.a.createElement("span",{className:"sender-sends AudioMessage Recorded"},Object(x.Y)(M)),"file"===E&&r.a.createElement("span",{className:"sender-sends filename"},D),"contact"===E&&r.a.createElement("span",{className:"sender-sends ReplyContact"},S),"location"===E&&r.a.createElement("span",{className:"sender-sends location"}," Location")),!Object(B.ab)(E)&&r.a.createElement("div",{className:"reply-message-type ".concat("audio"===E?"audio":"")},"image"===E&&r.a.createElement("img",{src:Object(x.M)(P),className:"webchat-conver-image ".concat(""===I?"no-caption":""),alt:"reply message"}),"audio"===E&&r.a.createElement("span",{className:"webchat-conver-image"},r.a.createElement("i",{className:"audio-icon"},"recording"!==T?r.a.createElement(w.A,null):r.a.createElement(w.B,null))),"video"===E&&r.a.createElement("img",{src:Object(x.M)(P),className:"webchat-conver-image ".concat(""===I?"no-caption":""),alt:"reply message"}),"file"===E&&r.a.createElement("span",{className:"webchat-conver-image"},r.a.createElement("i",{className:"doc-icon"},r.a.createElement("img",{alt:"file",src:L}))),"contact"===E&&r.a.createElement("img",{src:w.E,alt:""}),"location"===E&&r.a.createElement("span",{className:"webchat-conver-image no-caption"},r.a.createElement(Kt,{latitude:j,longitude:N}))))}))),Yt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return r.a.createElement("span",{className:"message-time"},r.a.createElement("span",{className:"msg-sent-time"},1===a&&r.a.createElement("i",{className:"starredIcon"},n?r.a.createElement(w.cd,null):r.a.createElement(w.bd,null)),"image"!==o||"video"!==o?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,e),r.a.createElement("span",null,Object(x.s)(t))):r.a.createElement(r.a.Fragment,null,e,Object(x.s)(t))))},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.msgId,a=void 0===t?"":t,n=e.caption,o=void 0===n?"":n,l=e.handleDropDown,i=e.isSender,c=void 0!==i&&i,s=e.forward,d=void 0!==s&&s,u=e.uploadStatus,m=void 0===u?0:u,p=e.messageInfoOptions,h=e.sentMessageToParent,v=e.dropDownStatus,f=void 0!==v&&v,g=e.msgType,b=void 0===g?"":g,E=e.chatType,C=void 0===E?"":E,y=e.favouriteStatus,O=e.pageType,j=e.messageObject,N=e.isTranslatable,k=e.isEnableTranslate,S=e.handleTranslateLanguage;return r.a.createElement(r.a.Fragment,null,2===m&&!d&&"conversation"===O&&r.a.createElement("div",{className:"".concat(N&&k?"drop-lg":""," message-dropdown-menu")},r.a.createElement("span",{className:"message-dropdown"},k&&c&&N&&""!==o&&r.a.createElement("span",{onClick:function(){return S(a,j)},className:"translateIcon"}," ",r.a.createElement(w.nd,null)),r.a.createElement("span",{className:"actionDrop",onClick:l}),r.a.createElement("i",null,r.a.createElement(w.kc,null))),f&&r.a.createElement(qt,{msgid:a,isSender:c,handleDropDown:l,messageAction:h,messageInfoOptions:p,msgType:b,chatType:C,favouriteStatus:y,messageObject:j})))},Xt=a(38),Qt=function(e){var t=Object(n.useState)(""),a=Object(Re.a)(t,2),o=a[0],l=a[1];return r.a.createElement("div",{className:"search"},r.a.createElement("input",{type:"text",className:"search-contacts",name:"search-contacts",autoComplete:"off",placeholder:"Search",value:o,onChange:function(t){var a=t.target.value;0===a.trim().length?(l(a),e.search("")):(l(a),e.search(a))}}),r.a.createElement("i",{className:""}," ",!o&&r.a.createElement(w.Uc,null)),r.a.createElement("i",{className:"",onClick:function(){l(""),e.search("")}},o&&r.a.createElement(w.J,null)))};function $t(){return($t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ea(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ta=r.a.createElement("g",{transform:"translate(0.4 0.4)"},r.a.createElement("path",{stroke:"#fff",strokeWidth:"0.8px",d:"M14.98,2.6A8.72,8.72,0,0,0,8.79,0a8.79,8.79,0,1,0,8.79,8.79A8.72,8.72,0,0,0,14.98,2.6ZM8.79,15.485A6.693,6.693,0,0,1,3.382,4.845l9.353,9.342A6.564,6.564,0,0,1,8.79,15.485Zm5.4-2.75L4.845,3.382A6.693,6.693,0,0,1,15.485,8.79,6.564,6.564,0,0,1,14.187,12.735Z"})),aa=function(e){var t=e.svgRef,a=e.title,n=ea(e,["svgRef","title"]);return r.a.createElement("svg",$t({width:18.379,height:18.379,viewBox:"0 0 18.379 18.379",ref:t},n),a?r.a.createElement("title",null,a):null,ta)},na=r.a.forwardRef((function(e,t){return r.a.createElement(aa,$t({svgRef:t},e))}));a.p;function ra(){return(ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function oa(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var la=r.a.createElement("g",{stroke:"#fff",strokeWidth:.6},r.a.createElement("path",{d:"M9.313.3a9.013 9.013 0 109.013 9.013A9.023 9.023 0 009.313.3zm0 16.387a7.374 7.374 0 117.374-7.374 7.382 7.382 0 01-7.374 7.374z"}),r.a.createElement("path",{d:"M9.312 4.124a1.092 1.092 0 101.092 1.093 1.094 1.094 0 00-1.092-1.093zM9.312 7.947a.819.819 0 00-.819.819v4.916a.82.82 0 101.639 0V8.766a.819.819 0 00-.82-.819z"})),ia=function(e){var t=e.svgRef,a=e.title,n=oa(e,["svgRef","title"]);return r.a.createElement("svg",ra({width:18.625,height:18.625,viewBox:"0 0 18.625 18.625",ref:t},n),a?r.a.createElement("title",null,a):null,la)},ca=r.a.forwardRef((function(e,t){return r.a.createElement(ia,ra({svgRef:t},e))}));a.p;function sa(){return(sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function da(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ua=r.a.createElement("g",{transform:"translate(.2 .2)"},r.a.createElement("circle",{stroke:"#fff",strokeWidth:".4px",cx:.88,cy:.88,r:.88,transform:"translate(8.133 12.445)"}),r.a.createElement("path",{stroke:"#fff",strokeWidth:".4px",d:"M9.013 0a9.013 9.013 0 109.013 9.013A9.008 9.008 0 009.013 0zm0 16.617a7.6 7.6 0 117.6-7.6 7.6 7.6 0 01-7.6 7.6z"}),r.a.createElement("path",{stroke:"#fff",strokeWidth:".4px",d:"M9.012 4.524A2.82 2.82 0 006.196 7.34a.704.704 0 101.408 0 1.408 1.408 0 111.408 1.408.7.7 0 00-.7.7v1.76a.704.704 0 101.408 0v-1.145a2.817 2.817 0 00-.7-5.544z"})),ma=function(e){var t=e.svgRef,a=e.title,n=da(e,["svgRef","title"]);return r.a.createElement("svg",sa({width:18.425,height:18.425,viewBox:"0 0 18.425 18.425",ref:t},n),a?r.a.createElement("title",null,a):null,ua)},pa=r.a.forwardRef((function(e,t){return r.a.createElement(ma,sa({svgRef:t},e))}));a.p;function ha(){return(ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function va(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var fa=r.a.createElement("g",{transform:"translate(-0.332 18.723) rotate(-90)"},r.a.createElement("path",{d:"M161.746,220.221h-11.8a.611.611,0,1,1,0-1.221h11.8a.611.611,0,1,1,0,1.221Zm0,0",transform:"translate(-143.634 -210.324)"}),r.a.createElement("path",{d:"M8.954,18.241a8.954,8.954,0,1,1,8.334-12.23.611.611,0,1,1-1.136.447,7.733,7.733,0,1,0,0,5.658.611.611,0,1,1,1.136.447,8.909,8.909,0,0,1-8.334,5.678Zm0,0"})),ga=function(e){var t=e.svgRef,a=e.title,n=va(e,["svgRef","title"]);return r.a.createElement("svg",ha({width:17.909,height:18.723,viewBox:"0 0 17.909 18.723",ref:t},n),a?r.a.createElement("title",null,a):null,fa)},ba=r.a.forwardRef((function(e,t){return r.a.createElement(ga,ha({svgRef:t},e))}));a.p;function Ea(){return(Ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ca(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ya=r.a.createElement("path",{d:"M6 5a.681.681 0 01-.216.5L1.258 9.8a.765.765 0 01-1.042 0 .676.676 0 010-.99l4-3.8-4-3.8a.676.676 0 010-.99.765.765 0 011.042 0l4.526 4.3A.681.681 0 016 5z",fill:"#767676"}),Oa=function(e){var t=e.svgRef,a=e.title,n=Ca(e,["svgRef","title"]);return r.a.createElement("svg",Ea({width:6,height:10,ref:t},n),a?r.a.createElement("title",null,a):null,ya)},ja=r.a.forwardRef((function(e,t){return r.a.createElement(Oa,Ea({svgRef:t},e))}));a.p;function Na(){return(Na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ka(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Sa=r.a.createElement("g",{transform:"translate(-30.999)"},r.a.createElement("path",{d:"M43.31,8.516V6.966A5.031,5.031,0,0,0,39.746,2.16v-.7a1.458,1.458,0,1,0-2.916,0v.7a5.031,5.031,0,0,0-3.564,4.806V8.516a7.631,7.631,0,0,1-2.133,5.305.486.486,0,0,0,.351.822h4.423a2.43,2.43,0,0,0,4.762,0h4.423a.486.486,0,0,0,.351-.822A7.631,7.631,0,0,1,43.31,8.516ZM37.8,1.458a.486.486,0,1,1,.972,0v.51c-.16-.015-.322-.024-.486-.024s-.326.008-.486.024Zm.486,14.158a1.46,1.46,0,0,1-1.374-.972h2.749A1.46,1.46,0,0,1,38.288,15.616Zm-5.756-1.944a8.592,8.592,0,0,0,1.706-5.156V6.966a4.05,4.05,0,1,1,8.1,0V8.516a8.592,8.592,0,0,0,1.706,5.156Z"}),r.a.createElement("path",{d:"M391.485,56.8a.486.486,0,1,0,.972,0,7.242,7.242,0,0,0-2.135-5.155.486.486,0,0,0-.687.687A6.276,6.276,0,0,1,391.485,56.8Z",transform:"translate(-346.879 -49.838)"}),r.a.createElement("path",{d:"M31.486,57.29a.486.486,0,0,0,.486-.486,6.276,6.276,0,0,1,1.85-4.467.486.486,0,0,0-.687-.687A7.242,7.242,0,0,0,31,56.8.486.486,0,0,0,31.486,57.29Z",transform:"translate(-0.001 -49.839)"})),wa=function(e){var t=e.svgRef,a=e.title,n=ka(e,["svgRef","title"]);return r.a.createElement("svg",Na({width:14.579,height:16.588,viewBox:"0 0 14.579 16.588",ref:t},n),a?r.a.createElement("title",null,a):null,Sa)},Da=r.a.forwardRef((function(e,t){return r.a.createElement(wa,Na({svgRef:t},e))}));a.p;function Ma(){return(Ma=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ia(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Ta=r.a.createElement("g",{id:"Group_15548","data-name":"Group 15548",transform:"translate(-135.13 -246.783)"},r.a.createElement("g",{id:"time-management",transform:"translate(135.13 246.783)"},r.a.createElement("path",{id:"Path_13765","data-name":"Path 13765",d:"M75.082,86.011,73.033,98.5a2.485,2.485,0,0,0,.481,1.915l4.349,5.667a2.485,2.485,0,0,0,3.943,0l4.349-5.667a2.485,2.485,0,0,0,.481-1.915L84.586,86.011a20.986,20.986,0,0,1-2.45.418l2.046,12.477-4.349,5.667-4.349-5.667,2.046-12.477a20.993,20.993,0,0,1-2.45-.418Z",transform:"translate(-27.649 -34.509)",fill:"#c7d6f6"}),r.a.createElement("ellipse",{id:"Ellipse_1595","data-name":"Ellipse 1595",cx:1.243,cy:1.243,rx:1.243,ry:1.243,transform:"translate(0 89.323)",fill:"#d1defd"}),r.a.createElement("path",{id:"Path_13768","data-name":"Path 13768",d:"M9.106,146.89H7.243a1.243,1.243,0,0,0,0,2.485H9.106a1.243,1.243,0,0,0,0-2.485Zm92.566,0H99.809a1.243,1.243,0,0,0,0,2.485h1.864a1.243,1.243,0,0,0,0-2.485Z",transform:"translate(-2.272 -57.567)",fill:"#c7d6f6"}),r.a.createElement("ellipse",{id:"Ellipse_1596","data-name":"Ellipse 1596",cx:1.243,cy:1.243,rx:1.243,ry:1.243,transform:"translate(101.885 89.323)",fill:"#d1defd"}),r.a.createElement("path",{id:"Path_13769","data-name":"Path 13769",d:"M91.583,142.013H86.422a1.246,1.246,0,0,0,0,2.485h5.161a1.246,1.246,0,0,0,0-2.485Zm-37.275,0H49.147a1.246,1.246,0,0,0,0,2.485h5.161a1.246,1.246,0,0,0,0-2.485Zm28.482,0H57.94a1.243,1.243,0,0,0,0,2.485h9.9v1.242H62.91a1.243,1.243,0,1,0,0,2.485H78.441a1.243,1.243,0,0,0,0-2.485H72.887V144.5h9.9a1.243,1.243,0,0,0,0-2.485Zm-24.85-19.88v14.91H55.455v-14.91a1.243,1.243,0,1,1,2.485,0Zm27.335,0v14.91H82.79v-14.91a1.242,1.242,0,1,1,2.485,0Z",transform:"translate(-18.18 -47.719)",fill:"#c7d6f6"}),r.a.createElement("path",{id:"Path_13770","data-name":"Path 13770",d:"M100.733,93.676a1.34,1.34,0,0,1-1.416,1.243h-82.9a1.253,1.253,0,1,1,0-2.485H31.2a4.957,4.957,0,0,1-.671-2.485V66.341a27.3,27.3,0,0,1,9.627-20.8,21.251,21.251,0,0,0,1.474,2,24.779,24.779,0,0,0-8.617,18.805V89.949A2.484,2.484,0,0,0,35.5,92.434h44.73a2.484,2.484,0,0,0,2.485-2.485V66.341A24.779,24.779,0,0,0,74.1,47.536a21.251,21.251,0,0,0,1.472-2A27.3,27.3,0,0,1,85.2,66.341V89.949a4.957,4.957,0,0,1-.671,2.485H99.316A1.34,1.34,0,0,1,100.733,93.676ZM83.953,28.134a1.864,1.864,0,1,0-1.864-1.864,1.864,1.864,0,0,0,1.864,1.864Zm0-2.8a.932.932,0,1,1-.932.932A.932.932,0,0,1,83.953,25.338ZM99.49,43.355a1.243,1.243,0,1,0,1.243,1.243A1.242,1.242,0,0,0,99.49,43.355Zm0,1.864a.621.621,0,1,1,.621-.621A.621.621,0,0,1,99.49,45.218ZM17.278,4.837A1.243,1.243,0,1,0,18.52,6.079a1.243,1.243,0,0,0-1.242-1.243Zm0,1.864a.621.621,0,1,1,.621-.621.621.621,0,0,1-.621.621Zm71.03-3.59A1.243,1.243,0,1,0,89.55,4.353,1.243,1.243,0,0,0,88.308,3.11Zm0,1.864a.621.621,0,1,1,.621-.621A.621.621,0,0,1,88.308,4.974ZM26.182,39.88a1.243,1.243,0,1,0-1.243,1.243A1.243,1.243,0,0,0,26.182,39.88Zm-1.864,0a.621.621,0,1,1,.621.621.621.621,0,0,1-.621-.621Z",transform:"translate(-5.681 -3.111)",fill:"#9dbafc"}),r.a.createElement("path",{id:"Path_13771","data-name":"Path 13771",d:"M5.206,44.889l.924-1.215-.583-.331L4.954,44.7h-.02l-.6-1.351-.594.34.914,1.186V44.9l-1.429-.185v.661l1.439-.185v.02L3.738,46.4l.554.35.632-1.371h.019l.583,1.361.613-.35-.933-1.167V45.2l1.467.175v-.661l-1.467.194Z",transform:"translate(-1.221 -18.349)",fill:"#c7d6f6"}),r.a.createElement("path",{id:"Path_13772","data-name":"Path 13772",d:"M47.229,26.472l-.532.683.319.2.364-.79h.011l.335.783.353-.2-.537-.672v-.011l.845.1v-.381l-.845.112v-.011l.532-.7-.335-.19-.342.783h-.011L47.04,25.4l-.342.2.527.683v.011l-.823-.107v.381l.828-.106Z",transform:"translate(-17.574 -11.552)",fill:"#0bceb2"}),r.a.createElement("path",{id:"Path_13773","data-name":"Path 13773",d:"M159.966,24.7v-.648l-1.439.191v-.019l.906-1.192-.572-.324-.581,1.334h-.019l-.591-1.325-.582.334.9,1.163v.019l-1.4-.181V24.7l1.411-.181v.019l-.906,1.163.544.344.62-1.345h.019l.572,1.335.6-.343-.915-1.144v-.019Z",transform:"translate(-59.305 -10.534)",fill:"#c7d6f6"}),r.a.createElement("path",{id:"Path_13774","data-name":"Path 13774",d:"M78.979,5.1l.781-1.028-.493-.28-.5,1.151h-.017L78.238,3.8l-.5.288.773,1V5.11L77.3,4.953v.559l1.218-.156v.016l-.782,1,.469.3.535-1.16h.016l.493,1.152.518-.3-.789-.987V5.365l1.241.148V4.953l-1.241.165Z",transform:"translate(-29.277 -3.369)",fill:"#c7d6f6"})),r.a.createElement("g",{id:"signal",transform:"translate(167.79 258.557)"},r.a.createElement("g",{id:"Group_15495","data-name":"Group 15495",transform:"translate(0 -0.001)"},r.a.createElement("path",{id:"Path_13717","data-name":"Path 13717",d:"M33.258,5.771A19.36,19.36,0,0,0,19.514,0,19.515,19.515,0,1,0,39.029,19.515,19.36,19.36,0,0,0,33.258,5.771ZM19.514,34.379A14.86,14.86,0,0,1,7.509,10.756L28.273,31.5A14.574,14.574,0,0,1,19.514,34.379ZM31.5,28.273,10.756,7.509A14.86,14.86,0,0,1,34.379,19.515,14.574,14.574,0,0,1,31.5,28.273Z",fill:"#9dbafc",stroke:"#fff",strokeWidth:2.5})))),Pa=function(e){var t=e.svgRef,a=e.title,n=Ia(e,["svgRef","title"]);return r.a.createElement("svg",Ma({width:104.37,height:100.506,viewBox:"0 0 104.37 100.506",ref:t},n),a?r.a.createElement("title",null,a):null,Ta)},Aa=r.a.forwardRef((function(e,t){return r.a.createElement(Pa,Ma({svgRef:t},e))}));a.p;function La(){return(La=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function xa(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Ua=r.a.createElement("g",{id:"noun_chat_4059929",transform:"translate(-1.9 -1.9)"},r.a.createElement("g",{id:"Group_15747","data-name":"Group 15747",transform:"translate(2 2)"},r.a.createElement("path",{id:"Path_13821","data-name":"Path 13821",d:"M16.786,2H5.214A3.214,3.214,0,0,0,2,5.214V13.8a2.353,2.353,0,0,0,2.346,2.346.244.244,0,0,1,.174.424,1.524,1.524,0,0,0-.167,1.974,1.5,1.5,0,0,0,1.241.643,1.652,1.652,0,0,0,.643-.148l5.786-2.719a1.929,1.929,0,0,1,.836-.174h3.928A3.214,3.214,0,0,0,20,12.929V5.214A3.214,3.214,0,0,0,16.786,2Zm1.929,10.929a1.929,1.929,0,0,1-1.929,1.929H12.858a3.131,3.131,0,0,0-1.363.309L5.709,17.885a.238.238,0,0,1-.315-.084.231.231,0,0,1,0-.321,1.539,1.539,0,0,0-1.048-2.623A1.061,1.061,0,0,1,3.286,13.8V5.214A1.929,1.929,0,0,1,5.214,3.286H16.786a1.929,1.929,0,0,1,1.929,1.929Z",transform:"translate(-2 -2)",stroke:"#fff",strokeWidth:.2}),r.a.createElement("circle",{id:"Ellipse_1568","data-name":"Ellipse 1568",cx:1.286,cy:1.286,r:1.286,transform:"translate(3.214 5.786)",stroke:"#fff",strokeWidth:.2}),r.a.createElement("circle",{id:"Ellipse_1569","data-name":"Ellipse 1569",cx:1.286,cy:1.286,r:1.286,transform:"translate(7.714 5.786)",stroke:"#fff",strokeWidth:.2}),r.a.createElement("circle",{id:"Ellipse_1570","data-name":"Ellipse 1570",cx:1.286,cy:1.286,r:1.286,transform:"translate(12.214 5.786)",stroke:"#fff",strokeWidth:.2}))),Ra=function(e){var t=e.svgRef,a=e.title,n=xa(e,["svgRef","title"]);return r.a.createElement("svg",La({width:18.2,height:17.384,viewBox:"0 0 18.2 17.384",ref:t},n),a?r.a.createElement("title",null,a):null,Ua)},Fa=r.a.forwardRef((function(e,t){return r.a.createElement(Ra,La({svgRef:t},e))}));a.p;function Ba(){return(Ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function _a(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Va=r.a.createElement("g",{transform:"translate(0 0)"},r.a.createElement("path",{d:"M14.536,16.963a1.4,1.4,0,0,0-.725-.334L10.5,16.148l-1.482-3a1.4,1.4,0,0,0-2.517,0l-1.482,3L1.7,16.63a1.4,1.4,0,0,0-.778,2.394l2.4,2.337-.566,3.3a1.4,1.4,0,0,0,2.037,1.48l2.964-1.558,2.964,1.558a1.4,1.4,0,0,0,2.037-1.48l-.566-3.3,2.4-2.337a1.405,1.405,0,0,0-.053-2.06Zm-.669,1.32-2.648,2.581a.369.369,0,0,0-.106.327l.625,3.645a.368.368,0,0,1-.536.389L7.929,23.5a.369.369,0,0,0-.344,0L4.312,25.225a.368.368,0,0,1-.536-.389L4.4,21.191a.369.369,0,0,0-.106-.327L1.647,18.283a.369.369,0,0,1,.2-.63l3.66-.532a.369.369,0,0,0,.278-.2L7.425,13.6a.369.369,0,0,1,.662,0l1.637,3.316a.369.369,0,0,0,.278.2l3.66.532A.369.369,0,0,1,13.867,18.283Z",transform:"translate(-0.488 -12.351)"}),r.a.createElement("path",{d:"M10.885,25.83a1.421,1.421,0,0,1-.659-.163L7.268,24.111,4.31,25.667a1.415,1.415,0,0,1-2.054-1.492l.565-3.294L.428,18.547a1.415,1.415,0,0,1,.785-2.415l3.307-.481,1.479-3a1.415,1.415,0,0,1,2.539,0l1.479,3,3.307.481a1.415,1.415,0,0,1,.785,2.415L11.716,20.88l.565,3.294a1.416,1.416,0,0,1-1.4,1.656ZM7.268,24.084l.006,0,2.964,1.558a1.391,1.391,0,0,0,2.019-1.467l-.567-3.306,2.4-2.342a1.391,1.391,0,0,0-.771-2.374L10,15.674l0-.006-1.482-3a1.391,1.391,0,0,0-2.5,0L4.536,15.674H4.529l-3.314.481A1.391,1.391,0,0,0,.445,18.53l2.4,2.342v.006l-.566,3.3A1.391,1.391,0,0,0,4.3,25.645Zm3.617.712a.378.378,0,0,1-.178-.045L7.435,23.03a.363.363,0,0,0-.333,0L3.829,24.751a.378.378,0,0,1-.178.045.383.383,0,0,1-.293-.138.374.374,0,0,1-.083-.309L3.9,20.7a.357.357,0,0,0-.1-.316L1.15,17.807a.381.381,0,0,1,.211-.651l3.66-.532a.357.357,0,0,0,.269-.2l1.637-3.316a.381.381,0,0,1,.684,0l1.637,3.316a.357.357,0,0,0,.269.2l3.66.532a.381.381,0,0,1,.211.651l-2.648,2.581a.357.357,0,0,0-.1.316l.625,3.645a.374.374,0,0,1-.083.309A.383.383,0,0,1,10.885,24.8ZM7.268,22.965a.383.383,0,0,1,.178.044l3.273,1.721a.355.355,0,0,0,.166.042.359.359,0,0,0,.275-.129.35.35,0,0,0,.078-.289l-.625-3.645a.381.381,0,0,1,.11-.338l2.648-2.581a.357.357,0,0,0-.2-.609l-3.66-.532a.381.381,0,0,1-.287-.209L7.589,13.124a.357.357,0,0,0-.641,0L5.311,16.44a.381.381,0,0,1-.287.209l-3.66.532a.357.357,0,0,0-.2.609l2.648,2.581a.381.381,0,0,1,.11.338L3.3,24.353a.35.35,0,0,0,.078.289.359.359,0,0,0,.275.129.355.355,0,0,0,.166-.042l3.273-1.721A.383.383,0,0,1,7.268,22.965Z",transform:"translate(0 -11.866)"})),Ga=function(e){var t=e.svgRef,a=e.title,n=_a(e,["svgRef","title"]);return r.a.createElement("svg",Ba({width:14,height:14,viewBox:"0 0 14.537 13.964",ref:t},n),a?r.a.createElement("title",null,a):null,Va)},Ha=r.a.forwardRef((function(e,t){return r.a.createElement(Ga,Ba({svgRef:t},e))}));a.p;function Ja(){return(Ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function qa(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Wa=r.a.createElement("g",{id:"archive",transform:"translate(-2581 -13873)"},r.a.createElement("rect",{id:"Rectangle_4629","data-name":"Rectangle 4629",width:15,height:15,transform:"translate(2581 13873)",fill:"none"}),r.a.createElement("g",{id:"Group_16195","data-name":"Group 16195",transform:"translate(0 0.668)"},r.a.createElement("rect",{id:"Rectangle_4629-2","data-name":"Rectangle 4629",width:15,height:15,transform:"translate(2581 13873)",fill:"none"}),r.a.createElement("path",{id:"black",d:"M-2455.969,12A2.033,2.033,0,0,1-2458,9.969V1.031A2.034,2.034,0,0,1-2455.969-1h8.937A2.034,2.034,0,0,1-2445,1.031V9.969a2.034,2.034,0,0,1-2.031,2.03Zm-1.016-10.968V9.969a1.017,1.017,0,0,0,1.016,1.015h8.937a1.018,1.018,0,0,0,1.016-1.015V1.031a1.017,1.017,0,0,0-1.016-1.016h-8.937A1.017,1.017,0,0,0-2456.985,1.031Zm4.964,7.9V5.608l-.514.515a.487.487,0,0,1-.346.143.483.483,0,0,1-.344-.143.488.488,0,0,1,0-.692l0,0,.156-.157.323-.324.382-.382c.107-.108.212-.216.321-.322a1.432,1.432,0,0,1,.283-.249.435.435,0,0,1,.12-.045.47.47,0,0,1,.428.121c.113.1.22.208.325.316s.222.22.332.33l.335.335.26.26.106.106a.489.489,0,0,1,0,.691.485.485,0,0,1-.346.144.488.488,0,0,1-.345-.144l-.5-.5V8.934a.488.488,0,0,1-.489.489A.489.489,0,0,1-2452.021,8.934Zm-1.955-6.213a.471.471,0,0,1-.413-.468.471.471,0,0,1,.413-.468h4.943a.479.479,0,0,1,.422.468.479.479,0,0,1-.422.468Z",transform:"translate(137 13886) rotate(180)",fill:"currentColor",stroke:"#fff",strokeWidth:.2}))),Ka=function(e){var t=e.svgRef,a=e.title,n=qa(e,["svgRef","title"]);return r.a.createElement("svg",Ja({width:15,height:15.668,viewBox:"0 0 15 15.668",ref:t},n),a?r.a.createElement("title",null,a):null,Wa)},za=r.a.forwardRef((function(e,t){return r.a.createElement(Ka,Ja({svgRef:t},e))}));a.p;function Ya(){return(Ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Za(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Xa=r.a.createElement("rect",{id:"Rectangle_4631","data-name":"Rectangle 4631",width:17,height:17,fill:"none"}),Qa=r.a.createElement("path",{id:"push-pin",d:"M.032,5.034a.236.236,0,0,1,.144-.172,5.776,5.776,0,0,1,4.34.068L8.033,1.938A2.643,2.643,0,0,1,8.519.088.238.238,0,0,1,8.69,0a.245.245,0,0,1,.18.069l3.606,3.606a.237.237,0,0,1-.02.352,2.683,2.683,0,0,1-1.826.486L7.623,8.047A6.2,6.2,0,0,1,7.7,12.381a.236.236,0,0,1-.387.08L3.864,9.017.657,12.225a.236.236,0,1,1-.334-.334L3.53,8.683.1,5.249A.237.237,0,0,1,.032,5.034ZM4.2,8.688l3.173,3.173A6,6,0,0,0,7.134,8.1a.237.237,0,0,1,.035-.25l3.182-3.74a.237.237,0,0,1,.181-.083.21.21,0,0,1,.036,0,2.446,2.446,0,0,0,1.37-.226L8.746.613A2.217,2.217,0,0,0,8.518,2a.236.236,0,0,1-.08.218L4.707,5.389a.239.239,0,0,1-.261.03,5.4,5.4,0,0,0-3.751-.24Z",transform:"translate(2.214 2.235)",fill:"currentColor",stroke:"currentColor",strokeWidth:.5}),$a=function(e){var t=e.svgRef,a=e.title,n=Za(e,["svgRef","title"]);return r.a.createElement("svg",Ya({id:"Component_47_2","data-name":"Component 47 \\u2013 2",width:17,height:17,viewBox:"0 0 17 17",ref:t},n),a?r.a.createElement("title",null,a):null,Xa,Qa)},en=r.a.forwardRef((function(e,t){return r.a.createElement($a,Ya({svgRef:t},e))}));a.p;a.p;function tn(){return(tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function an(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var nn=r.a.createElement("g",{id:"archive",transform:"translate(-2581 -13873)"},r.a.createElement("rect",{id:"Rectangle_4629","data-name":"Rectangle 4629",width:15,height:15,transform:"translate(2581 13873)",fill:"none"}),r.a.createElement("g",{id:"Group_16195","data-name":"Group 16195",transform:"translate(0 0.668)"},r.a.createElement("rect",{id:"Rectangle_4629-2","data-name":"Rectangle 4629",width:15,height:15,transform:"translate(2581 13873)",fill:"none"}),r.a.createElement("path",{id:"black",d:"M-2455.969,12A2.033,2.033,0,0,1-2458,9.969V1.031A2.034,2.034,0,0,1-2455.969-1h8.937A2.034,2.034,0,0,1-2445,1.031V9.969a2.034,2.034,0,0,1-2.031,2.03Zm-1.016-10.968V9.969a1.017,1.017,0,0,0,1.016,1.015h8.937a1.018,1.018,0,0,0,1.016-1.015V1.031a1.017,1.017,0,0,0-1.016-1.016h-8.937A1.017,1.017,0,0,0-2456.985,1.031Zm4.964,7.9V5.608l-.514.515a.487.487,0,0,1-.346.143.483.483,0,0,1-.344-.143.488.488,0,0,1,0-.692l0,0,.156-.157.323-.324.382-.382c.107-.108.212-.216.321-.322a1.432,1.432,0,0,1,.283-.249.435.435,0,0,1,.12-.045.47.47,0,0,1,.428.121c.113.1.22.208.325.316s.222.22.332.33l.335.335.26.26.106.106a.489.489,0,0,1,0,.691.485.485,0,0,1-.346.144.488.488,0,0,1-.345-.144l-.5-.5V8.934a.488.488,0,0,1-.489.489A.489.489,0,0,1-2452.021,8.934Zm-1.955-6.213a.471.471,0,0,1-.413-.468.471.471,0,0,1,.413-.468h4.943a.479.479,0,0,1,.422.468.479.479,0,0,1-.422.468Z",transform:"translate(137 13886) rotate(180)",fill:"#6992c4",stroke:"#fff",strokeWidth:.2}))),rn=function(e){var t=e.svgRef,a=e.title,n=an(e,["svgRef","title"]);return r.a.createElement("svg",tn({style:{transform:"rotate(-180deg)"},width:15,height:15.668,viewBox:"0 0 15 15.668",ref:t},n),a?r.a.createElement("title",null,a):null,nn)},on=r.a.forwardRef((function(e,t){return r.a.createElement(rn,tn({svgRef:t},e))}));a.p;function ln(){return(ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function cn(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var sn=r.a.createElement("g",{id:"Group_30871","data-name":"Group 30871",transform:"translate(-154.75 -154)"},r.a.createElement("rect",{id:"Rectangle_7805","data-name":"Rectangle 7805",width:19,height:19,transform:"translate(155 154)",fill:"none"}),r.a.createElement("g",{id:"people",transform:"translate(155 156.71)"},r.a.createElement("path",{id:"Path_40319","data-name":"Path 40319",d:"M42.658,58.243a2.069,2.069,0,1,1,2.088-2.069A2.081,2.081,0,0,1,42.658,58.243Zm0-3.557a1.488,1.488,0,1,0,1.507,1.488A1.5,1.5,0,0,0,42.658,54.686Zm0,0",transform:"translate(-39.098 -52.142)",stroke:"currentColor",strokeWidth:.5}),r.a.createElement("path",{id:"Path_40320","data-name":"Path 40320",d:"M4.4,187.1H.759A.757.757,0,0,1,0,186.343v-.95a3.568,3.568,0,0,1,5.685-2.829.29.29,0,0,1-.345.467,2.987,2.987,0,0,0-4.76,2.362v.95a.176.176,0,0,0,.178.173H4.4a.29.29,0,1,1,0,.581Zm0,0",transform:"translate(0 -175.268)",stroke:"currentColor",strokeWidth:.5}),r.a.createElement("path",{id:"Path_40321","data-name":"Path 40321",d:"M338.034,181.045h-3.642a.29.29,0,0,1,0-.581h3.642a.176.176,0,0,0,.178-.173v-.95a2.966,2.966,0,0,0-2.98-2.945,3.007,3.007,0,0,0-1.887.666.29.29,0,1,1-.365-.451,3.59,3.59,0,0,1,2.252-.795,3.547,3.547,0,0,1,3.56,3.526v.95A.757.757,0,0,1,338.034,181.045Zm0,0",transform:"translate(-320.794 -169.436)",stroke:"currentColor",strokeWidth:.5}),r.a.createElement("path",{id:"Path_40322","data-name":"Path 40322",d:"M342.44,54.29a2.069,2.069,0,1,1,2.088-2.069A2.081,2.081,0,0,1,342.44,54.29Zm0-3.557a1.488,1.488,0,1,0,1.508,1.488A1.5,1.5,0,0,0,342.44,50.733Zm0,0",transform:"translate(-328.001 -48.333)",stroke:"currentColor",strokeWidth:.5}),r.a.createElement("path",{id:"Path_40323","data-name":"Path 40323",d:"M122.092,162.95h-7.88a.947.947,0,0,1-.949-.942v-1.336a4.89,4.89,0,0,1,9.779,0v1.336A.947.947,0,0,1,122.092,162.95Zm-3.94-6.538a4.29,4.29,0,0,0-4.309,4.26v1.336a.366.366,0,0,0,.369.362h7.88a.366.366,0,0,0,.369-.362v-1.336A4.289,4.289,0,0,0,118.151,156.412Zm0,0",transform:"translate(-109.152 -150.177)",stroke:"currentColor",strokeWidth:.5}),r.a.createElement("path",{id:"Path_40324","data-name":"Path 40324",d:"M173.965,5.315a2.674,2.674,0,0,1-2.683-2.658,2.683,2.683,0,0,1,5.366,0,2.674,2.674,0,0,1-2.683,2.658Zm0-4.735a2.092,2.092,0,0,0-2.1,2.077,2.1,2.1,0,0,0,4.205,0,2.093,2.093,0,0,0-2.1-2.077Zm0,0",transform:"translate(-165.066)",stroke:"currentColor",strokeWidth:.5}))),dn=function(e){var t=e.svgRef,a=e.title,n=cn(e,["svgRef","title"]);return r.a.createElement("svg",ln({width:19.25,height:19,viewBox:"0 0 19.25 19",ref:t},n),a?r.a.createElement("title",null,a):null,sn)},un=r.a.forwardRef((function(e,t){return r.a.createElement(dn,ln({svgRef:t},e))}));a.p;function mn(){return(mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function pn(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var hn=r.a.createElement("g",{id:"Group_30886","data-name":"Group 30886",transform:"translate(-156 -457)"},r.a.createElement("rect",{id:"Rectangle_7810","data-name":"Rectangle 7810",width:19,height:19,transform:"translate(156 457)",fill:"none"}),r.a.createElement("g",{id:"delete",transform:"translate(154.952 455.615)"},r.a.createElement("path",{id:"Path_40317","data-name":"Path 40317",d:"M13.788,19.317H7.468A2.523,2.523,0,0,1,5,16.936L4.25,5.416a.636.636,0,0,1,.617-.666H16.389a.614.614,0,0,1,.452.2.629.629,0,0,1,.166.469l-.716,11.52a2.522,2.522,0,0,1-2.5,2.381ZM5.558,6l.634,10.863a1.282,1.282,0,0,0,1.276,1.207h6.321a1.29,1.29,0,0,0,1.276-1.207L15.731,6.04Z",transform:"translate(-0.08 -0.12)",fill:"#181818",stroke:"#fff",strokeWidth:.2}),r.a.createElement("path",{id:"Path_40318","data-name":"Path 40318",d:"M18.207,6.19H2.888a.683.683,0,0,1-.638-.72.683.683,0,0,1,.638-.72H18.207a.683.683,0,0,1,.638.72.683.683,0,0,1-.638.72Z",transform:"translate(0 -0.12)",fill:"currentColor",stroke:"#fff",strokeWidth:.2}),r.a.createElement("path",{id:"Path_40319","data-name":"Path 40319",d:"M14.729,6.069H8.97a.729.729,0,0,1-.72-.72V3.622A1.92,1.92,0,0,1,10.122,1.75h3.455a1.92,1.92,0,0,1,1.872,1.92v1.68a.729.729,0,0,1-.72.72ZM9.69,4.63h4.319V3.67a.432.432,0,0,0-.432-.432H10.122a.432.432,0,0,0-.432.432Z",transform:"translate(-1.302)",fill:"currentColor"}),r.a.createElement("path",{id:"Path_40320","data-name":"Path 40320",d:"M14.97,17.868a.729.729,0,0,1-.72-.72V9.47a.72.72,0,0,1,1.44,0v7.679A.729.729,0,0,1,14.97,17.868Z",transform:"translate(-1.896 -1.7)",fill:"currentColor",stroke:"#fff",strokeWidth:.2}),r.a.createElement("path",{id:"Path_40321","data-name":"Path 40321",d:"M8.97,17.868a.729.729,0,0,1-.72-.72V9.47a.72.72,0,0,1,1.44,0v7.679A.729.729,0,0,1,8.97,17.868Z",transform:"translate(-0.948 -1.7)",fill:"currentColor",stroke:"#fff",strokeWidth:.2}),r.a.createElement("path",{id:"Path_40322","data-name":"Path 40322",d:"M11.97,17.868a.729.729,0,0,1-.72-.72V9.47a.72.72,0,0,1,1.44,0v7.679A.729.729,0,0,1,11.97,17.868Z",transform:"translate(-1.422 -1.7)",fill:"currentColor",stroke:"#fff",strokeWidth:.2}))),vn=function(e){var t=e.svgRef,a=e.title,n=pn(e,["svgRef","title"]);return r.a.createElement("svg",mn({width:19,height:19,viewBox:"0 0 19 19",ref:t},n),a?r.a.createElement("title",null,a):null,hn)},fn=r.a.forwardRef((function(e,t){return r.a.createElement(vn,mn({svgRef:t},e))}));a.p;function gn(){return(gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function bn(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var En=r.a.createElement("g",{id:"warning_1_","data-name":"warning (1)",transform:"translate(0 -20.882)"},r.a.createElement("g",{id:"Group_34191","data-name":"Group 34191",transform:"translate(0 20.882)"},r.a.createElement("path",{id:"Path_40326","data-name":"Path 40326",d:"M219.1,333.382a.874.874,0,0,0,0,1.747.874.874,0,0,0,0-1.747Z",transform:"translate(-210.599 -322.461)",fill:"#ff3939"}),r.a.createElement("path",{id:"Path_40327","data-name":"Path 40327",d:"M16.586,34.9a2.983,2.983,0,0,0,.007-3.019L11.12,22.4a3.015,3.015,0,0,0-5.235,0L.406,31.887a3.027,3.027,0,0,0,2.621,4.536H13.958A3.009,3.009,0,0,0,16.586,34.9ZM15.4,34.214a1.651,1.651,0,0,1-1.443.835H3.023A1.629,1.629,0,0,1,1.6,34.231a1.654,1.654,0,0,1,0-1.667l5.48-9.484a1.646,1.646,0,0,1,2.859,0l5.476,9.484A1.632,1.632,0,0,1,15.4,34.214Z",transform:"translate(0 -20.882)",fill:"#ff3939"}),r.a.createElement("path",{id:"Path_40328","data-name":"Path 40328",d:"M218.4,157.2a.95.95,0,0,0-.674.954c.021.276.038.556.059.832.059,1.052.119,2.083.178,3.135a.64.64,0,0,0,.653.615.653.653,0,0,0,.653-.636c0-.217,0-.416.021-.636.038-.674.08-1.349.119-2.023.021-.437.059-.874.08-1.31a1.079,1.079,0,0,0-.08-.437A.876.876,0,0,0,218.4,157.2Z",transform:"translate(-210.116 -152.413)",fill:"#ff3939"}))),Cn=function(e){var t=e.svgRef,a=e.title,n=bn(e,["svgRef","title"]);return r.a.createElement("svg",gn({width:17,height:15.541,viewBox:"0 0 17 15.541",ref:t},n),a?r.a.createElement("title",null,a):null,En)},yn=r.a.forwardRef((function(e,t){return r.a.createElement(Cn,gn({svgRef:t},e))})),On=(a.p,Xt.a.maximumAllowedUsersToForward);function jn(e){var t=e.contactName,a=e.image,o=e.groupImage,l=e.emailId,i=e.statusMsg,c=e.status,s=e.searchValue,d=e.updateJid,u=e.addContact,m=e.removeContact,p=e.temporary,h=e.chatType,v=e.selectedContact,f=e.isChanged,g=void 0===f?-1:f,b=e.isBlockedUser,C=e.roster,y=Object(V.m)(C,t),O=Object(n.useState)(!1),j=Object(Re.a)(O,2),N=j[0],k=j[1];Object(n.useEffect)((function(){k(-1!==g)}),[g]);var S=Object(le.e)("token"),w=Object(x.z)(t,s),D=i||c;return r.a.createElement(n.Fragment,null,r.a.createElement("label",{htmlFor:d},r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{name:"participants",type:"checkbox",checked:N,onChange:function(e){if(!b){var a="";if(a="chat"===h||"broadcast"===h?"broadcast"===h?d+"@"+E.S+"@":d+"@"+E.S:d+"@mix."+E.S,v>=On&&e.target.checked){k(!1),m(a,t,d);var n="You can only forward with up to ".concat(On," users or groups");re.b.error(n)}else k(!N),!1===N?u(a,t,d):m(a,t,d)}},value:N,id:d}),r.a.createElement("label",{htmlFor:d})),r.a.createElement(fe.a,{chatType:h,userToken:S,temporary:p,imageToken:a||o,emailId:l,userId:Object(V.g)(d),name:y}),r.a.createElement("div",{className:"recentchats"},r.a.createElement("div",{className:"recent-username-block"},r.a.createElement("div",{className:"recent-username"},r.a.createElement("div",{className:"username"},r.a.createElement("h3",{title:t},r.a.createElement("span",null,w),b&&r.a.createElement("div",{className:"blocked-info"},r.a.createElement("i",null,r.a.createElement(na,null)),r.a.createElement("span",null,"Blocked")))))),r.a.createElement("div",{className:"recent-message-block"},Object(B.X)(h)&&r.a.createElement(nt,{status:D,userId:d})))))}var Nn=a(35),kn=a(453),Sn=a.n(kn),wn=a(447),Dn=a(92),Mn=0,In="",Tn={getUsersListFromSDK:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,o,l=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:1,a=l.length>1&&void 0!==l[1]?l[1]:"",!(1===t||t<=Mn)){e.next=12;break}return In=a,e.next=6,c.a.dispatch(Object(Dn.e)(!0));case 6:return e.next=8,A.a.getUsersList(a,t,20);case 8:n=e.sent,a===In&&(200===n.statusCode?(Mn=n.totalPages,r=n.users.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{isFriend:!0,isDeletedUser:!1})})),o=r.sort(x.h),c.a.dispatch(Object(Dn.b)(o,t))):c.a.dispatch(Object(Dn.e)(!1))),e.next=13;break;case 12:c.a.dispatch(Object(Dn.e)(!1));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Pn=(Xt.a.maximumCharForwardPopUp,function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n,r;return Object(h.a)(this,a),(r=t.call(this,e)).addContact=function(e,t,a){r.setState({contactsToForward:r.state.contactsToForward.concat(e),contactsToDisplay:r.state.contactsToDisplay.concat(t),jidArray:r.state.jidArray.concat(a),unBlockedUserName:r.state.unBlockedUserName.concat(t)})},r.removeContact=function(e,t,a){r.setState({contactsToForward:r.state.contactsToForward.filter((function(t){return t!==e})),contactsToDisplay:r.state.contactsToDisplay.filter((function(e){return e!==t})),jidArray:r.state.jidArray.filter((function(e){return e!==a})),unBlockedUserName:r.state.unBlockedUserName.filter((function(e){return e!==t}))})},r.recentChatSearchFilter=function(e){return r.props.recentChatData.rosterData.recentChatItems.filter((function(t){var a=t.roster,n=t.recent;if(a.isDeletedUser)return!1;var r=a.existGroup,o=n.leftGroup;return!r&&!o&&Object(V.k)(a).find((function(t){return!!t&&-1!==t.search(new RegExp(e,"i"))}))}))},r.contactsSearch=function(e){var t=r.props,a=t.recentChatData.rosterData.recentChatNames,n=t.rosterData.data;return n?Object(x.Q)(n).filter((function(t){var n=t.username?t.username:t.userId;return!(a.indexOf(n)>-1)&&Object(V.k)(t).find((function(a){return!(!t.isFriend||!a)&&-1!==a.search(new RegExp(e,"i"))}))})):[]},r.initialLoad=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=r.recentChatSearchFilter(a).filter((function(e){var t,a,n;return!0!==(null===e||void 0===e||null===(t=e.roster)||void 0===t?void 0:t.isAdminBlocked)&&!0!==(null===e||void 0===e||null===(a=e.roster)||void 0===a?void 0:a.isDeletedUser)&&"userLeft"!==(null===e||void 0===e||null===(n=e.recent)||void 0===n?void 0:n.profileUpdatedStatus)})),l=r.contactsSearch(a),i=r.state,c=i.contactsToDisplay,s=i.contactsToForward,d=i.jidArray,u=i.unBlockedUserName,m=o.map((function(e,t){var a,n;return(null===e||void 0===e||null===(a=e.roster)||void 0===a?void 0:a.name)||(null===e||void 0===e||null===(n=e.roster)||void 0===n?void 0:n.groupName)})),p=l.map((function(e,t){return null===e||void 0===e?void 0:e.name})),h=[].concat(Object(D.a)(m),Object(D.a)(p)),v=[],f=s,g=d,b=u;c.map((function(e,t){h.includes(e)?v.push(e):f.splice(t,1)})),b.map((function(e,t){h.includes(e)&&!v.includes(e)&&(v.push(e),f.push(g[t]))})),r.setState({searchValue:n,filteredRecentChat:o,filteredContacts:l,userList:l,loaderStatus:null===(e=r.props)||void 0===e||null===(t=e.rosterData)||void 0===t?void 0:t.isFetchingUserList,contactsToDisplay:v,contactsToForward:f})},r.searchFilterList=function(e){clearTimeout(r.timer),r.timer=setTimeout((function(){var t=e=Object(x.P)(e);r.initialLoad(t,e),Tn.getUsersListFromSDK(1,t)}),0)},r.findLastChat=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r.props||{},a=t.recentChatData,n=(a=void 0===a?{}:a).rosterData,o=(n=void 0===n?{}:n).recentChatItems,l=void 0===o?[]:o,i=l.filter((function(t){return Sn()(t,"roster.userJid")===e})),c=l.filter((function(t){return Sn()(t,"roster.groupId")===e.split("@")[0]}));if(0===i.length&&0===c.length){var s=Object(V.e)(Object(x.O)(e));return[{roster:s,recent:{chatType:Le.g}}]}return[].concat(Object(D.a)(i),Object(D.a)(c))},r.handleUpdateHistory=function(e,t,a,n,r,o){setTimeout((function(){var l=Object(B.w)();if(Object.keys(l).includes(Object(x.O)(e))||t[t.length-1]===e){var i=Object(x.E)(a,e,n[r+o]),s=Object(d.a)({data:[JSON.parse(JSON.stringify(i))]},Object(V.p)(e)?{userJid:e}:{groupJid:e});c.a.dispatch(Object(Nn.b)(s))}}),100)},r.sendForwardMessage=Object(p.a)(m.a.mark((function e(){var t,a,n,o,l,i,s,d,u,p,h,v,f,g,b,E;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(x.R)()){e.next=3;break}return Object(x.a)(),e.abrupt("return");case 3:for(t=r.props.selectedMessageData.data,a=r.state.contactsToForward,n=t.sort((function(e,t){return t.timestamp>e.timestamp?-1:1})).map((function(e){return e.msgId})),o=[],l=t.length+a.length,i=0;i<l;i++)o.push(O()());for(A.a.forwardMessagesToMultipleUsers(a,n,!0,o),s=a[a.length-1],d=r.findLastChat(s),u=d[0].recent,(p=(u=void 0===u?{}:u).chatType)&&(d[0].chatType=p,d[0].chatId=Object(x.O)(s),d[0].chatJid=s,c.a.dispatch(Object(k.a)(d[0]))),h=0;h<n.length;h++)for(v=n[h],f=Object(B.B)(r.props.activeJid,v),g=0;g<a.length;g++)b=a[g],E=Object(x.K)(f,b,o[h+g]),c.a.dispatch(Object(k.e)(E)),r.handleUpdateHistory(b,a,f,o,h,g),0===h&&Object(B.Q)(b,f.chatType);r.props.closeMessageOption(!0);case 18:case"end":return e.stop()}}),e)}))),r.fetchMoreData=function(){var e=r.state.userList,t=Object(x.P)(r.state.searchValue);Tn.getUsersListFromSDK(Math.ceil(e.length/20+1),t)},r.state={searchValue:"",isLoading:!0,jidArray:[],contactsToForward:[],contactsToDisplay:[],filteredContacts:[],filteredRecentChat:[],unBlockedUserName:[],loaderStatus:!!(null===e||void 0===e||null===(n=e.rosterData)||void 0===n?void 0:n.isFetchingUserList),userList:[]},r.timer=0,r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){Tn.getUsersListFromSDK(1)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"componentDidUpdate",value:function(e){(e.rosterData&&e.rosterData.id!==this.props.rosterData.id||e.groupsData&&e.groupsData.id!==this.props.groupsData.id)&&this.initialLoad(Object(x.P)(this.state.searchValue),Object(x.P)(this.state.searchValue))}},{key:"handleUserListData",value:function(){var e=this,t=[],a=this.state,n=a.searchValue,o=a.jidArray,l=a.contactsToForward;return this.state.userList.length>0&&this.state.userList.map((function(a){var i=a.username,c=a.userId,s=Object(V.d)(a),d=c||i,u=o.findIndex((function(e){return e===d})),m=e.props.blockedContact.data.indexOf(d.includes("@")?d:d+"@"+E.S)>-1;t.push(r.a.createElement("li",{key:d,className:"chat-list-li ".concat(m?"Blocked":"")},r.a.createElement(jn,Object.assign({key:d,isBlockedUser:m,searchValue:n,contactName:s,addContact:e.addContact,updateJid:d,temporary:!1,isChanged:u,selectedContact:l.length,chatType:"chat",removeContact:e.removeContact,roster:a},a))))})),t}},{key:"render",value:function(){var e=this,t=this.state,a=t.filteredContacts,o=t.filteredRecentChat,l=t.searchValue,i=t.contactsToForward,c=t.jidArray,s=this.props.closePopup,d=this.state.contactsToDisplay.join(", "),u=this.props.selectedMessageData&&Array.isArray(this.props.selectedMessageData.data)&&this.props.selectedMessageData.data.length||0,m=this.handleUserListData();return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"popup-wrapper"},r.a.createElement("div",{className:"popup-container add-participant forward"},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-container-header"},r.a.createElement("i",{onClick:s,className:"closePopup"},r.a.createElement(w.K,null)),r.a.createElement("h5",null,"Forward message",u>1?"s":""," to")),r.a.createElement(Qt,{search:this.searchFilterList}),r.a.createElement("div",{className:"popup-body",style:{overflow:"hidden"}},r.a.createElement("div",{className:"contactList",style:{height:"100%"}},r.a.createElement("ul",{className:"chat-list-ul",style:{height:"100%"},id:"scrollableUl-forward"},this.state.loaderStatus&&r.a.createElement("div",{className:"response_loader style-2"},r.a.createElement("img",{src:w.Nd,alt:"loader"})),0===a.length&&0===o.length&&l&&r.a.createElement("span",{className:"searchErrorMsg"},r.a.createElement(w.cc,null),E.q),(m.length>0||o.length>0)&&r.a.createElement(wn.a,{dataLength:m.length,next:this.fetchMoreData,hasMore:!0,scrollableTarget:"scrollableUl-forward"},r.a.createElement("li",{className:"list-heading"},"Recent Chat"),o.map((function(t){var a,n=t.roster,o=t.recent.fromUserId,s=null===t||void 0===t||null===(a=t.recent)||void 0===a?void 0:a.chatType,d=n.userId,u=Object(V.d)(n)||o,m=d||o,p=c.findIndex((function(e){return e===m})),h=e.props.blockedContact.data.indexOf(m.includes("@")?m:m+"@"+E.S)>-1;return r.a.createElement("li",{key:m,className:"chat-list-li ".concat(h?"Blocked":"")},r.a.createElement(jn,Object.assign({isBlockedUser:h,searchValue:l,contactName:u,temporary:!1,addContact:e.addContact,updateJid:m,chatType:s,isChanged:p,selectedContact:i.length,removeContact:e.removeContact,roster:n},n)))})),r.a.createElement("li",{className:"list-heading"},"Contacts"),this.handleUserListData())))),r.a.createElement("div",{className:"popup-footer"},0!==d.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{title:"send",onClick:this.sendForwardMessage,className:"SendMessage"},r.a.createElement(w.Xc,null))):null,r.a.createElement("div",{className:"selectedList"},r.a.createElement("span",{title:d,className:""},d)))))))}}]),a}(n.Component)),An=Object(o.b)((function(e,t){return{rosterData:e.rosterData,popUpData:e.popUpData,recentChatData:e.recentChatData,selectedMessageData:e.selectedMessageData,blockedContact:e.blockedContact,groupsData:e.groupsData}}),null)(Pn),Ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.jid,a=void 0===t?"":t,n=e.forward,o=e.popUpStatus,l=e.uploadStatus,i=void 0===l?0:l,c=e.showForwardPopUp,s=e.closeForwardPopUp,d=e.pageType;return r.a.createElement(r.a.Fragment,null,2===i&&!n&&"conversation"===d&&r.a.createElement("span",{title:"Forward",className:"SingleForward",onClick:c},r.a.createElement("i",null,r.a.createElement(w.ad,null))),o&&r.a.createElement(ze,{containerId:"container"},r.a.createElement(An,{activeJid:a,closeMessageOption:s,closePopup:s})))},xn=function(e){var t=e.toggleContactPopup,a=e.phoneNumber,n=e.name;return r.a.createElement("div",{className:"popup-wrapper"},r.a.createElement("div",{className:"popup-container contactPopup"},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-container-header"},r.a.createElement("i",{onClick:t,className:"closePopup"},r.a.createElement(w.K,null)),r.a.createElement("h5",null,"View contact")),r.a.createElement("div",{className:"popup-body popup-body-sm"},r.a.createElement("div",{className:"contact-message-block"},r.a.createElement("div",{className:"contact-message-inner"},r.a.createElement("div",{className:"contact"},r.a.createElement("img",{src:w.E})),r.a.createElement("div",{className:"contact-text"},r.a.createElement("p",{className:"name"},n),r.a.createElement("p",{className:"no"},a))))))))},Un=function(e){var t=e.tMessage;return r.a.createElement("div",{className:"translated"},r.a.createElement("span",null,He()(t)," "))},Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageObject,a=void 0===t?{}:t,l=e.isSender,i=void 0!==l&&l,s=e.pageType,d=a.msgBody,u=void 0===d?{}:d,h=Object(x.i)(u.message),v=Object(o.d)((function(e){return e.showConfrenceData||{}})),f=v.data,g=void 0===f?{}:f,b=Object(o.d)((function(e){return e.callIntermediateScreen||{}})),E=b.data,y=void 0===E?{}:E,O=function(){return!i&&"conversation"===s&&(null===u||void 0===u?void 0:u.translatedMessage)&&Object.keys(u.translatedMessage).length},j=function(){return u?He()(Object(x.x)(h)):null},N=function(){var t=Object(p.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(x.a)()){t.next=2;break}return t.abrupt("return","");case 2:if(n=null===(a=u.message)||void 0===a?void 0:a.split("".concat(Object(x.L)(),"/"))[1],!y||g.callStatusText!==Q.o){t.next=10;break}return t.next=6,A.a.getCallLink();case 6:r=t.sent,u.message.includes(r.data)?e.handleShowCallScreen():c.a.dispatch(Object(X.b)({open:!0,modelType:"CallConfirm",newCallLink:n})),t.next=11;break;case 10:c.a.dispatch(Object(C.d)({show:!0,link:n}));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,Object(x.U)(u.message)?r.a.createElement("div",{className:"message_meeting_link"},r.a.createElement("button",{type:"button",className:"meetingL_link_share",onClick:function(){return N()}},r.a.createElement("div",{className:"meeting_link_detail"},r.a.createElement("span",{className:"meeting_ink"},u.message)),r.a.createElement("div",{className:"meeting_desc"},r.a.createElement("img",{src:w.Zb,alt:"Mirrorfly Video Call"}),r.a.createElement("span",{className:"call_details"},"Join video call"),r.a.createElement("span",{className:"call_icon"},r.a.createElement(w.Fb,null))),O()&&r.a.createElement(Un,{tMessage:null===u||void 0===u?void 0:u.translatedMessage}),r.a.createElement("div",{className:"company_detais"}))):r.a.createElement("div",{className:"message-text"},r.a.createElement("span",null,j()),O()&&r.a.createElement(Un,{tMessage:null===u||void 0===u?void 0:u.translatedMessage})))};var Fn=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sendingFailed"},r.a.createElement(w.Pb,null)))};var Bn=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.msgId,n=void 0===a?"":a,l=t.file_url,i=void 0===l?"":l,s=t.isSender,d=void 0===s||s,u=t.uploadStatus,m=void 0===u?0:u,p=t.imgFileDownloadOnclick,h=Object(o.d)((function(e){return e})),v=h||{},f=v.appOnlineStatus,g=(f=void 0===f?{}:f).isOnline,b=void 0===g||g,E=v.mediaUploadData,C=(E=void 0===E?{}:E).data,y=void 0===C?{}:C,O=function(){var e;return 100===(null===(e=y[n])||void 0===e?void 0:e.progress)||0===m?"progress-animate":""},j=function(){var e;return 1===m&&(null===(e=y[n])||void 0===e?void 0:e.progress)<100?"active-progress":""},N=function(){if(8===m)return!0;if(y[n]&&y[n].source.cancel("User Cancelled!"),0===m){var e={msgId:n,fromUserId:Object(B.l)(),uploadStatus:7};c.a.dispatch(Object(Nn.a)(e))}return!1},k=function(){var e={msgId:n,fromUserId:Object(B.l)(),uploadStatus:1};c.a.dispatch(Object(Nn.f)(e))},S=function(e){d?p(e):k()},D=function(){return r.a.createElement("div",{id:i,className:"reLoadFile",onClick:S,"data-jest-id":"jesthandleMediaClick"},r.a.createElement(w.ud,{id:i,onClick:S}),r.a.createElement("span",{id:i,className:"Retry"},"Retry"))},M=function(){return d?"sync left":"sync right"},I=function(){return r.a.createElement("div",{className:"loadingProgress ".concat(M())},r.a.createElement(w.ud,null),r.a.createElement("span",{className:"progressBar progress-animate",style:{width:"50%"}}))},T=function(){return setTimeout((function(){I()}),200)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"progressOverlay"},!b||1!==m&&0!==m&&8!==m?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{"data-jest-id":"jestcancelMediaUpload",className:"fileInprogess",onClick:N},r.a.createElement(w.kb,null)),r.a.createElement("div",{className:"loadingProgress",onClick:N},r.a.createElement("span",{className:"progressBar ".concat(O()," ").concat(j()),style:{width:"".concat(null===(e=y[n])||void 0===e?void 0:e.progress,"%")}}))),3===m&&D(),4===m&&b?T():null,5===m&&r.a.createElement("div",{className:"reLoadFile failed"},r.a.createElement("span",{className:"failed-text"},"File doesn't exists")),(6===m||(4===m||1===m||0===m)&&!b)&&D()),(3===m||(1===m||0===m)&&!b)&&r.a.createElement(Fn,null))},_n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.imgSrc,a=e.handleMediaShow,o=e.isSender,l=void 0===o||o,i=e.uploadStatus,c=void 0===i?0:i,s=e.messageObject,d=void 0===s?{}:s,u=e.imgFileDownloadOnclick,m=e.imageHeightAdjust,p=void 0!==m&&m,h=e.pageType,v=d.msgId,f=void 0===v?"":v,g=d.msgBody,b=(g=void 0===g?{}:g).translatedMessage,E=void 0===b?"":b,C=g.message_type,y=void 0===C?"":C,O=g.media,j=(O=void 0===O?{}:O).caption,N=void 0===j?"":j,k=O.file_url,S=void 0===k?"":k,w=O.thumb_image,D=void 0===w?"":w,M=O.webWidth,I=O.webHeight,T=O.file_key,A=Object(n.useMemo)((function(){return new P.a}),[]),L=Object(n.useState)(t||Object(x.M)(D)),U=Object(Re.a)(L,2),R=U[0],F=U[1],B=Object(n.useState)({width:"".concat(M,"px"),height:"".concat(p?"auto":I+"px"),maxHeight:I+"px"}),_=Object(Re.a)(B,2),V=_[0],G=_[1];Object(n.useEffect)((function(){t?(F(t),G({width:"".concat(M,"px"),height:"".concat(p?"auto":I+"px"),maxHeight:I+"px"})):F(Object(x.M)(D))}),[t,f]),Object(n.useEffect)((function(){"image"===y&&S&&(Object(x.S)(S)?F(S):A.getImageByKey(S,Object(x.t)("image"),T).then((function(e){F(window.URL.createObjectURL(e))})))}),[S,y]);var H=function(){return l&&"conversation"===h&&E&&Object.keys(E).length};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("div",{className:"image-message",onClick:function(e){return a&&a(e)},style:V},r.a.createElement("img",{className:"webchat-conver-image",src:R,alt:"chat-img"})),r.a.createElement(Bn,{msgId:f,isSender:l,file_url:S,uploadStatus:c,imgFileDownloadOnclick:u})),r.a.createElement("div",{className:"image-caption"},""!==N&&r.a.createElement("span",null,r.a.createElement("span",null,Object(x.g)(N)),H()&&r.a.createElement(Un,{tMessage:E}))))},Vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.thumbURL,a=e.handleMediaShow,o=e.isSender,l=void 0===o||o,i=e.uploadStatus,c=void 0===i?0:i,s=e.messageObject,d=void 0===s?{}:s,u=e.imgFileDownloadOnclick,m=e.imageHeightAdjust,p=void 0!==m&&m,h=e.pageType,v=d.msgId,f=void 0===v?"":v,g=d.msgBody,b=(g=void 0===g?{}:g).translatedMessage,E=void 0===b?"":b,C=g.media,y=(C=void 0===C?{}:C).caption,O=void 0===y?"":y,j=C.file_url,N=void 0===j?"":j,k=C.duration,S=C.thumb_image,D=void 0===S?"":S,M=C.webWidth,I=C.webHeight,T=Object(n.useState)({width:"".concat(M,"px"),height:"".concat(p?"auto":I+"px"),maxHeight:I+"px"}),P=Object(Re.a)(T,2),A=P[0],L=P[1],U=Object(n.useState)(t||Object(x.M)(D)),R=Object(Re.a)(U,1),F=R[0];Object(n.useEffect)((function(){t&&L({width:"".concat(M,"px"),height:"".concat(p?"auto":I+"px"),maxHeight:I+"px"})}),[t,f]);var B=function(){return l&&"conversation"===h&&E&&Object.keys(E).length};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("div",{className:"image-message",onClick:function(e){return a&&a(e)},style:A},r.a.createElement("img",{className:"webchat-conver-image",src:F,alt:"chat-img"}),r.a.createElement("div",{className:"image-overlay"},r.a.createElement("span",{className:"duration"},r.a.createElement("i",null,r.a.createElement(w.yd,null)),r.a.createElement("span",{className:"video-duration"},Object(x.Y)(k))),r.a.createElement("i",{className:"playbtn"},r.a.createElement(w.vc,null)))),r.a.createElement(Bn,{msgId:f,isSender:l,file_url:N,uploadStatus:c,imgFileDownloadOnclick:u})),r.a.createElement("div",{className:"image-caption"},""!==O&&r.a.createElement("span",null,r.a.createElement("span",null,Object(x.g)(O)),B()&&r.a.createElement(Un,{tMessage:E}))))},Gn=a(736),Hn=(a(701),a(702),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageObject,a=void 0===t?{}:t,o=e.uploadStatus,l=e.isSender,i=e.audioFileDownloadOnclick,c=e.mediaUrl,s=void 0===c?"":c,d=a.msgId,u=void 0===d?"":d,h=a.msgBody,v=(h=void 0===h?{}:h).media,f=(v=void 0===v?{}:v).file_url,g=void 0===f?"":f,b=v.audioType,E=void 0===b?"":b,C=v.file_key,y=Object(n.useState)(!1),O=Object(Re.a)(y,2),j=O[0],N=O[1],k=Object(n.useState)(s),S=Object(Re.a)(k,2),D=S[0],M=S[1],I=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.t)(g,Object(x.t)("audio"),C);case 2:t=e.sent,M(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return""!==s||Object(x.S)(g)?M(s):void(""===s&&""===D&&I())}),[s,u]);var T=function(e){e.target.play(),setTimeout((function(){return e.target.pause()}),10)},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout((function(){return N(!0)}),0),document&&document.querySelectorAll("audio").forEach((function(t){return t.src!==e.srcElement.currentSrc?t.pause():t.play()}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"audio-message-container\n            ".concat(2!==o||""===D?"fileProgress":"","\n            ").concat(j?"isPlaying":"")},"recording"!==E?r.a.createElement("i",{className:"audio"},r.a.createElement(w.D,null)):r.a.createElement("i",{className:"audio recording"},r.a.createElement(w.B,null)),r.a.createElement(Bn,{msgId:u,isSender:l,file_url:g,imgFileDownloadOnclick:i,uploadStatus:""===D?1:o}),r.a.createElement(Gn.a,{src:1===o?"":D,autoPlay:!1,autoPlayAfterSrcChange:!1,showLoopControl:!1,showSkipControls:!1,showJumpControls:!1,showVolumeControl:!1,onPlayError:function(e){return console.log("handleOnPlayError",e)},onEnded:function(e){return T(e)},onPause:function(){return N(!1)},onPlay:function(e){return P(e)},onSeeking:function(e){return P(e)}})),r.a.createElement("div",{className:"image-caption"},r.a.createElement("span",null)))}),Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageObject,a=void 0===t?{}:t,n=e.uploadStatus,o=void 0===n?0:n,l=e.isSender,i=e.downloadAction,c=a.msgId,s=void 0===c?"":c,d=a.msgBody,u=(d=void 0===d?{}:d).media,m=(u=void 0===u?{}:u).fileName,p=u.file_size,h=u.file_url,v=u.file_key,f=Object(R.b)(m),g=F(null,f),b=Object(B.j)(p),E=f.split(".").join("");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"document-message-block ".concat(2!==o?"fileProgress":""," ").concat("pdf"===E||"ppt"===E?"fileThumb":""),onClick:function(e){return i(e,h,m,v)}},r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"doc"},r.a.createElement("img",{alt:"file",src:g})),r.a.createElement("span",{className:"doc_name"},r.a.createElement("span",null,m)),r.a.createElement("i",{className:"doc-download"},r.a.createElement(w.V,null)),r.a.createElement(Bn,{msgId:s,isSender:l,uploadStatus:o,imgFileDownloadOnclick:function(){console.log("document download ready")}}))),r.a.createElement("span",{className:"file-details"},b))},qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageObject,a=void 0===t?{}:t,n=a.msgBody,o=(n=void 0===n?{}:n).location,l=(o=void 0===o?{}:o).latitude,i=void 0===l?null:l,c=o.longitude,s=void 0===c?null:c;return r.a.createElement(Kt,{latitude:i,longitude:s})},Wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageObject,a=void 0===t?{}:t,n=e.toggleContactPopup,o=a.msgBody,l=(o=void 0===o?{}:o).contact,i=(l=void 0===l?{}:l).name,c=void 0===i?"":i;return r.a.createElement("div",{className:"contact-message-block"},r.a.createElement("div",{className:"contact-message-inner"},r.a.createElement("div",{className:"contact"},r.a.createElement("img",{src:w.F,alt:""})),r.a.createElement("div",{className:"contact-text"},r.a.createElement("p",{className:"name"},c)),r.a.createElement("span",{onClick:n,className:"Contactdetails"},r.a.createElement("i",null,r.a.createElement(w.Q,null)))))},Kn=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(o.c)(),l=Object(o.d)((function(e){return e.webLocalStorageSetting})),i=l||{},s=i.isEnableTranslate,d=void 0!==s&&s,u=t.jid,h=t.messageAction,v=t.messageObject,f=void 0===v?{}:v,g=t.vCardData,b=void 0===g?{}:g,E=t.messageContent,C=void 0===E?{}:E,y=t.viewOriginalMessage,O=t.messageInfoOptions,j=t.requestReplyMessage,N=t.addionalnfo,k=void 0===N?{}:N,D=t.chatType,M=t.groupMemberDetails,I=t.message_type,T=t.closeMessageOption,A=t.pageType,L=t.handleTranslateLanguage,U=Object(n.useMemo)((function(){return new P.a}),[]),R=Object(B.X)(D),F=f.fromUserId,_=f.createdAt,G=f.msgStatus,H=f.msgId,J=f.deleteStatus,q=f.publisherId,W=f.timestamp,K=f.favouriteStatus,z=f.previousMessageUser,Y=f.msgBody,Z=(Y=void 0===Y?{}:Y).contact,X=void 0===Z?{}:Z,Q=X||{},$=Q.name,ee=void 0===$?"":$,te=Q.phone_number,ae=void 0===te?"":te,ne=null===f||void 0===f||null===(e=f.msgBody)||void 0===e?void 0:e.message,re=R?F:q,oe=k.forward,le=void 0!==oe&&oe,ie=k.forwardMessageId,ce=b.fromUser,se=re&&-1===re.indexOf(ce),de=re!==z,ue=R?{}:Object(B.y)(re,M),me=ue.nameToDisplay,pe=void 0===me?"":me,he=ue.userColor,ve=void 0===he?"":he,fe={color:ve},ge=C.replyTo,be=C.media,Ee=void 0===be?{}:be,Ce=Ee||{},ye=Ce.file,Oe=Ce.caption,je=Ce.thumb_image,Ne=Ce.file_url,ke=Ce.is_uploading,Se=Ce.webWidth,we=Ce.fileName,De=Ce.file_key,Me=Object(n.useState)(!1),Ie=Object(Re.a)(Me,2),Te=Ie[0],Pe=Ie[1],Ae=Object(n.useState)(!1),Le=Object(Re.a)(Ae,2),xe=Le[0],Ue=Le[1],Fe=Object(n.useState)(4),Be=Object(Re.a)(Fe,2),_e=Be[0],Ve=Be[1],Ge=Object(n.useState)(!0),He=Object(Re.a)(Ge,2),Je=He[0],qe=He[1],We=je?Object(x.M)(je):"",Ke=Object(n.useState)(We),Ye=Object(Re.a)(Ke,2),Ze=Ye[0],Xe=Ye[1],Qe=Object(n.useState)(!1),$e=Object(Re.a)(Qe,2),et=$e[0],tt=$e[1],at=Object(n.useState)(""),nt=Object(Re.a)(at,2),rt=nt[0],ot=nt[1],lt=Object(n.useState)(!1),it=Object(Re.a)(lt,2),ct=it[0],st=it[1],dt=Object(n.useState)(!1),ut=Object(Re.a)(dt,2),mt=ut[0],pt=ut[1],ht=function(){var e=f.msgBody,t=(e=void 0===e?{}:e).translatedMessage,a=void 0===t?"":t,n=e.message,r=void 0===n?"":n,o=e.media,l=((void 0===o?{}:o)||{}).caption;return!a&&(r||(void 0===l?"":l))},vt=function(){U.getImageByKey(Ne,Object(x.t)("image"),De).then((function(e){var t=window.URL.createObjectURL(e);Je&&(Ve(2),Xe(t))})).catch((function(){se&&Ve(6),Je&&Xe(Object(x.M)(je))}))};Object(n.useEffect)((function(){if(ge){var e=Object(B.B)(u,ge);Object(Gt.isEmpty)(e)?j(H,ge,D):Object(B.cb)(e,ge)}return 0===ke||1===ke?(Ve(ke),Tt()&&Xe(Ne),At()&&ot(Ne)):3===ke||7===ke?Tt()&&Xe(Ne):0!==ke&&8!==ke&&(Tt()?vt():At()?wt():Ve(2)),function(){return qe(!1)}}),[]);var ft=Object(B.D)(G,re),gt=function(e){e.stopPropagation(),Ue(!xe),pt(!!(Object(B.ab)(I)&&ne.length<=13))},bt=function(){Ue(!1)},Et=function(e){Ue(!xe),h(e,f)},Ct=function(e){Pe(e)},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target.id,a=void 0===t?"":t;Ve(4),U.getImageByKey(a,Object(x.t)("image"),De).then((function(e){var t=window.URL.createObjectURL(e);Je&&(Ve(2),Xe(t))})).catch((function(){setTimeout((function(){Ve(3)}),4e3),Ve(4),Je&&Xe(Object(x.M)(je))}))},Ot=function(e){if(2!==_e)return!0;document&&document.getElementById("imagePreviewContainer")&&document.getElementById("imagePreviewContainer").querySelectorAll("video, audio").forEach((function(e){return e.pause()}));var a={jid:t.jid,chatType:t.chatType,selectedMessageData:f};return c.a.dispatch(Object(S.b)(a)),!1};Object(n.useEffect)((function(){0===G&&Ve(2)}),[G]);var jt=function(e){e.stopPropagation(),Ue(!xe)},Nt=function(){Object(x.R)()?(a(Object(Vt.c)({msgId:H,timestamp:W,favouriteStatus:K})),tt(!0)):Object(x.a)()},kt=function(){T(!0),tt(!1)},St=Object(Gt.isArray)(ae)?ae.join("\n"):ae,wt=function(){U.getImageByKey(Ne,Object(x.t)("audio"),De).then((function(e){var t=window.URL.createObjectURL(e);ot(t),Ve(2)})).catch((function(){ot(null),se&&Ve(6)}))};Object(n.useEffect)((function(){""===rt&&""!==Ne&&8===ke&&wt()}),[Ne]),Object(n.useEffect)((function(){"msgInfo"===A&&(Tt()?vt():At()?wt():Pt()&&Xe(We))}),[H]),Object(n.useEffect)((function(){8===ke&&Ve(ke),1===ke&&(Ve(1),Object(B.qb)(ye,Object(V.c)(u,D),H,t.messageContent.media)),(3===ke||7===ke)&&Ve(3)}),[ke]);var Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ve(4);var t=e.target.id,a=void 0===t?"":t;1===ke?(Ve(1),ot(a)):U.getImageByKey(a,Object(x.t)("audio"),De).then((function(e){var t=window.URL.createObjectURL(e);ot(t),Ve(2)})).catch((function(e){ot(null),setTimeout((function(){se&&Ve(6)}),4e3),Ve(4)}))},Mt=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2===_e){e.next=2;break}return e.abrupt("return");case 2:Object(B.i)(Ne,"file",we,De,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),It=function(){st(!ct)},Tt=function(){return"image"===I},Pt=function(){return"video"===I},At=function(){return"audio"===I},Lt=function(){return"location"===I},xt=function(){return"file"===I},Ut=function(){return"contact"===I},Rt=R&&Object(B.ab)(I)?" reply-text":" sender-text-group",Ft=function(){return"".concat(se?" sender":" receiver").concat(Tt()&&""===Oe?" singleFile":"").concat(Tt()||Pt()?" image-block":"").concat(ge?" reply-block":"").concat(Object(B.ab)(I)?Rt:"").concat(At()?" audio-message":"").concat(2===_e?"":" fileProgress").concat(Lt()?" location-message image-block singleFile":"").concat(xt()?" file-message":"").concat(Ut()?" contact-message":"")};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:H,className:"".concat(Object(x.D)(xe,se,le,G,Te)).concat(Pt()&&""===Oe?"singleFile":"").concat(Pt()&&""!==Oe?" has-caption ":"").concat(Tt()&&""!==Oe?" has-caption ":"").concat(At()&&Object(B.X)(D)?" singleChat":" groupChat").concat(mt?" drop-right":" "),"data-msg-type":I},r.a.createElement(Wt,{msgid:H,forwardMessageId:ie,forward:le,timestamp:W,favouriteStatus:K,selectedToForward:Ct}),r.a.createElement("div",{style:{width:Tt()||Pt()?Se:""},className:"".concat(Ft()," ").concat(Object(B.ab)(I)&&Object(x.U)(ne)?"meetinglink":"")},de&&se&&pe&&r.a.createElement("span",{className:"sender-name",style:fe},pe),ge&&r.a.createElement(zt,{viewOriginalMessage:y,msgId:ge,chatType:D,groupMemberDetails:M}),Object(B.ab)(I)&&r.a.createElement(Rn,{messageObject:f,pageType:A,handleShowCallScreen:t.handleShowCallScreen}),Tt()&&r.a.createElement(_n,{messageObject:f,imgSrc:Ze,fileKey:De,handleMediaShow:Ot,isSender:se,uploadStatus:_e,imgFileDownloadOnclick:yt,pageType:A}),Pt()&&r.a.createElement(Vn,{messageObject:f,fileKey:De,handleMediaShow:Ot,thumbURL:We,isSender:se,uploadStatus:_e,imgFileDownloadOnclick:yt,pageType:A}),At()&&r.a.createElement(Hn,{mediaUrl:rt,fileKey:De,messageObject:f,isSender:se,uploadStatus:_e,audioFileDownloadOnclick:Dt}),Lt()&&r.a.createElement(qn,{messageObject:f}),xt()&&r.a.createElement(Jn,{messageObject:f,fileKey:De,isSender:se,uploadStatus:_e,downloadAction:Mt}),Ut()&&r.a.createElement(Wn,{messageObject:f,isSender:se,uploadStatus:_e,toggleContactPopup:It}),Yt(ft,_,K,se,I,F===ce),!Object(B.ab)(I)&&r.a.createElement(n.Fragment,null,r.a.createElement(Zt,{msgId:H,chatType:D,forward:le,isSender:se,favouriteStatus:K,uploadStatus:_e,dropDownStatus:xe,handleDropDown:jt,isSingleChat:Object(B.X)(D),messageInfoOptions:O,msgType:I,sentMessageToParent:Et,pageType:A,messageObject:f,handleTranslateLanguage:L,isEnableTranslate:d,caption:Oe,isTranslatable:ht()}),r.a.createElement(Ln,{jid:u,pageType:A,forward:le,popUpStatus:et,uploadStatus:_e,showForwardPopUp:Nt,closeForwardPopUp:kt})),!le&&Object(B.ab)(I)&&"conversation"===A&&r.a.createElement("div",{className:"".concat(ht()&&d?"drop-lg":""," message-dropdown-menu")},r.a.createElement("span",{className:"message-dropdown"},d&&ht()&&se&&r.a.createElement("span",{onClick:function(){return L(H,f)},className:"translateIcon"}," ",r.a.createElement(w.nd,null)),r.a.createElement("span",{className:"actionDrop",onClick:gt}),r.a.createElement("i",null,r.a.createElement(w.kc,null))),xe&&0===J&&r.a.createElement(qt,{messageObject:f,chatType:D,messageInfoOptions:O,msgid:H,closeDropDown:bt,handleDropDown:gt,isSender:se,messageAction:Et,msgType:I,favouriteStatus:K}))),ct&&r.a.createElement(ze,{containerId:"container"},r.a.createElement(xn,{toggleContactPopup:It,name:ee,phoneNumber:St}))))},zn={message:Kn},Yn={chat:zn,broadcast:zn,groupchat:{message:Kn}},Zn=function(e){return Yn[e]},Xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chatType,a=Zn(t)||{},n=a.message,o=void 0===n?{}:n;return o?r.a.createElement(o,e):null},Qn=a(29),$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.jid,a=void 0===t?"":t,o=e.rosterData,l=(o=void 0===o?{}:o).data,i=void 0===l?[]:l,c=e.time,s=void 0===c?"":c,u=Object(n.useState)({}),m=Object(Re.a)(u,2),p=m[0],h=m[1];Object(n.useEffect)((function(){var e=Object(B.G)(a,i);e&&0!==Object.keys(e).length||(e=Object(ae.b)(a)||{userId:a}),h(Object(d.a)({},e))}),[e.rosterData]);var v=p.image,f=p.emailId,g=Object(le.e)("token"),b=Object(V.d)(p),E=Object(Qn.i)(s),C=Object(V.m)(p,b);return r.a.createElement("li",{className:"chat-list-li"},r.a.createElement(fe.a,{chatType:"chat",userToken:g,imageToken:v,emailId:f,temporary:!0,name:C}),r.a.createElement("div",{className:"recentchats"},r.a.createElement("div",{className:"recent-username-block"},r.a.createElement("div",{className:"recent-username"},r.a.createElement("div",{className:"username"},r.a.createElement("h3",{title:b},b)))),r.a.createElement("div",{className:"recent-message-block"},r.a.createElement("span",null,E))))},er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deliveredMembers,a=void 0===t?[]:t,o=e.totalMembers,l=void 0===o?0:o,i=e.rosterData,c=Object(Gt.uniqBy)(a,"userId");return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"deliveredDetailsContainer"},r.a.createElement("input",{type:"checkbox",id:"deliveredDetails"}),r.a.createElement("label",{htmlFor:"deliveredDetails"},r.a.createElement("i",{className:"OpenMessageInfoDetails"},r.a.createElement(w.sc,null)),r.a.createElement("i",{className:"CloseMessageInfoDetails"},r.a.createElement(w.M,null)),"Delivered to ".concat(c.length," of ").concat(l)),0===c.length&&r.a.createElement("div",{className:"emptyDelivered"},r.a.createElement("i",null,r.a.createElement(w.gb,null)),r.a.createElement("span",null,"No message delivered yet!")),c.length>0&&r.a.createElement("div",null,r.a.createElement("ul",{className:"chat-list-ul"},c.map((function(e){var t=e.userId,a=e.deliveredTime;return r.a.createElement($n,{time:a,rosterData:i,key:t,jid:t})}))))))},tr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.seenMembers,a=void 0===t?[]:t,o=e.totalMembers,l=void 0===o?0:o,i=e.rosterData,c=void 0===i?{}:i;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"readByDetailsContainer"},r.a.createElement("input",{type:"checkbox",id:"readByDetails"}),r.a.createElement("label",{htmlFor:"readByDetails"},r.a.createElement("i",{className:"OpenMessageInfoDetails"},r.a.createElement(w.sc,null)),r.a.createElement("i",{className:"CloseMessageInfoDetails"},r.a.createElement(w.M,null)),"Read by ".concat(a.length," of ").concat(l)),0===a.length&&r.a.createElement("div",{className:"emptyDelivered"},r.a.createElement("i",null,r.a.createElement(w.gb,null)),r.a.createElement("span",null,"No one is read yet!")),a.length>0&&r.a.createElement("div",null,r.a.createElement("ul",{className:"chat-list-ul"},a.map((function(e){var t=e.userId,a=e.seenTime;return r.a.createElement($n,{time:a,rosterData:c,key:t,jid:t})}))))))},ar=function(e){var t=e.closeMessageOption,a=e.addionalnfo,l=e.rosterData,i=e.groupMemberDetails,c=e.viewOriginalMessage,s=e.vCardData,u=(s=void 0===s?{}:s).data,m=e.handleShowMessageinfo,p=e.jid,h=e.chatType,v=e.requestReplyMessage,f=e.messageAction,g=e.msg,b=void 0===g?{}:g,E=e.pageType,C=b.msgBody,y=void 0===C?{}:C,O=b.msgId,j=void 0===O?"":O,N=b.msgBody,k=(N=void 0===N?{}:N).message_type,S=void 0===k?"":k,D=Object(o.d)((function(e){return e})).messageInfoData,M=void 0===D?{}:D,I=Object(n.useState)({}),T=Object(Re.a)(I,2),P=T[0],A=T[1],L=Object(n.useState)(b),x=Object(Re.a)(L,2),U=x[0],R=x[1],F=M.data,B=(F=void 0===F?{}:F).participants,_=void 0===B?[]:B,V=_.length,G=_.filter((function(e){return e.msgStatus>=1})),H=_.filter((function(e){return 2===e.msgStatus}));return Object(n.useEffect)((function(){R(b);var e=document.getElementById("messageContainer");e&&(e.offsetHeight>240?A({overflow:"hidden auto",maxHeight:"40%"}):A({}))}),[j]),Object(n.useEffect)((function(){var e;V&&(G.length&&G.length===V&&(e=1),H.length&&H.length===V&&(e=2),e&&U.msgStatus!==e&&R(Object(d.a)(Object(d.a)({},U),{},{msgStatus:e})))}),[G.length,H.length]),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"messageInfoHeader"},r.a.createElement("i",{onClick:m},r.a.createElement(w.L,null)),r.a.createElement("h2",null,"Message info")),r.a.createElement("div",{className:"messageInfoContainer"},r.a.createElement("div",{id:"messageContainer",style:P,className:"messageContainer"},r.a.createElement(Xn,{message_type:S,groupMemberDetails:i,requestReplyMessage:v,messageContent:y,messageAction:f,viewOriginalMessage:c,vCardData:u,messageInfoOptions:!1,messageObject:U,addionalnfo:a,jid:p,chatType:h,closeMessageOption:t,pageType:E||"msgInfo"})),r.a.createElement("div",{className:"infoContainer"},r.a.createElement(tr,{seenMembers:H,totalMembers:V,rosterData:l}),r.a.createElement(er,{deliveredMembers:G,totalMembers:V,rosterData:l}))))},nr=function(e){var t=e.messageAction,a=e.messageObject,o=void 0===a?{}:a,l=e.vCardData,i=void 0===l?{}:l,c=e.chatType,s=void 0===c?"":c,d=e.addionalnfo,u=void 0===d?{}:d,m=o.msgId,p=void 0===m?"":m,h=o.msgType,v=void 0===h?"":h,f=o.createdAt,g=void 0===f?"":f,b=Object(V.i)(o),E=i.fromUser,C="acknowledge"!==v&&b&&-1===b.indexOf(E),y=Object(n.useState)(!1),O=Object(Re.a)(y,2),j=O[0],N=O[1],k=function(e){e.stopPropagation(),N(!j)},S=u.forward,D=void 0!==S&&S,M=u.forwardMessageId,I=u.deleteAction,T=C?Object(V.a)(b):{},P=T.nameToDisplay,A=T.userColor,L=Object(n.useState)(!1),U=Object(Re.a)(L,2),R=U[0],F=U[1],B={color:A};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:p,className:Object(x.D)(j,C,D,2,R)},I?r.a.createElement(Wt,{selectedToForward:function(e){F(e)},forwardMessageId:M,forward:D,msgid:p,timestamp:0}):r.a.createElement("div",null),r.a.createElement("div",{className:"".concat(C?"sender ":"receiver"," sender-text-group")},C&&"chat"!==s&&r.a.createElement("span",{className:"sender-name",style:B},P),r.a.createElement("div",{className:"message-text"},r.a.createElement("span",{className:"recallstatus deleted_messge text-italic"}," ",r.a.createElement("i",null,r.a.createElement(w.s,null))," ",C?Le.W:Le.ab)),g&&r.a.createElement("span",{className:"message-time"},r.a.createElement("span",{className:"msg-sent-time"},Object(x.s)(g))),!D&&r.a.createElement("div",{className:"message-dropdown-menu"},r.a.createElement("span",{className:"message-dropdown"},r.a.createElement("span",{"data-jest-id":"jestHandleDropDown",className:"actionDrop",onClick:k}),r.a.createElement("i",null,r.a.createElement(w.kc,null))),j&&r.a.createElement(qt,{msgid:p,recall:!0,handleDropDown:k,messageAction:function(e){N(!j),t(e,o)}})))))},rr=function(e){return e.clientHeight<e.scrollHeight},or=function(e,t){return e.scrollTop+e.clientHeight>=e.scrollHeight-t},lr=function(e){return 0===e.scrollTop},ir=function(e){return e.scrollTop=e.scrollHeight-e.clientHeight},cr=function(e,t){return t.scrollTop+=e},sr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.isScrolledDownThreshold,l=void 0===a?150:a,i=function(t){Object(g.a)(o,t);var a=Object(b.a)(o);function o(e){var t;return Object(h.a)(this,o),(t=a.call(this,e)).updateHeigth=function(){var e=t.props.containnerId||"message-containner",a=document.getElementById(e);if(a){var n=document.querySelector(".conversation-header"),r=Array.from(document.querySelectorAll(".chatconversation-container > *:not(.msg-content), .emojiPicker-container")).reduce((function(e,t){return e+Math.round(t.clientHeight)}),0),o=window.innerHeight-n.clientHeight-r;a.style.height=o+"px",a.style["overflow-y"]="auto",a.setAttribute("visibleheight",o)}},t.isScrolledDown=!0,t.scrollContainner=null,t.scrollHeight=null,t.isScrolledUp=null,window.addEventListener("resize",(function(){t.updateHeigth()})),t.state={isVisibleScroll:!1,msgCount:!1},t}return Object(v.a)(o,[{key:"scrollDownIfNeeded",value:function(){this.isScrolledDown&&this.scrollContainner&&rr(this.scrollContainner)&&ir(this.scrollContainner)}},{key:"handleScroll",value:function(e){var t=e.target;t.offsetHeight+t.scrollTop===t.scrollHeight&&this.props.onScrolledBottom(),this.isScrolledDown=or(this.scrollContainner,l),lr(this.scrollContainner)&&(this.scrollHeight=this.scrollContainner.scrollHeight,this.props.onScrolledTop&&this.props.onScrolledTop(e)),t.offsetHeight+t.scrollTop>=t.scrollHeight-150?this.setState({isVisibleScroll:!1}):this.setState({isVisibleScroll:!0})}},{key:"componentDidMount",value:function(){var e=this;this.updateHeigth(),this.scrollDownIfNeeded();var t=document.getElementById("typingContainer");t&&new ResizeObserver((function(){e.scrollDownIfNeeded(),e.updateHeigth(),e.isScrolledDown&&e.scrollContainner&&cr(20,e.scrollContainner)})).observe(t)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.isScrolledUp=lr(this.scrollContainner),e.replyMessageData.id===this.props.replyMessageData.id){if(e.conversationState.popUpId!==this.props.conversationState.popUpId)return this.updateHeigth(),void this.scrollDownIfNeeded();if(e.scrollBottomChatHistory.id===this.props.scrollBottomChatHistory.id||this.isScrolledDown||ir(this.scrollContainner),this.isScrolledUp&&null!==this.scrollHeight){var a=this.scrollContainner.scrollHeight-this.scrollHeight;this.scrollHeight=null,cr(a,this.scrollContainner)}else this.scrollDownIfNeeded()}else this.timer=setTimeout((function(){t.scrollContainner&&t.scrollDownIfNeeded()}),1e3)}},{key:"render",value:function(){var t=this,a=this.props,o=a.containerId,l=void 0===o?"message-containner":o,i=a.scrollToBottom;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{onScroll:function(e){return t.handleScroll(e)},ref:function(e){return t.scrollContainner=Ke.a.findDOMNode(e)},id:l,className:l},r.a.createElement("div",{className:"extraSpace"}),r.a.createElement("div",null,r.a.createElement(e,this.props)),r.a.createElement("span",{id:"InBottom",className:"InBottom"}),this.state.isVisibleScroll&&r.a.createElement("div",{className:"more-messages",onClick:i},this.state.msgCount&&r.a.createElement("span",{className:"count-unread"},r.a.createElement("span",null,"100+")),r.a.createElement(w.Ob,null))))}}]),o}(r.a.PureComponent),c=function(e){return{replyMessageData:e.replyMessageData,conversationState:e.conversationState,scrollBottomChatHistory:e.scrollBottomChatHistory}};return Object(o.b)(c,null)(i)},dr=sr(function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).iterateArrayOfTemplate=function(t){if(!t)return null;var a=e.props,n=a.vCardData,o=(n=void 0===n?{}:n).data,l=a.jid,i=a.chatType,c=a.deliveredType,s=a.viewOriginalMessage,d=a.requestReplyMessage,u=a.messageAction,m=a.addionalnfo;return t.map((function(t){var a=t.msgid,n=t.messageContent,p=t.recallstatus,h=(n||{}).message_type,v=void 0===h?null:h;return"0"===p?r.a.createElement(Xn,{message_type:v,key:a,viewOriginalMessage:s,requestReplyMessage:d,deliveredType:c,messageAction:u,closeMessageOption:e.props.closeMessageOption,messageContent:n,vCardData:o,messageObject:t,addionalnfo:m,messageInfoOptions:!1,jid:l,chatType:i}):r.a.createElement(nr,{key:a,messageAction:u,vCardData:o,chatType:i,messageObject:t})}))},e.messageToDisplay=function(t){return t.map((function(t){return e.iterateArrayOfTemplate(t)}))},e.dateBlock=function(t,a){var o=Object(B.M)(t,(function(e){return new Date(e.msgdate).getTime()}));return r.a.createElement(n.Fragment,{key:a},r.a.createElement("div",{className:"chatDate"},r.a.createElement("span",null,a&&Object(B.f)(a))),e.messageToDisplay(o))},e.constructMessageTemplate=function(){var t=e.props.chatmessages,a=t.id,n=t.data;if(!a)return null;var r=Object(B.L)(n,(function(e){return e.msgdate.split(/[\s]/)[0]}));return Object.keys(r).map((function(t){var a=r[t];return e.dateBlock(a,t)}))},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.constructMessageTemplate();return r.a.createElement(n.Fragment,null,e||null)}}]),a}(n.Component),{isScrolledDownThreshold:100});function ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.msgActionType,a=e.closeMessageOption,l=e.activeJid,i=e.deleteMultipleMessages,c=e.handleStarredAction,s=Object(o.d)((function(e){return e})),d=s.selectedMessageData,u=(d=void 0===d?{}:d).id,m=void 0===u?"":u,p=d.totalMessage,h=void 0===p?0:p,v=d.data,f=void 0===v?[]:v,g=Object(n.useState)(!1),b=Object(Re.a)(g,2),E=b[0],C=b[1],y=function(){C(!E)};Object(n.useEffect)((function(){m&&0===h&&a()}),[m]),Object(n.useEffect)((function(){return function(){a()}}),[]);var O=function(){var e=!1;return f.map((function(t){return 0===t.favouriteStatus&&(e=!0),t.msgId})),e};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"selectedMessagecontainer"},r.a.createElement("div",{className:"selectedMessageOption"},r.a.createElement("div",{className:"CloseSelectedMessageOption"},r.a.createElement("i",{onClick:a,title:"Close"},r.a.createElement(w.Vc,null)),r.a.createElement("span",null,h," Selected")),r.a.createElement("ul",{className:"selectedForwardOption"},"Delete"===t&&r.a.createElement("li",{onClick:i,className:"delete",title:"Delete"},r.a.createElement("i",null,r.a.createElement(w.T,null))),"Forward"===t&&r.a.createElement("li",{className:"forward","data-jest-id":"jestShowForwardPopUp",onClick:y,title:"Forward"},r.a.createElement("i",null,r.a.createElement(w.Wc,null))),("Starred"===t||"UnStarred"===t)&&r.a.createElement(r.a.Fragment,null,O()?r.a.createElement("li",{className:"star",title:"Add as favourite",onClick:c},r.a.createElement("i",null,r.a.createElement(w.ed,{fill:"#383636"}))):r.a.createElement("li",{className:"star",title:"Remove from favourite",onClick:c},r.a.createElement("i",null,r.a.createElement(w.rd,{fill:"#383636"}))))))),E&&r.a.createElement(ze,{containerId:"container"},r.a.createElement(An,{activeJid:l,closeMessageOption:a,closePopup:y})))}var mr=sr(function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).iterateArrayOfTemplate=function(t){if(!t)return null;var a=e.props,n=a.rosterData.data,o=a.groupMemberDetails,l=a.viewOriginalMessage,i=a.vCardData,c=(i=void 0===i?{}:i).data,s=a.jid,d=a.chatType,u=a.requestReplyMessage,m=a.messageAction,p=a.addionalnfo,h=a.deliveredType,v=a.handleTranslateLanguage;return t.map((function(t){var a=t.deleteStatus,i=t.msgId,f=t.msgBody,g=t.msgType,b=t.msgBody,E=(b=void 0===b?{}:b).message_type,C=void 0===E?"":E;if(g===Le.n){var y=t.publisherId,O=t.userId,j=t.profileUpdatedStatus,N=Object(Qn.b)(y,O,j,n)||"";return r.a.createElement("div",{key:i,id:i,className:"chatStatusBar"},r.a.createElement("span",null,N))}return 0===a?r.a.createElement(Xn,{message_type:C,key:i,groupMemberDetails:o,requestReplyMessage:u,deliveredType:h,messageContent:f,messageAction:m,closeMessageOption:e.props.closeMessageOption,viewOriginalMessage:l,vCardData:c,messageObject:t,jid:s,addionalnfo:p,messageInfoOptions:!0,chatType:d,pageType:"conversation",handleTranslateLanguage:v,handleShowCallScreen:e.props.handleShowCallScreen}):r.a.createElement(nr,{closeMessageOption:e.props.closeMessageOption,messageInfoOptions:!0,addionalnfo:p,key:i,vCardData:c,messageObject:t,messageAction:m,chatType:d})}))},e.messageToDisplay=function(t){return t.map((function(t){return e.iterateArrayOfTemplate(t)}))},e.dateBlock=function(t,a){var o=Object(B.M)(t,(function(e){return new Date(e.dateString).getTime()}));return r.a.createElement(n.Fragment,{key:a},r.a.createElement("div",{className:"chatDate"},r.a.createElement("span",null,a&&Object(B.f)(a))),e.messageToDisplay(o))},e.constructMessageTemplate=function(){var t=e.props.chatmessages,a=Object(B.L)(t,(function(e){return(Ae(e.createdAt)||"").split(/[\s]/)[0]}));return Object.keys(a).map((function(t){var n=a[t];return e.dateBlock(n,t)}))},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.constructMessageTemplate();return r.a.createElement(n.Fragment,null,e||null)}}]),a}(n.Component),{isScrolledDownThreshold:100}),pr=function(e){return{type:j.kb,payload:{popUpId:O()(),localState:e}}},hr=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).setFileInfo=function(e){var t=document.createElement("audio");t.preload="metadata",t.addEventListener("loadedmetadata",(function(){n.setState({videoSrc:t.src},(function(){n.props.updateMedia(n.props.media,{duration:Math.round(1e3*t.duration),imageUrl:t.src,msgType:"audio",audioType:"file"}),n.setState({duration:Math.round(1e3*t.duration)})}))})),t.src=URL.createObjectURL(e)},n.videoControls=function(){return{autoplay:!1,controls:!0,sources:[{src:n.state.videoSrc,type:n.props.media.type===Le.b?"audio/aac":n.props.media.type}]}},n.handleDelete=function(){n.props.onClickCloseSelectedItem(n.props.media)},n.onHandlePlay=function(e){n.setState({isPlaying:e})},n.state={videoSrc:"",duration:0,isPlaying:!1},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.setFileInfo(this.props.media)}},{key:"componentWillUnmount",value:function(){window.URL.revokeObjectURL(this.state.videoSrc)}},{key:"render",value:function(){var e=this.state,t=e.videoSrc,a=e.isPlaying;return t?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"type-media audio"},r.a.createElement("div",{className:"video-wrapper1"},r.a.createElement("i",{className:"AudioDetails ".concat(!a&&"default")},r.a.createElement(w.D,null)," ",r.a.createElement("span",{className:"audioDuration"},Object(x.Y)(this.state.duration))),r.a.createElement(U,Object.assign({deleteOption:!0,onClickCloseSelectedItem:this.handleDelete},this.videoControls(),{handlePlay:this.onHandlePlay,fileType:"audio"}))))):null}}]),a}(n.Component),vr=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.props.updateMedia(this.props.media,{msgType:"file"})}},{key:"render",value:function(){var e=this.props,t=e.media,a=(t=void 0===t?{}:t).name,o=void 0===a?"":a,l=t.size,i=void 0===l?"":l,c=e.placeholder,s=Object(B.j)(i);return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"type-image document"},r.a.createElement("div",{className:"type-thumb-image"},r.a.createElement("img",{src:c,alt:""}),r.a.createElement("p",null,"".concat(o," , ").concat(s)))))}}]),a}(n.Component),fr=a(703),gr=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,a),(e=t.call(this,n)).pasteAsPlainText=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.preventDefault();var a=null===t||void 0===t||null===(e=t.clipboardData)||void 0===e?void 0:e.getData("text/plain");document&&document.execCommand("insertHTML",!1,Object(x.db)(a))},e.emitChange=function(t){var a=e.typingContainner.innerHTML;e.props.handleMessage&&(e.props.onInputListener(),e.props.handleMessage({target:{value:a}})),(a||a.replace(/^\s+/,"")!==a)&&(e.lastHtml=a)},e.onKeyDownListner=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.props.onKeyDownListner&&e.props.onKeyDownListner(t),13!==t.which||!1!==t.shiftKey||(t.preventDefault(),e.props.handleSendTextMsg(),e.props.handleEmptyContent(),!1)},e.currentPosition=function(){var t=it(e.typingContainner);e.props.setCursorPosition&&e.props.setCursorPosition(t)},e.onFocusText=function(){var t=e.props.id,a=void 0===t?"":t;setTimeout((function(){document.getElementById(a)&&document.getElementById(a).focus()}),100)},e.lastHtml="",e}return Object(v.a)(a,[{key:"shouldComponentUpdate",value:function(e){return e.html!==this.typingContainner.innerHTML}},{key:"componentDidUpdate",value:function(){this.props.html!==this.typingContainner.innerHTML&&(this.typingContainner.innerHTML=this.props.html)}},{key:"componentDidMount",value:function(){this.onFocusText()}},{key:"render",value:function(){var e=this,t=this.props,a=t.placeholder,n=void 0===a?"":a,o=t.id,l=void 0===o?"":o;return r.a.createElement("div",{id:l,name:"typingMessage",contentEditable:"true",className:"typing-area",onInput:this.emitChange,onPaste:this.pasteAsPlainText,onKeyDown:this.onKeyDownListner,"data-jest-id":"jestContentEditable",suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:this.props.html},"data-text":n||"Start typing...",ref:function(t){return e.typingContainner=Ke.a.findDOMNode(t)},onKeyUp:function(){e.currentPosition()},onMouseUp:function(){setTimeout((function(){e.currentPosition()}),0)},onFocus:function(e){e.target.classList.add("incaption")},onBlur:function(t){t.target.classList.remove("incaption"),e.props.setSelectedText&&e.props.setSelectedText(lt())}})}}]),a}(n.Component),br=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChangeCaption,a=e.media,o=void 0===a?{}:a,l=e.onClickSend,i=o.caption,c=void 0===i?"":i,s=Object(n.useState)({value:""}),u=Object(Re.a)(s,2),m=u[0],p=u[1],h=Object(n.useState)(null),v=Object(Re.a)(h,2),f=v[0],g=v[1],b=Object(n.useState)(0),E=Object(Re.a)(b,2),C=E[0],y=E[1],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=m,a=t.value,n=void 0===a?"":a;if(n){var r=n.length;st(document.getElementById("image-preview-typingContainer"),+r),y(e),Object(fr.a)("typingMessage"),(m=r.length-1)>=0&&r.deleteData(m,0)}else y(e)},j=function(e){var a=m.value,n=C,r="";if(f===a)r=e,n=e.length;else{var l=a.substring(0,C),i=a.substring(C);r=l+e+i,n=C+e.length}Ve()(r).length<=_.g&&(p((function(e){return O(n),st(document.getElementById("image-preview-typingContainer"),n),Object(d.a)(Object(d.a)({},e),{},{value:r})})),t(o,r))},N=function(e){Ve()(Sn()(m,"value","")).length>=_.g&&-1===_.e.indexOf(e.which)&&e.preventDefault()},k=function(e){var a=e.target.value;p((function(e){return Object(d.a)(Object(d.a)({},e),{},{value:0===e.value.length&&0===a.trim().length||1===a.length&&"\n"===a?"":a})})),t(o,a)},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>=975){var t=_.g-e;return r.a.createElement("span",{className:"captionCount"},t>0?t:0)}return""},w=function(){return!0},D=function(){return!0},M=function(e){return g(e)};Object(n.useEffect)((function(){k({target:{value:c}})}),[c]);var I=m,T=I.value,P=void 0===T?"":T;return r.a.createElement("div",{className:"uploadImageCaption"},r.a.createElement("div",{className:"message-area-container"},r.a.createElement("div",{className:"message-area",id:"video-caption-".concat(null===e||void 0===e?void 0:e.uniqueId)},r.a.createElement(et,{onEmojiClick:j}),r.a.createElement(gr,{captionCount:!0,captionLength:P,id:"image-preview-typingContainer",handleMessage:k,handleSendTextMsg:l,onInputListener:w,handleOnFocus:D,placeholder:"Add a caption",setCursorPosition:O,setSelectedText:M,onKeyDownListner:N,html:ct(_.g,P)}),S(Ve()(Sn()(m,"value","")).length))))},Er=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={imgSrc:URL.createObjectURL(e.media)},n}return Object(v.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.imgSrc!==t.imgSrc||this.props.caption!==e.caption}},{key:"componentDidMount",value:function(){this.props.updateMedia(this.props.media,{imageUrl:this.state.imgSrc,msgType:"image"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"type-image",id:"preview"},r.a.createElement("div",{className:"imageZoomWrapper"},r.a.createElement(T.b,null,(function(t){var a=t.zoomIn,n=t.zoomOut,o=t.resetTransform;Object(M.a)(t,["zoomIn","zoomOut","resetTransform"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tools zoomTools"},r.a.createElement("button",{onClick:a},r.a.createElement(w.Ed,null)),r.a.createElement("button",{onClick:n},r.a.createElement(w.Fd,null)),r.a.createElement("button",{onClick:o},r.a.createElement(w.Gd,null))),r.a.createElement(T.a,null,r.a.createElement("img",{src:e.state.imgSrc,alt:""})))}))),r.a.createElement(br,{onChangeCaption:this.props.onChangeCaption,media:this.props.media,onClickSend:this.props.onClickSend}))}}]),a}(n.Component),Cr=(a(704),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).setFileInfo=function(e){var t=new FileReader;t.onload=function(){var a=new Blob([t.result],{type:e.type}),r=URL.createObjectURL(a),o=document.createElement("video");o.addEventListener("error",(function(e){console.log("error when loading video file",e)})),o.addEventListener("loadeddata",(function(){var e=document.createElement("canvas");n.setState({originalWidth:o.videoWidth,originalHeight:o.videoHeight});var t=Object(x.c)(o.videoWidth,o.videoHeight),a=t.webWidth,l=t.webHeight,i=t.androidWidth,c=t.androidHeight,s=o.videoWidth,d=o.videoHeight;e.width=_.B,e.height=d/s*_.B,e.getContext("2d").drawImage(o,0,0,_.B,d/s*_.B);var u=e.toDataURL().replace(/^data:image\/\w+;base64,/,"");n.props.updateMedia(n.props.media,{duration:Math.round(1e3*o.duration),imageUrl:u,msgType:"video",webWidth:a,webHeight:l,androidWidth:i,androidHeight:c,originalWidth:o.videoWidth,originalHeight:o.videoHeight}),URL.revokeObjectURL(r)})),o.preload="metadata",o.src=r,o.muted=!0,o.play()},t.readAsArrayBuffer(e)},n.videoControls=function(){return{autoplay:!1,controls:!0,sources:[{src:n.state.videoSrc,type:n.props.media.type}]}},n.handleDelete=function(){n.props.onClickCloseSelectedItem(n.props.media)},n.state={videoSrc:URL.createObjectURL(e.media),originalWidth:0,originalHeight:0,uniqueId:Date.now()},n}return Object(v.a)(a,[{key:"componentWillUnmount",value:function(){URL.revokeObjectURL(this.state.videoSrc)}},{key:"componentDidMount",value:function(){this.setFileInfo(this.props.media)}},{key:"render",value:function(){var e=this.state,t=e.originalWidth,a=e.originalHeight;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"type-media video"},r.a.createElement("div",{className:"video-wrapper-0"},0!==t&&0!==a&&r.a.createElement("div",{className:"video-wrapper1",id:"video-player-".concat(this.state.uniqueId)},r.a.createElement(U,Object.assign({deleteOption:!0,onClickCloseSelectedItem:this.handleDelete},this.videoControls(),{webWidth:t,webHeight:a,msgId:this.state.uniqueId,captionMargin:0,fileType:"video"})))),r.a.createElement(br,{onChangeCaption:this.props.onChangeCaption,media:this.props.media,onClickSend:this.props.onClickSend,uniqueId:this.state.uniqueId})))}}]),a}(n.Component));window.URL=window.URL||window.webkitURL;var yr=Xt.a.maxAllowedMediaCount,Or=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).handleKeyboardActions=function(t){switch(t.keyCode){case 13:e.state.selectedFiles.length>0&&!t.shiftKey&&e.sendMediaFile();break;case 27:e.closePreview();break;case 37:!document.getElementById("imagePreviewContainer").querySelector(".incaption")&&e.Previous&&e.Previous.click();break;case 39:!document.getElementById("imagePreviewContainer").querySelector(".incaption")&&e.Next&&e.Next.click()}},e.onDragOver=function(e){e.stopPropagation(),e.preventDefault();var t=document.getElementById("imagePreviewContainer");return t&&t.classList.add("highlight"),!1},e.onDrop=function(t){t.preventDefault();var a=t.target.files||t.dataTransfer&&t.dataTransfer.files,n=document.getElementById("imagePreviewContainer");n&&n.classList.remove("highlight"),a&&e.setState({dragedFiles:{dragId:O()(),files:a}},(function(){Array.from(a).length>0&&e.handleFiles(a,"")}))},e.createAddFileContainer=function(t){var a=document.createElement("div");a.innerHTML='<div id="dynamicUpload" class="uploadfile" style="display: '.concat(e.state.selectedFiles.length>=yr?"none":_.p,'">\n            <div><label for="addfile"><input id="addfile" class="uploadfileinput" type="file" multiple /></label>\n            <i class="addIcon"></i><span>ADD FILE</span></div></div>'),(a=a.firstChild).querySelector(".uploadfileinput").addEventListener("change",(function(t){e.handleFiles(t.target.files,"","new")})),t.appendChild(a);var n=document.createElement("div");n.innerHTML='<div class="attachmentSend"><i>\n    <svg fill="#fff" width="26.705" height="25.802" viewBox="0 0 26.705 25.802"><path d="M0,64.052l26.7-12.9L0,38.25v11l14.525,1.905L0,53.057Z" \n    transform="translate(0 -38.25)"></path></svg></i></div>',(n=n.firstChild).querySelector("i").addEventListener("click",(function(t){e.sendMediaFile()})),t.parentElement.appendChild(n)},e.handleFiles=function(t,a,n){var r=Array.from(t),o=e.state.selectedFiles;Object(R.e)(r,a).then((function(t){var a=r.filter((function(e,a){return t.find((function(e,t){return t===a&&e}))}));a.length+e.state.selectedFiles.length>yr&&Object(R.c)(),e.setState({showAvailableOptions:!1,selectedFiles:[].concat(Object(D.a)(o),Object(D.a)(a.map((function(e){var t=O()();return e.fileDetails={fileId:t},e})))).slice(0,yr)},(function(){e.setState(Object(d.a)({previewData:e.handleDisplayMedia()},"new"===n&&{selectedSlide:o.length}),(function(){var t=document.getElementById("imagePreviewContainer").querySelector(".thumbs-wrapper"),a=document.getElementById("dynamicUpload");t&&!a?e.createAddFileContainer(t):a&&(a.style.display=e.state.selectedFiles.length>=yr?"none":_.p)}))}))})).catch((function(e){return console.log(e,"upload file error")}))},e.removeSelectedItem=function(t){var a=e.state,n=a.selectedFiles,r=a.selectedSlide,o=n.indexOf(t),l=n.filter((function(e,t){return t!==o})),i=0!==r&&r===l.length?r-1:r;e.setState({selectedFiles:l,selectedSlide:i},(function(){var t=document.getElementById("dynamicUpload");t&&(t.style.display=_.p),e.setState({previewData:e.handleDisplayMedia()})}))},e.onChangeCaption=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=document.createElement("div");a.innerHTML=t;var n=a.textContent||a.innerText;return e.caption=n.trim(),!0},e.updateMedia=function(t,a){var n=e.state.selectedFiles,r=n.indexOf(t),o=n.map((function(e,n){var o;n===r&&(e.fileDetails=Object(d.a)({fileId:null===t||void 0===t||null===(o=t.fileDetails)||void 0===o?void 0:o.fileId},a));return e}));e.setState({selectedFiles:o})},e.handlePrev=function(t,a){return a&&r.a.createElement("button",{type:"button",onClick:t,title:"Previous",ref:function(t){return e.Previous=t},"aria-label":"previous slide / item",className:"control-arrow control-prev"})},e.handleNext=function(t,a){return a&&r.a.createElement("button",{type:"button",onClick:t,title:"Next",ref:function(t){return e.Next=t},"aria-label":"next slide / item",className:"control-arrow control-next"})},e.videoControls=function(e){return{autoplay:!1,controls:!0,sources:[{src:e,type:"video/mp4"}]}},e.handleMediaOnChange=function(t,a){e.setState({selectedSlide:t}),document.getElementById("imagePreviewContainer").querySelectorAll("video, audio").forEach((function(e){return e.pause()}))},e.sendMediaFile=function(){return!Object(x.b)()&&(e.state.selectedFiles.filter((function(e){var t=e.fileDetails,a=t.msgType,n=t.imageUrl;return!!(a&&"image"!==a&&"video "!==a||n)})).length!==e.state.selectedFiles.length||e.props.onClickSend(e.state.selectedFiles),!0)},e.handleDisplayMedia=function(){var t=e.state.selectedFiles;return 0===t.length?e.closePreview():t.map((function(t,a){var n=t.type,o=Object(x.H)(t.type,t),l=Object(R.b)(t.name),i=t.fileDetails.fileId,c=t.caption,s=void 0===c?"":c;switch(o){case"image":return r.a.createElement(Er,{thumb:"image",key:i,onClickSend:e.sendMediaFile,media:t,caption:s,onClickCloseSelectedItem:e.props.onClickCloseSelectedItem,onChangeCaption:e.onChangeCaption,updateMedia:e.updateMedia});case"video":return r.a.createElement(Cr,{thumb:"video",key:i,onClickSend:e.sendMediaFile,media:t,caption:s,onClickCloseSelectedItem:e.props.onClickCloseSelectedItem,onChangeCaption:e.onChangeCaption,updateMedia:e.updateMedia});case"file":var d=F(n,l);return r.a.createElement(vr,{thumb:"file",key:i,onClickSend:e.sendMediaFile,media:t,caption:s,placeholder:d,onClickCloseSelectedItem:e.props.onClickCloseSelectedItem,onChangeCaption:e.onChangeCaption,updateMedia:e.updateMedia});case"audio":return r.a.createElement(hr,{thumb:"audio",key:i,onClickSend:e.sendMediaFile,media:t,caption:s,onClickCloseSelectedItem:e.props.onClickCloseSelectedItem,onChangeCaption:e.onChangeCaption,updateMedia:e.updateMedia});default:return r.a.createElement("div",{key:i})}}))},e.closePreview=function(){e.props.onClosePreview()},e.getSrcDocument=function(e,t){return"file"===e?t:w.k},e.imageOnLoad=function(e){e.target.classList.remove("image-load"),e.target.style.display="block"},e.imageOnLoader=function(e){e.target.style.display="none"},e.getMediaSrc=function(t,a,n){var r;switch(t){case"file":case"audio":r=e.getSrcDocument(t,a);break;case"video":r=Object(x.M)(n);break;case"image":r=n}return r},e.customRenderThumb=function(t){return t.map((function(t,a){var n=t.props,o=n.placeholder,l=n.thumb,i=n.media.fileDetails,c=i.fileId,s=i.imageUrl,d=void 0===s?"":s,u=i.duration,m=e.getMediaSrc(l,o,d);return r.a.createElement("div",{key:c,className:"file"===l?"thumb-img file img-load":"thumb-img img-load"},r.a.createElement("span",{onClick:function(a){a.stopPropagation(),e.removeSelectedItem(t.props.media)},title:"Remove",className:"removeSelected"}),r.a.createElement("img",{src:m,key:"".concat(c,"-Img"),alt:"",onLoad:e.imageOnLoad,className:"image-load",style:{display:"none"}}),r.a.createElement(H,null),u&&r.a.createElement("p",{className:"".concat("video"===l?"video-duration":"audio-duration"),key:"".concat(c,"-Duration")},Object(x.Y)(u)))}))},e.state={mediaList:[],previewData:[],selectedFiles:[],isZoomed:!1,videoProgress:0,videoDuration:"",selectedSlide:0},document.addEventListener("keydown",e.handleKeyboardActions,!0),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.seletedFiles,t=(e=void 0===e?{}:e).filesId,a=e.mediaType;t&&this.handleFiles(this.props.seletedFiles.files,a)}},{key:"componentDidUpdate",value:function(e){var t,a=this.props.seletedFiles.filesId,n=null===e||void 0===e||null===(t=e.selectedFiles)||void 0===t?void 0:t.fileId;a&&n&&a!==n&&this.handleFiles(this.props.seletedFiles.files,"")}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyboardActions,!0)}},{key:"render",value:function(){var e=this.state,t=e.previewData,a=e.selectedFiles,o=e.selectedSlide;return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(n.Fragment,null,r.a.createElement("div",{onDrop:this.onDrop,onDragOver:this.onDragOver,className:"imagePreviewContainer mediaAttachmemtUpload",id:"imagePreviewContainer"},r.a.createElement("div",{className:"attachments-header"},r.a.createElement("h5",null,"Preview"),r.a.createElement("i",{onClick:this.closePreview},r.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})))),a.length>0?r.a.createElement(I.Carousel,{renderArrowPrev:this.handlePrev,renderArrowNext:this.handleNext,selectedItem:o,onChange:this.handleMediaOnChange,onClickThumb:this.handleMediaOnChange,renderThumbs:this.customRenderThumb,interval:"100",transitionTime:"10",thumbWidth:"80",swipeable:!1},t):r.a.createElement("div",{className:"drag-preview"},r.a.createElement("div",{className:"drag-area"},r.a.createElement("div",null,r.a.createElement("div",{className:"drag-area-inner"},r.a.createElement("span",null,r.a.createElement("img",{src:w.Kd,alt:"Drag and Drop"})),r.a.createElement("h1",null,"Drag & Drop Your Files Here"),r.a.createElement("p",null,"Make sure to upload a 'JPG, JPEG, PNG, MP3, MP4, PDF, XLS, XLSX, DOC, DOC, PPT, PPTX, RAR, ZIP, CSV or TXT' file"))))))))}}]),a}(n.Component),jr=a(705),Nr=a.n(jr);a(706);function kr(e){var t=document.createElement("video"),a=new Promise((function(e){return t.addEventListener("loadedmetadata",(function(){e(Math.round(1e3*t.duration))}))}));return t.src="string"===typeof e||e instanceof String?e:window.URL.createObjectURL(e),a}var Sr,wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useMemo)((function(){return new Nr.a({bitRate:128})}),[]),a=Object(n.useState)(!0),o=Object(Re.a)(a,2),l=o[0],i=o[1],c=Object(n.useState)(!1),s=Object(Re.a)(c,2),d=s[0],u=s[1],m=Object(n.useState)(!1),p=Object(Re.a)(m,2),h=p[0],v=p[1],f=Object(n.useRef)(null),g=e.recordingStatus,b=function(){t.stop(),clearTimeout(f.current);var e=document.getElementById("typingContainer");e&&e.setAttribute("contentEditable",!0),i(!0),g(!0)},C=function(){t.stop(),clearTimeout(f.current)},y=function(){return!!Object(x.b)()||(!h||(clearTimeout(f.current),i(!0),g(!0),v(!1),t.stop().getMp3().then((function(t){var a=Object(Re.a)(t,2),n=a[0],r=a[1],o=new File(n,"voice.mp3",{type:r.type,lastModified:Date.now()});return kr(r).then((function(t){o.fileDetails={duration:t,audioType:"recording"};var a=document.getElementById("typingContainer");return a&&a.setAttribute("contentEditable",!0),e.handleSendMediaMsg([o])}))})).catch((function(e){console.log(e)})),h))},O=function(e,t){var a,n,r,o=Date.now();function l(){a=e-((Date.now()-o)/1e3|0),e-1===a&&v(!0),n=(n=a/60|0)<10?"0"+n:n,(r=(r=a%60|0)<10?"0"+r:r)>=0&&(t.innerHTML='<span class="recordMinutes">'+n+'</span>:<span class="recordSeconds">'+r+"</span>"),a<0&&C()}l(),f.current=setInterval(l,1e3)},j=function(){if(!Object(x.b)())if(e.avoidRecord)Object(re.b)("Unable to record audio while on call.");else{var a=(JSON.parse(Object(le.e)("settings"))||{}).audioLimit,n=void 0===a?300:a;navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){if(e.active){u(!1);for(var a=document.getElementsByTagName("audio"),r=0;r<a.length;r++)a[r].pause();t.start().then((function(){i(!1),g(!1);var e=document.getElementById("typingContainer");e&&e.setAttribute("contentEditable",!1),O(n,document.getElementById("recordDuration"))})).catch((function(e){console.error(e)}))}else u(!0)})).catch((function(e){u(!0)}))}},N=function(e){u(!1)};return r.a.createElement(n.Fragment,null,!l&&r.a.createElement("div",{className:"recordAudio"},r.a.createElement("div",{className:"recordAudioInner"},r.a.createElement("i",{title:"Stop record",className:"stopRecord"},r.a.createElement(w.hd,{onClick:b})),r.a.createElement("span",{className:"liveRecord"}),r.a.createElement("span",{id:"recordDuration",className:"recordDuration"}),r.a.createElement("i",{title:"Send record",className:"sendRecord"},r.a.createElement(w.fd,{onClick:y})))),l&&r.a.createElement("div",{className:"formbtns"},r.a.createElement("a",{type:"",className:"recordAudio",onClick:j},r.a.createElement("i",{title:"Record",className:"recordAudioIcon"},r.a.createElement(w.Jc,null)))),d?r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,{containerId:"container"},r.a.createElement("div",{className:"camera-container mediaAttachCamera"},r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.s),r.a.createElement("i",null,r.a.createElement(w.n,null)),r.a.createElement("p",null,E.c),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{id:"jestBtnCancel",type:"button",name:"btn-cancel",className:"btn-okay",onClick:function(e){return N(e)}},"Okay")))))):null)},Dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onEmojiClick,a=e.emojiState,o=void 0===a||a,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.native;t(a)};return r.a.createElement(n.Fragment,null,o&&r.a.createElement("span",{className:"emojiPicker-container",style:Object(x.u)()},r.a.createElement($e.a,{enableFrequentEmojiSort:!1,onSelect:l})))},Mr=(a(707),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleOnKeyPress=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};27===e.keyCode&&n.props.closeAttachment()},n.openCamera=function(){n.setState({openCamera:!0})},n.closeCamera=function(){n.setState({openCamera:!1,showAvailableOptions:!n.state.showAvailableOptions},(function(){n.props.onclose()}))},n.handleCameraTakenFile=function(e){e.fileDetails={},n.props.handleSendMediaMsg([e]),n.closeCamera()},n.selectFile=function(e,t){n.props.selectFile(e,t)},n.handleFocusBack=function(){window.removeEventListener("focus",n.handleFocusBack),setTimeout((function(){return n.props.closeAttachment()}),1e3)},n.clickedFileInput=function(e){e.target.value="",window.addEventListener("focus",n.handleFocusBack)},n.state={showAvailableOptions:!0,dropStatus:!1,selectedFiles:[],showPreview:!1,selectedSlide:0,openCamera:!1},document.addEventListener("keydown",n.handleOnKeyPress,!1),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("msgContent").classList.add("bg-overlay")}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleOnKeyPress,!1),document.getElementById("msgContent").classList.remove("bg-overlay")}},{key:"render",value:function(){var e=this,t=this.state.showAvailableOptions;return r.a.createElement("div",null,r.a.createElement(qe.a,{onOutsideClick:function(){setTimeout((function(){e.props.closeAttachment()}),100)}},t&&r.a.createElement("div",{className:"choose-upload-files"},r.a.createElement("ul",{className:"fileicon"},r.a.createElement("li",null," ",r.a.createElement("div",{onClick:function(){Object(x.b)()||(e.audioupload.click(),e.setState({showAvailableOptions:!1}))}},r.a.createElement("i",{className:"Attach-icon-music"},r.a.createElement(w.c,null)),r.a.createElement("span",null,"Audio"))),r.a.createElement("li",null," ",r.a.createElement("div",{onClick:function(){Object(x.b)()||(e.documentupload.click(),e.setState({showAvailableOptions:!1}))}},r.a.createElement("i",{className:"Attach-icon-doc"},r.a.createElement(w.f,null)),r.a.createElement("span",null,"Document"))),r.a.createElement("li",null," ",r.a.createElement("div",{onClick:function(){Object(x.b)()||(e.imageVideoupload.click(),e.setState({showAvailableOptions:!1}))}},r.a.createElement("i",{className:"Attach-icon-videoImage"},r.a.createElement(w.g,null)),r.a.createElement("span",null,"Photo / Video"))),r.a.createElement("li",null," ",r.a.createElement("div",{onClick:function(){Object(x.b)()||e.props.toggleCamera()}},r.a.createElement("i",{className:"Attach-icon-camera"},r.a.createElement(w.e,null)),r.a.createElement("span",null,"Camera")))))),r.a.createElement("input",{id:"imageVideoInput",type:"file",ref:function(t){return e.imageVideoupload=t},style:{display:"none"},onChange:function(t){return e.selectFile(t,"imagevideo")},onClick:this.clickedFileInput,accept:".webm,.mp4,.x-m4v,.png,.jpeg,.jpg,video/x-m4v",multiple:!0}),r.a.createElement("input",{id:"fileInput",type:"file",ref:function(t){return e.documentupload=t},style:{display:"none"},onChange:function(t){return e.selectFile(t,"file")},onClick:this.clickedFileInput,accept:".pdf,.xlsx,.xls,.txt,.doc, .docx, text/plain, .csv, .ppt, .zip, .rar, .pptx",multiple:!0}),r.a.createElement("input",{id:"audioInput",type:"file",ref:function(t){return e.audioupload=t},style:{display:"none"},onChange:function(t){return e.selectFile(t,"audio")},onClick:this.clickedFileInput,accept:".wav,.mp3,.aac",multiple:!0}))}}]),a}(n.Component)),Ir=(r.a.memo((function(e){var t=e.file_url,a=Object(le.e)("token");return r.a.createElement(z.a,{chatType:null,temporary:!1,classProps:{"webchat-conver-image":!0},userToken:a,imageToken:t,imageType:"chatimages"})})),r.a.memo((function(e){var t=e.thumb_image,a="data:image/png;base64,".concat(t);return r.a.createElement("img",{className:"webchat-conver-image",src:a,alt:"chat-img"})})),r.a.memo((function(e){var t=e.rosterData,a=e.closeReplyAction,o=e.replyMessage,l=e.groupMemberDetails,i=e.jid,c=void 0===i?"":i,s=o.fromUserId,d=o.msgBody,u=void 0===d?{}:d,m=o.message,p=void 0===m?{}:m,h=o.publisherId,v=o.chatType,f=r.a.createRef(),g=Object(B.X)(v)?s:h,b=u||p,E=b.message,C=void 0===E?"":E,y=b.message_type,O=void 0===y?"":y,j=b.media,N=void 0===j?{}:j,k=b.location,S=(k=void 0===k?{}:k).latitude,D=k.longitude,M=b.contact,I=(M=void 0===M?{}:M).name,T=N.fileName,P=N.duration,A=N.caption,L=N.audioType,U=N.thumb_image,R=Object(n.useState)(!1),F=Object(Re.a)(R,2),_=F[0],G=F[1];Object(n.useEffect)((function(){return e.popUpState({name:"smileyPopUp",smileyPopUp:{active:!0}}),function(){e.popUpState({name:"smileyPopUp",smileyPopUp:{active:!1}})}}),[]);var H=function(){return Object(V.o)(g)?"You":Object(B.X)(v)?function(e,t){var a=e.find((function(e){var a=e.username?e.username:e.userId;return t===a}));return Object(B.h)(a,t)}(t,g):Object(B.y)(g,l).nameToDisplay},J=function(e){return e.length>220?e.substring(0,220).concat("..."):e};return Object(n.useEffect)((function(){var e;G((e=f).offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)}),[f]),r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:"reply-block-bottom",className:"reply-block-bottom"},r.a.createElement("div",{className:"reply-container"},r.a.createElement("div",{className:"reply-text-message ".concat(Object(B.ab)(O)?"text-message":"")},r.a.createElement("span",{className:"sender-name"},H()?H():"You"),Object(B.ab)(O)&&r.a.createElement("span",{ref:function(e){return f=e},className:"sender-sends"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:J(C)}})),_?"...":"","image"===O&&r.a.createElement("span",{className:"sender-sends"},r.a.createElement("span",null,r.a.createElement("i",{className:"chat-camera"},r.a.createElement(w.x,null)),r.a.createElement("span",null,""===A?"Photo":J(A)))),"video"===O&&r.a.createElement("span",{className:"sender-sends"},r.a.createElement("span",null,r.a.createElement("i",{className:"chat-video"},r.a.createElement(w.xd,null)),""===A?"".concat(Object(x.Y)(P)," Video"):J(A))," "),"audio"===O&&r.a.createElement("span",{className:"sender-sends"},r.a.createElement("span",null,r.a.createElement("i",{className:"chat-audio"},"recording"!==L?r.a.createElement(w.D,null):r.a.createElement(w.C,null)),r.a.createElement("span",null,Object(x.Y)(P)," Audio "))),"file"===O&&r.a.createElement("span",{className:"sender-sends"},r.a.createElement("span",null,r.a.createElement("i",{className:"chat-docu"},r.a.createElement(w.W,null)," "),r.a.createElement("span",null,T," "))),"contact"===O&&r.a.createElement("span",{className:"sender-sends"},r.a.createElement("span",null,r.a.createElement("i",{className:"chat-contact"},r.a.createElement(w.P,null)),r.a.createElement("span",null," ",I))),"location"===O&&r.a.createElement("span",{className:"sender-sends"},r.a.createElement("span",null,r.a.createElement("i",{className:"chat-location"},r.a.createElement(w.fc,null)),r.a.createElement("span",null," Location")))),!Object(B.ab)(O)&&r.a.createElement("div",{className:"reply-message-type"},"image"===O&&r.a.createElement("img",{src:Object(x.M)(U),className:"webchat-conver-image ".concat(""===A?"no-caption":""),alt:"reply message"}),"audio"===O&&"","video"===O&&r.a.createElement("img",{src:Object(x.M)(U),className:"webchat-conver-image ".concat(""===A?"no-caption":""),alt:"reply message"}),"file"===O&&"","contact"===O&&r.a.createElement("span",{className:"webchat-conver-image"}),"location"===O&&r.a.createElement("span",{className:"webchat-conver-image"},r.a.createElement(Kt,{latitude:S,longitude:D})))),r.a.createElement("div",{className:"RemoveReplay"},r.a.createElement("i",null,r.a.createElement(w.O,{onClick:function(){return a(c)}})))))}))),Tr=Object(o.b)(null,{popUpState:pr})(Ir),Pr=(a(708),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleCameraPopupClose;return r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.e),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.d),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",name:"btn-cancel",className:"btn-okay",onClick:function(e){return t(e)},"data-jest-id":"jesthandleCameraPopupClose"},"Okay")))}),Ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.photoTaken,a=e.loader,o=e.imgSrc,l=e.onCameraCheck,i=e.handleCropImage,c=e.setWebcamImage,s=e.cropEnabled,u=Object(n.useRef)(),m=Object(n.useState)({value:""}),p=Object(Re.a)(m,2),h=p[0],v=p[1],f=Object(n.useState)({}),g=Object(Re.a)(f,2),b=g[0],E=g[1],C=Object(n.useState)(null),y=Object(Re.a)(C,2),O=y[0],j=y[1],N=Object(n.useState)(0),k=Object(Re.a)(N,2),S=k[0],D=k[1],M=function(){var e,t,a=null===(e=document.getElementById("cameraview"))||void 0===e?void 0:e.clientHeight,n=null===(t=document.getElementById("form-attachcaption"))||void 0===t?void 0:t.clientHeight;n&&a&&E({height:a-n+"px"})},I=function(e){var t=(e.target||{}).value,a=void 0===t?"":t;v((function(e){return Object(d.a)(Object(d.a)({},e),{},{value:0===Sn()(e,"value.length",0)&&0===Sn()(a.trim(),"length",0)||1===Sn()(a,"length",0)&&"\n"===a?"":a})}))},T=function(e){var t=S,a="";if(O===h.value)a=e,t=e.length;else{var n=h.value.substring(0,S),r=h.value.substring(S);a=n+e+r,t=S+Sn()(e,"length",0)}Ve()(a).length<=_.g&&v((function(e){return R(t),st(document.getElementById("camera-preview-typingContainer"),t),Object(d.a)(Object(d.a)({},e),{},{value:a})}))},P=function(e){Ve()(Sn()(h,"value","")).length>=_.g&&-1===_.e.indexOf(e.which)&&e.preventDefault()},A=function(){return i(h.value.trim())},L=function(){return!0},x=function(){return!0},U=function(e){return j(e)},R=function(e){return D(e)},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>=975){var t=_.g-e;return r.a.createElement("span",{className:"captionCount"},t>0?t:0)}return""};return Object(n.useLayoutEffect)((function(){return window.addEventListener("resize",(function(){M()})),function(){return window.removeEventListener("resize",(function(){M()}))}}),[t]),r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"cameraview",className:"cameraview captured-picture"},r.a.createElement("div",{ref:u,style:b,id:"CapturedContainer"},!s&&r.a.createElement("img",{src:o,alt:"camera"}),r.a.createElement("div",{className:"popup-controls"},a?r.a.createElement("img",{src:w.Md,alt:"loader"}):r.a.createElement("i",{"data-id":"jestsetMessage",onClick:A},r.a.createElement(w.jd,null))))),r.a.createElement("div",{id:"form-attachcaption",className:"form-attachcaption"},r.a.createElement("div",{className:"form-control "},r.a.createElement("i",{className:"emoji"},r.a.createElement(et,{onEmojiClick:T})),r.a.createElement(gr,{placeholder:"Add a caption",handleMessage:I,handleOnFocus:x,handleSendTextMsg:A,setSelectedText:U,id:"camera-preview-typingContainer",setCursorPosition:R,onInputListener:L,onKeyDownListner:P,html:ct(_.g,Sn()(h,"value",""))}),F(Ve()(Sn()(h,"value","")).length)))),!t&&r.a.createElement("div",{id:"cameraview",className:"cameraview captured-picture"},r.a.createElement(Ct,{sendFile:c,onCameraCheck:l})))},Lr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.imgSrc,a=void 0===t?"":t,n=e.cropEnabled,o=e.onCameraCheck,l=e.loader,i=void 0!==l&&l,c=e.setWebcamImage,s=e.handleCropImage,d=e.handleCameraShow,u=e.photoTaken,m=void 0!==u&&u,p=e.handleCameraPopupClose;return r.a.createElement("div",{className:"camera-popup-visible"},r.a.createElement("div",{className:"userprofile-header"},m&&!i?"":r.a.createElement("h5",null,E.X),m&&!i&&r.a.createElement("span",{"data-jest-id":"jesthandleCameraShow",onClick:function(e){return d(e)}},r.a.createElement("i",null,r.a.createElement(w.Oc,null)),E.W),r.a.createElement("i",{"data-jest-id":"jesthandleCameraPopupClose",onClick:function(e){return p(e)}},r.a.createElement(w.N,null))),r.a.createElement(Ar,{loader:i,imgSrc:a,photoTaken:m,cropEnabled:n,onCameraCheck:o,setWebcamImage:c,handleCropImage:s}))},xr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleCameraPopupClose;return r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.s),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.f),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",name:"btn-cancel",className:"btn-okay","data-id":"jestHandleCameraPopupClose",onClick:function(e){return t(e)}},"Okay")))},Ur=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).handleCameraPopupClose=function(){e.setState({showCamera:!1,photoTaken:!0,cameraError:!1,permissionDenied:!1,loader:!1}),e.props.onClickClose()},e.setWebcamImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.props.stopCameraPermissionTracks&&e.props.stopCameraPermissionTracks(),t.size>0){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){var n=a.result;e.setState({photoTaken:!0,camImageDisplay:n,camImage:t},(function(){return e.onClickedImage(t)}))}}else e.setState({showCamera:!0})},e.onCameraCheck=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"NotAllowedError"===t.name?e.setState({permissionDenied:!0}):"NotFoundError"===t.name&&e.setState({cameraError:!0})},e.onClickedImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props.cropEnabled,n=a?vt:ft;Sr&&Sr.destroy(),t&&e.setState({filename:t.name,camImage:t,cameraPopup:!0},(function(){var r=document.getElementById("CapturedContainer");Sr=new mt.a(r,n);var o=new FileReader;o.onload=function(t){a?Sr.bind({url:t.target.result}).then((function(){Object.assign(document.querySelector(".cr-viewport").style,{width:"200px",height:"200px"}),Sr.setZoom(0)})):e.setState({imgSrc:t.target.result})},o.readAsDataURL(t)}))},e.handleCropImage=function(t){Object(x.b)()||e.setState({loader:!0},(function(){return e.cropImage(t)}))},e.cropImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.props.cropEnabled?Sr.result({type:"base64",size:"original"}).then((function(a){var n=Object(x.j)(a,e.state.filename);e.setState({loader:!0},(function(){return e.aftercropedImage(n,t)}))})):e.aftercropedImage(e.state.camImage,t)},e.aftercropedImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(t=new File([t],t.name,{type:"image/png"})).caption=a,e.props.onSuccess(t)},e.handleCameraShow=function(t){e.setState({showCamera:!0,photoTaken:!1})},e.state={showCamera:!0,cameraError:!1,permissionDenied:!1,loader:!1,photoTaken:!1,imgSrc:w.Md,caption:""},e}return Object(v.a)(a,[{key:"componentWillUnmount",value:function(){this.props.stopCameraPermissionTracks&&this.props.stopCameraPermissionTracks()}},{key:"render",value:function(){var e=this.state,t=e.cameraError,a=e.permissionDenied,n=e.photoTaken,o=e.showCamera;return r.a.createElement("div",null,o&&r.a.createElement("div",{className:"camera-container mediaAttachCamera"},t&&r.a.createElement(Pr,{handleCameraPopupClose:this.handleCameraPopupClose}),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xr,{handleCameraPopupClose:this.handleCameraPopupClose})),!t&&!a&&o&&r.a.createElement(Lr,{photoTaken:n,imgSrc:this.state.imgSrc,loader:this.state.loader,onCameraCheck:this.onCameraCheck,setWebcamImage:this.setWebcamImage,cropEnabled:this.props.cropEnabled,handleCropImage:this.handleCropImage,handleCameraShow:this.handleCameraShow,handleCameraPopupClose:this.handleCameraPopupClose})))}}]),a}(n.Component);var Rr=!1,Fr=0,Br=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).placeCaretAtEnd=function(e){if(e.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var a=window.getSelection();a.removeAllRanges(),a.addRange(t)}else if("undefined"!=typeof document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(e),n.collapse(!1),n.select()}},n.handleMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Gt.get)(e,"target",{}),a=t.value,r=void 0===a?"":a;n.setState({typingMessage:0===n.state.typingMessage.length&&(0===r.trim().length||"&nbsp;"===r)||1===r.length&&"\n"===r?"":r},(function(){c.a.dispatch(Object(Nn.j)({chatId:n.props.jid,message:n.state.typingMessage}))}))},n.handleEmojiText=function(e){var t,a,r=document.getElementById("typingContainer"),o=n.position,l="";n.selectedText===n.state.typingMessage?(l=e,o=e.length):(l=(null===r||void 0===r||null===(t=r.textContent)||void 0===t?void 0:t.substring(0,n.position))+e+(null===r||void 0===r||null===(a=r.textContent)||void 0===a?void 0:a.substring(n.position)),o=n.position+Object(Gt.get)(e,"length",0));n.setState({typingMessage:l},(function(){n.delay(),n.setCursorPosition(o),st(r,n.position)})),r&&(r.selectionEnd=o)},n.setCursorPosition=function(e){n.position="undefined"===typeof e?0:e},n.setSelectedText=function(e){n.selectedText=e},n.handleEmptyContent=function(){n.setState({typingMessage:""})},n.handleSendMsg=function(e,t){var a,r=n.props,o=r.loaderStatus,l=r.handleSendMsg;if(!o){"text"===e?a={type:"text",content:t.toString().replace(/<br>/g,"\n").trim()}:"media"===e&&(a={type:"media",content:t});var i=n.state.showEmoji;n.setState({showEmoji:!1,showPreview:!1,showAttachement:!1},(function(){l(a),i&&n.updateEmojiPopUpState()})),setTimeout((function(){n.setState({typingMessage:""})}),250)}},n.handleSendTextMsg=function(){n.handleSendMsg("text",n.state.typingMessage)},n.handleSendMediaMsg=function(e){n.handleSendMsg("media",e)},n.toggleAttachement=function(){var e=n.state.showEmoji;n.setState({showEmoji:!1,showAttachement:!n.state.showAttachement},(function(){e&&n.updateEmojiPopUpState()}))},n.onCloseAttachment=function(){n.setState({showAttachement:!1})},n.handleShowHidePreview=function(){n.setState({selectedSlide:0,showAttachement:!1,showPreview:!n.state.showPreview})},n.selectFile=function(e,t){n.setState({showPreview:!0,seletedFiles:{filesId:O()(),files:e.target.files,mediaType:t}})},n.recordingStatus=function(e){Object(le.c)("recordingStatus",e),n.setState({recordingStatus:e})},n.handleShowEmojis=function(){n.setState({showEmoji:!n.state.showEmoji,showAttachement:!1},(function(){n.updateEmojiPopUpState()}))},n.typingStopped=function(e,t,a){var n;return function(){var r=this,o=arguments,l=function(){n=null,a||e.apply(r,o)},i=a&&!n;clearTimeout(n),n=setTimeout(l,t),i&&e.apply(r,o)}}((function(){if(Rr){Rr=!1;var e=n.props,t=e.chatType,a=e.jid,r=n.getJid(t,a);n.goneStatus(t,r)}}),_.J),n.typingStarted=function(){Rr=!0,this.state.typingMessage.length+1!==0&&Date.now()-Fr>_.J&&(Fr=Date.now(),this.sentTypingstatus())},n.delay=function(){n.typingStarted(),n.typingStopped()},n.goneStatus=function(e,t){A.a.sendTypingGoneStatus(t)},n.getJid=function(e,t){return"groupchat"===e?t+"@mix."+E.S:t+"@"+E.S},n.sentTypingstatus=function(){var e=n.props,t=e.chatType,a=e.jid;if("groupchat"===t||"chat"===t){var r=n.getJid(t,a);A.a.sendTypingStatus(r)}},n.handleOnFocus=function(e){n.state.showAttachement&&n.setState({showAttachement:!1})},n.isTypingMessageHasData=function(){var e=(n.state||{}).typingMessage;return(void 0===e?"":e)||"".trim().length>0},n.updateEmojiPopUpState=function(){n.props.popUpState({name:"smileyPopUp",smileyPopUp:{active:n.state.showEmoji}})},n.outsideClick=function(e){var t=e.target.getAttribute("data-tag");return e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||"toggle-emojis-popup"===t?(e.stopPropagation(),!1):!!n.state.showEmoji&&(n.setState({showEmoji:!1},(function(){n.updateEmojiPopUpState()})),!0)},n.closeCamera=function(){n.stopCameraPermissionTracks(),n.setState({showCamera:!1})},n.handleCameraTakenFile=function(e){Object(x.b)()||(e.fileDetails={},n.handleSendMediaMsg([e]),n.closeCamera())},n.toggleCamera=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({showAttachement:!1}),e.next=3,new Promise((function(e){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then((function(t){var a=t&&t.getTracks()||[];e(a)})).catch((function(){return e(!1)}))}));case 3:t=e.sent,n.cameraPermissionTracks=t||[],n.setState({cameraPermission:t?1:2}),t&&n.setState({showCamera:!n.state.showCamera});case 7:case"end":return e.stop()}}),e)}))),n.stopCameraPermissionTracks=function(){var e=n.cameraPermissionTracks;Array.isArray(e)&&e.forEach((function(e){e.stop&&e.stop()})),n.cameraPermissionTracks=[]},n.handleCameraPopupClose=function(){n.setState({showCamera:!1,cameraPermission:0})},n.findReply=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=n.props.userReplayDetails,a=void 0===t?[]:t,r=a.some((function(t){return Object(Gt.get)(t,"roster.userId","")===e||Object(Gt.get)(t,"roster.groupId","")===e})),o=a.find((function(t){return Object(Gt.get)(t,"roster.userId","")===e||Object(Gt.get)(t,"roster.groupId","")===e})),l=o||{},i=l.replyMessages,c=void 0===i?{}:i;return{autoReplay:r,autoMsgfind:c}},n.renderCameraPopup=function(){return r.a.createElement("div",{className:"camera-container mediaAttachCamera"},r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.s),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.f),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",className:"btn-okay",onClick:function(e){return n.handleCameraPopupClose(e)},name:"btn-cancel"},"Okay"))))},n.renderCameraCapture=function(){return r.a.createElement(Ur,{stopCameraPermissionTracks:n.stopCameraPermissionTracks,onClickClose:n.closeCamera,cropEnabled:!1,onSuccess:n.handleCameraTakenFile})},n.state={showEmoji:!1,typingMessage:"",showPreview:!1,selectedSlide:0,seletedFiles:{},showAttachement:!1,recordingStatus:!0,showCamera:!1,cameraPermission:0},n.position=0,n.timeout=0,n.gonetimeout=0,n.selectedText=null,Object(le.c)("recordingStatus",!0),n.cameraPermissionTracks=[],n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("typingContainer");t&&t.focus();var a=Object(Gt.get)(this.props,"activeChatData.data","").chatId,n=void 0===a?"":a;if(n){var r,o,l=((null===(r=this.props)||void 0===r||null===(o=r.chatConversationHistory)||void 0===o?void 0:o.data[n])||{}).typedMessage,i=void 0===l?"":l;this.setState({typingMessage:i},(function(){var t=document.getElementById("typingContainer");t&&e.placeCaretAtEnd(t)}))}}},{key:"componentDidUpdate",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,r=n.sendMessgeType,o=n.dragOnContainer,l=(o=void 0===o?{}:o).draggedId,i=void 0===l?"":l;if(i&&(null===a||void 0===a||null===(e=a.dragOnContainer)||void 0===e?void 0:e.draggedId)!==i)this.setState({showPreview:!0});else{var c=document.getElementById("typingContainer");if(a.sendMessgeType===r){var s=Object(Gt.get)(this.props,"activeChatData.data",{}),d=s.chatId,u=void 0===d?"":d,m=Object(Gt.get)(a,"activeChatData.data",{}),p=m.chatId,h=void 0===p?"":p;if(h!==u){if(Rr=!1,clearTimeout(this.timeout),c&&h&&("groupchat"===a.chatType||"chat"===a.chatType)){var v=this.getJid(a.chatType,h);this.goneStatus(a.chatType,v)}var f=this.props.chatConversationHistory.data[u]||{},g=f.typedMessage,b=void 0===g?"":g;this.setState({typingMessage:b,showPreview:!1,showCamera:!1},(function(){c&&t.placeCaretAtEnd(c)}))}}else c&&this.placeCaretAtEnd(c)}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.state,t=e.selectedSlide,a=e.showPreview,n=e.seletedFiles,o=e.showEmoji,l=e.typingMessage,i=e.showAttachement,c=e.recordingStatus,s=e.showCamera,d=e.cameraPermission,u=this.props,m=u.jid,p=u.loaderStatus,h=u.vCardData,v=u.rosterData,f=u.closeReplyAction,g=u.chatType,b=u.groupMemberDetails,E=this.findReply(m),C=E.autoReplay,y=void 0!==C&&C,O=E.autoMsgfind,j=void 0===O?{}:O;return r.a.createElement("footer",{className:"".concat(p?"v-hidden":""," footer ")},r.a.createElement(qe.a,{onOutsideClick:this.outsideClick},r.a.createElement(Dr,{emojiState:o,onEmojiClick:this.handleEmojiText}),y?r.a.createElement(Tr,{replyMessage:j,vCardData:h,rosterData:v,closeReplyAction:f,groupMemberDetails:b,jid:m}):null),c&&Xt.a.attachement&&i&&r.a.createElement(Mr,{selectFile:this.selectFile,onclose:this.toggleAttachement,closeAttachment:this.onCloseAttachment,handleSendMediaMsg:this.handleSendMediaMsg,toggleCamera:this.toggleCamera}),s&&r.a.createElement(r.a.Fragment,null,Object(x.T)()?r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,{containerId:"container"},this.renderCameraCapture())):r.a.createElement(r.a.Fragment,null,this.renderCameraCapture())),2===d&&r.a.createElement(r.a.Fragment,null,Object(x.T)()?r.a.createElement(ze,{containerId:"container"},this.renderCameraPopup()):r.a.createElement(r.a.Fragment,null,this.renderCameraPopup())),a&&r.a.createElement(ze,{containerId:"container"},r.a.createElement(Or,{seletedFiles:n,jid:m,selectedSlide:t,onClosePreview:this.handleShowHidePreview,onClickSend:this.handleSendMediaMsg})),r.a.createElement("form",{style:{visibility:this.props.forwardOption?"hidden":" "},className:"message-area-container"},r.a.createElement("div",{className:"message-area"},r.a.createElement("i",{className:"em em-slightly_smiling_face","data-tag":"toggle-emojis-popup",onClick:this.handleShowEmojis}),r.a.createElement(gr,{loaderStatus:p,html:l,id:"typingContainer",onInputListener:this.delay,jid:m,chatType:g,handleMessage:this.handleMessage,handleSendTextMsg:this.handleSendTextMsg,handleOnFocus:this.handleOnFocus,setCursorPosition:this.setCursorPosition,setSelectedText:this.setSelectedText,handleEmptyContent:this.handleEmptyContent}),r.a.createElement("div",{className:"intraction icon"},c&&Xt.a.attachement&&r.a.createElement("i",{title:"Attachment",className:i?"attachment open":"attachment",onClick:this.toggleAttachement},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(w.d,null)))),!this.isTypingMessageHasData()&&r.a.createElement(wr,{jid:this.props.jid,handleSendMediaMsg:this.handleSendMediaMsg,recordingStatus:this.recordingStatus,avoidRecord:this.props.avoidRecord}),this.isTypingMessageHasData()&&r.a.createElement("div",{className:"formbtns"},r.a.createElement("a",{type:"submit",className:"send"},r.a.createElement("i",{title:"Send",className:"send",onClick:this.handleSendTextMsg},r.a.createElement(w.Xc,null))))))}}]),a}(n.Component),_r=Object(o.b)((function(e){return{conversationState:e.conversationState,chatConversationHistory:e.chatConversationHistory,activeChatData:e.activeChatData}}),{popUpState:pr,saveMessageContent:function(e){return{type:j.ac,payload:{messageContent:e}}}})(Br),Vr=a(97),Gr=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).reportChatAction=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setState({showReportPopup:e})},n.reportConfirmAction=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l,i,c,s,d,u,p,h,v;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.detail<=1)){e.next=15;break}if(!Object(x.a)()){e.next=3;break}return e.abrupt("return");case 3:if(a=n.props,r=a.activeChatId,o=void 0===r?"":r,l=a.activeChatData.data,i=l.chatJid,c=void 0===i?"":i,s=l.chatType,d=void 0===s?"":s,u=n.state.reportData||{},p=u.msgId,h=void 0===p?"":p,0!==(v=Object(B.C)(o,h)).length){e.next=11;break}re.b.error("No Messages To Report"),n.reportChatAction(!1),e.next=15;break;case 11:return e.next=13,A.a.reportUserOrGroup(c,d,v);case 13:re.b.success("Report sent"),n.reportChatAction(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.requestChatMessages=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,o,l,i,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:null,s.length>2&&void 0!==s[2]?s[2]:null,n=s.length>3&&void 0!==s[3]?s[3]:_.i,r=s.length>4&&void 0!==s[4]?s[4]:null,!Object(B.Z)(t)){e.next=13;break}if(o=Object(B.p)(),l=Object(B.l)(),o){e.next=8;break}return e.abrupt("return",!0);case 8:return e.next=10,A.a.getChatMessages(o,a,r,n);case 10:return(i=e.sent)&&200===i.statusCode&&(i.chatType=t,i.fetchLimit=n,delete i.statusCode,delete i.message,l===Object(V.g)(i.userJid||i.groupJid)&&c.a.dispatch(Object(Nn.b)(i))),e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.requestReplyMessage=function(e,t,a){if(Object(x.R)())A.a.getReplyMessage(t,a);else{var n=Object(B.o)(t,a),r=Object(B.I)(n);r&&c.a.dispatch(Object(Vt.b)(r))}},n.singleChatUpdateInHistory=function(e){var t,a,r,o,l,i,c,s,d,u,m,p=null===(t=n.props)||void 0===t||null===(a=t.activeChatData)||void 0===a?void 0:a.id,h=n.props,v=h.singleChatMsgHistoryData,f=(v=void 0===v?{}:v).id,g=h.messageData,b=null===(r=n.props)||void 0===r||null===(o=r.activeChatData)||void 0===o||null===(l=o.data)||void 0===l||null===(i=l.recent)||void 0===i?void 0:i.chatType;if(e.activeChatData.id!==p&&Object(B.Y)(b))n.setState({loaderStatus:!0,sendMessgeType:0!==(null===(m=n.state)||void 0===m?void 0:m.userReplayDetails.length)?"Reply":"",dragOnContainer:{},replyMessage:{},messageInfo:{},forwardOption:!1,addionalnfo:{forward:!1}},(function(){n.props.messageInfoShow(!1),n.props.forwardReset()}));else if(f&&e.singleChatMsgHistoryData.id!==f&&Object(B.Y)(b)){var E=n.props.activeChatData,C=(E=void 0===E?{}:E).data,y=(C=void 0===C?[]:C).roster,O=C.recent,j=n.props.singleChatMsgHistoryData,N=Object.keys(y).length>0?y:O,k=Object(V.c)(N.userId);n.updateActiveMessage(j,b,k)}else{var S=null===g||void 0===g||null===(c=g.data)||void 0===c?void 0:c.msgType,w=null===g||void 0===g||null===(s=g.data)||void 0===s?void 0:s.msgId,D=null===e||void 0===e||null===(d=e.messageData)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.msgId;if(("acknowledge"===S||"carbonSentMessage"===S||"carbonReceiveMessage"===S||"receiveMessage"===S)&&w!==D){var M,I=null===g||void 0===g||null===(M=g.data)||void 0===M?void 0:M.type;if(!w||"acknowledge"===S&&"acknowledge"!==I)return;"carbonSentMessage"===S&&setTimeout((function(){return n.props.scrollBottomChatHistoryAction()}),1)}}},n.groupsChatUpdateInHistory=function(e){var t,a,r,o,l,i,c,s=n.props.groupChatMessage,d=null===(t=n.props)||void 0===t||null===(a=t.activeChatData)||void 0===a?void 0:a.id,u=null===(r=n.props)||void 0===r||null===(o=r.activeChatData)||void 0===o||null===(l=o.data)||void 0===l||null===(i=l.recent)||void 0===i?void 0:i.chatType;if(e.activeChatData.id===d||"groupchat"!==u){if(s&&s.id!==e.groupChatMessage.id){var m=Object(B.n)();n.updateActiveMessage(s,u,m)}}else n.setState({loaderStatus:!0,sendMessgeType:0!==(null===(c=n.state)||void 0===c?void 0:c.userReplayDetails.length)?"Reply":"",replyMessage:{},dragOnContainer:{},messageInfo:{},forwardOption:!1,addionalnfo:{forward:!1}},(function(){n.props.messageInfoShow(!1),n.props.forwardReset()}))},n.updateActiveMessage=function(e,t,a){n.setState({messageData:[],jid:a,loaderStatus:!1},(function(){n.viewReplyMessageId&&(n.smoothScroll(n.viewReplyMessageId),n.viewReplyMessageId=null)})),"Reply"===n.state.sendMessgeType&&e&&(!e.data||Array.isArray(e.data)&&0===e.data.length)&&n.closeReplyAction()},n.onScrolledTop=Object(p.a)(m.a.mark((function e(){var t,a,r,o,l,i,c,s,d,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.activeChatData,r=(a=void 0===a?{}:a).data,o=(r=void 0===r?{}:r).chatType,l=r.chatId,!(i=t.chatConversationHistory.data)[l]){e.next=14;break}if(c=i[l],s=c.messages,!c.isScrollNeeded){e.next=14;break}return n.loadMoreUpdate(!0),d=Object.keys(s)[0],u=s[d],e.next=13,n.requestChatMessages(o,"up",d,_.i,u.rowId);case 13:n.loadMoreUpdate(!1);case 14:case"end":return e.stop()}}),e)}))),n.onScrolled=function(e){var t=e.target;t.offsetHeight+t.scrollTop>=t.scrollHeight-20?n.setState({isVisibleScroll:!1}):n.setState({isVisibleScroll:!0})},n.onScrolledBottom=function(){},n.handleChatMessageJID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userId,a=void 0===t?"":t,n=e.username,r=void 0===n?"":n,o=e.fromUserId,l=void 0===o?"":o;return a||(r||l)},n.smoothScroll=function(e){var t=document.getElementById(e);t&&(t.scrollIntoView(),t.classList.add("animatefinded"),n.activeTimer=setTimeout((function(){t.classList.remove("animatefinded")}),3e3))},n.scrollToBottom=function(){document&&document.getElementById("InBottom").scrollIntoView({block:"end"})},n.viewOriginalMessage=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,o,l,i,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.viewReplyMessageId=t,c=null===(r=n.props)||void 0===r||null===(o=r.activeChatData)||void 0===o||null===(l=o.data)||void 0===l||null===(i=l.recent)||void 0===i?void 0:i.chatType,s=Object(B.k)(),!s.find((function(e){return e.msgId===t}))){e.next=8;break}return n.smoothScroll(t),n.viewReplyMessageId=null,e.abrupt("return");case 8:if(!s.length){e.next=13;break}return n.loadMoreUpdate(!0),e.next=12,n.requestChatMessages(c,"up",s[0].msgId,_.I);case 12:setTimeout((function(){n.loadMoreUpdate(!1),n.viewOriginalMessage(t,a)}),100);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.prepareJid=function(){var e,t,a,r,o=Object.keys(n.props.activeChatData.data.roster).length>0?n.props.activeChatData.data.roster:n.props.activeChatData.data.recent,l=null===(e=n.props)||void 0===e||null===(t=e.activeChatData)||void 0===t||null===(a=t.data)||void 0===a||null===(r=a.recent)||void 0===r?void 0:r.chatType;if("chat"===l||"broadcast"===l){var i=o.userId?o.userId:o.fromUserId;return Object(V.c)(i)}var c=o.groupId;return Object(V.b)(c)},n.deleteMessageFromConversation=function(e){return function(t){if(!Object(x.a)()){var a=n.props.selectedMessageData.data.sort((function(e,t){return t.timestamp>e.timestamp?-1:1})).map((function(e){return e.msgId})),r=n.prepareJid();n.setState({showModal:!1,replyMessage:{}},Object(p.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.props.forwardReset(),1!==e){t.next=6;break}return t.next=4,A.a.deleteMessagesForMe(r,a);case 4:t.next=8;break;case 6:return t.next=8,A.a.deleteMessagesForEveryone(r,a);case 8:re.b.success("".concat(a.length," message").concat(a.length>1?"s":""," deleted"));case 9:case"end":return t.stop()}}),t)})))),n.setState({forwardOption:!1})}}},n.deleteMultipleMessages=function(){if(!Object(x.a)()){var e=n.props.selectedMessageData.data,t=e.sort((function(e,t){return t.timestamp>e.timestamp?-1:1})).map((function(e){return e.msgId})),a=e.findIndex((function(e){return e.msgId===t[0]})),r=parseInt(e[a].timestamp/1e3),o=(new Date).getTime(),l=r+3e4;n.setState((function(e){return{showModal:!0,replyMessage:Object(d.a)(Object(d.a)({},e.replyMessage),{},{deleteEveryOne:l>o})}}))}},n.handleShowMessageinfo=function(){n.setState({messageInfo:{}}),n.props.messageInfoShow(!n.props.showMessageinfo)},n.handleStarredAction=Object(p.a)(m.a.mark((function e(){var t,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(x.a)()){e.next=2;break}return e.abrupt("return");case 2:return t=n.props.selectedMessageData.data,a=!1,r=t.map((function(e){return 0===e.favouriteStatus&&(a=!0),e.msgId})),e.next=7,A.a.updateFavouriteStatus(Object(V.c)(n.props.activeChatId),r,a);case 7:re.b.success("".concat(t.length," message").concat(t.length>1?"s":""," ").concat(a?"starred":"unstarred")),n.setState({forwardOption:!1}),n.props.forwardReset();case 10:case"end":return e.stop()}}),e)}))),n.messageAction=function(){var e=Object(p.a)(m.a.mark((function e(t,a,r){var o,l,i,s,u,p,h,v,f,g,b,E,C,y,O,j,N,k,S,w,M,I,T,P,L,U,R,F,_,G,H,J,q,W,K;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.target||t.srcElement,i=a.deleteStatus,s=a.msgId,u=Object(V.i)(a),"UL"!==l.tagName){e.next=5;break}return e.abrupt("return");case 5:if(p=l.closest("li").getAttribute("title"),h=null===(o=n.props.vCardData)||void 0===o?void 0:o.data,v=h.fromUser,f=u&&-1!==u.indexOf(v),"Reply"===p&&(g=n.props.activeChatData.data,b=void 0===g?{}:g,E=n.state.userReplayDetails,C=void 0===E?[]:E,y=Object(D.a)(C),O=(y||[]).filter((function(e){return Object(Gt.get)(e,n.rosterConst,null)!==Object(Gt.get)(b,n.rosterConst,void 0)&&Object(Gt.get)(e,n.rosterGrpIdConst,null)!==Object(Gt.get)(b,n.rosterGrpIdConst,void 0)})),j={replyMessages:Object(d.a)({},a)},N=Object(d.a)(Object(d.a)({},j),b),k=[].concat(Object(D.a)(O),[N]),n.setState({userReplayDetails:k})),"Delete"!==p){e.next=16;break}if(!Object(x.a)()){e.next=12;break}return e.abrupt("return");case 12:return S=n.state.addionalnfo,n.props.messageInfoShow(!1),n.setState({msgActionType:"Delete",forwardOption:!0,addionalnfo:Object(d.a)(Object(d.a)({},S),{},{forward:!0,forwardMessageId:s,deleteAction:!0}),replyMessage:Object(d.a)(Object(d.a)({},a),{},{isSender:f,messageInfo:{},recallstatus:i})}),e.abrupt("return");case 16:if("MessageInfo"!==p){e.next=22;break}if(!Object(x.a)()){e.next=19;break}return e.abrupt("return");case 19:return n.props.messageInfoShow(!0),n.setState({forwardOption:!1,messageInfo:Object(d.a)(Object(d.a)({},a),{},{isSender:f,forward:!1})},(function(){var e=n.prepareJid(),t=n.state.messageInfo.msgId;c.a.dispatch(Object(Vt.f)({statusUpdate:!1,messageId:t},!0)),t&&A.a.getGroupMsgInfo(e,t)})),e.abrupt("return");case 22:if("Forward"!==p){e.next=27;break}return w=n.state.addionalnfo,n.props.messageInfoShow(!1),n.setState({msgActionType:"Forward",forwardOption:!0,addionalnfo:Object(d.a)(Object(d.a)({},w),{},{forward:!0,forwardMessageId:s,deleteAction:!1})}),e.abrupt("return");case 27:if("Report"!==p){e.next=37;break}if(!n.state.isDeletedUser&&!n.state.isAdminBlocked){e.next=31;break}return re.b.error(n.state.isDeletedUser?"Cannot report deleted user's message":"This user no longer available"),e.abrupt("return");case 31:if(!(null===(M=Object(V.e)(null===(I=n.props)||void 0===I?void 0:I.activeChatId))||void 0===M?void 0:M.isDeletedUser)&&!(null===(T=Object(V.e)(null===(P=n.props)||void 0===P?void 0:P.activeChatId))||void 0===T?void 0:T.isAdminBlocked)){e.next=34;break}return re.b.error((null===(L=Object(V.e)(null===(U=n.props)||void 0===U?void 0:U.activeChatId))||void 0===L?void 0:L.isDeletedUser)?"Cannot report deleted user's message":"This user no longer available"),e.abrupt("return");case 34:return n.setState({reportData:a}),n.reportChatAction(!0),e.abrupt("return");case 37:if("Starred"!==p&&"UnStarred"!==p){e.next=44;break}if(!Object(x.a)()){e.next=40;break}return e.abrupt("return");case 40:return R=n.state.addionalnfo,n.props.messageInfoShow(!1),n.setState({msgActionType:p,forwardOption:!0,addionalnfo:Object(d.a)(Object(d.a)({},R),{},{forward:!0,forwardMessageId:s,deleteAction:!1}),replyMessage:Object(d.a)(Object(d.a)({},a),{},{isSender:f,messageInfo:{},recallstatus:i})}),e.abrupt("return");case 44:if("Download"!==p){e.next=53;break}return F=a.msgBody,_=(F=void 0===F?{}:F).media,G=(_=void 0===_?{}:_).file_url,H=_.fileName,J=_.file_key,q=F.message_type,K="file"===(W=void 0===q?"":q)?H:"",Object(B.i)(G,W,K,J),e.abrupt("return");case 53:n.setState({sendMessgeType:p,replyMessage:Object(d.a)(Object(d.a)({},a),{},{nameToDisplay:r||""})});case 54:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.handleTranslateLanguage=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,o,l,i,s,d,u,p,h,v,f,g,b,C;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(x.a)()){e.next=2;break}return e.abrupt("return");case 2:if(r=a.msgBody,o=(r=void 0===r?{}:r).message,l=void 0===o?"":o,i=r.message_type,s=void 0===i?"":i,d=r.media,u=(d=void 0===d?{}:d).caption,p=void 0===u?"":u,!(h=Object(B.ab)(s)?l:p)){e.next=14;break}return f=Object(x.N)(),e.next=12,A.a.translateText(E.F,h,f);case 12:200===(g=e.sent).statusCode&&(null===(v=g.data)||void 0===v?void 0:v.translations.length)>0&&(C={fromUserId:n.props.activeChatId,msgId:t,translatedMessage:(null===(b=g.data)||void 0===b?void 0:b.translations[0].translatedText)||""},c.a.dispatch(Object(Nn.g)(C)));case 14:return e.abrupt("return");case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.closeReplyAction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=n.state.userReplayDetails,a=void 0===t?[]:t,r=Object(D.a)(a),o=r.filter((function(t){return Object(Gt.get)(t,n.rosterConst,null)!==e&&Object(Gt.get)(t,n.rosterGrpIdConst,null)!==e}));n.setState({sendMessgeType:0!==o.length?"Reply":"",replyMessage:{},showModal:!1,userReplayDetails:o})},n.replyToIdPass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=n.state.userReplayDetails,a=void 0===t?[]:t;if(0!==a.length){var r=Object(D.a)(a),o=r.find((function(t){return Object(Gt.get)(t,n.rosterConst,"")===e||Object(Gt.get)(t,n.rosterGrpIdConst,"")===e}));return Object(Gt.get)(o,"replyMessages.msgId","")}return""},n.sendMediaMessage=function(){var e=Object(p.a)(m.a.mark((function e(t,a,r){var o,l,i,s,u,p,h,v,f,g,b,E,C,y,j,N,S,w,D,M,I,T,P,A;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.prepareJid(),l=Object(V.g)(o),n.state.sendMessgeType&&n.closeReplyAction(l),"media"!==t){e.next=31;break}i={},s=0;case 7:if(!(s<a.length)){e.next=29;break}return p=a[s],h=O()(),v=p.caption,f=void 0===v?"":v,g=p.fileDetails,b=(g=void 0===g?{}:g).replyTo,E=g.duration,C=void 0===E?0:E,y=g.imageUrl,j=void 0===y?"":y,N=g.audioType,S=void 0===N?"":N,w={fileName:p.name,fileSize:p.size,caption:f,blobUrl:URL.createObjectURL(p),msgId:h,duration:C,audioType:S},"video"!==(D=Object(x.H)(p.type,p))&&"audio"!==D||(w.thumbImage=j),M=null===(u=n.props)||void 0===u?void 0:u.vCardData,I={jid:o,msgType:D,userProfile:M,chatType:r,msgId:h,file:p,fileOptions:w,replyTo:b,fileDetails:p.fileDetails},e.next=19,Object(x.G)(I,s);case 19:T=e.sent,i[h]=T,P=Object(x.J)(I),A=Object(d.a)({data:[T]},Object(B.X)(r)?{userJid:o}:{groupJid:o}),c.a.dispatch(Object(Nn.b)(A)),c.a.dispatch(Object(Vt.a)(T)),c.a.dispatch(Object(k.e)(P));case 26:s++,e.next=7;break;case 29:Object(B.Q)(o,r),n.props.scrollBottomChatHistoryAction();case 31:return e.abrupt("return",!1);case 32:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.parseAndSendMessage=function(){var e=Object(p.a)(m.a.mark((function e(t,a,r){var o,l,i,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.prepareJid(),l=Object(V.g)(o),i=t.content,c=n.state.sendMessgeType,s=(void 0===c?"":c)?n.replyToIdPass(l):"",i[0].fileDetails.replyTo=s,n.sendMediaMessage(r,i,a);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.msgReplyPassId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.prepareJid(),a=Object(V.g)(t),r=n.state,o=r.sendMessgeType,l=void 0===o?"":o,i=r.userReplayDetails,c=void 0===i?[]:i;if("Reply"===l){var s=c.find((function(e){return Object(Gt.get)(e,n.rosterConst,"")===a||Object(Gt.get)(e,n.rosterGrpIdConst,"")===a}));return Object(Gt.get)(s,"replyMessages.msgId","")}return l?e.msgId:""},n.handleSendMsg=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l,i,s,u,p,h,v,f,g,b,E,C,y,j,N,S,w,D,M,I,T,P,L,U;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.type,u=null===(a=n.props)||void 0===a||null===(r=a.activeChatData)||void 0===r||null===(o=r.data)||void 0===o||null===(l=o.recent)||void 0===l?void 0:l.chatType,"media"!==s){e.next=5;break}return n.parseAndSendMessage(t,u,s),e.abrupt("return");case 5:if(p=n.state,h=p.sendMessgeType,v=void 0===h?"":h,f=p.replyMessage,g=void 0===f?{}:f,b=n.msgReplyPassId(g),E=null===(i=n.props)||void 0===i?void 0:i.vCardData,""===t.content){e.next=30;break}if(C=n.prepareJid(),y=Object(V.g)(C),j=O()(),u!==Le.g&&u!==Le.f){e.next=29;break}return N={jid:C,msgType:"text",message:Object(Qn.c)(t.content),userProfile:E,chatType:u,msgId:j,replyTo:b},e.next=16,Object(x.G)(N);case 16:S=e.sent,w=Object(x.J)(N),A.a.sendTextMessage(C,Object(Qn.c)(t.content),j,b),A.a.sendTypingGoneStatus(C),c.a.dispatch(Object(Vt.a)(S)),D=Object(d.a)({data:[S]},Object(B.X)(u)?{userJid:C}:{groupJid:C}),c.a.dispatch(Object(Nn.b)(D)),c.a.dispatch(Object(k.e)(w)),Object(B.Q)(C,u),n.props.scrollBottomChatHistoryAction(),v&&n.closeReplyAction(y),e.next=30;break;case 29:"broadcast"===u&&(L=null===(M=n.props)||void 0===M||null===(I=M.activeChatData)||void 0===I||null===(T=I.data)||void 0===T||null===(P=T.recent)||void 0===P?void 0:P.broadcastId,U=Object(V.c)(L),A.a.sendBroadcastMessage(Object(Qn.c)(t.content),"text",j,"","",U,b).then((function(e){200===e.statusCode&&(n.props.scrollBottomChatHistoryAction(),v&&n.closeReplyAction(y))})));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.closeMessageOption=function(){var e=n.state.addionalnfo;n.setState({forwardOption:!1,addionalnfo:Object(d.a)(Object(d.a)({},e),{},{forward:!1})},(function(){n.props.forwardReset()}))},n.canSendMessage=function(){var e,t,a,r,o,l,i,c=n.state.isBlocked,s=null===(e=n.props)||void 0===e||null===(t=e.activeChatData)||void 0===t||null===(a=t.data)||void 0===a||null===(r=a.recent)||void 0===r?void 0:r.chatType;if("broadcast"===s)return!0;if("chat"===s)return!c;var d=null===(o=n.props)||void 0===o||null===(l=o.vCardData)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.fromUser,u=n.props.groupsMemberListData,m=(u=void 0===u?{}:u).data,p=(m=void 0===m?{}:m).participants;return(void 0===p?[]:p).find((function(e){return d===e.userId&&e.userType}))},n.handleChatMessageJID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.jid,a=void 0===t?"":t,n=e.username,r=void 0===n?"":n,o=e.msgfrom,l=void 0===o?"":o;return a||(r||l)},n.onDragEnter=function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)"Files"===e.dataTransfer.types[t]&&function(){var e=document.getElementById("msgContent");e.setAttribute("draggable",!0),n.setState({dragOnContainer:{status:!0,draggedId:O()()}},(function(){e.setAttribute("draggable",!1)}))}();return!1},n.handleBlockUserData=function(){var e=n.props.activeChatData,t=(e=void 0===e?{}:e).data,a=(t=void 0===t?[]:t).roster,r=t.recent,o=a&&Object.keys(a).length>0?a:r,l=Object(V.c)(o.userId);if(!l)return!1;var i=n.props.blockedContact.data.indexOf(l)>-1;return n.setState({isBlocked:i}),!0},n.getDisplayName=function(){var e=n.props.activeChatData,t=(e=void 0===e?{}:e).data,a=(t=void 0===t?[]:t).roster,r=t.recent.msgfrom;return Object(B.g)(a)||Object(x.v)(r)},n.dispatchAction=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({showBlockModal:!1}),t=Object(V.c)(n.state.blockId),e.next=4,A.a.unblockUser(t);case 4:(a=e.sent)&&200===a.statusCode&&(c.a.dispatch(Object(tt.c)(n.state.blockId,Le.X)),re.b.success("".concat(n.state.nameToDisplay||"User"," has been Unblocked")),Object(B.Q)(t,Le.g));case 6:case"end":return e.stop()}}),e)}))),n.popUpToggleAction=function(e,t){var a=n.props.activeChatData,r=(a=void 0===a?{}:a).data,o=(r=void 0===r?[]:r).roster;n.setState({showBlockModal:!n.state.showBlockModal,blockId:e||null,nameToDisplay:Object(V.d)(o)})},n.loadMoreUpdate=function(e){return n.loadMore.current.style.display=e?"block":"none",!0},n.state={messageData:"",loaderStatus:!0,loadMoreStatus:!1,prevMsgStatus:"",sendMessgeType:"",replyMessage:{},dragOnContainer:{},showModal:!1,forwardOption:!1,messageInfo:{},isBlocked:!1,addionalnfo:{},isVisibleScroll:!1,showBlockModal:!1,blockId:null,nameToDisplay:"",showReportPopup:!1,reportData:{},userReplayDetails:[],msgActionType:"",isAdminBlocked:!1,isDeletedAccount:!1},n.activeTimer=0,n.rosterConst="roster.userId",n.rosterGrpIdConst="roster.groupId",n.loadMore=r.a.createRef(),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e,t,a,n=null===(e=this.props)||void 0===e||null===(t=e.activeChatData)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.chatType;this.handleBlockUserData(),this.requestChatMessages(n)}},{key:"componentDidUpdate",value:function(e,t){var a,n,r=this.props.activeChatId;if(e.rosterData.id!==this.props.rosterData.id){var o=this.props.rosterData.data,l=(void 0===o?[]:o).find((function(e){return e.userId===r}));((null===l||void 0===l?void 0:l.isDeletedUser)||(null===l||void 0===l?void 0:l.isAdminBlocked))&&(this.state.showReportPopup&&re.b.error((null===l||void 0===l?void 0:l.isDeletedUser)?"Cannot report deleted user's message":"This user no longer available"),this.setState({showReportPopup:!1,isAdminBlocked:null===l||void 0===l?void 0:l.isAdminBlocked,isDeletedAccount:null===l||void 0===l?void 0:l.isDeletedUser})),this.setState({isAdminBlocked:null===l||void 0===l?void 0:l.isAdminBlocked,isDeletedAccount:null===l||void 0===l?void 0:l.isDeletedUser})}if(e.activeChatId!==r&&this.handleBlockUserData(),e.browserTabData.isVisible!==this.props.browserTabData.isVisible&&this.props.browserTabData.isVisible&&Object(Vr.c)(),e.blockedContact&&this.props.blockedContact&&e.blockedContact.id!==this.props.blockedContact.id)this.handleBlockUserData();else{var i=null===(a=this.props)||void 0===a||null===(n=a.activeChatData)||void 0===n?void 0:n.data,c=i.chatId,s=i.chatType;if(e.chatConversationHistory.id!==this.props.chatConversationHistory.id&&this.setState({loaderStatus:!1,jid:c}),e.activeChatData.id!==this.props.activeChatData.id){var d=this.props.chatConversationHistory.data;this.loadMoreUpdate(!1),this.props.forwardReset(),this.props.scrollBottomChatHistoryAction(),this.props.messageInfoShow(!1),Object.keys(d).includes(c)?(Object(Vr.c)(),this.setState({jid:c,loaderStatus:!1,forwardOption:!1})):(this.setState({jid:c,loaderStatus:!0,forwardOption:!1}),this.requestChatMessages(s))}}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.activeTimer)}},{key:"render",value:function(){var e,t,a,o,l,i,c,s,u,m,p,h=this,v={width:50,height:50},f=this.state,g=f.sendMessgeType,b=f.replyMessage,E=f.showModal,C=f.loaderStatus,y=f.jid,O=f.dragOnContainer,j=f.mediaLoder,N=f.messageInfo,k=f.addionalnfo,S=f.forwardOption,D=f.showBlockModal,M=f.nameToDisplay,I=f.showReportPopup,T=void 0!==I&&I,P=f.selectedMsgUserName,A=void 0===P?"":P,L=this.props,x=L.groupMemberDetails,U=L.selectedMessageData,R=L.showMessageinfo,F=void 0!==R&&R,_=null===(e=this.props.activeChatData)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.recent)||void 0===a?void 0:a.chatType,G=null===(o=this.props)||void 0===o?void 0:o.messageData,H=null===(l=this.props)||void 0===l||null===(i=l.activeChatData)||void 0===i||null===(c=i.data)||void 0===c||null===(s=c.roster)||void 0===s?void 0:s.nickName,J=b||{},q=J.deleteStatus,W=J.deleteEveryOne,K=void 0===W?null:W,z=J.isSender,Y=void 0===z?null:z,Z=y&&!C?Object(B.x)(y):[],X=(Object(V.e)(y)||{}).isAdminBlocked,Q=void 0!==X&&X;return Q=!(0===Q||!Q),r.a.createElement(n.Fragment,null,D&&r.a.createElement(ze,{containerId:"container"},r.a.createElement(Ye,{popUpToggleAction:this.popUpToggleAction,dispatchAction:this.dispatchAction,headerLabel:r.a.createElement(r.a.Fragment,null,"Unblock"," ",M," ?"),closeLabel:"Cancel",actionLabel:"Unblock",infoLabel:"On unblocking, this contact will be able to call you or send messages to you."})),r.a.createElement("div",{className:"chatconversation-container"},r.a.createElement("div",{onDragEnter:this.onDragEnter,id:"msgContent",className:"msg-content"},r.a.createElement("div",{className:"loader"},C&&r.a.createElement("img",{src:w.Nd,alt:"message-history",style:v}),r.a.createElement("img",{src:w.Nd,alt:"load-history",ref:this.loadMore,style:{width:50,height:50,display:"none"}})),Object(B.Z)(_)&&!C&&r.a.createElement(mr,{chatmessages:Z,rosterData:this.props.rosterData,groupMemberDetails:x,vCardData:this.props.vCardData,onScrolledTop:this.onScrolledTop,onScrolledBottom:this.onScrolledBottom,closeMessageOption:this.closeMessageOption,messageAction:this.messageAction,requestReplyMessage:this.requestReplyMessage,viewOriginalMessage:this.viewOriginalMessage,groupNickName:H,jid:y,addionalnfo:k,deliveredType:G,chatType:_,onScrolled:this.onScrolled,scrollToBottom:this.scrollToBottom,handleTranslateLanguage:this.handleTranslateLanguage,handleShowCallScreen:this.props.handleShowCallScreen}),Object(B.T)(_)&&!C&&r.a.createElement(dr,{chatmessages:Z,requestReplyMessage:this.requestReplyMessage,vCardData:this.props.vCardData,onScrolledTop:this.onScrolledTop,messageAction:this.messageAction,closeMessageOption:this.closeMessageOption,onScrolledBottom:this.onScrolledBottom,viewOriginalMessage:this.viewOriginalMessage,jid:y,addionalnfo:k,deliveredType:G,chatType:_,onScrolled:this.onScrolled})),this.state.isBlocked&&Object(B.X)(_)&&!Q&&r.a.createElement("div",{className:"blockedContainer"},r.a.createElement("p",null,r.a.createElement("i",null,r.a.createElement(w.s,null))," ",r.a.createElement("span",null,"You can't send message to this blocked contact.",r.a.createElement("span",{className:"link",onClick:function(){h.popUpToggleAction(y,M)}},"Unblock")))),Object(B.X)(_)&&Q&&r.a.createElement("div",{className:"blockedUserContainer"},r.a.createElement("p",null,"This user is no longer available")),S&&r.a.createElement(ur,{msgActionType:this.state.msgActionType,activeJid:y,closeMessageOption:this.closeMessageOption,deleteMultipleMessages:this.deleteMultipleMessages,handleStarredAction:this.handleStarredAction}),E&&r.a.createElement(ze,{containerId:"container"},r.a.createElement("div",{className:"popup-wrapper deleteMessage"},r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-label"},r.a.createElement("label",null,"Are you sure you want to delete selected message",(null===U||void 0===U||null===(u=U.data)||void 0===u?void 0:u.length)>1?"s":"","?")),r.a.createElement("div",{className:"popup-noteinfo"},0===q&&Y&&K?r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",onClick:this.deleteMessageFromConversation(1),className:"btn-cancel danger"},"Delete For Me"),r.a.createElement("button",{type:"button",onClick:function(){return h.setState({showModal:!1})},className:"btn-cancel"},"Cancel"),r.a.createElement("button",{type:"button",onClick:this.deleteMessageFromConversation(2),className:"btn-active danger"},"Delete For Everyone")):r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",onClick:function(){return h.setState({showModal:!1})},className:"btn-cancel"},"Cancel"),r.a.createElement("button",{type:"button",onClick:this.deleteMessageFromConversation(1),className:"btn-active danger"},"Delete For Me"))))))),F&&r.a.createElement(ze,{divclass:"messageInfo",containerId:"container"},r.a.createElement(ar,{groupMemberDetails:x,vCardData:this.props.vCardData,messageAction:this.messageAction,requestReplyMessage:this.requestReplyMessage,viewOriginalMessage:this.viewOriginalMessage,groupNickName:H,jid:y,addionalnfo:Object(d.a)(Object(d.a)({},k),{},{messageInfo:!0}),msg:N,chatType:_,rosterData:this.props.rosterData,handleShowMessageinfo:this.handleShowMessageinfo,closeMessageOption:this.closeMessageOption})),this.canSendMessage()&&!Q&&r.a.createElement(_r,{forwardOption:S,loaderStatus:C,dragOnContainer:O,handleSendMsg:this.handleSendMsg,jid:this.props.activeChatId,chatType:_,replyMessage:b,sendMessgeType:g,vCardData:this.props.vCardData,rosterData:null===(m=this.props)||void 0===m||null===(p=m.rosterData)||void 0===p?void 0:p.data,closeReplyAction:this.closeReplyAction,groupMemberDetails:x,userReplayDetails:this.state.userReplayDetails,avoidRecord:this.props.avoidRecord}),r.a.createElement("div",{className:"".concat(j?"conversation-overlay":"")},j&&r.a.createElement("img",{src:w.Nd,alt:"message-history",style:v}))),T&&r.a.createElement(Dt,{textActionBtn:"Report",btnActionClass:"red",textCancelBtn:"Cancel",textHeading:"Report  ".concat(Object(B.X)(_)?H:"","\n            ").concat(Object(B.V)(_)?A:"","?"),handleAction:function(e){return h.reportConfirmAction(e)},handleCancel:function(){return h.setState({showReportPopup:!1})},textInfo:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"This message will be forwarded to admin.",r.a.createElement("br",null),"This contact will not be notified."))}))}}]),a}(n.Component),Hr=Object(o.b)((function(e){return{activeChatData:e.activeChatData,singleChatMsgHistoryData:e.singleChatMsgHistoryData,groupsMemberListData:e.groupsMemberListData,messageData:e.messageData,groupChatMessage:e.groupChatMessage,vCardData:e.vCardData,rosterData:e.rosterData,blockedContact:e.blockedContact,browserTabData:e.browserTabData,chatConversationHistory:e.chatConversationHistory,selectedMessageData:e.selectedMessageData}}),{forwardReset:Vt.e,scrollBottomChatHistoryAction:function(){return{type:j.Mb,payload:{id:O()()}}}})(Gr),Jr=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,a),(e=t.call(this,n)).displayBroadCastMemberNames=function(){var t=e.props.groupMemberDetails,a=void 0===t?[]:t;return a&&a.map((function(e){var t=e.displayName,a=e.name,n=e.username,r=e.jid;return t||a||n||Object(x.v)(r)})).join(",")},e.handlePopUp=function(){},e.state={viewContactStatus:!1},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.userData,t=(e=void 0===e?{}:e).data,a=(t=void 0===t?{}:t).recent,o=(a=void 0===a?{}:a).msgfrom,l=void 0===o?"":o,i=t.roster,c=void 0===i?{}:i,s=c.emailId,d=c.image,u=Object(B.g)(c)||Object(x.v)(l),m=Object(le.e)("token");return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"conversation-header"},r.a.createElement(re.a,null),r.a.createElement("div",{className:"user-profile-name"},r.a.createElement("i",{className:"arrow-icon",onClick:this.handlePopUp},r.a.createElement(w.b,null)),r.a.createElement("div",{className:"user-profile-name",onClick:this.handlePopUp},r.a.createElement(fe.a,{chattype:"broadcast",userToken:m,imageToken:d,emailId:s}),r.a.createElement("div",{className:"profile-name"},r.a.createElement("h4",null,u),r.a.createElement("h6",null,this.displayBroadCastMemberNames()))))))}}]),a}(r.a.Component),qr=Object(o.b)((function(e){return{popUpData:e.popUpData,messageData:e.messageData}}),null)(Jr),Wr=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){(n.props.callStatus&&n.props.callStatus.toLowerCase()===Q.o||n.props.callDurationTimestamp)&&n.startTimer()},n.componentWillUnmount=function(){n.stopTimer()},n.startTimer=function(){n.setState({timerOn:!0,timerTime:n.state.timerTime,timerStart:(n.props.callDurationTimestamp||Date.now())-n.state.timerTime},(function(){c.a.dispatch(Object(C.c)(n.state.timerStart))})),n.timer=setInterval((function(){n.setState({timerTime:Date.now()-n.state.timerStart})}),10)},n.stopTimer=function(){clearInterval(n.timer)},n.resetTimer=function(){n.setState({timerStart:0,timerTime:0})},n.state={timerOn:!1,timerStart:e.callDurationTimestamp||0,timerTime:0},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){e.callStatus&&this.props.callStatus&&e.callStatus!==this.props.callStatus&&(e.callStatus.toLowerCase()===Q.n||e.callStatus.toLowerCase()===Q.l||e.callStatus.toLowerCase()===Q.v||e.callStatus.toLowerCase()===Q.p)&&this.props.callStatus.toLowerCase()===Q.o&&this.startTimer()}},{key:"render",value:function(){var e=null;if(this.props.callStatus&&[Q.u,Q.p,Q.q,Q.n,Q.s,Q.v,Q.m,Q.t].indexOf(this.props.callStatus.toLowerCase())>-1){var t=this.props.callStatus&&this.props.callStatus.toLowerCase();this.props.callStatus.toLowerCase()===Q.t&&(t=Q.i.toLowerCase()),e="".concat(Object(x.e)(t)).concat(this.props.callStatus&&this.props.callStatus.toLowerCase()!==Q.q&&this.props.callStatus.toLowerCase()!==Q.t?"...":"")}else{var a=this.state.timerTime;e=Object($.e)(a)}return r.a.createElement(r.a.Fragment,null,e)}}]),a}(n.Component),Kr=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).getGroupMembers=function(e){var t=n.props.rosterData,a=(t=void 0===t?{}:t).data,r=void 0===a?[]:a;return e&&(Object(B.P)(e,r)||[])},n.sortUsersDisplayName=function(e){return e.map((function(e){var t=Object(V.d)(e);return e.displayName=t,e})).sort((function(e,t){return isNaN(parseInt(t.displayName))-isNaN(parseInt(e.displayName))||String(e.displayName).localeCompare(String(t.displayName))}))},n.mapUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=n.props.groupsMemberListData,a=(t=void 0===t?{}:t).data,r=a||{},o=r.participants,l=n.getGroupMembers(o);if(!e)return n.sortUsersDisplayName(l);var i=l.filter((function(t){return t.userType===e}));return n.sortUsersDisplayName(i)},n.sortUsersByName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=n.props.vCardData,a=e?n.mapUsers("o").concat(n.mapUsers("n")):n.mapUsers(),r=a.findIndex((function(e){return Object(V.o)(e.userId)}));if(-1!==r){var o=a.splice(r,1)[0];a.push(Object(d.a)(Object(d.a)(Object(d.a)({},o),t.data),{},{displayName:"You"}))}return a},n.displayGroupMemberNames=Object(p.a)(m.a.mark((function e(){var t,a,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,n.sortUsersByName().map(function(){var e=Object(p.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.userType&&a.displayName&&t.push(a.displayName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:if(a=n.props.groupsMemberListData,r=(a=void 0===a?{}:a).data,o=(r||{}).participants,n.getGroupMembers(o).filter((function(e){return e.userType})).length!==t.length){e.next=12;break}return e.abrupt("return",t.join(", "));case 12:return e.abrupt("return","click here for group info");case 13:case"end":return e.stop()}}),e)}))),n.updateGroup=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.sortUsersByName("o"),e.next=3,n.displayGroupMemberNames();case 3:a=e.sent,n.setState({groupMemberDetails:t,displayNames:a});case 5:case"end":return e.stop()}}),e)}))),n.getBroadCastMembers=function(e){var t=n.props.rosterData,a=(t=void 0===t?{}:t).data,r=void 0===a?[]:a;return e&&Object(B.u)(e,r)||[]},n.updateBroadCast=function(e){var t=e.participants,a=n.getBroadCastMembers(t);n.setState({groupMemberDetails:a})},n.constructData=function(){var e=n.props.activeChatData.data,t=(e=void 0===e?{}:e).chatType,a=e.chatId,r=e.roster,o=void 0===r?{}:r;t&&a&&n.setState({activeChatId:a},Object(p.a)(m.a.mark((function e(){var r,l,i,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(B.V)(t)?(r=Object(V.c)(a,Le.f),l=n.props||{},i=l.groupsMemberParticipantsListData,c=(i=void 0===i?{}:i).groupParticipants,(s=(void 0===c?{}:c)[r])&&s.length>0&&Object(ae.d)({groupJid:r,participants:s})):Object(B.T)(t)&&n.updateBroadCast(o);case 1:case"end":return e.stop()}}),e)}))))},n.handlePopUpClassActive=function(e){n.props.handlePopupState(e)},n.state={groupMemberDetails:[],displayNames:"",activeChatId:""},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){var t,a,n,r,o,l=this.props,i=l.rosterData.id,c=l.groupsMemberListData.id,s=l.activeChatData,d=(s=void 0===s?{}:s).id,u=null===e||void 0===e||null===(t=e.activeChatData)||void 0===t?void 0:t.id,m=null===e||void 0===e||null===(a=e.groupsMemberListData)||void 0===a?void 0:a.id,p=null===e||void 0===e||null===(n=e.rosterData)||void 0===n?void 0:n.id,h=this.props.ConnectionStateData;u!==d||p!==i||(null===e||void 0===e||null===(r=e.ConnectionStateData)||void 0===r?void 0:r.id)&&(null===e||void 0===e||null===(o=e.ConnectionStateData)||void 0===o?void 0:o.id)!==(null===h||void 0===h?void 0:h.id)&&"CONNECTED"===(null===h||void 0===h?void 0:h.data)?this.constructData():c!==m&&this.updateGroup()}},{key:"render",value:function(){var e,t,a,o=this.props,l=o.activeChatData,i=o.vCardData,c=o.ConnectionStateData,s=(c=void 0===c?{}:c).id,d=c.data,u=o.modalPopUpReducer,m=void 0===u?{}:u,p=this.props.activeChatData.data,h=(p=void 0===p?{}:p).chatType,v=(null===(e=this.props)||void 0===e||null===(t=e.vCardData)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.nickName)||"";if(l&&0===l.length)return r.a.createElement("div",{className:" chat-banner ".concat(this.props.showonGoingcallDuration?"showCallDuration":""," ")},this.props.showonGoingcallDuration&&r.a.createElement("div",{className:"onGoingcallDuration",onClick:this.props.handleShowCallScreen},r.a.createElement("span",{className:"tapToCall"},"Tap to return to call ",this.props.callDurationTimestamp&&r.a.createElement(r.a.Fragment,null," - ",r.a.createElement(Wr,{callStatus:"",callDurationTimestamp:this.props.callDurationTimestamp})))),r.a.createElement("div",{className:"banner-blocks"},r.a.createElement("div",{className:"mf-section"},r.a.createElement("div",{className:"start-chart"},r.a.createElement("div",{className:"content"},r.a.createElement("h3",null,"Hi ",He()(v),v&&"!"),r.a.createElement("p",null,"Try the wholesome experience of MirrorFly"),r.a.createElement("div",{className:"start-chat"},r.a.createElement("span",null,r.a.createElement("i",{className:"iconChating"},r.a.createElement(w.z,null)),"Chatting"),r.a.createElement("span",null,r.a.createElement("i",{className:"iconVoice"},r.a.createElement(w.u,null)),"Voice"),r.a.createElement("span",null,r.a.createElement("i",{className:"iconVideo"},r.a.createElement(w.vd,null)),"Video")))))));var f=this.state,g=f.activeChatId,b=f.groupMemberDetails,E=f.displayNames;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"chat-conversion ".concat(this.props.openStatus?"popup-open":""," ").concat(m.modalPopup?"modal-open":"","\n                 ").concat(this.props.showonGoingcallDuration?"showCallDuration":"")},this.props.showonGoingcallDuration&&r.a.createElement("div",{className:"onGoingcallDuration",onClick:this.props.handleShowCallScreen},r.a.createElement("span",{className:"tapToCall"},"Tap to return to call ",this.props.callDurationTimestamp&&r.a.createElement(r.a.Fragment,null," - ",r.a.createElement(Wr,{callStatus:"",callDurationTimestamp:this.props.callDurationTimestamp}))," ")),h&&"broadcast"===h?r.a.createElement(qr,{userData:l,vCardData:i,activeChatId:g,groupMemberDetails:b,handlePopUpClassActive:this.handlePopUpClassActive,handleConversationSectionDisplay:this.props.handleConversationSectionDisplay}):r.a.createElement(_t,{userData:l,vCardData:i,showonGoingcallDuration:this.props.showonGoingcallDuration,activeChatId:g,displayNames:E,groupMemberDetails:b,handlePopUpClassActive:this.handlePopUpClassActive,handleConversationSectionDisplay:this.props.handleConversationSectionDisplay}),r.a.createElement(Hr,{connectionState:s,isConnected:d,activeChatId:g,groupMemberDetails:b,showMessageinfo:this.props.showMessageinfo,messageInfoShow:this.props.messageInfoShow,avoidRecord:this.props.showonGoingcallDuration,handleShowCallScreen:this.props.handleShowCallScreen})))}}]),a}(n.Component),zr=Object(o.b)((function(e){return{modalPopUpReducer:e.modalPopUpReducer,activeChatData:e.activeChatData,ConnectionStateData:e.ConnectionStateData,rosterData:e.rosterData,vCardData:e.vCardData,groupsMemberListData:e.groupsMemberListData,callDurationTimestamp:e.callDurationTimestampData.callDurationTimestamp,groupsMemberParticipantsListData:e.groupsMemberParticipantsListData}}),null)(Kr),Yr=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleClickOutside=function(e){var t=Ke.a.findDOMNode(Object(f.a)(n));t&&t.contains(e.target)?n.props.logoutStatus(!0):n.props.handleDropdownStatus(!1)},n.state={logoutPopupStatus:!1},n.handleLogoutStatus=n.handleLogoutStatus.bind(Object(f.a)(n)),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleLogoutStatus,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleLogoutStatus,!0)}},{key:"handleLogoutStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleClickOutside(e)}},{key:"render",value:function(){return r.a.createElement("li",{title:"Logout",className:"webchat-logout",onClick:this.handleLogoutStatus,"data-id":"jesthandleLogoutStatus"},r.a.createElement("i",null,r.a.createElement(w.hc,null)),r.a.createElement("span",null,"Logout"))}}]),a}(r.a.Component),Zr=(a(709),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleLogout=function(){Object(x.X)()},n.handleLogoutCancel=n.handleLogoutCancel.bind(Object(f.a)(n)),n}return Object(v.a)(a,[{key:"handleLogoutCancel",value:function(){this.props.logoutStatus(!1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"userprofile logout"},r.a.createElement("div",{className:"logout-popup"},r.a.createElement("div",{className:"logout-label"},r.a.createElement("label",null,"Are you sure you want to logout?")),r.a.createElement("div",{className:"logout-noteinfo"},r.a.createElement("button",{type:"button",name:"btn-cancel",className:"btn-cancel","data-id":"jesthandleLogoutCancel",onClick:this.handleLogoutCancel},"Cancel"),r.a.createElement("button",{type:"button",name:"btn-logout",className:"btn-logout","data-id":"jesthandleLogout",onClick:this.handleLogout},"Logout"))))}}]),a}(r.a.Component)),Xr=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).cancelAction=function(){c.a.dispatch(Object(X.a)())},e.handleAction=function(){if(Object(x.R)()){var t=(e.props||{}).modalProps,a=(t=void 0===t?{}:t).displayName,n=void 0===a?"":a,r=t.groupuniqueId,o=void 0===r?"":r,l=t.userjid,i=void 0===l?"":l,c=t.action,s=void 0===c?"":c,d=t.checkAdmin,u=void 0===d?"":d;if("groupMakeAdmin"===s){A.a&&A.a.makeAsAdmin(o,i);var m="".concat(n," is now admin");re.b.success(m,"success")}else if("ExitGroup"===s){A.a&&A.a.userExitGroup(o,i,u);re.b.info("You were no longer from the group.")}else{A.a&&A.a.removeParticipant(o,i,!!u);var p="".concat(n," is removed from group");re.b.success(p)}e.cancelAction()}else Object(x.a)()},e.ternaryAvoid=function(){var t=(e.props||{}).modalProps,a=(t=void 0===t?{}:t).action;switch(void 0===a?"":a){case"groupMakeAdmin":return"Make group admin";case"ExitGroup":return"Exit";case"DeleteGroup":return"Delete";default:return"Remove"}},e}return Object(v.a)(a,[{key:"render",value:function(){var e=(this.props||{}).modalProps,t=(e=void 0===e?{}:e).title,a=void 0===t?"":t,n=e.activeclass,o=void 0===n?"":n,l=e.action,i=void 0===l?"":l,c=this.ternaryAvoid();return r.a.createElement("div",{className:"popup-wrapper"},r.a.createElement("div",{className:"popup-container ".concat(o)},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-label"},r.a.createElement("label",null,a)),r.a.createElement("div",{className:"popup-noteinfo"},r.a.createElement("button",{type:"button",className:"btn-cancel",onClick:this.cancelAction,"data-jest-id":"jestcancelAction"},"Cancel"),r.a.createElement("button",{type:"button",onClick:this.handleAction,"data-jest-id":"jesthandleAction",className:"btn-active ".concat("groupRemoveMember"===i?"danger":"")},c)))))}}]),a}(n.Component),Qr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,a=void 0===t?"":t,n=e.token,o=void 0===n?"":n,l=e.userId,i=void 0===l?"":l,c=e.status,s=void 0===c?"":c,d=e.roster,u=void 0===d?{}:d,m=e.emailId,p=void 0===m?"":m,h=e.userJid,v=void 0===h?"":h,f=e.updateJid,g=void 0===f?"":f,b=e.isBlocked,E=void 0!==b&&b,C=e.statusMsg,y=void 0===C?"":C,O=e.selectState,j=void 0!==O&&O,N=e.contactName,k=void 0===N?"":N,S=e.initialName,w=void 0===S?"":S,D=e.hideCheckbox,M=e.hightlightText,I=void 0===M?"":M,T=e.handleChange,P=void 0===T?function(){}:T,A=e.popUpToggleAction,L=void 0===A?function(){}:A,x=Object(V.m)(u,w);return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:E?"chat-list-li Blocked bc-none":"chat-list-li","data-ld":g},r.a.createElement("label",{htmlFor:g},r.a.createElement(fe.a,{chatType:"chat",userToken:o,temporary:!1,imageToken:a,emailId:p,userId:i,name:x,initialName:w}),r.a.createElement("div",{className:"recentchats"},r.a.createElement("div",{className:"recent-username-block"},r.a.createElement("div",{className:"recent-username"},r.a.createElement("div",{className:"username"},r.a.createElement("h3",{title:k},r.a.createElement("span",null,I))))),r.a.createElement("div",{className:"recent-message-block"},r.a.createElement(nt,{status:y||s,userId:g})),!D&&r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{name:"participants",type:"checkbox",checked:j,onChange:P,value:j,id:g}),r.a.createElement("label",{htmlFor:g}))),E&&r.a.createElement("span",{className:"Unblock","data-jest-id":"jestpopUpToggleAction",onClick:function(){L(v,k)}},"Unblock"))))};function $r(e){var t=e.roster,a=void 0===t?{}:t,o=e.contactName,l=e.image,i=e.emailId,s=e.statusMsg,d=e.status,u=e.isChanged,h=void 0===u?-1:u,v=e.searchValue,f=e.userId,g=e.userJid,b=e.prepareContactToAdd,E=e.prepareContactToRemove,C=e.hideCheckbox,y=e.maxMemberReached,O=e.isBlocked,j=Object(n.useState)(!1),N=Object(Re.a)(j,2),k=N[0],S=N[1],w=Object(n.useState)(!1),D=Object(Re.a)(w,2),M=D[0],I=D[1],T=Object(n.useState)(null),P=Object(Re.a)(T,2),L=P[0],U=P[1],R=Object(n.useState)(null),F=Object(Re.a)(R,2),_=F[0],V=F[1],G=f||g,H=function(e,t){I(!M),U(e||null),V(t||null)},J=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!M),e.next=3,A.a.unblockUser(L);case 3:(t=e.sent)&&200===t.statusCode&&(c.a.dispatch(Object(tt.c)(L,Le.X)),re.b.success("".concat(_||"User"," has been Unblocked")),Object(B.Q)(L,Le.g));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){S(-1!==h)}),[h]),Object(n.useEffect)((function(){O&&(S(!1),E(G,e))}),[O]);var q=Object(le.e)("token"),W=Object(x.z)(o,v);return r.a.createElement(n.Fragment,null,M&&r.a.createElement(ze,{containerId:"container"},r.a.createElement(Ye,{popUpToggleAction:H,dispatchAction:J,headerLabel:r.a.createElement(r.a.Fragment,null,"Unblock"," ",o," ?"),closeLabel:"Cancel",actionLabel:"Unblock",infoLabel:"On unblocking, this contact will be able to call you or send messages to you."})),r.a.createElement(Qr,{image:l,token:q,userId:f,status:d,roster:a,emailId:i,userJid:g,updateJid:G,isBlocked:O,statusMsg:s,selectState:k,contactName:o,initialName:o,handleChange:function(t){if(!O){var a=!k;if(y&&a)return void re.b.error("Maximum "+Object($.f)()+" members allowed in a call");S(a),a?b(G,e):E(G,e)}},hideCheckbox:C,hightlightText:W,popUpToggleAction:H}))}function eo(e){var t=e.userId,a=e.removeParticipant,o=e.isBlocked,l=Object(V.d)(e);return r.a.createElement(n.Fragment,null,!o&&r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement("span",{className:"badgeImg"},r.a.createElement("img",{src:"/static/media/sample-profile.dad49187.svg",alt:""})),r.a.createElement("span",{title:l,className:"badgeTitle"},l),r.a.createElement("i",{onClick:function(){return a(t)},className:"badgeAction"},"X"))))}var to,ao,no=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,a),(n=t.call(this,r)).removeParticipant=function(e){n.setState({participantToAdd:n.state.participantToAdd.filter((function(t){return t.userId!==e}))})},n.errorMessageListner=function(e){n.setState({errorMesage:e})},n.addParticipant=function(e,t){n.setState({participantToAdd:n.state.participantToAdd.concat(Object(d.a)({userId:e},t))})},n.prepareContactToAdd=function(e,t){return!n.state.participantToAdd.find((function(t){return t.userId===e}))&&n.addParticipant(e,t)},n.prepareContactToRemove=function(e){return!!n.state.participantToAdd.find((function(t){return t.userId===e}))&&n.removeParticipant(e)},n.contactsSearch=function(e){var t=n.props.popUpData.modalProps.groupMembers,a=n.props.rosterData.data;return a?Object(x.Q)(a).filter((function(a){var n=a.username?a.username:a.userId;return!(t.indexOf(n)>-1)&&Object(V.k)(a).find((function(t){return!(!a.isFriend||!t)&&-1!==t.search(new RegExp(e,"i"))}))})):[]},n.searchFilterList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";clearTimeout(n.timer),n.timer=setTimeout((function(){var t=e=Object(x.P)(e);if(!e){var a=n.props.rosterData.data;return n.setState({searchValue:"",errorMesage:"",filteredContacts:Object(V.f)(Object(x.Q)(a)),userList:Object(V.f)(Object(x.Q)(a))}),void Tn.getUsersListFromSDK(1,t)}var r=n.contactsSearch(t);n.setState({searchValue:e,filteredContacts:r,userList:r}),Tn.getUsersListFromSDK(1,t)}),0)},n.addUsersInGroup=function(){var e=n.state.participantToAdd,t=void 0===e?[]:e,a=n.props.popUpData,r=(a=void 0===a?{}:a).modalProps,o=(r=void 0===r?{}:r).groupMembers,l=void 0===o?[]:o,i=r.groupName,c=void 0===i?"":i,s=r.groupuniqueId,d=void 0===s?"":s,u=Object(Gt.get)(l,"length",0)+Object(Gt.get)(t,"length",0);u<2?n.setState({errorMesage:"Select minimum of two contacts"}):u<239&&n.setState({errorMesage:""},(function(){t.forEach((function(e){var t=e.userId+"@"+E.S;A.a.addParticipants(d,c,[t])})),n.props.closePopup()}))},n.fetchMoreData=function(){var e=n.state.userList,t=Object(x.P)(n.state.searchValue);Tn.getUsersListFromSDK(Math.ceil(e.length/20+1),t)},n.state={searchValue:"",groupMembers:[],participantToAdd:[],errorMesage:"",isLoading:!0,filteredContacts:[],loaderStatus:!!(null===r||void 0===r||null===(e=r.rosterData)||void 0===e?void 0:e.isFetchingUserList),userList:[]},n.timer=0,n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){Tn.getUsersListFromSDK(1)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.rosterData&&e.rosterData.id!==this.props.rosterData.id){var a,n,r=this.state.participantToAdd.map((function(e){var a,n,r=null===(a=t.props.rosterData)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.find((function(t){var a;return t.userId===(null===e||void 0===e||null===(a=e.roster)||void 0===a?void 0:a.userId)}));if(!r.isAdminBlocked&&!r.isDeletedUser)return e}));r=r.filter((function(e){return void 0!==e}));var o=this.props.rosterData.data;this.setState({participantToAdd:r,loaderStatus:null===(a=this.props)||void 0===a||null===(n=a.rosterData)||void 0===n?void 0:n.isFetchingUserList,filteredContacts:Object(V.f)(Object(x.Q)(o)),userList:Object(V.f)(Object(x.Q)(o))})}}},{key:"handleUserListData",value:function(){var e=this,t=[],a=this.state,n=a.searchValue,o=a.participantToAdd,l=this.props.popUpData,i=(l=void 0===l?{}:l).modalProps,c=(i=void 0===i?{}:i).groupMembers,s=this.state.userList;return(s=s.filter((function(e){return!c.includes(e.userId)}))).length>0&&s.map((function(a){var l=a.username,i=a.userId,s=Object(V.d)(a),d=l||i,u=o.findIndex((function(e){return e.userId===d})),m=e.props.blockedContact.data,p=Object(V.c)(d),h=m.indexOf(p)>-1;t.push(r.a.createElement($r,Object.assign({isBlocked:h,searchValue:n,contactName:s,isChanged:u,membersCount:c.length+o.length,errorMessageListner:e.errorMessageListner,prepareContactToAdd:e.prepareContactToAdd,prepareContactToRemove:e.prepareContactToRemove,key:d,roster:a},a)))})),t}},{key:"render",value:function(){var e=this,t=this.state,a=t.filteredContacts,o=t.searchValue,l=t.participantToAdd,i=this.props.closePopup,c=this.props.popUpData,s=(c=void 0===c?{}:c).modalProps,d=(s=void 0===s?{}:s).groupMembers;a=a.filter((function(e){return!d.includes(e.userId)}));var u=this.handleUserListData();return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"popup-wrapper"},r.a.createElement("div",{className:"popup-container add-participant audio"},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-container-header"},r.a.createElement("i",{onClick:i,className:"closePopup"},r.a.createElement(w.K,null)),r.a.createElement("h5",null,"Add group participants"),r.a.createElement("i",{className:"addPopup",onClick:this.addUsersInGroup,"data-jest-id":"jestaddUsersInGroup"},r.a.createElement(w.kd,null))),r.a.createElement(Qt,{search:this.searchFilterList}),r.a.createElement("div",{className:"popup-body",style:{overflow:"hidden"}},r.a.createElement("div",{className:"contactList"},this.state.loaderStatus&&r.a.createElement("div",{className:"response_loader style-2"},r.a.createElement("img",{src:w.Nd,alt:"loader"})),0===a.length&&o&&r.a.createElement("span",{className:"searchErrorMsg"},r.a.createElement(w.cc,null),E.q),u.length>0&&r.a.createElement("ul",{style:{height:"100%"},className:"chat-list-ul",id:"scrollableUl-addparticipant"},r.a.createElement("li",{className:"chat-list-li BadgeContainer"},r.a.createElement("div",{className:"selectedBadge"},r.a.createElement("ul",null,l.map((function(t){var a=t.userId;return r.a.createElement(eo,Object.assign({key:a},t,{removeParticipant:e.removeParticipant}))}))))),r.a.createElement(wn.a,{dataLength:u.length,next:this.fetchMoreData,hasMore:!0,scrollableTarget:"scrollableUl-addparticipant"},this.handleUserListData()))))))))}}]),a}(n.Component),ro={closePopup:X.a},oo=Object(o.b)((function(e,t){return{rosterData:e.rosterData,popUpData:e.popUpData,contactsWhoBlockedMe:e.contactsWhoBlockedMe,blockedContact:e.blockedContact}}),ro)(no),lo=(a(710),a(711),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(h.a)(this,a),(n=t.call(this,e)).cropImage=function(){to.result({type:"base64",size:"original"}).then((function(e){var t=Object(x.j)(e,n.state.filename);n.setState({loaderIcon:!0},(function(){return n.aftercropedImage(t)}))}))},n.aftercropedImage=function(e){var t=(window.URL||window.webkitURL).createObjectURL(e);n.setState({groupProfileImage:t,errorMessage:!1},(function(){return n.handleProfileCameraPopupClose()}))},n.updateProfileImageNewImg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};to&&to.destroy(),e&&n.setState({filename:e.name,camImage:e,cameraPopup:!0},(function(){var t=document.getElementById("CameraContainer");to=new mt.a(t,vt);var a=new FileReader;a.onload=function(e){to.bind({url:e.target.result}).then((function(){Object.assign(document.querySelector(".cr-viewport").style,{width:"200px",height:"200px"}),to.setZoom(0)}))},a.readAsDataURL(e)}))},n.handleViewProfile=function(){n.setState({viewProfileStatus:!0})},n.handleVCardClose=function(){n.setState({viewProfileStatus:!1,viewEmojiUsername:!1,viewEmojiStatus:!1,viewEdit:!0,viewEditStatus:!0,viewTick:!0,viewTickStatus:!0,charCount:!1,charCountStatus:!1,showImgDropDown:!1,showProfilePhotoRemove:!1})},n.removeProfileImage=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({showProfilePhotoRemove:!1,groupProfileImage:""});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setWebcamImages=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.size>0){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var a=t.result;n.setState({photoTaken:!0,camImageDisplay:a,camImage:e},(function(){return n.updateProfileImageNewImg(e)}))}}else n.setState({showProfileCamera:!0})},n.onCameraCheckGrupPic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"NotAllowedError"===e.name?n.setState({onCameraPermissionDenied:!0}):"NotFoundError"===e.name&&n.setState({onCameraError:!0})},n.handleNewProfileImgDropDown=function(e){e.stopPropagation(),n.setState({showImgDropDown:!n.state.showImgDropDown})},n.handleProfileImgClose=function(e){n.setState({showProfileImg:!1})},n.handleProfileCameraShow=function(e){n.setState({showProfileCamera:!0,showImgDropDown:!1,photoTaken:!1,cameraLoader:!0})},n.handleProfilePhotoRemoveShow=function(e){n.setState({showProfilePhotoRemove:!0,showImgDropDown:!1,groupProfileImage:""})},n.handleProfileRemovephotoClose=function(e){n.setState({showProfilePhotoRemove:!1})},n.handleProfileCameraPopupClose=function(){n.setState({showProfileCamera:!1,photoTaken:!0,onCameraError:!1,onCameraPermissionDenied:!1,loaderIcon:!1,cameraPopup:!1,showImgDropDown:!1})},n.checkNotFound=function(e){e.target.src=w.sb},n.afterImageLoad=function(e){return e.target.style.backgroundImage=""},n.findNegativeValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=E.G-Ve()(e).length;return t>=0?E.G-Ve()(e).length:0},n.handleMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target.value,a=void 0===t?"":t,r=ct(E.G,a);n.setState({typingMessage:r,groupNameChars:n.findNegativeValue(r),errorMessage:!1})},n.handleEmojiText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=n.state.typingMessage,a=void 0===t?"":t,r=ct(E.G,a+e);n.setState({typingMessage:r,groupNameChars:n.findNegativeValue(r),errorMessage:!1})},n.handleProfileImageShow=function(e){n.setState({showProfileImg:!0,showImgDropDown:!1})},n.nextScreen=function(){var e=n.state,t=e.typingMessage,a=e.groupProfileImage;t?n.props.handleMoveToPartcipantList({typingMessage:t,groupProfileImage:a,profileImage:!0}):n.setState({errorMessage:!0})},n.closeDropDown=function(){console.log("closeDropDown")};var r=e.typingMessage,o=void 0===r?"":r,l=e.groupProfileImage;return n.state={loading:"",loaderIcon:!1,cameraPopup:!1,showProfileImg:!1,showProfileCamera:!1,onCameraPermissionDenied:!1,onCameraError:!1,showImgDropDown:!1,showEmoji:!1,typingMessage:o,groupProfileImage:l,errorMessage:!1,groupNameChars:E.G-o.length},n}return Object(v.a)(a,[{key:"handleCropImage",value:function(){var e=this;this.setState({loaderIcon:!0},(function(){return e.cropImage()}))}},{key:"componentDidMount",value:function(){this.groupNameInput.focus()}},{key:"render",value:function(){var e=this,t=this.props.handleBackToRecentChat,a=this.state,o=a.showProfileCamera,l=a.onCameraError,i=a.onCameraPermissionDenied,c=a.photoTaken,s=a.showProfilePhotoRemove,d=a.showProfileImg,u=a.showImgDropDown,m=a.loaderIcon,p=a.cameraPopup,h=a.showEmoji,v=a.typingMessage,f=a.groupProfileImage,g=a.errorMessage,b=a.groupNameChars;return r.a.createElement(qe.a,{onOutsideClick:function(){e.setState({showImgDropDown:!1})}},r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"contactlist "},r.a.createElement("div",{className:"recent-chatlist-header"},r.a.createElement("div",{className:"profile-img-name"},r.a.createElement("i",{className:"newchat-icon",onClick:t,title:"Back"},r.a.createElement(w.b,null)),r.a.createElement("span",null,"New Group"),r.a.createElement("div",{title:"Select group members",onClick:this.nextScreen},"Next",r.a.createElement("i",{className:"nextGroup-icon"},r.a.createElement(w.R,null))))),r.a.createElement("div",{className:"newgroup-details-container"},r.a.createElement("div",{className:"group-details-inner"},r.a.createElement("div",{className:"group-image-container"},r.a.createElement("div",{className:"group-image-inner"},f&&r.a.createElement("img",{src:f,onClick:function(t){return e.handleProfileImageShow(t)},onError:this.checkNotFound,alt:"Group Profile"}),!f&&r.a.createElement("span",{onClick:function(t){return e.handleNewProfileImgDropDown(t)},className:"createNewGroup"},r.a.createElement("img",{src:f,onError:this.checkNotFound,alt:"Group Profile"})),r.a.createElement("i",{className:"camera-edit",onClick:function(t){return e.handleNewProfileImgDropDown(t)}},r.a.createElement(w.db,null)),u&&r.a.createElement("ul",{className:"menu-dropdown"},f&&r.a.createElement("li",{className:"ViewPhoto",title:E.Z,onClick:function(t){return e.handleProfileImageShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.Bd,null)),r.a.createElement("span",null,E.Z)),r.a.createElement("li",{className:"TakePhoto",title:"Take Photo",onClick:function(t){return e.handleProfileCameraShow(t)}},r.a.createElement("i",null,r.a.createElement(w.id,null)),r.a.createElement("span",null,"Take Photo")),f&&r.a.createElement("li",{className:"RemovePhoto",title:E.U,onClick:function(t){return e.handleProfilePhotoRemoveShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.Lc,null)),r.a.createElement("span",null,E.U)),r.a.createElement("li",{className:"UploadPhoto",title:"Upload Photo"},r.a.createElement("i",null,r.a.createElement(w.td,null)),r.a.createElement("span",{className:"uploadphoto"},r.a.createElement("span",null,E.Y),r.a.createElement(gt,{closeDropDown:this.closeDropDown,loader:m,cameraPopup:p,closePopUp:this.handleProfileCameraPopupClose,type:E.t,updateProfileImage:this.updateProfileImageNewImg,cropImage:this.cropImage})))))),r.a.createElement("div",{className:"form-control"},r.a.createElement("input",{type:"text",ref:function(t){return e.groupNameInput=Ke.a.findDOMNode(t)},value:v,onChange:this.handleMessage,placeholder:"Type group name here...",maxLength:this.findNegativeValue(v)>0?1e3:0}),r.a.createElement("span",{className:"char-count"},b),r.a.createElement("i",{className:"emoji"},r.a.createElement(et,{showEmoji:h,onEmojiClick:this.handleEmojiText})),g&&r.a.createElement("div",{className:"errorMessage"},r.a.createElement(w.cc,null),r.a.createElement("span",null,"Please provide group name")))))),r.a.createElement("div",{className:"userprofile-popup groupProfile"},r.a.createElement("div",{className:"userprofile-body"},r.a.createElement("div",{className:"userprofile-image"},d&&r.a.createElement("div",{className:"Viewphoto-container"},r.a.createElement("div",{className:"Viewphoto-preview"},r.a.createElement("img",{src:f,alt:"vcard-profile"}),r.a.createElement("i",{className:"preview-close",onClick:function(t){return e.handleProfileImgClose(t)}},r.a.createElement(w.N,null)))),o&&r.a.createElement("div",{className:"camera-container",title:""},l&&r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.e),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.d),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",className:"btn-okay",onClick:function(t){return e.handleProfileCameraPopupClose(t)},name:"btn-cancel"},"Okay"))),i&&r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.s),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.f),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",className:"btn-okay",onClick:function(t){return e.handleProfileCameraPopupClose(t)},name:"btn-cancel"},"Okay"))),!l&&!i&&r.a.createElement("div",{className:"camera-popup-visible"},r.a.createElement("div",{className:"userprofile-header"},r.a.createElement("i",{onClick:function(t){return e.handleProfileCameraPopupClose(t)}},r.a.createElement(w.N,null)),c?r.a.createElement("h5",null,E.i):r.a.createElement("h5",null,E.X)),r.a.createElement("div",{className:"cameraview"},c&&r.a.createElement("div",{id:"CameraContainer"}),!c&&r.a.createElement(Ct,{sendFile:this.setWebcamImages,onCameraCheck:this.onCameraCheckGrupPic})),c&&r.a.createElement("div",{className:"popup-controls"},!this.state.loaderIcon&&r.a.createElement("i",{title:"Re capture"}," ",r.a.createElement(w.Nc,{onClick:function(t){return e.handleProfileCameraShow(t)}})),this.state.loaderIcon?r.a.createElement("img",{src:w.Md,alt:"loader"}):r.a.createElement("i",{title:"Update Profile",onClick:function(t){return e.handleCropImage()}},r.a.createElement(w.jd,null))))),s&&r.a.createElement("div",{className:"removephoto-container"},r.a.createElement("div",{className:"removephoto-popup"},r.a.createElement("div",{className:"removephoto-label"},r.a.createElement("label",null,E.V)),r.a.createElement("div",{className:"removephoto-noteinfo"},r.a.createElement("button",{type:"button",className:"btn-cancel",onClick:function(t){return e.handleProfileRemovephotoClose(t)},name:"btn-cancel"},E.g),r.a.createElement("button",{type:"button",className:"btn-removephoto",onClick:function(t){return e.removeProfileImage(t)},name:"btn-remove"},E.T)))))))))}}]),a}(n.Component)),io=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n,r;return Object(h.a)(this,a),(r=t.call(this,e)).errorMessageListner=function(e){r.setState({errorMesage:e})},r.removeParticipant=function(e){r.setState({errorMesage:"",participantToAdd:r.state.participantToAdd.filter((function(t){return t.userId!==e}))})},r.addParticipant=function(e,t){var a=r.state.participantToAdd;r.setState({errorMesage:"",participantToAdd:a.concat(Object(d.a)({userId:e},t))})},r.prepareContactToAdd=function(e,t){return!r.state.participantToAdd.find((function(t){return t.userId===e}))&&r.addParticipant(e,t)},r.prepareContactToRemove=function(e,t){return!!r.state.participantToAdd.find((function(t){return t.userId===e}))&&r.removeParticipant(e)},r.contactsSearch=function(e){var t=r.state.groupMembers,a=r.props.rosterData.data;return a?Object(x.Q)(a).filter((function(a){var n=a.username?a.username:a.jid;return!(t.indexOf(n)>-1)&&Object(V.k)(a).find((function(t){return!(!a.isFriend||!t)&&-1!==t.search(new RegExp(e,"i"))}))})):[]},r.searchFilterList=function(e){var t=e=Object(x.P)(e),a=r.contactsSearch(t);r.setState({searchValue:e,errorMesage:"",filteredContacts:a,userList:a}),Tn.getUsersListFromSDK(1,t)},r.getBlobfromUrl=function(){var e=r.props.groupProfileImage;return e?fetch(e).then((function(e){return e.blob()})):Promise.resolve()},r.addUsersInGroup=function(){var e=r.state,t=e.participantToAdd;e.inProgress||(t.length<2?r.setState({errorMesage:"Select minimum of two contacts"}):Object(x.R)()?r.setState({inProgress:!0},Object(p.a)(m.a.mark((function e(){var a,n,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.props.typingMessage,n=[],t.map((function(e){return n.push(e.userJid)})),e.next=5,r.getBlobfromUrl();case 5:return o=e.sent,e.next=8,A.a.createGroup(a,n,o||"");case 8:l=e.sent,console.log("createGroup result :>> ",l),200===l.statusCode&&r.setState({inProgress:!1},(function(){r.props.handleBackToRecentChat()}));case 11:case"end":return e.stop()}}),e)})))):re.b.error(_.E))},r.handleMakeNewCall=function(){Object(le.e)("roomName")?re.b.info("Can't place a new call while you're already in a call."):r.props.handleMakeNewCall(r.props.newCallType,r.state.participantToAdd)},r.fetchMoreData=function(){var e=r.state.userList,t=Object(x.P)(r.state.searchValue);Tn.getUsersListFromSDK(Math.ceil(e.length/20+1),t)},r.state={searchValue:"",groupMembers:[],errorMesage:"",inProgress:!1,participantToAdd:[],filteredContacts:[],displayUserNames:[],loaderStatus:!!(null===e||void 0===e||null===(n=e.rosterData)||void 0===n?void 0:n.isFetchingUserList),userList:[]},r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){Tn.getUsersListFromSDK(1)}},{key:"componentDidUpdate",value:function(e){var t,a,n,r,o,l,i,c,s=this;if((null===(t=e.messageData)||void 0===t?void 0:t.id)!==(null===(a=this.props.messageData)||void 0===a?void 0:a.id)&&!(null===(n=this.props)||void 0===n||null===(r=n.messageData)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.MessageType)&&"receiveMessage"===(null===(l=this.props)||void 0===l||null===(i=l.messageData)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.messageType)){var d,u,m,p=this.props,h=p.handleBackToRecentChat,v=p.typingMessage,f=p.messageData.data,g=f.sendfrom,b=f.from,C=f.msgbody,y=null===(d=this.props)||void 0===d||null===(u=d.vCardData)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.fromuser;g.indexOf(y)>-1&&"2"===C&&this.getBlobfromUrl().then((function(e){""!==e&&null!==e&&void 0!==e||(e=""),A.a.setGroupInfo(b,v,e,(function(){s.state.participantToAdd.forEach((function(e){var t=e.userId+"@"+E.S;A.a.groupAddMember(b,v,t)})),s.setState({inProgress:!1},(function(){h()}))}))})).catch((function(e){console.log(e,"error in groupcreation")}))}if(e.rosterData&&e.rosterData.id!==this.props.rosterData.id){var O,j,N=this.state.participantToAdd.map((function(e){var t,a,n=null===(t=s.props.rosterData)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.find((function(t){return t.userId===e.userId}));if(!(null===n||void 0===n?void 0:n.isAdminBlocked)&&!(null===n||void 0===n?void 0:n.isDeletedUser))return e}));N=N.filter((function(e){return void 0!==e}));var k=this.contactsSearch(this.state.searchValue);this.setState({participantToAdd:N,loaderStatus:null===(O=this.props)||void 0===O||null===(j=O.rosterData)||void 0===j?void 0:j.isFetchingUserList,filteredContacts:k,userList:k})}}},{key:"handleUserListData",value:function(){var e=this,t=[],a=this.state,n=a.searchValue,o=a.participantToAdd,l=this.props.newCall,i=void 0!==l&&l,c=Boolean(o.length>=Object($.f)()-1);return this.state.userList.length>0&&this.state.userList.map((function(a){var l=a.username,s=a.userId,d=Object(V.d)(a),u=l||s,m=o.findIndex((function(e){return e.userId===u})),p=e.props.blockedContact.data,h=Object(V.c)(u),v=p.indexOf(h)>-1;t.push(r.a.createElement($r,Object.assign({isBlocked:v,searchValue:n,contactName:d,isChanged:m,maxMemberReached:i?c:"",errorMessageListner:e.errorMessageListner,prepareContactToAdd:e.prepareContactToAdd,prepareContactToRemove:e.prepareContactToRemove,key:u,roster:a},a)))})),t}},{key:"render",value:function(){var e=this,t=this.state,a=t.participantToAdd,o=t.inProgress,l=t.filteredContacts,i=t.searchValue,c=t.errorMesage,s=this.props,d=s.handleBackToGroup,u=s.newCall,m=void 0!==u&&u,p=s.handleBackToCallLog,h=this.handleUserListData();return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:"contactlist"},r.a.createElement("div",{className:"recent-chatlist-header"},r.a.createElement("div",{className:"profile-img-name"},!o&&r.a.createElement("i",{className:"newchat-icon",onClick:m?p:d,title:"Back"},r.a.createElement(w.b,null)),r.a.createElement("span",null,m?"Contacts":"Add Group Participants"),!m&&r.a.createElement("i",{onClick:this.addUsersInGroup,className:o?"createGroup-loader":"createGroup-icon",title:"Create group"},o?r.a.createElement(w.ib,null):r.a.createElement(w.R,null)))),r.a.createElement(Qt,{search:this.searchFilterList}),0===l.length&&i&&r.a.createElement("span",{className:"searchErrorMsg"},r.a.createElement(w.cc,null)," ",E.q),c&&r.a.createElement("div",{className:"errorMesage"},r.a.createElement(w.cc,null),r.a.createElement("span",null,c)),h.length>0&&r.a.createElement("ul",{className:"chat-list-ul newGroup ".concat(m&&a.length>0?"adjustHeight":""),id:"scrollableUl-group"},r.a.createElement("li",{className:"chat-list-li BadgeContainer"},r.a.createElement("div",{className:"selectedBadge"},r.a.createElement("ul",null,a.map((function(t){var a=t.userId,n=e.props.blockedContact.data,o=Object(V.c)(a),l=n.indexOf(o)>-1;return r.a.createElement(eo,Object.assign({key:a},t,{isBlocked:l,removeParticipant:e.removeParticipant}))}))))),r.a.createElement(wn.a,{dataLength:h.length,next:this.fetchMoreData,hasMore:!0,scrollableTarget:"scrollableUl-group"},this.handleUserListData())),this.state.loaderStatus&&r.a.createElement("div",{className:"loader-container style-2"},r.a.createElement("img",{src:w.Nd,alt:"loader"})),m&&a.length>0&&r.a.createElement("div",{onClick:this.handleMakeNewCall,className:"callButton"},r.a.createElement("i",null," ","video"===this.props.newCallType?r.a.createElement(w.ob,null):r.a.createElement(w.nb,null))," Call now (",a.length,")"))))}}]),a}(n.Component),co=Object(o.b)((function(e,t){return{rosterData:e.rosterData,popUpData:e.popUpData,messageData:e.messageData,contactsWhoBlockedMe:e.contactsWhoBlockedMe,blockedContact:e.blockedContact}}),null)(io),so=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).changeScreen=function(e){var t=e.typingMessage,a=e.groupProfileImage,r=e.profileImage;n.setState({profileView:!n.state.profileView,loading:!0,typingMessage:t||n.state.typingMessage,groupProfileImage:r?a:n.state.groupProfileImage},(function(){n.setState({loading:!1})}))},n.state={profileView:!0,groupProfileImage:"",typingMessage:"",loading:!1},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleBackToRecentChat,a=e.vCardData,o=this.state,l=o.profileView,i=o.typingMessage,c=o.groupProfileImage,s=o.loading;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"loader"},s&&r.a.createElement("img",{src:w.Nd,alt:"message-history",style:{width:50,height:50}})),l&&r.a.createElement(lo,{handleBackToRecentChat:t,typingMessage:i,groupProfileImage:c,handleMoveToPartcipantList:this.changeScreen}),!l&&r.a.createElement(co,{typingMessage:i,vCardData:a,groupProfileImage:c,handleBackToGroup:this.changeScreen,handleBackToRecentChat:t}))}}]),a}(n.Component),uo=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleUnreadCount=function(){var e=n.props.unreadCountData,t=(e=void 0===e?{}:e).unreadDataObj,a=void 0===t?{}:t,r=Object(B.F)(),o=Object(B.s)(),l=[].concat(Object(D.a)(r),Object(D.a)(o)),i=Object.keys(a).filter((function(e){return!l.includes(e)}));n.state.count!==i.length&&n.setState({count:i.length},(function(){Object(le.c)("unreadMessageCount",n.state.count)}))},Object(le.c)("unreadMessageCount",0),n.state={count:0,defaultTitle:Le.l},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.handleUnreadCount()}},{key:"componentDidUpdate",value:function(e){this.handleUnreadCount()}},{key:"render",value:function(){var e=this.state,t=e.count,a=e.defaultTitle,n=t?"(".concat(t,") ").concat(a):a;return document.title=n,!0}}]),a}(n.Component),mo=Object(o.b)((function(e,t){return{unreadCountData:e.unreadCountData,commonData:null===e||void 0===e?void 0:e.commonData,recentChatData:e.recentChatData}}),null)(uo),po=a(47),ho=a(83),vo=function(e){var t=Object(o.d)((function(e){return e})).typingData,a=(t=void 0===t?{}:t).id,l=t.data,i=void 0===l?[]:l,c=e.lastMessage,s=e.publisherId,d=e.deleteStatus,u=e.onClickHandler,m=void 0===u?null:u,p=e.messageId,h=e.chatUserType,v=e.fromUserId,f=e.msgStatus,g=e.msgType,b=Fe({typingId:a,typingData:i,fromUserId:v,chatType:h}),E=b.isTyping,C=b.displayName;Object(n.useEffect)((function(){if(Object(B.V)(h)&&Object(V.o)(s)&&g!==Le.n){var e=Object(V.b)(v);A.a.getGroupMsgInfo(e,p,!0)}}),[]);var y,O,j=g===Le.n||1===d?null:(y=f,O=s,Object(V.o)(O)?r.a.createElement("i",{className:Qn.f[y]},y===Le.H?r.a.createElement(w.Tb,null):""):null);return r.a.createElement("span",{className:"recentText",onClick:m||null},E?r.a.createElement("span",{className:"txtTyping"},C):r.a.createElement(r.a.Fragment,null,c&&r.a.createElement(r.a.Fragment,null,j," ",c)))},fo=a(62),go={isTabVisible:!0,updateTabVisible:function(e){go.isTabVisible=e,c.a.dispatch(Object(fo.c)(go.isTabVisible))},init:function(){c.a.dispatch(Object(fo.c)(go.isTabVisible)),document.addEventListener("visibilitychange",(function(){go.updateTabVisible(!document.hidden)}),!1),document.addEventListener("focus",(function(){go.updateTabVisible(!0)}),!1),document.addEventListener("blur",(function(){}),!1),window.addEventListener("focus",(function(){go.updateTabVisible(!0)}),!1),window.addEventListener("blur",(function(){}),!1)},isVisible:function(){var e,t;return null===(e=c.a.getState())||void 0===e||null===(t=e.browserTabData)||void 0===t?void 0:t.isVisible}},bo=go,Eo=a(57),Co=["recent-menu","recent-menu-archive","recent-menu-archive-icon","recent-menu-archive-text"],yo=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,a),(e=t.call(this,o)).getContactName=function(){var t=e.props.item,a=void 0===t?{}:t;return Object(V.d)(a.roster)},e.handleToggleMute=Object(p.a)(m.a.mark((function t(){var a,n,r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.callLogData,n=(a=void 0===a?{}:a).callAudioMute,r=void 0!==n&&n,t.next=5,A.a.muteAudio(!r);case 5:200===(null===(o=t.sent)||void 0===o?void 0:o.statusCode)&&(Object(ne.c)(!r),c.a.dispatch(Object(C.e)(!r)));case 7:case"end":return t.stop()}}),t)}))),e.handleToggleHangUpCall=function(){e.stopAudio(),Object($.b)()},e.formatMessage=function(e,t){var a=e.message;if(["image","video","audio","file","contact","location"].indexOf(t)>-1){var n={image:r.a.createElement("i",{className:"chat-camera"},r.a.createElement(w.x,null)),video:r.a.createElement("i",{className:"chat-video"},r.a.createElement(w.xd,null)),audio:r.a.createElement("i",{className:" ".concat("recording"!==Sn()(e,"media.audioType","")?"audio":"mic"," chat-audio")},"recording"!==Sn()(e,"media.audioType","")?r.a.createElement(w.i,null):r.a.createElement(w.C,null)),file:r.a.createElement("i",{className:"chat-docu"},r.a.createElement(w.W,null)),contact:r.a.createElement("i",{className:"chat-contact"},r.a.createElement(w.P,null)),location:r.a.createElement("i",{className:"chat-location"},r.a.createElement(w.fc,null)),missedCallAudio:r.a.createElement("i",{className:"chat-missedcall"},r.a.createElement(w.Gb,null)),missedCallVideo:r.a.createElement("i",{className:"chat-missedcall"},r.a.createElement(w.Hb,null))};return a=(a=e&&"object"===typeof e&&e.media?e.media.caption:void 0)||("image"===t?"Photo":Object(x.e)(t)),a=He()(Object(x.w)(a)),r.a.createElement(r.a.Fragment,null,n[t]||""," ",a)}return He()(Object(x.w)(a))},e.getDeletedText=function(e){return Object(V.o)(e)?r.a.createElement("span",{className:"text-italic innerSpan"},Le.ab):r.a.createElement("span",{className:"text-italic innerSpan"},Le.W)},e.handleLastMessage=function(t){var a=e.props.vCardData,o=(a=void 0===a?{}:a).data,l=(o=void 0===o?{}:o).fromUser,i=t.recent,c=i.chatType,s=i.publisherId,d=i.msgBody,u=i.msgType;if([{condition:"groupchat"},{condition:"broadcast"}].some((function(e){return e.condition===c}))&&s!==l){var m=Object(V.e)(s);if(m){var p=Object(V.d)(m),h=e.formatMessage(d,u);return r.a.createElement(n.Fragment,null,p&&r.a.createElement("span",{className:"groupLastMessageBy"},p,": "),h&&r.a.createElement("span",{className:"groupLastMessage"},1===Sn()(e.props,"item.recent.deleteStatus",0)?Le.W:h))}var v=m&&m.mobileNumber?Object(x.v)(m.mobileNumber):s;return r.a.createElement(n.Fragment,null,v&&r.a.createElement("span",{className:"groupLastMessageBy"},v,": "),r.a.createElement("span",{className:"groupLastMessage"},e.formatMessage(d,u)," "))}return 1===Sn()(e.props,"item.recent.deleteStatus",0)?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"recallMsgIcon"},r.a.createElement(w.Gc,null)),e.getDeletedText(s)):e.formatMessage(d,u)},e.groupNotification=function(t){var a=e.props.rosterData.data,n=t.recent,r=n.publisherId,o=n.userId,l=n.profileUpdatedStatus,i=n.chatType;return Object(Qn.b)(r,o,l,a,i)},e.handleMessageType=function(t){if(t.recent.msgType===Le.n)return e.groupNotification(t);switch(t.recent.msgType){case"text":case"auto_text":case"image":case"video":case"audio":case"file":case"contact":case"location":return e.handleLastMessage(t);default:return null}},e.addActiveClass=function(e){var t=e.target.closest("ul").querySelector("li.active");t&&t.classList.remove("active"),e.target.closest("li").classList.add("active")},e.clickListener=function(t,a){var n,r,o,l=a.recent,i=(l=void 0===l?{}:l).fromUserId;e.props.handlePopupState(!0);var s=null===(n=t.target)||void 0===n||null===(r=n.closest("li"))||void 0===r||null===(o=r.classList)||void 0===o?void 0:o.contains("active"),d=Object(le.e)("recordingStatus");if(!s&&!1!==d){e.addActiveClass(t);c.a.dispatch(N()).then((function(){return c.a.dispatch(Object(po.b)({fromUserId:i}))})).then((function(){return e.props.handleOnclick("block",a)}))}},e.setUnreadCount=function(){var t,a,n=e.props.item,r=(n=void 0===n?{}:n).recent,o=r.unreadCount,l=r.fromUserId,i=r.chatType;!o||0===parseInt(o)||Object(B.V)(i)&&(!(null===(t=e.props)||void 0===t||null===(a=t.item)||void 0===a?void 0:a.roster)||"object"===typeof e.props.item.roster&&0===Object.keys(e.props.item.roster).length)||c.a.dispatch(Object(po.c)({count:parseInt(o),fromUserId:l,isRefresh:!0}))},e.getsenderName=function(e){return Object(V.d)(e)},e.createPushNotification=function(t){try{var a,n,r=t.recent,o=r.chatType,l=r.msgBody,i=l.message_type,c=l.message,s=r.publisherId,d=r.fromUserId,u=t.roster,m=u.image,p=u.groupImage,h=Object(B.ab)(i)?c:"".concat(Object(x.f)(i||"")),v=i?h:e.handleMessageType(t);if("chat"===o)a=e.getsenderName(t.roster),n=m;else{a=e.getContactName(),n=p;var f=Object(V.d)(Object(V.e)(s))||s;i&&(v="".concat(f,": ").concat(v))}var g=e.props.unreadCountData.unreadDataObj,b=0,E=0;Object.entries(g).map((function(e){var t=e[1].count;b++,E+=t})),Object(x.cb)()&&Eo.a.isPageHidden&&(a="You have "+b+" new chat"+(b>1?"s":""),v="Total "+E+" unread message"+(E>1?"s":"")),e.localDb.getImageByKey(n,"profileimages").then((function(e){var t=window.URL.createObjectURL(e);Object(x.cb)()&&Eo.a.isPageHidden&&(t=""),Object(x.ab)(a,t,v,d)})).catch((function(e){var t="chat"===o?ho.a:ho.b;Object(x.cb)()&&Eo.a.isPageHidden&&(t=""),Object(x.ab)(a,t,v,d)}))}catch(C){}},e.handleDrop=function(){var t=e.state.recentDrop;e.setState({recentDrop:!t})},e.handleDropClose=function(){e.setState({recentDrop:!1})},e.handleArchivedChat=function(){var t=Object(p.a)(m.a.mark((function t(a,n,r){var o,l,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(x.a)()){t.next=2;break}return t.abrupt("return");case 2:return e.setState({recentDrop:!1}),o=0===r,t.next=6,A.a.updateArchiveChat(Object(V.c)(a,n),o);case 6:200===(null===(l=t.sent)||void 0===l?void 0:l.statusCode)&&(i={fromUserId:a,isArchived:o},c.a.dispatch(Object(k.l)(i)),re.b.success(o?"Chat archived":"Chat unarchived"));case 8:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.handlePinChat=function(){Object(x.a)()||e.setState((function(e){return{recentDrop:!1,pinChat:!e.pinChat}}),(function(){re.b.success(!1===e.state.pinChat?"Pinned":"Unpinned")}))},e.handleRecentChatClick=function(t,a){var n;if("groupchat"===(null===a||void 0===a||null===(n=a.recent)||void 0===n?void 0:n.chatType)){var r,o,l=null===(r=e.props.groupsData)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.find((function(e){var t;return e.groupId===(null===a||void 0===a||null===(t=a.roster)||void 0===t?void 0:t.groupId)}));if(null===l||void 0===l?void 0:l.isAdminBlocked)return void e.setState({showModal:!0})}e.clickListener(t,a)},e.state={image:null,showModal:!1,recentDrop:!1,pinChat:!1,archiveChat:!1,isArchive:!0,needToImplement:!1},e.localDb=new P.a,e.audio=new Audio("sounds/busySignal.mp3"),e}return Object(v.a)(a,[{key:"stopAudio",value:function(){this.audio.loop=!1,this.audio.pause(),this.audio.currentTime=0}},{key:"handleTimeStamp",value:function(e){return Me(function(e){e=new Date(e.replace(/-/g,"/"));var t=new Date(e);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t}(e),"recent-chat")}},{key:"componentDidMount",value:function(){var e=this,t=this.props.item,a=(t=void 0===t?{}:t).roster,n=(a=void 0===a?{}:a).image,r=a.groupImage;this.setState({image:n||r},(function(){e.setUnreadCount()}))}},{key:"componentDidUpdate",value:function(e){var t,a,n,r,o,l,i,s,d,u,m=this.props,p=m.item,h=(p=void 0===p?{}:p).recent,v=h.fromUserId,f=h.publisherId,g=h.chatType,b=h.muteStatus,E=h.archiveStatus,C=void 0===E?0:E,y=p.roster,O=(y=void 0===y?{}:y).image,j=m.messageId,N=m.messageData,k=(N||{}).data,S=(k=void 0===k?{}:k).msgType,w=k.msgId,D=k.msgBody;if(S&&"carbonSentSeen"===S&&e.messageData.id!==N.id&&w===j&&c.a.dispatch(Object(po.b)({fromUserId:v})),this.props.refreshUnreadCount!==e.refreshUnreadCount&&this.props.refreshUnreadCount&&Object(B.q)()!==v&&this.setUnreadCount(),(null===(t=this.props)||void 0===t||null===(a=t.item)||void 0===a||null===(n=a.recent)||void 0===n?void 0:n.msgType)===Le.n&&(null===(r=this.props)||void 0===r||null===(o=r.item)||void 0===o||null===(l=o.recent)||void 0===l?void 0:l.timestamp)!==(null===e||void 0===e||null===(i=e.item)||void 0===i||null===(s=i.recent)||void 0===s?void 0:s.timestamp)||(null===e||void 0===e?void 0:e.messageId)!==j){var M,I,T,P=null===(M=this.props)||void 0===M||null===(I=M.vCardData)||void 0===I||null===(T=I.data)||void 0===T?void 0:T.fromUser;if(!Object(V.o)(f)){var A=Object(le.e)("websettings"),L=(A?JSON.parse(A):{}).Notifications,x=void 0===L||L;if(!Object(B.S)(v,g)||!bo.isVisible()){var U,R=null===(U=this.props)||void 0===U?void 0:U.item;if(S&&"string"===typeof msgbody&&B.bb.indexOf(D)>-1){if(R.recent.NotificationTo!==P&&"2"===D)return;x&&0===b&&1!==C&&this.createPushNotification(R)}else x&&0===b&&1!==C&&this.createPushNotification(R)}}}else(null===e||void 0===e||null===(d=e.item)||void 0===d||null===(u=d.roster)||void 0===u?void 0:u.image)!==O&&this.setState({image:O})}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=t.unreadCountData,n=a.id,r=a.activeUser,o=t.item.recent,l=(o=void 0===o?{}:o).msgfrom;return!n||e.unreadCountData.id===n||l===r.msgfrom}},{key:"render",value:function(){var e=this,t=this.props,a=t.item,o=t.searchTerm,l=t.vCardData,i=t.messageId,c=t.callUserJID,s=t.hidden,d=t.callStatus,u=t.enableDropDown,m=void 0!==u&&u,p=t.isAdminBlocked,h=void 0!==p&&p,v=this.props,f=v.item,g=(f=void 0===f?{}:f).roster,b=(g=void 0===g?{}:g).image,E=g.groupImage,C=v.callLogData,y=(C=void 0===C?{}:C).callAudioMute,O=void 0!==y&&y,j=v.pageType,N=void 0===j?"":j,k=a.roster,S=k.groupId,D=k.emailId,M=k.userId,I=a.recent,T=(I=void 0===I?{}:I).chatType,P=I.createdAt,A=I.msgStatus,L=I.fromUserId,U=I.msgType,R=I.deleteStatus,F=I.muteStatus,B=I.archiveStatus,_=this.handleMessageType(a),G=P&&this.handleTimeStamp(P)||null,H=this.getContactName(),J=Object(V.m)(a.roster,H),q=H?Object(x.z)(H,o):L,W=Object(le.e)("token");if("groupchat"===T&&!S)return null;var K=this.props.selectedRoster,z="";K&&K.data&&K.data.roster&&void 0===(z=K.data.roster.userId)&&(z=K.data.roster.groupId);var Y=this.props.unreadCountData.unreadDataObj,Z=Y[L]&&Y[L].count||0,X="Ongoing "+(this.props.callMode&&"onetomany"===this.props.callMode?"group ":" ")+this.props.callType+" call\u2026",Q=M||S,$=this.state,ee=$.recentDrop,te=$.pinChat,ae=$.archiveChat,ne=$.showModal,re=Object(x.o)();return r.a.createElement(n.Fragment,null,r.a.createElement("li",{style:{display:s?"none":""},className:"chat-list-li  ".concat(N?"recentLiCustom":""," ").concat(Q===z?"active":""," ").concat(ee?"set-top":""," ").concat(L===c?" activeCall":""," "),id:"chat-list-id","data-name":"list","data-chat-id":L,ref:function(t){return e.listElement=t},onClick:function(t){Co.includes(t.target.id)||e.handleRecentChatClick(t,a)}},r.a.createElement(fe.a,{chatType:T,userToken:W,userId:M||S,temporary:!1,imageToken:h?"":b||E,emailId:D,name:J}),r.a.createElement("div",{className:"recentchats"},r.a.createElement("div",{className:"recent-username-block"},r.a.createElement("div",{className:"recent-username"},r.a.createElement("div",{className:"username"},r.a.createElement("h3",{title:H},q))),_&&r.a.createElement("span",{className:Z&&0!==parseInt(Z)?"messagetime-plus":"messagetime"},G)),r.a.createElement("div",{className:"recent-message-block"},L===c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"iconOnGoingCall",onClick:this.props.handleShowCallScreen},"audio"===this.props.callType?r.a.createElement("i",{className:"iconAudioCall"},r.a.createElement(w.Ec,null)):r.a.createElement("i",{className:"iconvideoCall"},r.a.createElement(w.Hc,null))),r.a.createElement("span",{className:"callDetails",onClick:this.props.handleShowCallScreen},X)),r.a.createElement(vo,{msgStatus:A,lastMessage:_,messageId:i,fromUserId:L,chatUserType:T,msgType:U,publisherId:a.recent.publisherId,fromUser:l.data.fromUser,deleteStatus:R}),r.a.createElement("div",{className:"recent-message-icon"},(1===F&&"recent"===N||1===F&&"archive"===N&&!re)&&r.a.createElement("i",{className:"MuteChat"},r.a.createElement(w.G,null)),te&&r.a.createElement("i",{className:"pinChat"},r.a.createElement(en,{style:{color:"#2698F9"}})),0!==parseInt(Z)&&r.a.createElement("p",{className:"notifi"},parseInt(Z)>99?"99+":Z),1===B&&o&&r.a.createElement("span",{className:"recent-badge"},"Archived"),m&&L!==c&&r.a.createElement("span",{style:{width:ee?"1.5em":"0",height:ee?"auto":"0"},className:"recentMenu"},r.a.createElement("div",{className:"recentMenuOverlay",id:"recent-menu",onClick:this.handleDrop}),r.a.createElement(w.ab,{style:{fill:"".concat(ee?"#2698F9":"#C6CBD8")}})))),r.a.createElement("div",{className:"recentDrop"},ee&&r.a.createElement(qe.a,{onOutsideClick:function(){return e.handleDropClose()}},r.a.createElement("ul",{style:{padding:0},className:"menu-dropdown open"},r.a.createElement("li",{onClick:function(){return e.handleArchivedChat(L,T,B)},className:"ArchiveChat",title:ae?"Archived Chat":"Unarchived Chat",id:"recent-menu-archive"},r.a.createElement("i",{id:"recent-menu-archive-icon"},0===B?r.a.createElement(za,null):r.a.createElement(on,null)),r.a.createElement("span",{id:"recent-menu-archive-text"},0===B?"Archive chat":"Unarchive chat")),te&&r.a.createElement("li",{onClick:this.handlePinChat,className:"Unpinchat",title:te?"":"Pin Chat"},r.a.createElement("i",null,r.a.createElement(en,null)),r.a.createElement("span",null,te?"Pin chat":"Unpin chat")))))),L===c&&r.a.createElement("div",{className:"CallAction"},d&&"connected"===d.toLowerCase()&&r.a.createElement("i",{onClick:this.handleToggleMute,title:"Mute/Unmute",className:O?"Mute":""},O?r.a.createElement(w.l,null):r.a.createElement(w.m,null)),r.a.createElement("i",{title:"Hangup",className:"Hangup",onClick:this.handleToggleHangUpCall},r.a.createElement(w.Fc,null)))),ne&&r.a.createElement(ze,{containerId:"container"},r.a.createElement("div",{className:"popup-wrapper BlockedPopUp"},r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"popup-container-inner",style:{maxWidth:"23em"}},r.a.createElement("div",{className:"popup-label"},r.a.createElement("label",null,"This group is no longer available")),r.a.createElement("div",{className:"popup-noteinfo"},r.a.createElement("button",{onClick:function(){return e.setState({showModal:!1})},type:"button",name:"btn-action",className:"popup btn-action danger"},"OK")))))))}}]),a}(n.Component),Oo=Object(o.b)((function(e,t){return{vCardData:e.vCardData,rosterData:e.rosterData,blockedContact:e.blockedContact,unreadCountData:e.unreadCountData,selectedRoster:e.activeChatData,contactsWhoBlockedMe:e.contactsWhoBlockedMe,groupsData:e.groupsData,callLogData:e.callLogData}}),null)(yo),jo=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getMessageInfo=function(e){var t=e.recent;return{msgId:(t=void 0===t?{}:t).msgId,fromUserId:t.fromUserId}},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.recentChatItems,o=t.handleConversationSectionDisplay,l=t.searchTerm,i=t.callUserJID,c=t.handleShowCallScreen,s=t.callType,d=t.callMode,u=t.messageData,m=t.recentChatExist;if(0===a.length)return null;var p=l&&l.trim().length,h="recent"===this.props.pageType?0:1,v=p?a:a.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.recent)||void 0===t?void 0:t.archiveStatus)===h}));return r.a.createElement(n.Fragment,null,p>0&&m&&r.a.createElement("div",{className:"search-head"},"Chats"),r.a.createElement("ul",{className:"chat-list-ul",style:{display:"".concat(0===this.props.archiveLength&&"archive"===this.props.pageType?"none":"")}},v.map((function(t,a){var n=e.getMessageInfo(t),m=n.msgId,p=n.fromUserId,h=t.hidden,v=void 0!==h&&h,f=t.roster.isAdminBlocked,g=void 0===f?"":f;return r.a.createElement(Oo,{pageType:e.props.pageType,enableDropDown:!0,key:p,hidden:v,activeClass:!1,messageId:m,searchTerm:l,messageData:u,handleOnclick:o,item:t,callUserJID:i,callStatus:e.props.callStatus,handleShowCallScreen:c,callType:s,callMode:d,refreshUnreadCount:e.props.refreshUnreadCount,handlePopupState:e.props.handlePopupState,isAdminBlocked:g})}))))}}]),a}(n.Component),No=Object(le.e)("token"),ko=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleRoster=function(e,t){var a={roster:t,recent:{chatType:"chat"},chatType:"chat"};a.chatId=t.userId,a.chatJid=Object(V.c)(t.userId),c.a.dispatch(Object(k.a)(a))},e}return Object(v.a)(a,[{key:"handleContacts",value:function(e,t){var a=this,n=e.image,o=e.status,l=e.statusMsg,i=e.emailId,c=e.chatType,s=e.userId,d=Object(V.d)(e),u=this.props.searchTerm,m=Object(x.z)(d,u),p=o||l;return r.a.createElement("li",{className:"chat-list-li",key:"".concat(d,"-").concat(t),onClick:function(t){return a.handleRoster(t,e)}},r.a.createElement(fe.a,{chatType:c||"chat",userToken:No,imageToken:n,emailId:i,userId:s,name:d}),r.a.createElement("div",{className:"recentchats"},r.a.createElement("div",{className:"recent-username-block"},r.a.createElement("div",{className:"recent-username"},r.a.createElement("div",{className:"username"},r.a.createElement("h3",{title:d},m)))),r.a.createElement("div",{className:"recent-message-block"},r.a.createElement(nt,{status:p,userId:s}))))}},{key:"handleRosterData",value:function(){var e=this;return this.props.filteredContacts.map((function(t,a){return e.handleContacts(t,a)}))}},{key:"render",value:function(){if(!this.props.searchTerm)return null;var e=this.handleRosterData();return r.a.createElement(n.Fragment,null,e.length>0&&r.a.createElement("span",{className:"unknown-chat-roster"},r.a.createElement("div",{className:"search-head"},"Contacts"),r.a.createElement("ul",{className:"chat-list-ul"},e)))}}]),a}(r.a.Component),So=Object(o.b)((function(e,t){return{rosterData:e.rosterData,contactsWhoBlockedMe:e.contactsWhoBlockedMe}}),null)(ko),wo=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).filterUserNameFromRecent=function(e){return e.map((function(e){return e.fromUserId}))},n.filterRosterByUserNames=function(e,t){var a=n.filterUserNameFromRecent(e);return t.filter((function(e){var t=e.username?e.username:e.userId;return a.indexOf(t)>-1}))},n.filterProfileFromRoster=function(e,t){return Object(V.e)(t)},n.filterProfileFromGroup=function(e){var t=n.props.groupsData,a=(t=void 0===t?{}:t).data,r=void 0===a?[]:a;return r&&r.find((function(t){return e===t.groupId}))},n.filterProfileFromBroadcast=function(e){var t=n.props.broadCastData,a=(t=void 0===t?{}:t).data,r=(a=void 0===a?{}:a).broadcastList;return(void 0===r?[]:r).find((function(t){return e===t.jid}))},n.getMessageSenderDetails=function(e){var t=n.props.rosterData,a=(t=void 0===t?{}:t).data;return(void 0===a?[]:a).find((function(t){var a=t.username?t.username:t.userId;return e===a}))||{contactNumber:e}},n.getChatType=function(e){return e?"broadcast":"chat"},n.getRoaster=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"groupchat",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a={groupchat:n.filterProfileFromGroup,broadcast:n.filterProfileFromBroadcast};return a[e]&&a[e](t)},n.constructRecentChatItems=function(e,t){var a=[];return Object(Qn.h)(Object(D.a)(e)).map(function(){var e=Object(p.a)(m.a.mark((function e(r){var o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={},o=Object(B.X)(r.chatType)?n.filterProfileFromRoster(t,r.fromUserId):n.getRoaster(r.chatType,r.fromUserId),a.push({recent:r,roster:o||{}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.filter((function(e){return e}))},n.updateGroupInfo=function(){var e=n.state.recentChatItems;if(0!==e.length){var t=e.map((function(e){var t=e.recent,a=e.roster;if("groupchat"!==t.chatType)return e;var r=a.groupId||t.fromUserId;return{recent:t,roster:n.filterProfileFromGroup(r)||{}}}));n.setState({recentChatItems:t},(function(){var t=n.state.recentChatNames;e=n.state.recentChatItems,n.props.updateRoster({recentChatNames:t,recentChatItems:e})}))}},n.recentChatSearchFilter=function(e){var t=n.state.recentChatItems;return n.chatExist=!1,t.map((function(t){var a=t.roster;return Object(V.k)(a).find((function(t){return!!t&&-1!==t.search(new RegExp(e,"i"))}))?(t.hidden=!1,n.chatExist=!0,t):(t.hidden=!0,t)}))},n.contactsSearch=function(e){var t=n.state.recentChatNames,a=n.props.rosterData.data;return a?a.filter((function(a){var n=a.username?a.username:a.userId;return!(t.indexOf(n)>-1)&&Object(V.k)(a).find((function(t){return!(!a.isFriend||!t)&&-1!==t.search(new RegExp(e,"i"))}))})):[]},n.searchFilterList=function(e,t){var a=Object(x.P)(e);clearTimeout(n.timer),n.timer=setTimeout((function(){var r=n.recentChatSearchFilter(a),o=n.contactsSearch(a);n.setState({searchEnable:""!==e,searchValue:e,filteredRecentChat:r,filteredContacts:o,refreshUnreadCount:t})}),0)},n.state={loader:!0,searchEnable:!1,searchValue:"",recentChatNames:[],recentChatItems:[],filteredContacts:[]},n.timer=0,n.chatExist=!1,n}return Object(v.a)(a,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"componentDidUpdate",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,o,l,i,s,d,u,p,h,v,f,g,b,E,C,y,O,j,N,S,w,D,M,I=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=this.props,h=p.rosterData,v=(h=void 0===h?{}:h).id,f=h.data,g=void 0===f?[]:f,b=p.recentChatData,E=(b=void 0===b?{}:b).id,C=b.data,y=void 0===C?[]:C,O=b.refreshUnreadCount,j=p.commonData.data.isArchived,N=(void 0!==j&&j)!==(null===t||void 0===t||null===(a=t.commonData)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.isArchived),t.rosterData.id===v&&t.recentChatData.id===E&&!N){e.next=14;break}if(v&&E){e.next=9;break}return e.abrupt("return");case 9:return S=this.filterRosterByUserNames(y,g),w=this.constructRecentChatItems(y,S),D=this.filterUserNameFromRecent(y),this.setState({recentChatItems:w,recentChatNames:D,loader:!1,refreshUnreadCount:!this.state.searchValue&&O},(function(){D=I.state.recentChatNames,w=I.state.recentChatItems,I.props.updateRoster({recentChatNames:D,recentChatItems:w}),I.state.searchValue&&I.searchFilterList(I.state.searchValue,O)})),e.abrupt("return");case 14:if(!(null===t||void 0===t||null===(r=t.broadCastData)||void 0===r?void 0:r.id)||!this.props.broadCastData||t.broadCastData.id===this.props.broadCastData.id||(null===(o=this.props.broadCastData)||void 0===o||null===(l=o.data)||void 0===l||null===(i=l.broadcastList)||void 0===i?void 0:i.length)===(null===(s=t.broadCastData)||void 0===s||null===(d=s.data)||void 0===d||null===(u=d.broadcastList)||void 0===u?void 0:u.length)){e.next=20;break}return e.next=17,A.a.getRecentChats();case 17:return(M=e.sent)&&200===M.statusCode&&c.a.dispatch(Object(k.c)(M.data)),e.abrupt("return");case 20:if(!t.groupsData||!this.props.groupsData||t.groupsData.id===this.props.groupsData.id){e.next=23;break}return this.updateGroupInfo(),e.abrupt("return");case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e){var t,a,n,r=this.props,o=r.callUserJID,l=r.messageData,i=(l=void 0===l?{}:l).id,c=l.data,s=(c=void 0===c?{}:c).messageType;if(o!==e.callUserJID)return!0;var d=null===e||void 0===e||null===(t=e.messageData)||void 0===t?void 0:t.id,u=null===e||void 0===e||null===(a=e.messageData)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.messageType,m=Object(Qn.e)(u);return!s||d===i||!m}},{key:"render",value:function(){var e=this.state,t=e.recentChatItems,a=e.filteredRecentChat,o=e.searchEnable,l=e.searchValue,i=e.filteredContacts,c=e.loader,s=this.props,d=s.handleConversationSectionDisplay,u=s.callUserJID,m=s.handleShowCallScreen,p=s.callType,h=s.messageData,v=s.newChatStatus,f=s.callMode,g=s.pageType,b=s.unreadCountData,C=(b=void 0===b?{}:b).unreadDataObj,y=void 0===C?{}:C,O=o?a:t,j=[],N=0;O.map((function(e){var t=e.recent,a=(t=void 0===t?{}:t).archiveStatus,n=void 0===a?0:a,r=t.fromUserId,o=void 0===r?"":r,l=t.unreadCount,i=void 0===l?0:l;if(1===n){var c;if(y[o])(null===(c=y[o])||void 0===c?void 0:c.count)>0&&(N+=1);else i>0&&(N+=1);j.push(o)}}));var k=Object(x.o)();return c?r.a.createElement("div",{className:"loader-container"},r.a.createElement("img",{src:w.Nd,alt:"loader",style:{width:80,height:80}})):r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{display:v?"":"none"}},"recent"===g&&r.a.createElement(Qt,{search:this.searchFilterList}),(!this.props.isAppOnline||Object(x.V)([Le.h,Le.i,Le.k]))&&r.a.createElement("div",{className:"networkoffline"},this.props.isAppOnline?Object(x.e)(Le.h.toLocaleLowerCase()):"Please check your Internet connection"),r.a.createElement("div",{className:"chat-list ".concat(!this.props.isAppOnline||Object(x.V)([Le.h,Le.i,Le.k])?"offline":""," ").concat("archive"===g?"archive":""," ").concat("archive"!==g||0!==O.length||l?"":" no-chat-archive "," ").concat("archive"!==!g||0!==O.length||l?"":" no-chat ")},k&&"recent"===g&&j.length>0&&r.a.createElement("div",{className:"archivedWrapper",onClick:this.props.handleArchivedChatList},r.a.createElement("div",{className:"archivedInner"},r.a.createElement("i",null,r.a.createElement(za,{style:{color:"#6a92c5",fill:"#6a92c5"}})),r.a.createElement("span",null,"Archived")),N>0&&r.a.createElement("span",{className:"count"},N)),r.a.createElement(jo,{pageType:g,searchTerm:l,handleConversationSectionDisplay:d,recentChatItems:O,callUserJID:u,callStatus:this.props.callStatus,handleShowCallScreen:m,messageData:h,callType:p,callMode:f,recentChatExist:this.chatExist,refreshUnreadCount:this.state.refreshUnreadCount,handlePopupState:this.props.handlePopupState,archiveLength:j.length}),r.a.createElement(So,{searchTerm:l,filteredContacts:i}),!this.chatExist&&0===i.length&&l&&r.a.createElement("div",{className:"no-search-record-found ".concat("recent"===g&&j.length?"has-archive":"")},r.a.createElement("div",{className:"norecent-chat"},r.a.createElement("i",{className:"norecent-chat-img"},r.a.createElement(w.hb,null)),r.a.createElement("h4",null,E.p))),(0===j.length&&"archive"===g||"recent"===g&&O.length-j.length===0)&&!l&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"norecent-chat ".concat("recent"===g&&j.length?"has-archive":"")},"archive"===g?r.a.createElement(n.Fragment,null,r.a.createElement("i",{className:"norecent-chat-img"},r.a.createElement(w.zb,null)),r.a.createElement("h4",null,"No archived chats")):r.a.createElement(n.Fragment,null,r.a.createElement("i",{className:"norecent-chat-img"}," ",r.a.createElement(w.Ic,null)," "),r.a.createElement("h4",null,E.m),r.a.createElement("h4",null,E.n,r.a.createElement("i",null,r.a.createElement(w.rc,null))," ",E.o))))),r.a.createElement(mo,null)))}}]),a}(n.Component),Do={updateRecentChat:k.e,updateNotification:k.f,updateRoster:k.d},Mo=Object(o.b)((function(e,t){var a,n;return{rosterData:e.rosterData,recentChatData:e.recentChatData,singleChatMsgHistoryData:e.singleChatMsgHistoryData,groupsData:e.groupsData,messageData:e.messageData,broadCastData:e.broadCastData,isAppOnline:null===e||void 0===e||null===(a=e.appOnlineStatus)||void 0===a?void 0:a.isOnline,connectionState:e.ConnectionStateData.data,isEnableArchived:null===e||void 0===e||null===(n=e.webLocalStorageSetting)||void 0===n?void 0:n.isEnableArchived,commonData:null===e||void 0===e?void 0:e.commonData,unreadCountData:e.unreadCountData}}),Do)(wo),Io=a(154),To=a(155),Po=function(e){var t=e.jid;return r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement("span",{className:"badgeImg"},r.a.createElement(z.a,{userToken:e.userToken,imageToken:e.image,temporary:!0,chatType:"chat"})),r.a.createElement("span",{title:e.contactName,className:"badgeTitle"},e.contactName),r.a.createElement("i",{className:"badgeAction",onClick:function(){return e.removeParticipant(t)}},"X")))},Ao=[],Lo=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n,o;Object(h.a)(this,a),(o=t.call(this,e)).removeParticipant=function(e){var t=o.state.participantToAdd;t=t.filter((function(t){return t!==e})),o.setState({participantToAdd:t})},o.errorMessageListner=function(e){o.setState({errorMesage:e})},o.getCallInfoDetails=Object(p.a)(m.a.mark((function e(){var t,a,n,r,l,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.isInviteModelType){e.next=16;break}if(t=o.props.callIntermediateScreen,a=(t=void 0===t?{}:t).data,n=(a=void 0===a?{}:a).link,r=void 0===n?"":n){e.next=13;break}return e.next=9,A.a.getCallLink();case 9:(i=e.sent)&&200===i.statusCode&&(l=i.data),e.next=14;break;case 13:l=r;case 14:o.setState({callLink:l}),c.a.dispatch(Object(C.d)({link:l}));case 16:case"end":return e.stop()}}),e)}))),o.renderParticpantPopup=function(){var e=o.props.popUpData.modalProps,t=e.groupMemberDetails,a=e.groupMembers,n=e.selectDefault,r=e.groupName,l=e.currentCallUsers,i=o.state,c=i.searchValue,s=i.participantToAdd,d=[],u=Object(V.h)();if(!o.isInviteModelType||r||o.isCallLogModelType)t.map((function(e){var t={},a=e.userJid||e.GroupUser||e.username,n=a.includes("@")?a.split("@")[0]:a;n!==u.fromUser&&(t=Object(V.j)(n),d.push(t))}));else{var m=o.props.rosterData.data;Object(V.f)(Object(x.Q)(m)).map((function(e){var t={},a=e.userJid||e.GroupUser||e.username,n=a.includes("@")?a.split("@")[0]:a;n!==u.fromUser&&(t=Object(V.j)(n),d.push(t))}))}n&&d.length<=7&&d.forEach((function(e){o.prepareContactToAdd(e.userJid)})),Ao=d;var p=d.filter((function(e){if(o.isCallLogModelType&&r){var t=e.username?e.username:e.userJid;if(-1===a.indexOf(t))return!1}if(o.isInviteModelType){var n=e.username?e.username:e.userJid;if(n=n.split("@")[0],l.indexOf(n)>-1)return!1}var i=e.emailId,s=void 0===i?null:i,d=e.name,u=void 0===d?null:d,m=e.displayName,p=void 0===m?null:m,h=e.nickName,v=void 0===h?null:h;return Object.values({emailId:s,name:u,displayName:p,nickName:v}).find((function(e){return!!e&&-1!==e.search(new RegExp(c||"","i"))}))})).filter((function(e){return!0!==(null===e||void 0===e?void 0:e.isAdminBlocked)&&!0!==(null===e||void 0===e?void 0:e.isDeletedUser)}));o.setState({participantToAdd:s,filteredContacts:p,userList:p,groupMembers:Ao})},o.addParticipant=function(e,t){var a=o.state.participantToAdd;a.push(e),o.setState({participantToAdd:a})},o.prepareContactToAdd=function(e,t){return!!o.state.participantToAdd.includes(e)||o.addParticipant(e,t)},o.prepareContactToRemove=function(e,t){return o.state.participantToAdd.includes(e)?o.removeParticipant(e):""},o.contactsSearch=function(e){var t=o.state.participantToAdd,a=o.state.groupMembers;return a?a.filter((function(a){var n=a.username||a.userJid;return(""!==e||-1!==t.indexOf(n))&&Object(V.k)(a).find((function(t){return-1!==t.search(new RegExp(e,"i"))}))})):""},o.searchFilterList=function(e){clearTimeout(o.timer),o.timer=setTimeout((function(){var t=e=Object(x.P)(e),a=o.props.popUpData.modalProps.groupName;if(!e){var n=Ao;return o.setState({searchValue:"",errorMesage:"",filteredContacts:n,userList:n}),void(!o.isInviteModelType||a||o.isCallLogModelType||Tn.getUsersListFromSDK(1,t))}var r=o.contactsSearch(t).filter((function(e){return!0!==(null===e||void 0===e?void 0:e.isAdminBlocked)&&!0!==(null===e||void 0===e?void 0:e.isDeletedUser)}));o.setState({searchValue:e,filteredContacts:r,userList:r}),!o.isInviteModelType||a||o.isCallLogModelType||Tn.getUsersListFromSDK(1,t)}),0)},o.addUsersInCall=function(){var e=o.state.participantToAdd,t=o.props.popUpData.modalProps,a=t.makeGroupCall,n=t.callType,r=t.groupuniqueId,l=t.currentCallUsersLength,i=e.length;i<1?re.b.error("Select minimum of one contacts"):(i+=l||0)>Object($.f)()-1?re.b.error("Maximum "+Object($.f)()+" members allowed in a call"):i<=Object($.f)()-1&&o.setState({errorMesage:""},(function(){a(n,e,r),o.props.popUpData.modalProps.closePopup()}))},o.selectedBadge=function(){var e=o.state.participantToAdd,t=Object(le.e)("token");return Ao.map((function(a,n){var l=a.displayName,i=a.name,c=a.username,s=a.userJid,d=a.image,u=l||i||c,m=c||s;return!!e.includes(m)&&r.a.createElement(Po,{removeParticipant:o.removeParticipant,key:n,jid:m,userToken:t,image:d,contactName:u})}))},o.invideModeFun=function(){return o.isInviteModelType?"Invite Participants":"Group Call"},o.handleCopyLink=function(){navigator.clipboard.writeText(Object(x.q)(o.state.callLink)),o.setState({copyToast:!0}),setTimeout((function(){o.setState({copyToast:!1})}),3e3)},o.fetchMoreData=function(){var e=o.state.userList,t=Object(x.P)(o.state.searchValue);Tn.getUsersListFromSDK(Math.ceil(e.length/20+1),t)};var l=e.popUpData.modalProps,i=l.groupMembers,s=l.modelType;return o.isInviteModelType="inviteParticipants"===s,o.isCallLogModelType="calllogparticipants"===s,o.state={searchValue:"",groupMembers:[],participantToAdd:o.isCallLogModelType?i:[],errorMesage:"",isLoading:!0,filteredContacts:[],copyToast:!1,callLink:"",loaderStatus:!!(null===e||void 0===e||null===(n=e.rosterData)||void 0===n?void 0:n.isFetchingUserList),userList:[]},o.timer=0,o}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;if(e.rosterData.id!==this.props.rosterData.id){var a,n;this.renderParticpantPopup();var r=this.state.participantToAdd.map((function(e){var a,n,r=null===(a=t.props.rosterData)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.find((function(t){return t.userId===e.split("@")[0]}));if(!r.isAdminBlocked&&!r.isDeletedUser)return e}));r=r.filter((function(e){return void 0!==e})),this.setState({participantToAdd:r,loaderStatus:null===(a=this.props)||void 0===a||null===(n=a.rosterData)||void 0===n?void 0:n.isFetchingUserList})}}},{key:"componentWillMount",value:function(){this.renderParticpantPopup()}},{key:"componentDidMount",value:function(){this.getCallInfoDetails(),this.setState({isLoading:!1});var e=this.props.popUpData.modalProps.groupName;!this.isInviteModelType||e||this.isCallLogModelType||Tn.getUsersListFromSDK(1)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"handleUserListData",value:function(){var e=this,t=[],a=this.state,n=a.searchValue,o=a.participantToAdd,l=this.props.popUpData.modalProps.currentCallUsersLength,i=this.state.filteredContacts,c=Boolean(o.length+(l||0)>=Object($.f)()-1),s=this.isCallLogModelType,d=this.props.blockedContact.data,u=i.filter((function(e){return!0!==(null===e||void 0===e?void 0:e.isAdminBlocked)}));return this.state.userList.length>0&&this.state.userList.map((function(a){var l=a.displayName,i=a.name,m=a.username,p=a.userJid,h=a.status,v=a.initialName,f=l||i||m,g=m||p,b=o.includes(g)?1:-1,C=d.indexOf(g.includes("@")?g:g+"@"+E.S)>-1;t.push(r.a.createElement($r,{initialName:v,isBlocked:C,searchValue:n,contactName:f,isChanged:b,statusMsg:h,image:a.image,emailId:a.emailId,membersCount:u.length+o.length,errorMessageListner:e.errorMessageListner,prepareContactToAdd:e.prepareContactToAdd,prepareContactToRemove:e.prepareContactToRemove,userJid:p,userId:p,key:g,hideCheckbox:s,maxMemberReached:c,roster:a}))})),t}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchValue,o=t.participantToAdd,l=t.errorMesage,i=t.copyToast,c=this.state.filteredContacts,s=this.props.popUpData.modalProps,d=s.groupName,u=s.currentCallUsersLength,m=s.callType,p=s.closePopup,h=this.selectedBadge(),v=this.isCallLogModelType?"Participants":this.invideModeFun(),f=this.isCallLogModelType,g=this.isCallLogModelType,b=Boolean(o.length+(u||0)>=Object($.f)()),C=0===c.length&&!a,y=c.filter((function(e){return!0!==(null===e||void 0===e?void 0:e.isAdminBlocked)})),O=this.handleUserListData();return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"popup-wrapper"},r.a.createElement("div",{className:"popup-container add-participant webcall"},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-container-header"},r.a.createElement("i",{onClick:p,className:"closePopup"},r.a.createElement(Io.a,null)),r.a.createElement("h5",null,r.a.createElement("span",{className:"calltype"},v),d&&r.a.createElement("span",{className:"groupName"},"(",d,") "))),this.state.callLink&&r.a.createElement("div",{className:"meetingLinkCopy"},r.a.createElement("h3",{className:"meeting_heading"},"Call Link"),r.a.createElement("div",{className:"meeting_body"},r.a.createElement("i",{className:"linkIcon"},r.a.createElement(w.Eb,null)),r.a.createElement("div",{className:"link_desc"},r.a.createElement("strong",{className:"link_details"},this.state.callLink)),r.a.createElement("i",{className:"linkCopyIcon",onClick:function(){return e.handleCopyLink()}},r.a.createElement(w.yb,null)))),!f&&r.a.createElement(Qt,{search:this.searchFilterList}),r.a.createElement("div",{className:"popup-body",style:{overflow:"hidden"}},r.a.createElement("div",{className:"contactList",style:{height:"100%"}},O.length>0&&r.a.createElement("ul",{className:"chat-list-ul",style:{height:"100%"},id:"scrollableUl-addparticipantCall"},!g&&r.a.createElement("li",{className:"chat-list-li BadgeContainer"},r.a.createElement("div",{className:"selectedBadge"},r.a.createElement("ul",null,h))),0===y.length&&a&&r.a.createElement("span",{className:"searchErrorMsg"},r.a.createElement(To.a,null)," ",E.q),C&&r.a.createElement("span",{className:"searchErrorMsg"},r.a.createElement(To.a,null)," All members of your contacts are already in the call."),r.a.createElement("li",null,l&&r.a.createElement("div",{className:"errorMesage"},r.a.createElement(To.a,null),r.a.createElement("span",null,l))),r.a.createElement(wn.a,{dataLength:O.length,next:this.fetchMoreData,hasMore:!0,scrollableTarget:"scrollableUl-addparticipantCall"},this.handleUserListData())),this.state.loaderStatus&&r.a.createElement("div",{className:"response_loader style-2"},r.a.createElement("img",{src:w.Nd,alt:"loader"})))),r.a.createElement("div",{className:"webcallConnet ".concat(C||b?"disabled":""),onClick:this.state.participantToAdd.length>=1?this.addUsersInCall:function(){re.b.info("Please select any Participant")}},r.a.createElement("span",{className:"callBtn"},r.a.createElement("i",null,"audio"===m?r.a.createElement(w.nb,null):r.a.createElement(w.ob,null)),r.a.createElement("span",null,"Call now ",this.state.participantToAdd.length?"(".concat(this.state.participantToAdd.length,")"):null)))),i&&r.a.createElement("div",{className:"copy_toast"},r.a.createElement("span",null,"Call Link Copied")))))}}]),a}(n.Component),xo=Object(o.b)((function(e,t){return{rosterData:e.rosterData,popUpData:e.popUpData,blockedContact:e.blockedContact,callIntermediateScreen:e.callIntermediateScreen}}),null)(Lo),Uo=a(152),Ro=a(153),Fo=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isTyping:!1},e.searchFilterList=function(){var t=Ke.a.findDOMNode(Object(f.a)(e)).getElementsByClassName("search-contacts"),a=t.length?t[0].value:"",n=e.props.handleSearchFilterList,r=a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");e.setState({isTyping:!!a}),n(r)},e.clearSearch=function(){Ke.a.findDOMNode(Object(f.a)(e)).getElementsByClassName("search-contacts")[0].value="",e.searchFilterList()},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state.isTyping;return r.a.createElement("div",{className:"search"},r.a.createElement("input",{type:"text",className:"search-contacts",name:"search-contacts",autoComplete:"off",placeholder:"Search",onChange:this.searchFilterList}),r.a.createElement("i",{className:this.state.isTyping?"":"Search",title:"Search"}," ",!e&&r.a.createElement(Uo.a,null)),r.a.createElement("i",{className:this.state.isTyping?"CloseSearch":"",title:"Clear search",onClick:this.clearSearch},e&&r.a.createElement(Ro.a,null)))}}]),a}(r.a.Component),Bo=a(54),_o=a.n(Bo),Vo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.displayName,a=e.image,o=e.searchterm,l=e.callLog,i=e.emailId,c=e.initialName,s=void 0===c?"":c,d=e.isAdminBlocked,u=e.isDeletedUser,m=Object(n.useCallback)((function(){d||u||e.makeCall(l)}));if(t&&""!==o&&!t.toLowerCase().includes(o))return null;var p=Object(le.e)("token"),h=Object(x.m)(l.callTime/1e3),v=Object(x.n)(l.callTime),f="",g=!1;l.startTime&&l.endTime&&(f=Object(x.k)(l.startTime,l.endTime),g=!0);var b=l.callState,E="";return E=0===b?"video"===e.callLog.callType?r.a.createElement(w.Vb,null):r.a.createElement(w.ub,null):1===b?"video"===e.callLog.callType?r.a.createElement(w.Wb,null):r.a.createElement(w.vb,null):"video"===e.callLog.callType?r.a.createElement(w.Ub,null):r.a.createElement(w.tb,null),r.a.createElement("li",{className:"chat-list-li ".concat(d||u?"pointer-default-all":""),onClick:m},r.a.createElement(fe.a,{chatType:"onetoone"===l.callMode?"chat":"groupchat",userToken:p,imageToken:a,emailId:i,name:s}),r.a.createElement("div",{className:"recentchats"},r.a.createElement("div",{className:"callInfo"},r.a.createElement("div",{className:"recent-username-block"},r.a.createElement("div",{className:"recent-username"},r.a.createElement("div",{className:"username"},r.a.createElement("h3",{title:t},o?Object(x.z)(t,o):t)))),r.a.createElement("div",{className:"CallStatus"},r.a.createElement("i",null,E),r.a.createElement("div",{className:"callOn"},r.a.createElement("span",{className:"callOn"},h,",")," ",r.a.createElement("span",{className:"callTime"},v)))),r.a.createElement("div",{className:"callAction"},g&&r.a.createElement("span",{className:"callDuration"},f),r.a.createElement("i",{className:"callType"},"video"===e.callLog.callType?r.a.createElement(w.Xb,null):r.a.createElement(w.wb,null)))))},Go=(a(712),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleAudioCall,a=e.handleVideoCall;return r.a.createElement("label",{className:"FloatingCallAction",htmlFor:"FloatingAction"},r.a.createElement("input",{id:"FloatingAction",type:"checkbox"}),r.a.createElement("span",null,r.a.createElement(w.lb,null)),r.a.createElement("ul",null,r.a.createElement("li",{title:"Video call",onClick:a||null},r.a.createElement("i",null,r.a.createElement(w.ob,null))),r.a.createElement("li",{title:"Audio call",onClick:t||null},r.a.createElement("i",null,r.a.createElement(w.nb,null)))))}),Ho=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).getCallLogs=function(e){var t=(e=e||n.props).callLogData,a=t.callLogs;return t.isFetchingCallLog?[]:Object.values(a)},n.setCallLogs=function(e){var t=e.callLogData,a=n.props.callLogData;a.callLogUpdated===t.callLogUpdated&&a.isFetchingCallLog===t.isFetchingCallLog||n.setCallLogElement()},n.setCallLogElement=function(){var e=n.props.callLogData;if(e.isFetchingCallLog)n.setState({loaderStatus:e.isFetchingCallLog});else{var t=n.getCallLogs();(t=t.sort((function(e,t){return e.callTime-t.callTime}))).reverse(),n.setState({callLogs:t,loaderStatus:!1})}},n.handleCallLogs=function(e){var t=e||n.state.callLogs,a=[];if(t.length>0){var o=n.state.searchterm,l=Object(V.h)(),i=l&&l.fromUser,c=Object(le.e)("roomName");t.map((function(e,t){var l="",s="0",d="",u=[],m="",p="";if(c!==e.roomId){if(e){var h=e.userList&&e.userList.split(",")||[],v=h.length;(h=n.getUserListWithFromUser(e)).map((function(e){var t=Object(x.O)(e),a=Object(V.j)(t);if(t!==i&&i)if(a){var n=Object(B.g)(a)||Object(x.v)(t);l=l?"".concat(l,", ").concat(n):n,d=Object(V.m)(a,l),s=a.isAdminBlocked,u.push(!!a.isDeletedUser),m=v>1?null:a.image,p=a.emailId}else l=Object(x.v)(Object(x.O)(e)),m="";else u.push(!0)}))}var f=!u.includes(!1);if(e&&"onetomany"===e.callMode&&e.groupId){var g=e.groupId.split("@mix")[0],b=Object(ae.a)(g);b&&(l=b.groupName,m=b.groupImage,s=b.isAdminBlocked)}""!==l&&l.toLowerCase().includes(o)&&a.push(r.a.createElement(Vo,{key:"".concat(e.roomId,"-").concat(t),displayName:l,image:m,searchterm:o,callLog:e,makeCall:n.prepareForCall,emailId:p,initialName:d,isAdminBlocked:s,isDeletedUser:f}))}}))}return a},n.handleFilterCallLogsList=function(e){n.setState({searchterm:e.trim().toLowerCase()},(function(){n.setCallLogElement()}))},n.closePopup=function(){c.a.dispatch(Object(X.a)())},n.makeCall=function(){var e=Object(p.a)(m.a.mark((function e(t,a,r){var o,l,i,s,u,p,h,v,f,g,b,y=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=y.length>3&&void 0!==y[3]?y[3]:null,"CONNECTED"!==Object(le.e)("connection_status")){e.next=40;break}if(l=[],i="",s=null,u="",p=Object(V.h)(),h=Object(V.c)(p.fromUser),"onetoone"===t?l=r:"onetomany"===t&&(r.length>0?r.forEach((function(e){e!==h&&("object"===typeof e?l.push(e.userJid):l.push(e))})):l=[""]),v={callMode:t,callStatus:"CALLING",callType:a,from:h,userList:l.join(",")},"onetoone"===t?(v.to=l.join(","),v.userAvatar=u):"onetomany"===t&&(v.to=o,v.groupId=o),Object(le.c)("call_connection_status",JSON.stringify(v)),Object(le.c)("callType",a),Object(le.c)("callingComponent",!0),Object(le.c)("callFrom",Object(le.e)("loggedInUserJidWithResource")),c.a.dispatch(Object(C.a)(v)),f=c.a.getState().showConfrenceData,g=f.data,c.a.dispatch(Object(C.k)({localStream:null===g||void 0===g?void 0:g.localStream,localVideoMuted:null===g||void 0===g?void 0:g.localVideoMuted,localAudioMuted:null===g||void 0===g?void 0:g.localAudioMuted,showComponent:!0,callStatusText:"Calling"})),e.prev=17,"audio"!==a){e.next=25;break}return Object(ne.d)(!0),e.next=22,A.a.makeVoiceCall(l,o);case 22:s=e.sent,e.next=30;break;case 25:if("video"!==a){e.next=30;break}return Object(ne.d)(!1),e.next=29,A.a.makeVideoCall(l,o);case 29:s=e.sent;case 30:200!==s.statusCode&&s.message===E.s?(Object(le.a)("roomName"),Object(le.a)("callType"),Object(le.a)("call_connection_status"),Object(le.c)("hideCallScreen",!1),Object(le.c)("callingComponent",!1),Object(le.c)("hideCallScreen",!1),c.a.dispatch(Object(C.k)({showComponent:!1,showCalleComponent:!1,stopSound:!0,callStatusText:null}))):(i=s.roomId,Z.a.insert(Object(d.a)({callMode:v.callMode,callState:1,callTime:Z.a.initTime(),callType:v.callType,fromUser:v.from,roomId:i,userList:v.userList},"onetomany"===t&&{groupId:o})),Object(le.c)("roomName",i),b=Object(d.a)(Object(d.a)({},v),{},{roomId:i}),Object(le.c)("call_connection_status",JSON.stringify(b)),c.a.dispatch(Object(C.a)(b)),Object($.j)()),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(17),console.log("Error in making call",e.t0),e.t0.message===E.s&&(Object(le.a)("roomName"),Object(le.a)("callType"),Object(le.a)("call_connection_status"),Object(le.c)("hideCallScreen",!1),Object(le.c)("callingComponent",!1),Object(le.c)("hideCallScreen",!1),c.a.dispatch(Object(C.k)({showComponent:!1,showCalleComponent:!1,stopSound:!0,callStatusText:null})));case 37:n.preventMultipleClick=!1,e.next=42;break;case 40:re.b.error(_.E),n.preventMultipleClick=!1;case 42:case"end":return e.stop()}}),e,null,[[17,33]])})));return function(t,a,n){return e.apply(this,arguments)}}(),n.prepareForCall=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l,i,c,s,u,p,h,v,f,g,b,C;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(le.e)("roomName")){e.next=4;break}return re.b.info("Can't place a new call while you're already in a call."),e.abrupt("return");case 4:if(!n.preventMultipleClick){e.next=6;break}return e.abrupt("return");case 6:if(n.setState({currentGroupID:null===t||void 0===t?void 0:t.groupId.split("@")[0]}),n.preventMultipleClick=!0,"CONNECTED"!==Object(le.e)("connection_status")){e.next=31;break}if(a=t.callType,r=t.callMode,o=n.getUserListWithFromUser(t),l=o.map((function(e){return e.split("@")[0]})),i=[],c=[],s=null,u=Object(V.h)(),p=u.fromUser,h="","onetoone"===r||""===t.groupId||null===t.groupId?l.map((function(e){var t=e.split("@")[0],a=Object(V.j)(t);t!==p&&a&&!a.isDeletedUser&&(i.push(t+"@"+E.S),c.push(Object(d.a)({},a)))})):(h=t.groupId,v=n.props||{},f=v.groupsMemberParticipantsListData,g=(f=void 0===f?{}:f).groupParticipants,b=(void 0===g?{}:g)[h],c=n.getGroupMembers(b),c=n.sortUsersDisplayName(c),C=Object(ae.a)(h),s=C&&C.groupName||s,c.map((function(e){var t=e.userJid,a=e.username,n=e.GroupUser,r=t||a||n;r=r.split("@")[0];var o=Object(V.e)(r);r!==p&&l.indexOf(r)>-1&&!o.isDeletedUser&&i.push(r+"@"+E.S)}))),0!==i.length){e.next=27;break}return re.b.error(Q.y),n.preventMultipleClick=!1,e.abrupt("return",!1);case 27:"onetoone"===r?n.makeCall(r,a,i,h):n.props.callParticiapants({open:!0,modelType:"calllogparticipants",groupName:s,groupMembers:i,groupuniqueId:h,groupMemberDetails:c,makeGroupCall:"onetoone"===r?n.makeOne2OneCall:n.makeGroupCall,callType:a,closePopup:n.closePopup});case 28:n.preventMultipleClick=!1,e.next=33;break;case 31:re.b.error(_.E),n.preventMultipleClick=!1;case 33:return e.abrupt("return",!0);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.makeOne2OneCall=function(){var e=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.makeCall("onetoone",t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.showCallParticipants=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,o,l,i,c,s,d,u,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t+"@mix."+E.S,"CONNECTED"!==Object(le.e)("connection_status")){e.next=23;break}if(o=n.props||{},l=o.groupsMemberParticipantsListData,i=(l=void 0===l?{}:l).groupParticipants,c=(void 0===i?{}:i)[r],s=n.getGroupMembers(c),s=n.sortUsersDisplayName(s),d=[],u=Object(ae.a)(t),p={displayName:u.groupName,image:u.groupImage,jid:t},s.map((function(e){var t,a,r,o=e.userJid,l=e.username,i=e.GroupUser,c=o||l||i;c!==(null===(t=n.props)||void 0===t||null===(a=t.vCardData)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.fromuser)&&d.push(c)})),0!==d.length){e.next=19;break}return re.b.error("You are only one member in the group"),n.preventMultipleClick=!1,e.abrupt("return",!1);case 19:1===d.length?n.makeGroupCall(a,d):n.props.callParticiapants({open:!0,modelType:"callparticipants",groupName:p.displayName,groupMembers:d,groupuniqueId:Object(V.c)(t,Le.f),groupMemberDetails:s,makeGroupCall:n.makeGroupCall,callType:a});case 20:n.preventMultipleClick=!1,e.next=25;break;case 23:re.b.error(_.E),n.preventMultipleClick=!1;case 25:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.sortUsersDisplayName=function(e){return e.map((function(e){var t=e.displayName,a=e.name,n=e.username,r=e.jid,o=e.GroupUser,l=t||a||r||n||Object(x.v)(o);return e.displayName=l,e})).sort((function(e,t){return isNaN(parseInt(t.displayName))-isNaN(parseInt(e.displayName))||String(e.displayName).localeCompare(String(t.displayName))}))},n.makeGroupCall=function(){var e=Object(p.a)(m.a.mark((function e(t,a,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.makeCall("onetomany",t,a,r);case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.getGroupMembers=function(e){var t=n.props.rosterData,a=(t=void 0===t?{}:t).data,r=void 0===a?[]:a;return e&&Object(B.P)(e,r)||[]},n.getUserListWithFromUser=function(e){var t=e.userList&&e.userList.split(",")||[];t.unshift(e.fromUser);var a=[];return t.map((function(e){if(e){var t=Object(x.I)(e);a.find((function(e){return Object(x.I)(e)===t}))||a.push(e)}})),a},n.handleAudioCall=function(){0!==n.props.contactPermission?n.setState({newCall:!0,newCallType:"audio"}):n.props.handleContactPermissionPopup(!0,Le.S)},n.handleVideoCall=function(){0!==n.props.contactPermission?n.setState({newCall:!0,newCallType:"video"}):n.props.handleContactPermissionPopup(!0,Le.S)},n.handleBackCallLog=function(){n.setState({newCall:!1})},n.makeNewcall=function(e,t){var a="onetoone",r=[];t.length>1?(a="onetomany",r=t):t.map((function(e){var t=e.userJid,a=e.username,n=e.GroupUser,o=t||a||n;o=o.split("@")[0],Object(V.e)(o).isDeletedUser||r.push(o+"@"+E.S)})),r.length>0&&n.makeCall(a,e,r,"")},n.fetchMoreData=function(){var e=n.state.callLogs;Z.a.getCallLogsFromServer(Math.ceil(e.length/20+1))},n.state={loaderStatus:!!e.callLogData.isFetchingCallLog,searchterm:"",callLogs:[],newCall:!1,newCallType:"video",currentGroupID:""},n.handleOnBack=n.handleOnBack.bind(Object(f.a)(n)),n.preventMultipleClick=!1,n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.setCallLogElement()}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.setCallLogs(e),e.groupsData.id!==this.props.groupsData.id){var a=this.props.groupsData.data.find((function(e){return(null===e||void 0===e?void 0:e.groupId)===t.state.currentGroupID}));(null===a||void 0===a?void 0:a.isAdminBlocked)&&this.closePopup()}}},{key:"handleOnBack",value:function(){this.props.handleBackStatus(!0)}},{key:"render",value:function(){var e=this.state,t=e.searchterm,a=e.newCall,o=this.handleCallLogs();return r.a.createElement(n.Fragment,null,a?r.a.createElement(co,{newCallType:this.state.newCallType,newCall:!0,handleBackToCallLog:this.handleBackCallLog,handleMakeNewCall:this.makeNewcall}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"contactlist call-logs"},r.a.createElement("div",{className:"recent-chatlist-header"},r.a.createElement("div",{className:"profile-img-name"},r.a.createElement("i",{className:"newchat-icon",onClick:this.handleOnBack,title:"Back"},r.a.createElement(w.b,null)),r.a.createElement("span",null,"Call Logs"))),(o.length>0&&!t||t)&&r.a.createElement(Fo,{searchIn:this.state.searchIn,handleSearchFilterList:this.handleFilterCallLogsList}),this.state.loaderStatus&&r.a.createElement("div",{className:"loader-container"},r.a.createElement("img",{src:_o.a,alt:"loader",style:{width:80,height:80}})),o.length>0&&r.a.createElement("ul",{className:"chat-list-ul",id:"scrollableUl-callLog"},r.a.createElement(wn.a,{dataLength:o.length,next:this.fetchMoreData,hasMore:!0,scrollableTarget:"scrollableUl-callLog"},this.handleCallLogs())),0===o.length&&""===t?r.a.createElement("div",{className:"norecent-chat"},r.a.createElement("i",{className:"norecent-chat-img"},r.a.createElement(w.eb,null)),r.a.createElement("h4",null,"Oh snap It seems like they\u2019re no call history!"),r.a.createElement("h3",null,"Click on ",r.a.createElement("i",{className:"callAction"},r.a.createElement(w.mb,null))," or Search to start a Call!")):r.a.createElement(r.a.Fragment,null,0===o.length&&r.a.createElement("div",{className:"norecent-chat"},r.a.createElement("i",{className:"norecent-chat-img"},r.a.createElement(w.eb,null)),r.a.createElement("h4",null,"No call log history found"),r.a.createElement("h3",null,"Any new calls will appear here")))),r.a.createElement(Go,{handleAudioCall:this.handleAudioCall,handleVideoCall:this.handleVideoCall})))}}]),a}(r.a.Component),Jo={callParticiapants:X.b},qo=Object(o.b)((function(e,t){var a;return{callLogData:e.callLogData,vCardData:e.vCardData.data,VCardContactData:e.VCardContactData,messageData:e.messageData,rosterData:e.rosterData,showConfrenceData:e.showConfrenceData,groupsMemberParticipantsListData:e.groupsMemberParticipantsListData,contactPermission:null===e||void 0===e||null===(a=e.contactPermission)||void 0===a?void 0:a.data,groupsData:e.groupsData}}),Jo)(Ho),Wo=(a(713),a(80)),Ko=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(!1),a=Object(Re.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(!1),u=Object(Re.a)(s,2),h=u[0],v=u[1],f=Object(n.useState)(-1),g=Object(Re.a)(f,2),b=g[0],E=g[1],C=e.handleBackToSetting,y=Object(o.d)((function(e){return e.starredMessages})),O=y.data,j=void 0===O?[]:O,N=Object(o.d)((function(e){return e.chatConversationHistory}))||{},S=N.data,M=void 0===S?{}:S,I=Object(n.useState)([]),T=Object(Re.a)(I,2),P=T[0],L=T[1],U=Object(n.useState)({}),R=Object(Re.a)(U,2),F=R[0],_=R[1];Object(n.useEffect)((function(){var e=j.sort((function(e,t){return new Date(t.favDate).getTime()-new Date(e.favDate).getTime()})).map((function(e){return""!==Object(Gt.get)(e,"msgBody.replyTo","")?Object(d.a)(Object(d.a)({},e),{},{isReply:!0}):Object(d.a)(Object(d.a)({},e),{},{isReply:!1})}));return L(e),function(){_({})}}),[j]),Object(n.useEffect)((function(){var e,t;0!==Object.keys(M).length&&(0!==Object.keys(F).length&&0!==(null===(e=Object.keys(null===(t=M[F.fromUserId])||void 0===t?void 0:t.messages))||void 0===e?void 0:e.length)&&setTimeout((function(){c.a.dispatch(Object(Wo.f)({fromPage:"starPage",callOriginStrMsg:!0,callOriginStrMsgId:F})),_({})}),500))}),[M]);var G=function(e){var t=null===e||void 0===e?void 0:e.publisherId;if(!Object(V.o)(t)){var a=(Object(V.a)(t)||{}).nameToDisplay;return void 0===a?"-":a}return"You"},H=function(e){if(Object(B.V)(null===e||void 0===e?void 0:e.chatType)){var t=(Object(ae.a)(null===e||void 0===e?void 0:e.fromUserId)||{}).groupName;return(void 0===t?"":t)||"-"}if(Object(B.X)(null===e||void 0===e?void 0:e.chatType)){var a=(Object(V.a)(null===e||void 0===e?void 0:e.fromUserId)||{}).nameToDisplay,n=void 0===a?"-":a;return(null===e||void 0===e?void 0:e.fromUserId)===(null===e||void 0===e?void 0:e.publisherId)?"You":n}},J=function(){i(!1),Object(x.a)()||v(!0)},q=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!1),!Object(x.a)()){e.next=3;break}return e.abrupt("return");case 3:A.a.removeAllFavouriteMessages(),c.a.dispatch(Object(Wo.a)()),c.a.dispatch(Object(Nn.e)(P));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(e){return Object(V.o)(e.publisherId)?"starred-own":"Starred-others"},K=function(e){return Object(V.o)(e.publisherId)?"receiver":"sender"},z=function(e){var t,a;return"video"!==e.msgType&&"image"!==e.msgType||""!==(null===e||void 0===e||null===(t=e.msgBody)||void 0===t||null===(a=t.media)||void 0===a?void 0:a.caption)?"":" singleFile"},Y=function(e){return"location"===e.msgType?" singleFile location-message image-block":""},Z=function(e){var t,a;return"image"!==e.msgType&&"video"!==e.msgType||""===(null===e||void 0===e||null===(t=e.msgBody)||void 0===t||null===(a=t.media)||void 0===a?void 0:a.caption)?"":" has-caption "},X=function(e){var t=Object(V.j)(e.publisherId),a=Object(V.m)(t,t.initialName);return r.a.createElement("div",{className:"senderDetails"},r.a.createElement("span",{className:"starred-time"},De()(e.createdAt).format("DD MMM YYYY")),r.a.createElement("div",{className:"sender-info"},r.a.createElement("span",{className:"sender-image"},r.a.createElement(fe.a,{name:a,imageToken:t.image,chatType:"chat"})),r.a.createElement("span",{className:"sender-name"},r.a.createElement("span",{className:"senderName"},G(e))," ",r.a.createElement(w.Rb,null)," ",r.a.createElement("span",{className:"receiverName"},H(e)))))},Q=function(){var e=Object(p.a)(m.a.mark((function e(t,a,n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(B.i)(a,"file",n,r,t);case 1:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),$=function(e){var t=Object(V.o)(e.publisherId);switch(e.msgType){case"text":case"auto_text":return r.a.createElement(Rn,{messageObject:e,isSender:t});case"image":return r.a.createElement(_n,{messageObject:e,isSender:t,uploadStatus:2,imageHeightAdjust:!0});case"video":return r.a.createElement(Vn,{messageObject:e,isSender:t,uploadStatus:2,imageHeightAdjust:!0});case"audio":return r.a.createElement(Hn,{pageType:"starPage",messageObject:e,isSender:t,uploadStatus:2});case"file":return r.a.createElement(Jn,{messageObject:e,isSender:t,uploadStatus:2,downloadAction:Q});case"contact":return r.a.createElement(Wn,{messageObject:e});case"location":return r.a.createElement(qn,{messageObject:e});default:return""}},ee=function(e,t){e.stopPropagation(),E(t)},te=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(-1),!Object(x.a)()){e.next=3;break}return e.abrupt("return");case 3:A.a.updateFavouriteStatus(t.fromUserJid,[t.msgId],!1),re.b.success("1 message unstarred");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){re.b.info("There is no starred message."),i(!1)},oe=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:"",setTimeout((function(){var e=document&&document.getElementById(t);if(e){e.scrollIntoView(),e.classList.add("animatefinded");var a=setTimeout((function(){e.classList.remove("animatefinded")}),3e3);return function(){return clearTimeout(a)}}}),300);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,o,l,i,s,d=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d.length>0&&void 0!==d[0]?d[0]:{},a=c.a.getState(),n=(a||{}).recentChatData,r=(n=void 0===n?{}:n).rosterData,o=(r=void 0===r?{}:r).recentChatItems,(l=(void 0===o?[]:o).filter((function(e){return e.recent.fromUserId===t.fromUserId}))).length>=1&&(l[0].chatId=t.fromUserId,l[0].chatType=t.chatType,l[0].chatJid=t.fromUserJid,0===(i=Object(B.x)(t.fromUserId)).length?(c.a.dispatch(Object(k.a)(l[0])),_(t)):(s=i.find((function(e){return e.msgId===t.msgId})),c.a.dispatch(Object(k.a)(l[0])),s?oe(s.msgId):c.a.dispatch(Object(Wo.f)({fromPage:"starPage",callOriginStrMsg:!0,callOriginStrMsgId:t}))));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(e,t,a){if(Object(x.R)())A.a.getReplyMessage(t,a);else{var n=Object(B.o)(t,a),r=Object(B.I)(n);r&&c.a.dispatch(Object(Vt.b)(r))}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fromUserJid,a=void 0===t?"":t,n=e.msgBody,r=(n=void 0===n?{}:n).replyTo,o=void 0===r?"":r,l=e.msgId,i=void 0===l?"":l,c=e.chatType,s=void 0===c?"":c,u=Object(B.B)(a,o);Object(Gt.isEmpty)(u)?ie(i,o,s):Object(B.cb)(u,o);var m=Object(D.a)(P),p=m.findIndex((function(t){return Object(Gt.get)(t,"msgBody.replyTo")===Object(Gt.get)(e,"msgBody.replyTo")}));m[p]=Object(d.a)(Object(d.a)({},m[p]),{},{isReply:!1})};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:"star-msgContent",className:"staredMessages"},r.a.createElement("div",null,r.a.createElement("div",{className:"contactlist"},r.a.createElement("div",{className:"recent-chatlist-header"},r.a.createElement("div",{className:"profile-img-name"},r.a.createElement("i",{onClick:C,className:"newchat-icon",title:"Back"},r.a.createElement(w.b,null)),r.a.createElement("span",null,"Starred Messages")),r.a.createElement("div",{className:"starMenu"},r.a.createElement(w.Sb,{onClick:function(){return i(!l)}}),l&&r.a.createElement(qe.a,{onOutsideClick:function(){return i(!1)}},r.a.createElement("ul",{className:"menu-dropdown",style:{padding:0}},r.a.createElement("li",{title:"Starred Messages",onClick:P.length>0?J:ne},r.a.createElement("i",null,r.a.createElement(w.qd,null)),r.a.createElement("span",null,"Unstar all")))))),P.length>0&&r.a.createElement("ul",{className:"staredContainer"},P.map((function(e,t){return Object.keys(e).length>0&&r.a.createElement("li",{onClick:function(){return le(e)},className:"".concat(W(e)),key:e.msgId},X(e),r.a.createElement("div",{className:"".concat(K(e),"-row ").concat(z(e),"  ").concat(Y(e)," ").concat(Z(e))},!0===Object(Gt.get)(e,"isReply",!1)&&ce(e),r.a.createElement("div",{className:"".concat(K(e)," ").concat(""!==Object(Gt.get)(e,"msgBody.replyTo","")?"reply-block":""," ").concat(e.msgType,"-message")},""!==Object(Gt.get)(e,"msgBody.replyTo","")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(zt,{viewOriginalMessage:function(){},msgId:Object(Gt.get)(e,"msgBody.replyTo",""),chatType:Object(Gt.get)(e,"msgBody.chatType","")})),$(e),Yt(Object(B.D)(e.msgStatus,e.publisherId),e.createdAt,1,!Object(V.o)(e.publisherId),e.msgType),r.a.createElement("div",{className:"message-dropdown-menu"},r.a.createElement("span",{className:"message-dropdown"},r.a.createElement("span",{className:"actionDrop",onClick:function(e){return ee(e,t)}}),r.a.createElement("i",null,r.a.createElement(w.kc,null))),b===t&&r.a.createElement(qe.a,{onOutsideClick:function(){return E(-1)}},r.a.createElement("ul",{className:"menu-dropdown open",style:{padding:0}},r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"Starred",title:"UnStarred",onClick:function(){return te(e)}},r.a.createElement("i",null,r.a.createElement(w.qd,null)),r.a.createElement("span",null,"Unstar")))))))))}))),0===P.length&&r.a.createElement("div",{className:"box-center h-full w-full flex-auto noStarredMessage"},r.a.createElement("i",null,r.a.createElement(w.Jb,null),r.a.createElement(w.Ib,{className:"star"})),r.a.createElement("p",null,"No Starred Messages"))))),h&&r.a.createElement(ze,{containerId:"container"},r.a.createElement("div",{className:"popup-wrapper deleteMessage"},r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-label"},r.a.createElement("label",null,"Are you sure you want to Unstar all messages?")),r.a.createElement("div",{className:"popup-noteinfo"},r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",onClick:function(){return v(!1)},className:"btn-cancel"},"Cancel"),r.a.createElement("button",{type:"button",onClick:q,className:"btn-active danger"},"Unstar all"))))))))},zo=(a(485),a(714),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handlePopupClose,a=void 0===t?function(){}:t,o=Object(n.useState)(null),l=Object(Re.a)(o,2),i=l[0],c=l[1],u=Object(n.useState)(null),h=Object(Re.a)(u,2),v=h[0],f=h[1],g=Object(n.useState)(!1),b=Object(Re.a)(g,2),E=b[0],C=b[1],y=100,O=512,j=Object(n.useState)({title:"",description:""}),N=Object(Re.a)(j,2),k=N[0],S=N[1],D=function(e){e.target.value.length<=y&&(S(Object(d.a)(Object(d.a)({},k),{},Object(s.a)({},e.target.name,e.target.value))),e.target.value&&""!==e.target.value.trim()?c(null):c("Title is required."))},M=function(e){e.target.innerText.length<=O&&(S(Object(d.a)(Object(d.a)({},k),{},{description:e.target.innerText})),e.target.innerText&&""!==e.target.innerText.trim()?f(null):f("Description is required."))},I=function(e){if(e.target.innerText.length>=O)return e.preventDefault(),!1},T=function(e){var t,a,n=k.description,r=n+(null===e||void 0===e||null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain"));(r=Object(x.db)(r)).length>=O&&(e.preventDefault(),r=r.substring(0,O),n.length<O&&document&&document.execCommand("insertText",!1,null===e||void 0===e||null===(a=e.clipboardData)||void 0===a?void 0:a.getData("text/plain").substring(0,O-n.length)));S(Object(d.a)(Object(d.a)({},k),{},{description:r})),r&&""!==r.trim()?f(null):f("Description is required.")},P=function(e){var t,a=(k.title+(null===e||void 0===e||null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain"))).substring(0,y);S(Object(d.a)(Object(d.a)({},k),{},Object(s.a)({},e.target.name,a))),a&&""!==a.trim()?c(null):c("Title is required.")},L=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=k.title,n=k.description,t||c("Title is required."),n||f("Description is required."),!t||""===t.trim()||!n||""===n.trim()){e.next=11;break}return C(!0),e.next=7,A.a.sendFeedback(t,n);case 7:200!==e.sent.statusCode?re.b.error("The server is not responding. Please try again later."):re.b.success("Thank you for contacting us!"),C(!1),a();case 11:return e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,{containerId:"container"},E&&r.a.createElement("div",{className:"page-loader"},r.a.createElement("img",{src:w.ac,alt:"contact-us"})),r.a.createElement("div",{className:"contact_us_wrapper_fixed"},r.a.createElement(qe.a,{onOutsideClick:a},r.a.createElement("div",{className:"contact_us_wrapper"},r.a.createElement("div",{className:"contact_us_header"},r.a.createElement("h4",null,"Contact Us")),r.a.createElement("div",{className:"contact_us_body"},r.a.createElement("form",{className:"contact_us_form"},r.a.createElement("div",{className:"input_wrapper"},r.a.createElement("label",{htmlFor:""},"Title"),r.a.createElement("input",{type:"text",name:"title",id:"title",onChange:D,value:k.title,onPaste:P}),i&&r.a.createElement("div",{className:"errorMesage"},r.a.createElement(w.cc,null),r.a.createElement("span",null,i))),r.a.createElement("div",{className:"input_wrapper mb-0"},r.a.createElement("label",{htmlFor:""},"Description"),r.a.createElement("div",{contentEditable:!0,className:"textarea",name:"description",id:"description",onInput:M,onKeyPress:I,onPaste:T}),v&&r.a.createElement("div",{className:"errorMesage"},r.a.createElement(w.cc,null),r.a.createElement("span",null,v))),r.a.createElement("div",{className:"contact_us_footer"},r.a.createElement("div",{className:"action_list"},r.a.createElement("button",{className:"default",onClick:a,type:"button"},"Cancel"),r.a.createElement("button",{className:"primary",onClick:L,type:"button"},"Send"))))))))))}),Yo={chat:Fa,Archived:za,notification:Da,blocked:na,about:ca,policy:pa,logout:ba,star:Ha,delete:fn,contactUs:un},Zo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=e.label,o=e.getaAtion,l=e.chat,i=void 0!==l&&l,c=e.children,u=e.dafaultSetting,m=Object(n.useState)(u||!1),p=Object(Re.a)(m,2),h=p[0],v=p[1],f=function(e){Object(x.a)()||(v(!h),o(!h))},g=function(e){var t=e.target,a=t.checked,n=t.name;if("denied"===Notification.permission||"default"===Notification.permission)v(!1),re.b.error(E.j,{toastId:"Notification"});else{v(a);var r=Object(le.e)("websettings"),o=r?JSON.parse(r):{},l=Object(d.a)(Object(d.a)({},o),{},Object(s.a)({},n,a));Object(le.c)("websettings",JSON.stringify(l))}};return Object(n.useEffect)((function(){if(!i)if("denied"===Notification.permission||"default"===Notification.permission)v(!1);else{var e=Object(le.e)("websettings");if(void 0===Object(x.C)().Notifications)Object(x.bb)("Notifications",!0),v(!0);else{var a=JSON.parse(e)[t];v(void 0!==a&&a)}}}),[]),r.a.createElement("li",{className:"setting-list"},r.a.createElement("label",{className:"setting-option"},r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{name:t,type:"checkbox",checked:i?u:h,id:t,onChange:i?f:g,className:h?"":"disabled"}),r.a.createElement("label",{htmlFor:t})),r.a.createElement("div",{className:"label"},r.a.createElement("span",{className:"label-text"},a))),c)},Xo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleOptions,a=e.label,n=e.image,o=e.enableRightArrow,l=void 0===o||o,i=e.children,c=Yo[n];return r.a.createElement("li",{className:"setting-list",onClick:function(){return t(n)}},r.a.createElement("div",{className:"setting-option"},c&&r.a.createElement("i",{className:"iconLeft"},r.a.createElement(c,null)),r.a.createElement("span",{className:"Option-text"},a),l&&r.a.createElement("i",{className:"iconNext"},r.a.createElement(ja,null))),i)},Qo=function(e){var t=e.handleBackFromSetting,a=e.label;return r.a.createElement("div",{className:"setting-header"},r.a.createElement("div",{className:"setting-header-text"},r.a.createElement("i",{onClick:t,className:"newchat-icon",title:"Back"},r.a.createElement(w.b,null)),r.a.createElement("span",null,a)))},$o=function(e){var t=e.backToAbout;return r.a.createElement("div",{className:"setting-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"settinglist"},r.a.createElement(Qo,{handleBackFromSetting:t,label:"About Us"}),r.a.createElement("div",{className:"setting-list-ul Details"},r.a.createElement("div",{className:"content-block"},r.a.createElement("p",{className:"content"},"MirrorFly is a ready-to-go messaging solution for building enterprise-grade real-time chat IM applications that meet various degrees of requirements like team discussion, data sharing, task delegation and information handling on the go.")),r.a.createElement("div",{className:"content-block"},r.a.createElement("h3",{className:"subheading"},"Contact Us"),r.a.createElement("p",{className:"content"},"To have a detailed interaction with our experts")),r.a.createElement("div",{className:"content-block"},r.a.createElement("h3",{className:"subheading"},"FAQ"),r.a.createElement("p",{className:"content"},"Kindly checkout FAQ section for doubts regarding MirrorFly. We might have already answered your question."),r.a.createElement("div",null,r.a.createElement("a",{className:" content content-link",target:"_blank",href:"https://www.mirrorfly.com/",rel:"noopener noreferrer"},"MirrorFly")))))))},el=function(e){var t=e.backToAbout;return r.a.createElement("div",{className:"setting-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"settinglist"},r.a.createElement(Qo,{handleBackFromSetting:t,label:"Terms and Privacy Policy"}),r.a.createElement("div",{className:"setting-list-ul Details"},r.a.createElement("div",{className:"content-block"})))))},tl=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).backToAbout=function(){n.setState({parentAboutStatus:!0,activeTab:null})},n.handleAbout=function(e){n.setState({parentAboutStatus:!1,activeTab:e})},n.handleContactUs=function(e){n.setState({parentAboutStatus:!0,activeTab:e})},n.handlePopupClose=function(){n.setState({parentAboutStatus:!0,activeTab:null})},n.state={parentAboutStatus:!0,activeTab:null},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state,t=e.parentAboutStatus,a=e.activeTab,o=this.props.handleBackToSetting;return r.a.createElement(n.Fragment,null,t&&r.a.createElement("div",{className:"setting-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"settinglist"},r.a.createElement(Qo,{handleBackFromSetting:o,label:"About and Help"}),r.a.createElement("ul",{className:"setting-list-ul About"},r.a.createElement(Xo,{image:"about",label:"About Us",handleOptions:this.handleAbout}),r.a.createElement(Xo,{image:"contactUs",label:"Contact Us",enableRightArrow:!1,handleOptions:this.handleContactUs}),r.a.createElement(Xo,{image:"policy",enableRightArrow:!1,handleOptions:function(){},label:"Terms and Privacy Policy"},r.a.createElement("div",{className:"setting_privacy_content"},r.a.createElement("div",{className:"setting_privacy_link"},r.a.createElement("a",{href:E.R,target:"_blank",rel:"noopener noreferrer"},"Terms and Conditions,"),r.a.createElement("a",{href:E.K,target:"_blank",rel:"noopener noreferrer"},"Privacy Policy.")))))))),!t&&r.a.createElement(n.Fragment,null,"about"===a&&r.a.createElement($o,{backToAbout:this.backToAbout}),"policy"===a&&r.a.createElement(el,{backToAbout:this.backToAbout})),"contactUs"===a&&r.a.createElement(zo,{handlePopupClose:this.handlePopupClose}))}}]),a}(n.Component),al=(a(715),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).prepareToDisplay=function(){var e=n.props,t=e.rosterData,a=(t=void 0===t?{}:t).data,r=void 0===a?[]:a,o=e.blockedContact,l=(o=void 0===o?{}:o).data,i=void 0===l?[]:l,c=r.filter((function(e){var t=e.username?e.username:e.userJid;return!(!(t=t||e.userId)||t.indexOf("@mix")>-1)&&(t=Object(V.c)(t),i.indexOf(t)>-1)}));n.setState({contactDetails:c})},n.popUpToggleAction=function(e,t){n.setState({showModal:!n.state.showModal,blockId:e||null,nameToDisplay:t||null})},n.dispatchAction=function(){var e=n.state,t=e.blockId,a=e.nameToDisplay;n.setState({showModal:!n.state.showModal},Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.unblockUser(t);case 2:(n=e.sent)&&200===n.statusCode&&(c.a.dispatch(Object(tt.c)(t,Le.X)),re.b.success("".concat(a||"User"," has been Unblocked")),Object(B.Q)(t,Le.g));case 4:case"end":return e.stop()}}),e)}))))},n.renderProfile=function(){var e=n.state.contactDetails;if(0===e.length)return null;var t=Object(le.e)("token");return e.map((function(e,a){var o=e.chatType,l=e.image,i=e.emailId,c=e.statusMsg,s=e.status,d=e.userId,u=e.userJid,m=Object(V.d)(e);return r.a.createElement("li",{key:a,className:"chat-list-li"},r.a.createElement(fe.a,{chatType:o||Le.g,userToken:t,imageToken:l,emailId:i,userId:d,name:m}),r.a.createElement("div",{className:"recentchats"},r.a.createElement("div",{className:"recent-username-block"},r.a.createElement("div",{className:"recent-username"},r.a.createElement("div",{className:"username"},r.a.createElement("h3",{title:m},m)))),r.a.createElement("div",{className:"recent-message-block"},r.a.createElement(nt,{status:c||s,userId:d}))),r.a.createElement("span",{className:"Unblock",onClick:function(){n.popUpToggleAction(u,m)}},"Unblock"))}))},n.state={contactDetails:[],showModal:!1,nameToDisplay:"",userId:null},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.prepareToDisplay()}},{key:"componentDidUpdate",value:function(e){var t,a=this.props.blockedContact,n=(a=void 0===a?{}:a).id,r=null===e||void 0===e||null===(t=e.blockedContact)||void 0===t?void 0:t.id;(r&&r!==n||e.rosterData&&e.rosterData.id!==this.props.rosterData.id)&&this.prepareToDisplay()}},{key:"render",value:function(){var e=this.props.handleBackToSetting,t=this.state,a=t.contactDetails,n=t.showModal,o=t.nameToDisplay;return r.a.createElement("div",{className:"setting-container"},n&&r.a.createElement(ze,{containerId:"container"},r.a.createElement(Ye,{popUpToggleAction:this.popUpToggleAction,dispatchAction:this.dispatchAction,headerLabel:r.a.createElement(r.a.Fragment,null,"Unblock"," ",o," ?"),closeLabel:"Cancel",actionLabel:"Unblock",infoLabel:"On unblocking, this contact will be able to call you or send messages to you."})),r.a.createElement("div",null,r.a.createElement("div",{className:"settinglist "},r.a.createElement(Qo,{handleBackFromSetting:e,label:"Blocked Contacts"}),a.length>0&&r.a.createElement("ul",{className:"chat-list-ul BlockedList"},this.renderProfile()),0===a.length&&r.a.createElement("div",{className:"setting-list-ul BlockedContact"},r.a.createElement("div",{className:"EmptyBlockedContact"},r.a.createElement("i",null,r.a.createElement(Aa,null)),r.a.createElement("p",null,"No Blocked Contacts Found"))))))}}]),a}(n.Component)),nl=Object(o.b)((function(e,t){return{blockedContact:e.blockedContact,rosterData:e.rosterData,groupsData:e.groupsData}}),null)(al),rl=(a(466),a(716),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.handleBackToSetting;return r.a.createElement("div",{className:"setting-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"settinglist"},r.a.createElement(Qo,{label:"Notifications",handleBackFromSetting:e}),r.a.createElement("ul",{className:"setting-list-ul notifications"},r.a.createElement(Zo,{id:"Notifications",label:"Notifications"})))))}}]),a}(n.Component)),ol=a(148),ll=(a(717),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?"":t,o=e.dafaultValue,l=void 0!==o&&o,i=e.label,c=void 0===i?"":i,s=e.children,d=Object(n.useState)(!0),u=Object(Re.a)(d,2),m=u[0],p=u[1],h=function(e){Object(x.a)()||(p(e),e?document.getElementById("root").classList.add("boxLayout"):document.getElementById("root").classList.remove("boxLayout"),Object(x.bb)("boxLayout",e))};return Object(n.useEffect)((function(){p(l)}),[l]),r.a.createElement("li",{className:"setting-list"},r.a.createElement("label",{className:"setting-option"},r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{name:a,type:"checkbox",checked:m,id:a,onChange:function(e){return h(e.target.checked)}}),r.a.createElement("label",{htmlFor:a})),r.a.createElement("div",{className:"label"},r.a.createElement("span",{className:"label-text"},c))),s)}),il=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(o.d)((function(e){return e||{}})),a=t.TranslateLanguage.translateLanguages.translateLanguages,l=void 0===a?[]:a,i=t.webLocalStorageSetting,s=(i=void 0===i?{}:i).isEnableArchived,d=e.handleBackToSetting,u=e.setSelectedLaun,m=void 0===u?"English":u,p=Object(n.useState)(!1),h=Object(Re.a)(p,2),v=h[0],f=h[1],g=Object(n.useState)(m),b=Object(Re.a)(g,2),E=b[0],C=b[1],y=Object(n.useState)(!1),O=Object(Re.a)(y,2),j=O[0],N=O[1],k=Object(n.useState)(!1),S=Object(Re.a)(k,2),D=S[0],M=S[1],I=Object(n.useState)(!1),T=Object(Re.a)(I,2),P=T[0],A=T[1];Object(n.useEffect)((function(){var e=Object(x.C)();e&&Object.keys(e).length&&(f(e.translate||!1),M(e.translate||!1),A(e.boxLayout||!1),c.a.dispatch(Object(fo.d)({translate:e.translate||!1,isEnableArchived:e.archive})))}),[]),Object(n.useEffect)((function(){C(m)}),[m]),Object(n.useEffect)((function(){Object(x.bb)("translate",D),f(D)}),[D]);var L=function(e){Object(x.a)()||(M(e),c.a.dispatch(Object(fo.d)({translate:e,isEnableArchived:s})),Object(x.bb)("translate",e),f(e))},U=function(e){Object(x.bb)("translateLang",e.language),C(e.name),N(!1)},R=function(){N(!1)},F=function(){Object(x.a)()||N(!0)},B=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=null===t||void 0===t||null===(e=t.target)||void 0===e?void 0:e.value;C(a);var n,r=a.toLowerCase(),o=document.querySelectorAll("li.language"),l=Object(ol.a)(o);try{for(l.s();!(n=l.n()).done;){var i=n.value,c=i.innerHTML.toLowerCase();-1===c.indexOf(r)?i.style.display="none":i.style.display="block"}}catch(s){l.e(s)}finally{l.f()}};return r.a.createElement("div",{className:"setting-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"settinglist"},r.a.createElement(Qo,{handleBackFromSetting:d,label:"Chat"}),r.a.createElement("ul",{className:"setting-list-ul chat-setting"},Xt.a.boxLayout&&r.a.createElement(ll,{dafaultValue:P,id:"boxedLayout",label:"Boxed View"}),r.a.createElement(Zo,{getaAtion:L,chat:!0,dafaultSetting:D,id:"chat-setting",label:"Translate Message"},r.a.createElement("span",{className:"label-info"},"Enable Translate Message to choose Translation Language"),v&&r.a.createElement("div",{className:"language-select"},r.a.createElement("h4",null,"Choose Translation Language"),r.a.createElement("div",{onClick:function(e){return F(e)},className:j?"defaultSelected active":"defaultSelected"},r.a.createElement("input",{placeholder:"Select any language",readOnly:!Object(x.R)(),onChange:function(e){return Object(x.a)()?null:B(e)},value:E}),r.a.createElement(w.ab,null)),r.a.createElement(qe.a,{onOutsideClick:function(){return R()}},r.a.createElement("div",{className:"drop-wrapper"},j&&r.a.createElement("div",null,r.a.createElement("ul",{className:"drop-option"},l.map((function(e,t){return r.a.createElement("li",{className:"language",key:t},r.a.createElement("button",{onClick:function(){return U(e)}},e.name))})))))),r.a.createElement("p",{className:"info"},r.a.createElement("i",null,r.a.createElement(ca,null)),r.a.createElement("span",null,"Mouse over received message chat bubble which displays Translate Message icon,"," ",r.a.createElement("strong",null,'"Click it to translate the message"')))))))))},cl=(a(718),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(o.d)((function(e){return e.webLocalStorageSetting})),a=t.isEnableArchived,l=void 0===a||a,i=Object(n.useState)(l),s=Object(Re.a)(i,2),d=s[0],u=s[1],m=e.handleBackToSetting,p=function(e){u(e),A.a.updateUserSettings(e),Object(x.bb)("archive",e),c.a.dispatch(Object(fo.d)({isEnableArchived:e}))};return Object(n.useEffect)((function(){u(l)}),[l]),r.a.createElement("div",{className:"setting-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"settinglist"},r.a.createElement(Qo,{handleBackFromSetting:m,label:"Archived Settings"}),r.a.createElement("ul",{className:"setting-list-ul chat-setting"},r.a.createElement(Zo,{getaAtion:p,chat:!0,dafaultSetting:d,id:"chat-setting",label:"Keep chats archived"},r.a.createElement("span",{className:"label-info"},"Archived chats will remain archived when you receive a new message"))))))}),sl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:j.Yb,payload:{id:O()(),translateLanguages:e}}},dl=[{name:"Afghanistan",dial_code:"+93",code:"AF"},{name:"Aland Islands",dial_code:"+358",code:"AX"},{name:"Albania",dial_code:"+355",code:"AL"},{name:"Algeria",dial_code:"+213",code:"DZ"},{name:"AmericanSamoa",dial_code:"+1684",code:"AS"},{name:"Andorra",dial_code:"+376",code:"AD"},{name:"Angola",dial_code:"+244",code:"AO"},{name:"Anguilla",dial_code:"+1264",code:"AI"},{name:"Antarctica",dial_code:"+672",code:"AQ"},{name:"Antigua and Barbuda",dial_code:"+1268",code:"AG"},{name:"Argentina",dial_code:"+54",code:"AR"},{name:"Armenia",dial_code:"+374",code:"AM"},{name:"Aruba",dial_code:"+297",code:"AW"},{name:"Australia",dial_code:"+61",code:"AU"},{name:"Austria",dial_code:"+43",code:"AT"},{name:"Azerbaijan",dial_code:"+994",code:"AZ"},{name:"Bahamas",dial_code:"+1242",code:"BS"},{name:"Bahrain",dial_code:"+973",code:"BH"},{name:"Bangladesh",dial_code:"+880",code:"BD"},{name:"Barbados",dial_code:"+1246",code:"BB"},{name:"Belarus",dial_code:"+375",code:"BY"},{name:"Belgium",dial_code:"+32",code:"BE"},{name:"Belize",dial_code:"+501",code:"BZ"},{name:"Benin",dial_code:"+229",code:"BJ"},{name:"Bermuda",dial_code:"+1441",code:"BM"},{name:"Bhutan",dial_code:"+975",code:"BT"},{name:"Bolivia, Plurinational State of",dial_code:"+591",code:"BO"},{name:"Bosnia and Herzegovina",dial_code:"+387",code:"BA"},{name:"Botswana",dial_code:"+267",code:"BW"},{name:"Brazil",dial_code:"+55",code:"BR"},{name:"British Indian Ocean Territory",dial_code:"+246",code:"IO"},{name:"Brunei Darussalam",dial_code:"+673",code:"BN"},{name:"Bulgaria",dial_code:"+359",code:"BG"},{name:"Burkina Faso",dial_code:"+226",code:"BF"},{name:"Burundi",dial_code:"+257",code:"BI"},{name:"Cambodia",dial_code:"+855",code:"KH"},{name:"Cameroon",dial_code:"+237",code:"CM"},{name:"Canada",dial_code:"+1",code:"CA"},{name:"Cape Verde",dial_code:"+238",code:"CV"},{name:"Cayman Islands",dial_code:"+ 345",code:"KY"},{name:"Central African Republic",dial_code:"+236",code:"CF"},{name:"Chad",dial_code:"+235",code:"TD"},{name:"Chile",dial_code:"+56",code:"CL"},{name:"China",dial_code:"+86",code:"CN"},{name:"Christmas Island",dial_code:"+61",code:"CX"},{name:"Cocos (Keeling) Islands",dial_code:"+61",code:"CC"},{name:"Colombia",dial_code:"+57",code:"CO"},{name:"Comoros",dial_code:"+269",code:"KM"},{name:"Congo",dial_code:"+242",code:"CG"},{name:"Congo, The Democratic Republic of the Congo",dial_code:"+243",code:"CD"},{name:"Cook Islands",dial_code:"+682",code:"CK"},{name:"Costa Rica",dial_code:"+506",code:"CR"},{name:"Cote d'Ivoire",dial_code:"+225",code:"CI"},{name:"Croatia",dial_code:"+385",code:"HR"},{name:"Cuba",dial_code:"+53",code:"CU"},{name:"Cyprus",dial_code:"+357",code:"CY"},{name:"Czech Republic",dial_code:"+420",code:"CZ"},{name:"Denmark",dial_code:"+45",code:"DK"},{name:"Djibouti",dial_code:"+253",code:"DJ"},{name:"Dominica",dial_code:"+1767",code:"DM"},{name:"Dominican Republic",dial_code:"+1849",code:"DO"},{name:"Ecuador",dial_code:"+593",code:"EC"},{name:"Egypt",dial_code:"+20",code:"EG"},{name:"El Salvador",dial_code:"+503",code:"SV"},{name:"Equatorial Guinea",dial_code:"+240",code:"GQ"},{name:"Eritrea",dial_code:"+291",code:"ER"},{name:"Estonia",dial_code:"+372",code:"EE"},{name:"Ethiopia",dial_code:"+251",code:"ET"},{name:"Falkland Islands (Malvinas)",dial_code:"+500",code:"FK"},{name:"Faroe Islands",dial_code:"+298",code:"FO"},{name:"Fiji",dial_code:"+679",code:"FJ"},{name:"Finland",dial_code:"+358",code:"FI"},{name:"France",dial_code:"+33",code:"FR"},{name:"French Guiana",dial_code:"+594",code:"GF"},{name:"French Polynesia",dial_code:"+689",code:"PF"},{name:"Gabon",dial_code:"+241",code:"GA"},{name:"Gambia",dial_code:"+220",code:"GM"},{name:"Georgia",dial_code:"+995",code:"GE"},{name:"Germany",dial_code:"+49",code:"DE"},{name:"Ghana",dial_code:"+233",code:"GH"},{name:"Gibraltar",dial_code:"+350",code:"GI"},{name:"Greece",dial_code:"+30",code:"GR"},{name:"Greenland",dial_code:"+299",code:"GL"},{name:"Grenada",dial_code:"+1473",code:"GD"},{name:"Guadeloupe",dial_code:"+590",code:"GP"},{name:"Guam",dial_code:"+1671",code:"GU"},{name:"Guatemala",dial_code:"+502",code:"GT"},{name:"Guernsey",dial_code:"+44",code:"GG"},{name:"Guinea",dial_code:"+224",code:"GN"},{name:"Guinea-Bissau",dial_code:"+245",code:"GW"},{name:"Guyana",dial_code:"+595",code:"GY"},{name:"Haiti",dial_code:"+509",code:"HT"},{name:"Holy See (Vatican City State)",dial_code:"+379",code:"VA"},{name:"Honduras",dial_code:"+504",code:"HN"},{name:"Hong Kong",dial_code:"+852",code:"HK"},{name:"Hungary",dial_code:"+36",code:"HU"},{name:"Iceland",dial_code:"+354",code:"IS"},{name:"India",dial_code:"+91",code:"IN"},{name:"Indonesia",dial_code:"+62",code:"ID"},{name:"Iran, Islamic Republic of Persian Gulf",dial_code:"+98",code:"IR"},{name:"Iraq",dial_code:"+964",code:"IQ"},{name:"Ireland",dial_code:"+353",code:"IE"},{name:"Isle of Man",dial_code:"+44",code:"IM"},{name:"Israel",dial_code:"+972",code:"IL"},{name:"Italy",dial_code:"+39",code:"IT"},{name:"Jamaica",dial_code:"+1876",code:"JM"},{name:"Japan",dial_code:"+81",code:"JP"},{name:"Jersey",dial_code:"+44",code:"JE"},{name:"Jordan",dial_code:"+962",code:"JO"},{name:"Kazakhstan",dial_code:"+77",code:"KZ"},{name:"Kenya",dial_code:"+254",code:"KE"},{name:"Kiribati",dial_code:"+686",code:"KI"},{name:"Korea, Democratic People's Republic of Korea",dial_code:"+850",code:"KP"},{name:"Korea, Republic of South Korea",dial_code:"+82",code:"KR"},{name:"Kuwait",dial_code:"+965",code:"KW"},{name:"Kyrgyzstan",dial_code:"+996",code:"KG"},{name:"Laos",dial_code:"+856",code:"LA"},{name:"Latvia",dial_code:"+371",code:"LV"},{name:"Lebanon",dial_code:"+961",code:"LB"},{name:"Lesotho",dial_code:"+266",code:"LS"},{name:"Liberia",dial_code:"+231",code:"LR"},{name:"Libyan Arab Jamahiriya",dial_code:"+218",code:"LY"},{name:"Liechtenstein",dial_code:"+423",code:"LI"},{name:"Lithuania",dial_code:"+370",code:"LT"},{name:"Luxembourg",dial_code:"+352",code:"LU"},{name:"Macao",dial_code:"+853",code:"MO"},{name:"Macedonia",dial_code:"+389",code:"MK"},{name:"Madagascar",dial_code:"+261",code:"MG"},{name:"Malawi",dial_code:"+265",code:"MW"},{name:"Malaysia",dial_code:"+60",code:"MY"},{name:"Maldives",dial_code:"+960",code:"MV"},{name:"Mali",dial_code:"+223",code:"ML"},{name:"Malta",dial_code:"+356",code:"MT"},{name:"Marshall Islands",dial_code:"+692",code:"MH"},{name:"Martinique",dial_code:"+596",code:"MQ"},{name:"Mauritania",dial_code:"+222",code:"MR"},{name:"Mauritius",dial_code:"+230",code:"MU"},{name:"Mayotte",dial_code:"+262",code:"YT"},{name:"Mexico",dial_code:"+52",code:"MX"},{name:"Micronesia, Federated States of Micronesia",dial_code:"+691",code:"FM"},{name:"Moldova",dial_code:"+373",code:"MD"},{name:"Monaco",dial_code:"+377",code:"MC"},{name:"Mongolia",dial_code:"+976",code:"MN"},{name:"Montenegro",dial_code:"+382",code:"ME"},{name:"Montserrat",dial_code:"+1664",code:"MS"},{name:"Morocco",dial_code:"+212",code:"MA"},{name:"Mozambique",dial_code:"+258",code:"MZ"},{name:"Myanmar",dial_code:"+95",code:"MM"},{name:"Namibia",dial_code:"+264",code:"NA"},{name:"Nauru",dial_code:"+674",code:"NR"},{name:"Nepal",dial_code:"+977",code:"NP"},{name:"Netherlands",dial_code:"+31",code:"NL"},{name:"Netherlands Antilles",dial_code:"+599",code:"AN"},{name:"New Caledonia",dial_code:"+687",code:"NC"},{name:"New Zealand",dial_code:"+64",code:"NZ"},{name:"Nicaragua",dial_code:"+505",code:"NI"},{name:"Niger",dial_code:"+227",code:"NE"},{name:"Nigeria",dial_code:"+234",code:"NG"},{name:"Niue",dial_code:"+683",code:"NU"},{name:"Norfolk Island",dial_code:"+672",code:"NF"},{name:"Northern Mariana Islands",dial_code:"+1670",code:"MP"},{name:"Norway",dial_code:"+47",code:"NO"},{name:"Oman",dial_code:"+968",code:"OM"},{name:"Pakistan",dial_code:"+92",code:"PK"},{name:"Palau",dial_code:"+680",code:"PW"},{name:"Palestinian Territory, Occupied",dial_code:"+970",code:"PS"},{name:"Panama",dial_code:"+507",code:"PA"},{name:"Papua New Guinea",dial_code:"+675",code:"PG"},{name:"Paraguay",dial_code:"+595",code:"PY"},{name:"Peru",dial_code:"+51",code:"PE"},{name:"Philippines",dial_code:"+63",code:"PH"},{name:"Pitcairn",dial_code:"+872",code:"PN"},{name:"Poland",dial_code:"+48",code:"PL"},{name:"Portugal",dial_code:"+351",code:"PT"},{name:"Puerto Rico",dial_code:"+1939",code:"PR"},{name:"Qatar",dial_code:"+974",code:"QA"},{name:"Romania",dial_code:"+40",code:"RO"},{name:"Russia",dial_code:"+7",code:"RU"},{name:"Rwanda",dial_code:"+250",code:"RW"},{name:"Reunion",dial_code:"+262",code:"RE"},{name:"Saint Barthelemy",dial_code:"+590",code:"BL"},{name:"Saint Helena, Ascension and Tristan Da Cunha",dial_code:"+290",code:"SH"},{name:"Saint Kitts and Nevis",dial_code:"+1869",code:"KN"},{name:"Saint Lucia",dial_code:"+1758",code:"LC"},{name:"Saint Martin",dial_code:"+590",code:"MF"},{name:"Saint Pierre and Miquelon",dial_code:"+508",code:"PM"},{name:"Saint Vincent and the Grenadines",dial_code:"+1784",code:"VC"},{name:"Samoa",dial_code:"+685",code:"WS"},{name:"San Marino",dial_code:"+378",code:"SM"},{name:"Sao Tome and Principe",dial_code:"+239",code:"ST"},{name:"Saudi Arabia",dial_code:"+966",code:"SA"},{name:"Senegal",dial_code:"+221",code:"SN"},{name:"Serbia",dial_code:"+381",code:"RS"},{name:"Seychelles",dial_code:"+248",code:"SC"},{name:"Sierra Leone",dial_code:"+232",code:"SL"},{name:"Singapore",dial_code:"+65",code:"SG"},{name:"Slovakia",dial_code:"+421",code:"SK"},{name:"Slovenia",dial_code:"+386",code:"SI"},{name:"Solomon Islands",dial_code:"+677",code:"SB"},{name:"Somalia",dial_code:"+252",code:"SO"},{name:"South Africa",dial_code:"+27",code:"ZA"},{name:"South Sudan",dial_code:"+211",code:"SS"},{name:"South Georgia and the South Sandwich Islands",dial_code:"+500",code:"GS"},{name:"Spain",dial_code:"+34",code:"ES"},{name:"Sri Lanka",dial_code:"+94",code:"LK"},{name:"Sudan",dial_code:"+249",code:"SD"},{name:"Suriname",dial_code:"+597",code:"SR"},{name:"Svalbard and Jan Mayen",dial_code:"+47",code:"SJ"},{name:"Swaziland",dial_code:"+268",code:"SZ"},{name:"Sweden",dial_code:"+46",code:"SE"},{name:"Switzerland",dial_code:"+41",code:"CH"},{name:"Syrian Arab Republic",dial_code:"+963",code:"SY"},{name:"Taiwan",dial_code:"+886",code:"TW"},{name:"Tajikistan",dial_code:"+992",code:"TJ"},{name:"Tanzania, United Republic of Tanzania",dial_code:"+255",code:"TZ"},{name:"Thailand",dial_code:"+66",code:"TH"},{name:"Timor-Leste",dial_code:"+670",code:"TL"},{name:"Togo",dial_code:"+228",code:"TG"},{name:"Tokelau",dial_code:"+690",code:"TK"},{name:"Tonga",dial_code:"+676",code:"TO"},{name:"Trinidad and Tobago",dial_code:"+1868",code:"TT"},{name:"Tunisia",dial_code:"+216",code:"TN"},{name:"Turkey",dial_code:"+90",code:"TR"},{name:"Turkmenistan",dial_code:"+993",code:"TM"},{name:"Turks and Caicos Islands",dial_code:"+1649",code:"TC"},{name:"Tuvalu",dial_code:"+688",code:"TV"},{name:"Uganda",dial_code:"+256",code:"UG"},{name:"Ukraine",dial_code:"+380",code:"UA"},{name:"United Arab Emirates",dial_code:"+971",code:"AE"},{name:"United Kingdom",dial_code:"+44",code:"GB"},{name:"United States",dial_code:"+1",code:"US"},{name:"Uruguay",dial_code:"+598",code:"UY"},{name:"Uzbekistan",dial_code:"+998",code:"UZ"},{name:"Vanuatu",dial_code:"+678",code:"VU"},{name:"Venezuela, Bolivarian Republic of Venezuela",dial_code:"+58",code:"VE"},{name:"Vietnam",dial_code:"+84",code:"VN"},{name:"Virgin Islands, British",dial_code:"+1284",code:"VG"},{name:"Virgin Islands, U.S.",dial_code:"+1340",code:"VI"},{name:"Wallis and Futuna",dial_code:"+681",code:"WF"},{name:"Yemen",dial_code:"+967",code:"YE"},{name:"Zambia",dial_code:"+260",code:"ZM"},{name:"Zimbabwe",dial_code:"+263",code:"ZW"}],ul=function(e){var t=e.which||e.keycode;t>=48&&t<=57||e.preventDefault(),e.target.value.length>14&&e.preventDefault()},ml=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1,a=e.handleNumberVerified,o=void 0===a?function(){}:a,l=c.a.getState(),i=l||{},s=i.vCardData.data.mobileNumber,u=void 0===s?"":s,h=Object(n.useState)({mobileNumber:"",country:"",countryCode:""}),v=Object(Re.a)(h,2),f=v[0],g=v[1],b=f.mobileNumber,E=f.country,C=f.countryCode,y=Object(n.useState)({errorPopup:!1,errorMessage:""}),O=Object(Re.a)(y,2),j=O[0],N=O[1],k=j.errorPopup,S=j.errorMessage,D=Object(n.useState)(!1),M=Object(Re.a)(D,2),I=M[0],T=M[1],P=function(e){g(Object(d.a)(Object(d.a)({},f),{},{country:e.target.getAttribute("data-value"),countryCode:e.target.value}))},A=function(){if(!Object(x.a)()){var e=(C+f.mobileNumber).replace("+","");e=e.replace(" ",""),u=(u=u.replace("+","")).replace(" ",""),C?""!==b?e.length<7||e.length>15||isNaN(e)?N(Object(d.a)(Object(d.a)({},j),{},{errorPopup:!0,errorMessage:"Please enter valid mobile number"})):e===u?(N(Object(d.a)(Object(d.a)({},j),{},{errorPopup:!1,errorMessage:""})),o(!0)):N(Object(d.a)(Object(d.a)({},j),{},{errorPopup:!0,errorMessage:"The mobile number you entered doesn't match your account."})):N(Object(d.a)(Object(d.a)({},j),{},{errorPopup:!0,errorMessage:"Please enter your mobile number"})):N(Object(d.a)(Object(d.a)({},j),{},{errorPopup:!0,errorMessage:"Please select country"}))}},L=function(e){g(Object(d.a)(Object(d.a)({},f),{},{mobileNumber:e.target.value}))},U=function(e){var t=(e.clipboardData||window.clipboardData).getData("text");e.preventDefault(),L({target:{name:"mobileNumber",value:t.replace(/\D/g,"").slice(0,15)}})},R=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=null===t||void 0===t||null===(e=t.target)||void 0===e?void 0:e.value;g(Object(d.a)(Object(d.a)({},f),{},{country:a}));var n,r=a.toLowerCase(),o=document.querySelectorAll(".drop_options_list"),l=Object(ol.a)(o);try{for(l.s();!(n=l.n()).done;){var i=n.value,c=i.innerHTML.toLowerCase();-1===c.indexOf(r)?i.style.display="none":i.style.display="block"}}catch(s){l.e(s)}finally{l.f()}},F=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://geolocation-db.com/json/").then((function(e){return e.json()})).then((function(e){if(null===e||void 0===e?void 0:e.country_code){var a=dl.find((function(t){return t.code===e.country_code}));a&&!t&&g(Object(d.a)(Object(d.a)({},f),{},{country:a.name,countryCode:a.dial_code}))}})).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return F(),function(){t=!0}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"delete_acc_wrapper"},r.a.createElement("div",{className:"info_wraper"},r.a.createElement(yn,{className:"icon_info_danger"}),r.a.createElement("p",{className:"info-danger"},"Deleting your account will:")),r.a.createElement("ul",{className:"info_points"},r.a.createElement("li",null,r.a.createElement("p",null,"Delete your account from MirrorFly")),r.a.createElement("li",null,r.a.createElement("p",null,"Erase your message history")),r.a.createElement("li",null,r.a.createElement("p",null,"Delete you from all of your MirrorFly groups"))),r.a.createElement("strong",null,"To delete your account, confirm your country and enter your phone number."),r.a.createElement("div",{className:"drop_custom"},r.a.createElement("label",{htmlFor:""},"Country"),r.a.createElement("div",{className:"".concat(I?" open ":" "," form-group ")},r.a.createElement("div",{className:"".concat(I?" open ":" "," inputGroup ")},r.a.createElement("label",{htmlFor:"country",onClick:function(){return T(!I)},className:"".concat(I?" open ":" "," dropArrow ")},r.a.createElement(w.bb,{className:"".concat(I?" open ":" "," "),style:{transform:I?"rotate(-180deg)":"rotate(0deg)"}})),r.a.createElement("div",{id:"country",className:"".concat(I?" open ":""," DropContainer"),onClick:function(){return T(!I)}},r.a.createElement("input",{className:"".concat(I?" open ":""," country_input"),placeholder:"Choose a country",readOnly:!Object(x.R)(),onChange:function(e){return Object(x.a)()?null:R(e)},value:E}),I&&r.a.createElement(qe.a,{onOutsideClick:function(e){e.target.classList.contains("open")||T(!1)}},r.a.createElement("div",{className:"drop_options"},dl.map((function(e){return r.a.createElement("button",{type:"button",className:"drop_options_list",onClick:P,value:e.dial_code,"data-value":e.name,key:e.code},e.name)})))))))),r.a.createElement("div",{className:"form-group mobile_number_Wraper"},r.a.createElement("label",{htmlFor:"mobile_number"},"Mobile number"),r.a.createElement("div",{className:"inputGroup countryInput"},r.a.createElement("span",{className:"countryCode",id:"countryCode"},f.countryCode),r.a.createElement("input",{id:"mobile_number",onKeyPress:ul,value:b,onChange:function(e){return L(e)},name:"mobileNumber",placeholder:"Enter Mobile Number",type:"text",onPaste:U}))),r.a.createElement("div",{className:"delete_acc_footer"},r.a.createElement("button",{className:"btn_continue",onClick:function(){return A()},type:"button"},"Continue")),k&&r.a.createElement(Dt,{textActionBtn:"Ok",handleAction:function(){return N(Object(d.a)(Object(d.a)({},j),{},{errorPopup:!1}))},textInfo:S})))},pl=(a(719),[{id:1,reason:"I am changing my device"},{id:2,reason:"I am changing my phone number"},{id:3,reason:"MirrorFly is missing a feature"},{id:4,reason:"MirrorFly is not working"},{id:5,reason:"Other"}]),hl=function(){var e=250,t=Object(n.useState)(!1),a=Object(Re.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(!1),c=Object(Re.a)(i,2),s=c[0],u=c[1],h=Object(n.useState)(""),v=Object(Re.a)(h,2),f=v[0],g=v[1],b=Object(n.useState)(""),E=Object(Re.a)(b,2),C=E[0],y=E[1],O=Object(n.useState)(!1),j=Object(Re.a)(O,2),N=j[0],k=j[1],S=Object(n.useState)({errorPopup:!1,errorMessage:""}),D=Object(Re.a)(S,2),M=D[0],I=D[1],T=M.errorPopup,P=M.errorMessage,L=function(e){g(e.target.value)},U=function(){""!==f?u(!0):I({errorPopup:!0,errorMessage:"Please select a reason"})},R=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==f){e.next=3;break}return I({errorPopup:!0,errorMessage:"Please select a reason"}),e.abrupt("return");case 3:if(!Object(x.a)()){e.next=5;break}return e.abrupt("return");case 5:return u(!1),k(!0),e.next=9,A.a.endCall();case 9:return e.next=11,A.a.deleteMyAccount(f,C);case 11:a=e.sent,k(!1),200===a.statusCode?Object(x.X)("accountDeleted"):re.b.error("The server is not responding. Please try again later.");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(t){if(t.target.innerText.length>=e)return t.preventDefault(),!1},B=function(t){t.target.innerText.length<=e&&y(t.target.innerText)},_=function(t){var a,n,r=C+(null===t||void 0===t||null===(a=t.clipboardData)||void 0===a?void 0:a.getData("text/plain"));(r=Object(x.db)(r)).length>=e&&(t.preventDefault(),r=r.substring(0,e),C.length<e&&document&&document.execCommand("insertText",!1,null===t||void 0===t||null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/plain").substring(0,e-C.length)));y(r)};return r.a.createElement(n.Fragment,null,N&&r.a.createElement("div",{className:"page-loader"},r.a.createElement("img",{src:w.ac,alt:"contact-us"})),r.a.createElement("div",{className:"user_feedback_wraper"},r.a.createElement("div",{className:"drop_custom"},r.a.createElement("label",{htmlFor:""},"We hate to see you leave! Tell us why you are deleting your account:"),r.a.createElement("div",{className:"".concat(o?" open ":" "," form-group ")},r.a.createElement("div",{className:"".concat(o?" open ":" "," inputGroup ")},r.a.createElement("label",{htmlFor:"country",onClick:function(){return l(!o)},className:"".concat(o?" open ":" "," dropArrow ")},r.a.createElement(w.bb,{onClick:function(){return l(!o)},className:"".concat(o?" open ":" "," "),style:{transform:o?"rotate(-180deg)":"rotate(0deg)"}})),r.a.createElement("div",{id:"country",className:"".concat(o?" open ":""," DropContainer"),onClick:function(){return l(!o)}},r.a.createElement("div",{onClick:function(){return l(!o)},className:"".concat(o?" open ":""," selected")},f||"Select a reason"),o&&r.a.createElement(qe.a,{onOutsideClick:function(e){e.target.classList.contains("open")||l(!1)}},r.a.createElement("div",{className:"drop_options "},pl.map((function(e){return r.a.createElement("button",{type:"button",className:"drop_options_list list_type_1",onClick:L,value:e.reason,key:e.id},e.reason)}))))))),r.a.createElement("div",{className:"form_group contentEditable_wraper"},r.a.createElement("div",{"data-text":"Tell us how we can improve",className:"contentEditable",contentEditable:!0,onInput:B,onKeyPress:F,onPaste:_})),r.a.createElement("span",{className:"note"},"We will store your feedback for future purpose.")),r.a.createElement("div",{className:"user_feedback_footer"},r.a.createElement("button",{className:"btn_continue",onClick:U,type:"button"},"Delete My Account"))),s&&r.a.createElement(Dt,{textActionBtn:"Ok",textCancelBtn:"Cancel",handleCancel:function(){return u(!1)},handleAction:function(){return R(!0)},textHeading:"Proceed to delete your account?",textInfo:"Deleting your account is permanent. Your data cannot be recovered if you reactivate your MirrorFly account in future."}),T&&r.a.createElement(Dt,{textActionBtn:"Ok",handleAction:function(){return I(Object(d.a)(Object(d.a)({},M),{},{errorPopup:!1}))},textInfo:P}))},vl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleBackToSetting,a=void 0===t?function(){}:t,o=Object(n.useState)(!1),l=Object(Re.a)(o,2),i=l[0],c=l[1],s=function(e){c(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"setting-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"settinglist"},r.a.createElement(Qo,{handleBackFromSetting:a,label:"Delete My Account"}),r.a.createElement("div",{className:"content_wraper"},i?r.a.createElement(hl,null):r.a.createElement(ml,{handleNumberVerified:s}))))))},fl=[{label:"Chat",image:"chat"},{label:"Archived Settings",image:"Archived"},{label:"Notifications",image:"notification"},{label:"Starred",image:"star"},{label:"Blocked",image:"blocked"},{label:"About and Help",image:"about"},{label:"Delete My Account",image:"delete"}],gl=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState({parrentView:!1,activeTab:e})},n.getLanguages=Object(p.a)(m.a.mark((function e(){var t,a,n,r,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.getTranslateLanguages(E.F);case 3:t=e.sent,n=(a=t||{}).data,r=(n=void 0===n?{}:n).languages,o=void 0===r?[]:r,l=a.statusCode,200===(void 0===l?0:l)&&c.a.dispatch(sl(o)),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])}))),n.handleBackToSetting=function(e){n.setState({parrentView:!0})},n.setNotificationSettings=function(e){return e},n.setSelectedLaun=function(){var e,t=(c.a.getState()||{}).TranslateLanguage.translateLanguages.translateLanguages,a=void 0===t?[]:t,n=null===a||void 0===a?void 0:a.findIndex((function(e){return e.language===Object(x.N)()}));return null===(e=a[n])||void 0===e?void 0:e.name},n.componentDidUpdate=function(){n.setSelectedLaun(),""===Object(x.N)()&&Object(x.bb)("translateLang","en")},n.componentDidMount=function(){n.getLanguages()},n.state={parrentView:!0,activeTab:null,setLaunguage:"English"},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.props.handleBackFromSetting,a=this.state,o=a.parrentView,l=a.activeTab;return r.a.createElement(n.Fragment,null,o&&r.a.createElement("div",{className:"setting-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"settinglist"},r.a.createElement(Qo,{handleBackFromSetting:t,label:"Settings"}),r.a.createElement("ul",{className:"setting-list-ul"},fl.map((function(t){var a=t.label,n=t.image;return r.a.createElement(Xo,{key:n,handleOptions:e.handleSettings,label:a,image:n})})),r.a.createElement(Xo,{handleOptions:this.props.logoutStatus,label:"Logout",image:"logout"}))))),!o&&r.a.createElement(n.Fragment,null,"Archived"===l&&r.a.createElement(cl,{handleBackToSetting:this.handleBackToSetting}),"chat"===l&&r.a.createElement(il,{setSelectedLaun:""!==this.setSelectedLaun()?this.setSelectedLaun():"English",handleBackToSetting:this.handleBackToSetting}),"notification"===l&&r.a.createElement(rl,{handleBackToSetting:this.handleBackToSetting}),"star"===l&&r.a.createElement(Ko,{handleBackToSetting:this.handleBackToSetting}),"blocked"===l&&r.a.createElement(nl,{handleBackToSetting:this.handleBackToSetting}),"about"===l&&r.a.createElement(tl,{handleBackToSetting:this.handleBackToSetting}),"delete"===l&&r.a.createElement(vl,{handleBackToSetting:this.handleBackToSetting})))}}]),a}(n.Component),bl=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isTyping:!1},e.searchFilterList=function(){var t=Ke.a.findDOMNode(Object(f.a)(e)).getElementsByClassName("search-contacts"),a=t.length?t[0].value:"",n=e.props.handleSearchFilterList,r=Object(x.P)(a);e.setState({isTyping:!!a}),n(r),Tn.getUsersListFromSDK(1,r)},e.clearSearch=function(){Ke.a.findDOMNode(Object(f.a)(e)).getElementsByClassName("search-contacts")[0].value="",e.searchFilterList()},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state.isTyping;return r.a.createElement("div",{className:"search"},r.a.createElement("input",{type:"text",className:"search-contacts",name:"search-contacts",autoComplete:"off",placeholder:"Search",onChange:this.searchFilterList}),r.a.createElement("i",{className:this.state.isTyping?"":"Search",title:"Search"}," ",!e&&r.a.createElement(w.Uc,null)),r.a.createElement("i",{className:this.state.isTyping?"CloseSearch":"",title:"Clear search",onClick:this.clearSearch},e&&r.a.createElement(w.J,null)))}}]),a}(r.a.Component),El=Object(o.b)((function(e,t){return{rosterData:e.rosterData}}),null)(bl),Cl=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n,r;return Object(h.a)(this,a),(r=t.call(this,e)).handleRoster=function(e,t){if("false"!==Object(le.e)("recordingStatus")){var a={roster:t,recent:{chatType:"chat"}};c.a.dispatch(N()).then((function(){a.chatType="chat",a.chatId=t.userId,a.chatJid=Object(V.c)(t.userId),c.a.dispatch(Object(k.a)(a)),r.props.handleBackStatus(!0)}))}},r.handleUpdateRoster=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=r.state.searchWith,n=Object(x.Q)(e).filter((function(e){var t=Object(V.d)(e)||e.userId;return e.isFriend&&-1!==t.toLowerCase().search(a.toLowerCase())}));r.setState({filterItem:n,userList:n,loaderStatus:t})},r.fetchMoreData=function(){var e=r.state.userList;Tn.getUsersListFromSDK(Math.ceil(e.length/20+1),Object(x.P)(r.state.searchWith))},r.state={loaderStatus:!!(null===e||void 0===e||null===(n=e.rosterData)||void 0===n?void 0:n.isFetchingUserList),filterItem:[],userList:[],searchIn:"contacts",searchWith:""},r.handleRosterData=r.handleRosterData.bind(Object(f.a)(r)),r.handleEmailContacts=r.handleEmailContacts.bind(Object(f.a)(r)),r.handleMobileContacts=r.handleMobileContacts.bind(Object(f.a)(r)),r.handleNewChatStatus=r.handleNewChatStatus.bind(Object(f.a)(r)),r.handleOnBack=r.handleOnBack.bind(Object(f.a)(r)),r.handleFilterContactsList=r.handleFilterContactsList.bind(Object(f.a)(r)),r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e,t,a=this.props.rosterData&&this.props.rosterData.data||[];this.handleUpdateRoster(a,null===(e=this.props)||void 0===e||null===(t=e.rosterData)||void 0===t?void 0:t.isFetchingUserList)}},{key:"handleNewChatStatus",value:function(){this.setState({newChatStatus:!0})}},{key:"handleOnBack",value:function(){this.props.handleBackStatus(!0)}},{key:"handleMobileContacts",value:function(e){var t=this,a=this.props.blockedContact.data,n=e.userJid,o=a.indexOf(n)>-1,l=Object(at.b)(e.userId),i=Object(V.d)(e);return r.a.createElement("li",{className:"chat-list-li ".concat(o?"Blocked":""),key:e.userId,onClick:function(a){return t.handleRoster(a,e)}},r.a.createElement("div",{className:"profile-image"},r.a.createElement("div",{className:"image"},r.a.createElement(z.a,{chatType:"chat",blocked:l,temporary:!1,imageToken:e.image,name:i}))),r.a.createElement("div",{className:"recentchats"},r.a.createElement("div",{className:"recent-username-block"},r.a.createElement("div",{className:"recent-username"},r.a.createElement("div",{className:"username"},r.a.createElement("h3",{title:i},r.a.createElement("span",null,""!==this.state.searchWith?Object(x.z)(i,this.state.searchWith):i),o&&r.a.createElement("div",{className:"blocked-info"},r.a.createElement("i",null,r.a.createElement(w.s,null)),r.a.createElement("span",null,"Blocked")))))),r.a.createElement("div",{className:"recent-message-block"},r.a.createElement(nt,{status:e.status,blocked:l,userId:e.userId}))))}},{key:"handleEmailContacts",value:function(e){var t=this,a=Object(at.b)(e.userId),n=Object(V.d)(e);return r.a.createElement("li",{className:"chat-list-li ".concat(a?"Blocked":""),key:e.userId,onClick:function(a){return t.handleRoster(a,e)}},r.a.createElement("div",{className:"profile-image"},r.a.createElement("div",{className:"image"},r.a.createElement(z.a,{chatType:"chat",blocked:a,temporary:!1,imageToken:e.image,name:n})),r.a.createElement("i",null,r.a.createElement(w.ic,null))),r.a.createElement("div",{className:"recentchats"},r.a.createElement("div",{className:"recent-username-block"},r.a.createElement("div",{className:"recent-username"},r.a.createElement("div",{className:"username"},r.a.createElement("h3",{title:n},""!==this.state.searchWith?Object(x.z)(n,this.state.searchWith):n)))),r.a.createElement("div",{className:"recent-message-block"},r.a.createElement(nt,{status:e.status,blocked:a,userId:e.userId}))))}},{key:"componentDidUpdate",value:function(e,t){var a,n,r,o,l;!e.rosterData||e.rosterData.id===this.props.rosterData.id&&(null===e||void 0===e||null===(a=e.rosterData)||void 0===a?void 0:a.isFetchingUserList)===(null===(n=this.props)||void 0===n||null===(r=n.rosterData)||void 0===r?void 0:r.isFetchingUserList)||this.handleUpdateRoster(this.props.rosterData.data,null===(o=this.props)||void 0===o||null===(l=o.rosterData)||void 0===l?void 0:l.isFetchingUserList)}},{key:"handleRosterData",value:function(){var e=this;return this.state.filterItem.length>0?this.state.filterItem.map((function(t,a){return r.a.createElement(r.a.Fragment,{key:a},t.emailId?e.handleEmailContacts(t):e.handleMobileContacts(t))})):0===this.state.filterItem.length&&""!==this.state.searchWith?r.a.createElement("div",{className:"no-search-record-found"},r.a.createElement("div",{className:"norecent-chat"},r.a.createElement("i",{className:"norecent-chat-img"},r.a.createElement(w.hb,null)),r.a.createElement("h4",null,E.r," "))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"norecent-chat"},r.a.createElement("i",{className:"norecent-chat-img"},r.a.createElement(w.fb,null)),r.a.createElement("h4",null,"It seems like there are no contacts")))}},{key:"handleFilterContactsList",value:function(e){this.setState({searchWith:e})}},{key:"handleUserListData",value:function(){var e=this,t=[];return this.state.filterItem.length>0&&this.state.userList.length>0?this.state.userList.map((function(a,n){t.push(r.a.createElement(r.a.Fragment,{key:n},a.emailId?e.handleEmailContacts(a):e.handleMobileContacts(a)))})):0===this.state.filterItem.length&&""!==this.state.searchWith&&t.push(r.a.createElement("div",{key:"0",className:"no-search-record-found"},r.a.createElement("div",{className:"norecent-chat"},r.a.createElement("i",{className:"norecent-chat-img"},r.a.createElement(w.hb,null)),r.a.createElement("h4",null,E.r," ")))),t}},{key:"render",value:function(){var e=this.props.newChatStatus,t=this.handleUserListData();return r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{display:e?"none":""},className:"contactlist"},r.a.createElement("div",{className:"recent-chatlist-header"},r.a.createElement("div",{className:"profile-img-name"},r.a.createElement("i",{className:"newchat-icon",onClick:this.handleOnBack,title:"Back"},r.a.createElement(w.b,null)),r.a.createElement("span",null,"New chat"))),r.a.createElement(El,{searchIn:this.state.searchIn,handleSearchFilterList:this.handleFilterContactsList}),this.state.loaderStatus&&r.a.createElement("div",{className:"loader-container style-2"},r.a.createElement("img",{src:w.Nd,alt:"loader"})),t.length>0&&r.a.createElement("ul",{className:"chat-list-ul",id:"scrollableUl"},r.a.createElement(wn.a,{dataLength:t.length,next:this.fetchMoreData,hasMore:!0,scrollableTarget:"scrollableUl"},this.handleUserListData()))))}}]),a}(r.a.Component),yl=Object(o.b)((function(e,t){return{rosterData:e.rosterData,vCardData:e.vCardData.data,VCardContactData:e.VCardContactData,messageData:e.messageData,contactsWhoBlockedMe:e.contactsWhoBlockedMe,blockedContact:e.blockedContact}}),null)(Cl),Ol=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).findNegativeValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t-Ve()(e).length;return a>=0?t-Ve()(e).length:0},n.handleSetNickname=function(){n.handleUserNameState()},n.handleSetStatus=function(){n.handleUserStateState()},n.handleUserNameState=function(){n.setState({userName:n.state.userName,userNameChars:n.state.userNameChars})},n.handleUserStateState=function(){n.setState({userStatus:n.state.userStatus,statusChars:n.state.statusChars})},n.handleVcardSaveUsername=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l,i,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(x.a)()){e.next=2;break}return e.abrupt("return");case 2:if(a=n.state,r=a.vCardData,!((o=(o=a.userName).trim()).length<3)){e.next=8;break}return ht.a.clear(),ht.a.error("Username is too short"),e.abrupt("return");case 8:if(""===o){e.next=20;break}if(l=r.mobileNumber,!(i=n.state.lastUserName!==o)){e.next=17;break}return e.next=14,A.a.setUserProfile(o,r.image,r.status,l,r.email);case 14:e.t0=e.sent,e.next=18;break;case 17:e.t0={};case 18:200!==(c=e.t0).statusCode&&i?ht.a.error(c.message):(n.setState({userNameChars:n.findNegativeValue(n.props.vCardData.data.nickName,E.L),viewEdit:!0,charCount:!1,viewTick:!0,userName:o,userStatus:n.state.userStatus}),i&&ht.a.success("Profile updated successfully"));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleVcardSaveStatus=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l,i,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(x.a)()){e.next=2;break}return e.abrupt("return");case 2:if(a=n.state,r=a.vCardData,""===(o=(o=a.userStatus).trim())){e.next=16;break}if(l=r.mobileNumber,!(i=n.state.lastUserStatus!==o)){e.next=13;break}return e.next=10,A.a.setUserProfile(r.nickName,r.image,o,l,r.email);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0={};case 14:200!==(c=e.t0).statusCode&&i?ht.a.error(c.message):(n.setState({statusChars:n.findNegativeValue(n.props.vCardData.data.status,E.Q),viewEditStatus:!0,charCountStatus:!1,viewTickStatus:!0,userStatus:o,userName:n.state.userName}),i&&ht.a.success("Profile updated successfully"));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleWordCountStatus=function(e){var t=e.target.value,a=n.findNegativeValue(t,E.Q),r=e.target.value;n.setState({statusChars:a,userStatus:r}),a===E.Q?n.setState({viewTickStatus:!0}):n.setState({viewTickStatus:!1}),n.handleTrim("status","viewTickStatus")},n.handleWordCount=function(e){var t=e.target.value,a=ct(E.L,t),r=n.findNegativeValue(a,E.L);n.setState({userNameChars:r,userName:t},(function(){n.state.userNameChars<0?n.setState({userNameChars:0}):n.setState({userNameChars:n.state.userNameChars})})),r===E.L?n.setState({viewTick:!0}):n.setState({viewTick:!1}),n.handleTrim("username","viewTick")},n.onEmojiClickUsername=function(e){var t=n.state.userName,a=void 0===t?"":t;if(n.findNegativeValue(a,E.L)>0){var r=n.userNameCursorPostion,o="";if(n.userNameSelectedText===n.state.userName)o=e,r=e.length;else o=n.state.userName.substring(0,r)+e+n.state.userName.substring(r),r+=e.length;var l=n.findNegativeValue(o,E.L);n.setState({userNameChars:l,userName:o},(function(){n.userNameCursorPostion=r,dt(document.getElementById("username"),r)})),l===E.L?n.setState({viewTick:!0}):n.setState({viewTick:!1})}},n.onEmojiClickStatus=function(e){var t=n.state.userStatus,a=void 0===t?"":t;if(n.findNegativeValue(a,E.Q)>0){var r=n.userStatusCursorPostion,o="";if(n.userStatusSelectedText===n.state.userStatus)o=e,r=e.length;else o=n.state.userStatus.substring(0,r)+e+n.state.userStatus.substring(r),r+=e.length;var l=n.findNegativeValue(o,E.Q);n.setState({statusChars:l,userStatus:o},(function(){n.userStatusCursorPostion=r,dt(document.getElementById("status"),r)})),l===E.Q?n.setState({viewTickStatus:!0}):n.setState({viewTickStatus:!1})}},n.state={vCardData:"",userName:"",userStatus:"",viewEdit:!0,viewEditStatus:!0,viewTick:!0,viewTickStatus:!0,charCount:!1,charCountStatus:!1,userNameChars:E.L,statusChars:E.Q,lastUserName:"",lastUserStatus:""},n.userNameCursorPostion=0,n.userNameSelectedText="",n.userStatusCursorPostion=0,n.userStatusSelectedText="",n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){(this.props.vCardData&&this.props.vCardData.id||0!==this.state.vCardData.length)&&this.setState({vCardData:this.props.vCardData.data,userName:this.props.vCardData.data.nickName,userStatus:this.props.vCardData.data.status,userNameChars:this.findNegativeValue(this.props.vCardData.data.nickName,E.L),statusChars:this.findNegativeValue(this.props.vCardData.data.status,E.Q)})}},{key:"componentDidUpdate",value:function(e,t){e.vCardData&&e.vCardData.id!==this.props.vCardData.id&&(this.setState({vCardData:this.props.vCardData.data,userName:this.props.vCardData.data.nickName,userStatus:this.props.vCardData.data.status,userNameChars:this.findNegativeValue(this.props.vCardData.data.nickName,E.L),statusChars:this.findNegativeValue(this.props.vCardData.data.status,E.Q)}),e.vCardData.data&&e.vCardData.data.nickName===this.props.vCardData.data.nickName&&this.handleSetNickname(),e.vCardData.data&&e.vCardData.data.status===this.props.vCardData.data.status&&this.handleSetStatus(),e.vCardData.data&&e.vCardData.data.nickName!==this.props.vCardData.data.nickName&&e.vCardData.data.status===this.props.vCardData.data.status&&this.handleSetStatus(),e.vCardData.data&&e.vCardData.data.status!==this.props.vCardData.data.status&&e.vCardData.data.nickName===this.props.vCardData.data.nickName&&this.handleSetNickname(),e.vCardData.data&&e.vCardData.data.image!==this.props.vCardData.data.image&&e.vCardData.data.status===this.props.vCardData.data.status&&e.vCardData.data.nickName===this.props.vCardData.data.nickName&&(this.handleSetNickname(),this.handleSetStatus()))}},{key:"handleTrim",value:function(e,t){var a=document.getElementById(e).id,n=document.getElementById(e).value;a===e&&""===n.trim()&&this.setState(Object(s.a)({},t,!0))}},{key:"handleEdit",value:function(e){Object(x.a)()||(this.userNameCursorPostion=this.state.userName.length,this.setState({viewEdit:!1,viewTick:!1,charCount:!0,lastUserName:this.state.userName}))}},{key:"handleEditStatus",value:function(e){Object(x.a)()||(this.userStatusCursorPostion=this.state.userStatus.length,this.setState({viewEditStatus:!1,viewTickStatus:!1,charCountStatus:!0,lastUserStatus:this.state.userStatus}))}},{key:"handleEmoji",value:function(e){this.setState({viewEmoji:!this.state.viewEmoji})}},{key:"render",value:function(){var e=this,t=this.state,a=t.viewEditStatus,n=t.viewEdit,o=t.charCount,l=t.charCountStatus,i=t.userName,c=t.userStatus,s=t.viewTick,d=t.viewTickStatus;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile-details username",title:"Edit name"},r.a.createElement("i",{className:"status"},r.a.createElement(w.gd,null)),r.a.createElement("div",{className:"form-control"},!n&&r.a.createElement("input",{type:"text",autoComplete:"off",value:i,maxLength:this.findNegativeValue(i,E.L)>0?1e3:0,placeholder:"Username",id:"username",name:"userName",onChange:this.handleWordCount,autoFocus:!0,onMouseUp:function(t){e.userNameCursorPostion=t.target.selectionStart},onKeyUp:function(t){e.userNameCursorPostion=t.target.selectionStart},onBlur:function(t){e.userNameSelectedText=lt()}}),o&&r.a.createElement("span",{className:"char-count"},this.state.userNameChars),!n&&r.a.createElement("i",{className:"emoji"},r.a.createElement(et,{onEmojiClick:this.onEmojiClickUsername})),n&&r.a.createElement("h4",null,He()(i))),r.a.createElement("div",{className:"controls"},!s&&r.a.createElement("i",{className:"done",onClick:function(t){return e.handleVcardSaveUsername()}},r.a.createElement(w.X,null)),n&&r.a.createElement("i",{className:"edit",onClick:function(t){return e.handleEdit()}},r.a.createElement(w.cb,null)))),r.a.createElement("label",{className:""},E.bb),r.a.createElement("div",{className:"profile-details status",title:"Edit status"},r.a.createElement("i",{className:"status"},r.a.createElement(w.gd,null)),r.a.createElement("div",{className:"form-control"},!a&&r.a.createElement("input",{type:"text",value:c,autoComplete:"off",placeholder:"Status",id:"status",name:"userStatus",onChange:this.handleWordCountStatus,maxLength:this.findNegativeValue(c,E.Q)>0?1e3:0,autoFocus:!0,onMouseUp:function(t){e.userStatusCursorPostion=t.target.selectionStart},onKeyUp:function(t){e.userStatusCursorPostion=t.target.selectionStart},onBlur:function(t){e.userStatusSelectedText=lt()}}),l&&r.a.createElement("span",{className:"char-count"},this.state.statusChars),!a&&r.a.createElement("i",{className:"emoji"},r.a.createElement(et,{onEmojiClick:this.onEmojiClickStatus})),a&&r.a.createElement("h4",null,He()(c))),r.a.createElement("div",{className:"controls"},!d&&r.a.createElement("i",{className:"done",onClick:function(t){return e.handleVcardSaveStatus()}},r.a.createElement(w.X,null)),a&&r.a.createElement("i",{className:"edit",onClick:function(t){return e.handleEditStatus()}},r.a.createElement(w.cb,null)))),r.a.createElement("div",{className:"info"},r.a.createElement("i",null," ",r.a.createElement(w.dc,null)," "),r.a.createElement("span",null,E.ab))))}}]),a}(r.a.Component),jl=Object(o.b)((function(e,t){return{vCardData:e.vCardData}}),null)(Ol),Nl=new P.a,kl=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).cropImage=function(){ao.result({type:"base64",size:"original"}).then((function(e){var t=Object(x.j)(e,n.state.filename);n.setState({loaderIcon:!0},(function(){return n.handleSaveImage(t)}))}))},n.handleSaveImage=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n.state.vCardData,e.next=4,A.a.setUserProfile(a.nickName,t,a.status,a.mobileNumber,a.email);case 4:if(200!==(r=e.sent).statusCode&&(o=r.message,setTimeout((function(){navigator.onLine||(o=_.E),o&&ht.a.error(o)}),150)),200!==r.statusCode){e.next=13;break}return e.next=9,Object(x.l)(t);case 9:l=e.sent,n.setState({profileImg:URL.createObjectURL(l)}),Nl.setImage(r.fileToken,l,"profileimages"),ht.a.success(_.H);case 13:n.handleProfileCameraPopupClose(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),ht.a.error(e.t0.message),n.handleProfileCameraPopupClose();case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),n.updateProfileImage=function(e){ao&&ao.destroy(),e&&n.setState({filename:e.name,camImage:e,cameraPopup:!0},(function(){var t=document.getElementById("CameraContainer");ao=new mt.a(t,vt);var a=new FileReader;a.onload=function(e){ao.bind({url:e.target.result}).then((function(){Object.assign(document.querySelector(".cr-viewport").style,{width:"200px",height:"200px"}),ao.setZoom(0)}))},a.readAsDataURL(e)}))},n.handleViewProfile=function(){n.setState({viewProfileStatus:!0})},n.handleVCardClose=function(){n.setState({userNameChars:E.L-n.props.vCardData.data.nickName.length,statusChars:E.Q-n.props.vCardData.data.status.length,viewProfileStatus:!1,viewEmojiUsername:!1,userName:n.props.vCardData.data.nickName,userStatus:n.props.vCardData.data.status,viewEmojiStatus:!1,viewEdit:!0,viewEditStatus:!0,viewTick:!0,viewTickStatus:!0,charCount:!1,charCountStatus:!1,showImgDropDown:!1,showProfilePhotoRemove:!1})},n.removeProfileImage=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(x.a)()){e.next=2;break}return e.abrupt("return");case 2:return a=n.state.vCardData,e.next=5,A.a.setUserProfile(a.nickName,"",a.status,a.mobileNumber,a.email);case 5:200===(r=e.sent).statusCode?(n.setState({showImgDropDown:!1,openCropy:!1,showProfilePhotoRemove:!1}),ht.a.success("Profile picture removed successfully")):ht.a.error(r.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setWebcamImageVcard=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.size>0){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var a=t.result;n.setState({photoTaken:!0,camImageDisplay:a,camImage:e},(function(){return n.updateProfileImage(e)}))}}else n.setState({showProfileCamera:!0})},n.onCameraCheckVcard=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"NotAllowedError"===e.name?n.setState({onCameraPermissionDenied:!0}):"NotFoundError"===e.name&&n.setState({onCameraError:!0})},n.handleProfileImgDropDownVcard=function(e){n.setState({showImgDropDown:!n.state.showImgDropDown,openCropy:!0})},n.handleProfileImageShow=function(e){n.setState({showProfileImg:!0,showImgDropDown:!1,openCropy:!1})},n.handleProfileImgClose=function(e){n.setState({showProfileImg:!1})},n.handleProfileCameraShow=function(e,t){"reset"!==t&&Object(x.a)()||n.setState({showProfileCamera:!0,showImgDropDown:!1,openCropy:!1,photoTaken:!1,cameraLoader:!0})},n.handleProfilePhotoRemoveShow=function(e){Object(x.a)()||n.setState({showProfilePhotoRemove:!0,showImgDropDown:!1,openCropy:!1})},n.handleProfileRemovephotoClose=function(e){n.setState({showProfilePhotoRemove:!1})},n.handleProfileCameraClose=function(e){n.handleProfileCameraPopupClose()},n.handleProfileCameraPopupClose=function(){n.setState({showProfileCamera:!1,photoTaken:!0,onCameraError:!1,onCameraPermissionDenied:!1,loaderIcon:!1,cameraPopup:!1,showImgDropDown:!1,openCropy:!1})},n.checkNotFound=function(e){e.target.src=w.Rc},n.closeDropDown=function(){n.setState({showImgDropDown:!1})},n.WebChatCroppieLoad=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.a.createElement(gt,{type:E.t,loader:e,cameraPopup:t,cropImage:n.cropImage,closeDropDown:n.closeDropDown,updateProfileImage:n.updateProfileImage,closePopUp:n.handleProfileCameraPopupClose})},n.state={vCardData:"",viewProfileStatus:!1,profileImg:"",showImgDropDown:!1,showProfileImg:!1,profileCamera:!1,showProfileCamera:!1,photoTaken:!1,camImage:"",cameraLoader:!1,onCameraError:!1,onCameraPermissionDenied:!1,filename:"image",loaderIcon:!1,cameraPopup:!1,openCropy:!1},n.localDb=new P.a,n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){(this.props.vCardData&&this.props.vCardData.id||0!==this.state.vCardData.length)&&(this.setState({vCardData:this.props.vCardData.data}),this.handleProfileImg(this.props))}},{key:"componentDidUpdate",value:function(e,t){e.vCardData&&e.vCardData.id!==this.props.vCardData.id&&(this.setState({vCardData:this.props.vCardData.data}),this.handleProfileImg(this.props))}},{key:"handleProfileImg",value:function(e){var t=this,a=Object(le.e)("token");e.vCardData.data.image&&a?this.localDb.getImageByKey(e.vCardData.data.image,"profileimages").then((function(e){var a=window.URL.createObjectURL(e);t.setState({profileImg:a})})).catch((function(e){t.setState({profileImg:w.Rc})})):this.setState({profileImg:w.Rc,showProfileImg:!1})}},{key:"handleCropImage",value:function(){var e=this;this.setState({loaderIcon:!0},(function(){return e.cropImage()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.viewProfileStatus,o=t.profileImg,l=t.showImgDropDown,i=t.showProfileImg,c=t.showProfileCamera,s=t.showProfilePhotoRemove,d=t.photoTaken,u=t.onCameraError,m=t.loaderIcon,p=t.cameraPopup,h=t.openCropy,v=void 0!==h&&h,f=t.onCameraPermissionDenied,g=this.props.vCardData;return r.a.createElement(n.Fragment,null,g&&g.data&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profile-img-name",onClick:function(t){return e.handleViewProfile(t)}},r.a.createElement("div",{className:"image"},r.a.createElement(fe.a,{chatType:"chat",imageToken:g.data.image,temporary:!0,name:g.data.nickName})),r.a.createElement("span",{title:He()(g.data.nickName)},He()(g.data.nickName))),a&&r.a.createElement("div",{className:"userprofile"},r.a.createElement(qe.a,{onOutsideClick:function(){e.setState({viewProfileStatus:!1})}},r.a.createElement("div",{className:"userprofile-popup"},r.a.createElement("div",{className:"userprofile-header"},r.a.createElement("i",{onClick:function(t){return e.handleVCardClose(t)}},r.a.createElement(w.N,null)),r.a.createElement("h5",null,"Profile")),r.a.createElement("div",{className:"userprofile-body"},r.a.createElement("div",{className:"userprofile-image"},r.a.createElement(qe.a,{onOutsideClick:function(){e.setState({showImgDropDown:!1,openCropy:!1})}},r.a.createElement(fe.a,{chatType:"chat",imageToken:g.data.image,temporary:!0,name:g.data.nickName,profileImageView:function(t){return o!==w.Rc?e.handleProfileImageShow(t):null}}),r.a.createElement("i",{className:"camera-edit",onClick:function(t){return e.handleProfileImgDropDownVcard(t)}},r.a.createElement(w.db,null)),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"profile-dropdown"},o&&r.a.createElement(r.a.Fragment,null,o!==w.Rc&&r.a.createElement("li",{title:E.Z,onClick:function(t){return e.handleProfileImageShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.Bd,null)),r.a.createElement("span",null,E.Z)),r.a.createElement("li",{title:E.X,onClick:function(t){return e.handleProfileCameraShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.id,null)),r.a.createElement("span",null,E.X)),o!==w.Rc&&r.a.createElement("li",{title:E.U,onClick:function(t){return e.handleProfilePhotoRemoveShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.Lc,null)),r.a.createElement("span",null,E.U)),r.a.createElement("li",{className:"upload_photo",title:E.Y},r.a.createElement("label",{className:"UploadLabel",htmlFor:"ProfileUpload"}),r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.td,null)),r.a.createElement("span",{className:"uploadphoto"},r.a.createElement("span",null,E.Y)))),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{title:E.X,onClick:function(t){return e.handleProfileCameraShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.id,null)),r.a.createElement("span",null,E.X)),r.a.createElement("li",{title:E.Y},r.a.createElement("label",{className:"UploadLabel",htmlFor:"ProfileUpload"}),r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.td,null)),r.a.createElement("span",{className:"uploadphoto"},r.a.createElement("span",null,E.Y)))))),r.a.createElement(r.a.Fragment,null,v&&r.a.createElement(r.a.Fragment,null,this.WebChatCroppieLoad(m,p))),i&&r.a.createElement("div",{className:"Viewphoto-container"},r.a.createElement("div",{className:"Viewphoto-preview"},r.a.createElement("img",{src:o,alt:"vcard-profile"}),r.a.createElement("i",{className:"preview-close",onClick:function(t){return e.handleProfileImgClose(t)}},r.a.createElement(w.N,null)))),c&&r.a.createElement("div",{className:"camera-container"},u&&r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.e),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.d),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",className:"btn-okay",onClick:function(t){return e.handleProfileCameraClose(t)},name:"btn-cancel"},"Okay"))),f&&r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.s),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.f),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",className:"btn-okay",onClick:function(t){return e.handleProfileCameraClose(t)},name:"btn-cancel"},"Okay"))),!u&&!f&&r.a.createElement("div",{className:"camera-popup-visible"},r.a.createElement("div",{className:"userprofile-header"},r.a.createElement("i",{onClick:function(t){return e.handleProfileCameraClose(t)}},r.a.createElement(w.N,null)),d?r.a.createElement("h5",null,E.i):r.a.createElement("h5",null,E.X)),r.a.createElement("div",{className:"cameraview"},d&&r.a.createElement("div",{id:"CameraContainer"}),!d&&r.a.createElement(Ct,{sendFile:this.setWebcamImageVcard,onCameraCheck:this.onCameraCheckVcard})),d&&r.a.createElement("div",{className:"popup-controls"},!this.state.loaderIcon&&r.a.createElement("i",{title:"Re capture"}," ",r.a.createElement(w.Nc,{onClick:function(t){return e.handleProfileCameraShow(t,"reset")}})),this.state.loaderIcon?r.a.createElement("img",{src:w.Md,alt:"loader"}):r.a.createElement("i",{title:"Update Profile",onClick:function(t){return e.handleCropImage()}},r.a.createElement(w.jd,null))))),s&&r.a.createElement("div",{className:"removephoto-container"},r.a.createElement("div",{className:"removephoto-popup"},r.a.createElement("div",{className:"removephoto-label"},r.a.createElement("label",null,E.V)),r.a.createElement("div",{className:"removephoto-noteinfo"},r.a.createElement("button",{type:"button",className:"btn-cancel",onClick:function(t){return e.handleProfileRemovephotoClose(t)},name:"btn-cancel"},E.g),r.a.createElement("button",{type:"button",className:"btn-removephoto",onClick:function(t){return e.removeProfileImage(t)},name:"btn-remove"},E.T)))))),r.a.createElement(jl,null)))))))}}]),a}(r.a.Component),Sl=Object(o.b)((function(e,t){return{vCardData:e.vCardData}}),null)(kl),wl=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClosePopup=function(){var t=e.props.popUpData.modalProps,a=t.statusCode,n=t.action;100608!==a&&100606!==a||"subscribeCall"!==(void 0===n?"":n)||c.a.dispatch(Object(C.g)()),e.props.closePopup()},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.popUpData.modalProps,t=e.statusCode,a=e.action,n="";n=100608===t?"Camera and Microphone access required to continue video call, please enable and try again!":100606===t?"Microphone access required to continue the audio call, please enable and try again!":100607===t?"Camera access required to share the video, please enable and try again!":"Seems like you have a problem with your microphone, please check and try again!";var o=!1;return 100607===t&&"subscribeCall"===(void 0===a?"":a)&&(o=!0),r.a.createElement("div",{className:"popup-wrapper action-permission"},r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-container-header"}),r.a.createElement("div",{className:"popup-body"},r.a.createElement("div",{className:"popup-label"},r.a.createElement("div",{className:"label"},n))),r.a.createElement("div",{className:"popup-noteinfo"},r.a.createElement("button",{onClick:this.handleClosePopup,type:"button",className:"btn-cancel"},"Close"),o&&r.a.createElement("button",{onClick:this.props.closePopup,type:"button",className:"btn-ok"},"Ok")))))}}]),a}(n.Component),Dl={closePopup:X.a},Ml=Object(o.b)((function(e,t){return{popUpData:e.popUpData}}),Dl)(wl),Il=null,Tl=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;if(Object(h.a)(this,a),(n=t.call(this,e)).handleAction=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return c.a.dispatch(Object(C.b)()),e.abrupt("return");case 3:if(a=null,t!==Q.b){e.next=11;break}return e.next=7,A.a.acceptVideoCallSwitchRequest();case 7:a=e.sent,n.props.resetCallConversionRequestData(),e.next=21;break;case 11:if(t!==Q.f){e.next=17;break}return e.next=14,A.a.requestVideoCallSwitch();case 14:a=e.sent,e.next=21;break;case 17:if(t!==Q.g){e.next=21;break}return e.next=20,A.a.requestVideoCallSwitch();case 20:a=e.sent;case 21:if(!a||500!==a.statusCode){e.next=30;break}if(c.a.dispatch(Object(C.b)({status:Q.c})),t!==Q.b){e.next=26;break}return e.next=26,A.a.declineVideoCallSwitchRequest();case 26:return c.a.dispatch(Object(X.b)({open:!0,modelType:"mediaPermissionDenied",statusCode:100607})),r=c.a.getState().showConfrenceData.data,o=void 0===r?{}:r,c.a.dispatch(Object(C.k)(Object(d.a)(Object(d.a)({},o),{},{videoPermissionDisabled:!0}))),e.abrupt("return");case 30:if(c.a.dispatch(Object(C.b)({status:t})),t===Q.g&&(l=20,clearInterval(Il),Il=setInterval(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==l){e.next=9;break}return clearInterval(Il),c.a.dispatch(Object(C.b)({status:Q.c})),e.next=5,A.a.cancelVideoCallSwitchRequest();case 5:n.props.resetCallConversionRequestData(),re.b.error("No response from ".concat(n.fromUserName)),e.next=10;break;case 9:l-=1;case 10:case"end":return e.stop()}}),e)}))),1e3)),t!==Q.d){e.next=36;break}return clearInterval(Il),e.next=36,A.a.declineVideoCallSwitchRequest();case 36:if(t!==Q.c){e.next=41;break}return clearInterval(Il),n.props.resetCallConversionRequestData(),e.next=41,A.a.cancelVideoCallSwitchRequest();case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.fromUserName=null,e.fromUserJid){var r=e.fromUserJid,o=Object(V.j)(r);n.fromUserName=o&&(o.displayName||o.name)||Object(x.v)(r)}return n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){var t=e.callConversionData,a=this.props.callConversionData;t&&a&&t.status!==a.status&&[Q.d,Q.c,Q.b].indexOf(a.status)>-1&&(t.status===Q.g&&a.status===Q.d&&(re.b.error("Request declined"),this.props.resetCallConversionRequestData()),clearInterval(Il),c.a.dispatch(Object(C.b)()))}},{key:"componentWillUnmount",value:function(){clearInterval(Il)}},{key:"render",value:function(){var e=this,t=this.props.callConversionData.status;if(!t)return null;var a=null,n=null,o=null,l=null,i=null;return t===Q.f?(a="Are you sure you want to switch to Video call?",n="CANCEL",o="SWITCH",i=Q.g):t===Q.g?(a="Requesting to switch to video call.",n="CANCEL",l=Q.c,this.props.remoteUserRequestingCallSwitch&&this.handleAction(Q.b)):t===Q.e?(a="".concat(this.fromUserName," Requesting to switch to video call"),n="DECLINE",l=Q.d,o="ACCEPT",i=Q.b,this.props.currentUserRequestingCallSwitch&&this.handleAction(Q.b)):t===Q.b&&this.props.resetCallConversionRequestData(),a?r.a.createElement("div",{className:"popup-wrapper call-conversion-popup"},r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"popup-container-inner"},r.a.createElement("div",{className:"popup-label"},r.a.createElement("label",null,a)),r.a.createElement("div",{className:"popup-noteinfo"},n&&r.a.createElement("button",{type:"button",onClick:function(){return e.handleAction(l)},className:"btn-cancel"},n),o&&r.a.createElement("button",{type:"button",onClick:function(){return e.handleAction(i)},className:"btn-active"},o))))):null}}]),a}(n.Component),Pl=Object(o.b)((function(e,t){var a,n=((null===e||void 0===e||null===(a=e.showConfrenceData)||void 0===a?void 0:a.data)||{}).remoteStream,r=Object(V.h)(),o="";return n&&n.length>0&&n.map((function(e){var t=e.fromJid;(t=t.includes("@")?t.split("@")[0]:t)!==r.fromUser&&(o=e.fromJid)})),{fromUserJid:o,rosterData:e.rosterData}}),null)(Tl),Al=a(98),Ll=function(e){return{type:j.gc,payload:{id:O()(),data:e}}},xl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,a=void 0===t?"":t,n=e.handleCancel,o=e.handleAction,l=e.handleActionText,i=void 0===l?"Ok":l,c=e.handleCancelText,s=void 0===c?"Cancel":c;return r.a.createElement("div",{className:"userprofile"},r.a.createElement("div",{className:"logout-popup lg"},r.a.createElement("div",{className:"logout-label"},r.a.createElement("h5",null,"You're already in a call"),r.a.createElement("label",null,a)),r.a.createElement("div",{className:"logout-noteinfo"},r.a.createElement("button",{type:"button",name:"btn-cancel",className:"btn-cancel",onClick:n},s),r.a.createElement("button",{type:"button",name:"btn-logout",className:"btn-logout",onClick:o},i))))},Ul=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleLogutStatus=function(e){n.setState({popupStatus:e,menuDropDownStatus:!1})},n.handleMenuDrop=function(e){n.setState({menuDropDownStatus:!n.state.menuDropDownStatus})},n.outsidePopupClick=function(e){n.props.popUpData.modalProps.open||n.setState({menuDropDownStatus:!1,popupStatus:!1})},n.handleNewChat=function(){0!==n.props.contactPermission?(Tn.getUsersListFromSDK(1),n.setState({newChatStatus:!1})):n.props.handleContactPermissionPopup(!0,Le.T)},n.handleCallLogs=function(){n.setState({newChatStatus:!1}),n.setState({callLogs:!0}),c.a.dispatch(Object(Al.a)(!0)),Z.a.getCallLogsFromServer(1)},n.handleBackStatus=function(e){n.props.handlePopupState(e);n.setState({newChatStatus:e},(function(){n.props.handleConversationSectionDisplay("block")}))},n.handleDropdownStatus=function(e){n.setState({menuDropDownStatus:!n.state.menuDropDownStatu})},n.handleCreateNewGroup=function(){0!==n.props.contactPermission?n.setState({newGroupParticipants:!0},(function(){n.setState({menuDropDownStatus:!1})})):n.props.handleContactPermissionPopup(!0,Le.U)},n.handleArchivedChatList=function(){n.setState({archivedChatList:!0,menuDropDownStatus:!1},(function(){setTimeout((function(){c.a.dispatch(Ll({isArchived:!0}))}),1e3)}))},n.handleBackToRecentChat=function(){n.setState({newGroupParticipants:!1,archivedChatList:!1},(function(){c.a.dispatch(Ll({isArchived:!1}))}))},n.handleBackToArchivedList=function(){n.setState({archivedSetting:!1,archivedChatList:!0})},n.handleBackToGroupParticipants=function(){n.setState({newGroupParticipants:!0})},n.handleSetting=function(){n.setState({settingStatus:!0})},n.handleBackFromSetting=function(){n.setState({settingStatus:!1})},n.handleBackFromCallLogs=function(e){n.setState({newChatStatus:e}),n.setState({callLogs:!1})},n._sideMenuPop=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.a,{onOutsideClick:function(){return n.outsidePopupClick()}},n.state.menuDropDownStatus&&r.a.createElement("ul",{className:"menu-dropdown"},r.a.createElement("li",{title:"New Group",onClick:n.handleCreateNewGroup},r.a.createElement("i",null,r.a.createElement(w.nc,null)),r.a.createElement("span",null,"New Group")),r.a.createElement("li",{title:"Settings",onClick:n.handleSetting},r.a.createElement("i",null,r.a.createElement(w.Yc,null)),r.a.createElement("span",null,"Settings")),r.a.createElement(Yr,{history:n.props.history,logoutStatus:n.handleLogutStatus,handleDropdownStatus:n.handleDropdownStatus}))))},n.browserNotifyRedirect=function(e){var t=e.browserNotifyData,a=n.props.browserNotifyData;a.pageName&&t.pageName!==a.pageName&&"calllog"===a.pageName&&n.handleCallLogs()},n.componentDidUpdate=function(e){n.browserNotifyRedirect(e)},n.resetCallConversionRequestData=function(){n.currentUserRequestingCallSwitch=!1,n.remoteUserRequestingCallSwitch=!1},n.renderRecentChat=function(e){return r.a.createElement(Mo,{pageType:e,handleConversationSectionDisplay:n.props.handleConversationSectionDisplay,handleBackStatus:n.handleBackStatus,callUserJID:n.props.callUserJID,callStatus:n.props.callStatus,newChatStatus:n.state.newChatStatus,handleShowCallScreen:n.props.handleShowCallScreen,callType:n.props.callType,callMode:n.props.callMode,handlePopupState:n.props.handlePopupState,handleArchivedChatList:n.handleArchivedChatList})},n.closeModel=function(e){c.a.dispatch(Object(X.b)({open:!1,modelType:e}))},n.handleJoinCallAction=function(){var e,t;Object(le.c)("isNewCallExist",!0),Object($.b)(),c.a.dispatch(Object(C.h)()),n.closeModel("CallConfirm");var a=null===(e=n.props.popUpData)||void 0===e||null===(t=e.modalProps)||void 0===t?void 0:t.newCallLink;setTimeout((function(){c.a.dispatch(Object(C.d)({show:!0,link:a}))}),10)},n.handleCancel=function(){n.closeModel("CallConfirm")},n.currentUserRequestingCallSwitch=!1,n.remoteUserRequestingCallSwitch=!1,n.state={menuDropDownStatus:!1,popupStatus:!1,newChatStatus:!0,newChatStatusLevel:"",newGroupParticipants:!1,archivedChatList:!1,menuSetGroupImage:!1,chatLogs:!1,handleBackStatus:!1,callLogs:!1,settingStatus:!1,archivedSetting:!1,callLogCount:1},n}return Object(v.a)(a,[{key:"handleOnBack",value:function(){this.setState({chatLogs:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.menuDropDownStatus,n=t.popupStatus,o=t.newChatStatus,l=t.newGroupParticipants,i=t.settingStatus,c=t.callLogs,s=t.archivedChatList,d=t.callLogCount,u=this.props,m=u.vCardData,p=u.popUpData.modalProps,h=p.open,v=p.modelType,f=u.callConversionData;return f&&f.status&&(f.status===Q.b?(!0===this.remoteUserRequestingCallSwitch&&!0===this.currentUserRequestingCallSwitch&&(this.currentUserRequestingCallSwitch=!1),this.remoteUserRequestingCallSwitch=!1):f.status===Q.g?this.currentUserRequestingCallSwitch=!0:f.status===Q.e?this.remoteUserRequestingCallSwitch=!0:(f.status===Q.c||f.status===Q.d)&&this.resetCallConversionRequestData()),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"recent-chatlist"},r.a.createElement(qe.a,{onOutsideClick:function(){return e.outsidePopupClick()}},o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"recent-chatlist-header"},r.a.createElement(Sl,null),r.a.createElement("div",{className:"profile-options"},r.a.createElement("i",{className:"callLogs",onClick:this.handleCallLogs,title:"Call logs"},d?r.a.createElement("div",{className:"callLogCount"},r.a.createElement(w.v,null),r.a.createElement("span",{style:{display:"none"}},d)):r.a.createElement(w.v,null)),r.a.createElement("i",{className:"newchat-icon",onClick:this.handleNewChat,title:"New chat"},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(w.mc,null)),r.a.createElement("i",{className:this.state.menuDropDownStatus?"menu-icon open":"menu-icon",onClick:this.handleMenuDrop,title:"More options"},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(w.Y,null))),a?r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.a,{onOutsideClick:function(){return e.outsidePopupClick()}},r.a.createElement("ul",{className:"menu-dropdown open"},r.a.createElement("li",{title:"New Group",onClick:this.handleCreateNewGroup},r.a.createElement("i",null,r.a.createElement(w.nc,null)),r.a.createElement("span",null,"New Group")),!this.props.isEnableArchived&&r.a.createElement("li",{title:"Archived Chats",onClick:this.handleArchivedChatList},r.a.createElement("i",null,r.a.createElement(za,{style:{color:"#6a92c5",fill:"#6a92c5"}})),r.a.createElement("span",null,"Archived")),r.a.createElement("li",{title:"Settings",onClick:this.handleSetting},r.a.createElement("i",null,r.a.createElement(w.Yc,null)),r.a.createElement("span",null,"Settings")),r.a.createElement(Yr,{history:this.props.history,logoutStatus:this.handleLogutStatus,handleDropdownStatus:this.handleDropdownStatus})))):null),n&&r.a.createElement(Zr,{history:this.props.history,logoutStatus:this.handleLogutStatus})),this.renderRecentChat("recent"),!o&&r.a.createElement(yl,{newChatStatus:o,handleBackStatus:this.handleBackStatus})),l&&r.a.createElement(so,{vCardData:m,handleBackToRecentChat:this.handleBackToRecentChat}),s&&r.a.createElement("div",{className:"contactlist"},r.a.createElement("div",{className:"recent-chatlist-header"},r.a.createElement("div",{className:"profile-img-name"},r.a.createElement("i",{className:"newchat-icon",onClick:this.handleBackToRecentChat,title:"Back"},r.a.createElement(w.b,null)),r.a.createElement("span",null,"Archived"))),this.renderRecentChat("archive")),c&&r.a.createElement(qo,{handleBackStatus:this.handleBackFromCallLogs,handleContactPermissionPopup:this.props.handleContactPermissionPopup}),i&&r.a.createElement(gl,{handleBackFromSetting:this.handleBackFromSetting,logoutStatus:this.handleLogutStatus})),h&&"action"===v&&r.a.createElement(Xr,this.props.popUpData),h&&"participants"===v&&r.a.createElement(oo,null),h&&["callparticipants","inviteParticipants","calllogparticipants"].indexOf(v)>-1&&r.a.createElement(xo,null),h&&["mediaPermissionDenied","mediaAccessError"].indexOf(v)>-1&&r.a.createElement(Ml,null),f.status&&r.a.createElement(Pl,{callConversionData:f,resetCallConversionRequestData:this.resetCallConversionRequestData,currentUserRequestingCallSwitch:this.currentUserRequestingCallSwitch,remoteUserRequestingCallSwitch:this.remoteUserRequestingCallSwitch}),h&&"CallConfirm"===v&&r.a.createElement(ze,{containerId:"container"},r.a.createElement(xl,{handleActionText:"Ok",handleCancelText:"Cancel",handleAction:function(){return e.handleJoinCallAction()},handleCancel:function(){return e.handleCancel()},text:"Do you want to leave your call to join this one?"})))}}]),a}(r.a.Component),Rl=Object(o.b)((function(e){var t,a;return{popUpData:e.popUpData,vCardData:e.vCardData,callConversionData:e.callConversionData,browserNotifyData:e.browserNotifyData,isEnableArchived:null===e||void 0===e||null===(t=e.webLocalStorageSetting)||void 0===t?void 0:t.isEnableArchived,contactPermission:null===e||void 0===e||null===(a=e.contactPermission)||void 0===a?void 0:a.data}}),null)(Ul),Fl=(a(720),a(721),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return!!(this.props.showConfrenceDataId!==e.showConfrenceDataId||this.props.stream&&e.stream&&this.props.stream.id!==e.stream.id||this.props.stream&&e.stream&&this.props.stream.video!==e.stream.video||this.props.rosterData.image!==e.rosterData.image||e.videoMuted!==this.props.videoMuted||e.audioMuted!==this.props.audioMuted||e.volumeLevel!==this.props.volumeLevel||e.showVoiceDetect!==this.props.showVoiceDetect||e.remoteStreamLength!==this.props.remoteStreamLength||e.callStatus!==this.props.callStatus||e.pinUserJid!==this.props.pinUserJid||e.setPinUser!==this.props.setPinUser||e.jid!==this.props.jid)}},{key:"render",value:function(){var e=this.props,t=e.audioMuted,a=e.videoMuted,n=e.rosterData,o=e.stream,l=e.volumeLevel,i=e.showVoiceDetect,c=e.inverse,s=Object(le.e)("token"),d=Object(V.m)(n,n.initialName);return r.a.createElement(r.a.Fragment,null,!a&&this.props.callStatus&&(this.props.callStatus.toLowerCase()===Q.o||this.props.callStatus.toLowerCase()===Q.t)&&o&&o.video&&r.a.createElement("div",{className:"VideoWrapper"},r.a.createElement("div",{className:"VideoWrapperInner"},r.a.createElement("div",{className:"participantCallStatus video"},this.props.setPinUser&&this.props.jid===this.props.pinUserJid&&r.a.createElement("i",{className:"pinned"},r.a.createElement(w.Mb,null)),"                        ",r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("i",{title:"Participant is muted",className:"AudioOffRemote"},r.a.createElement(w.l,null)),!t&&r.a.createElement("div",{className:"audio_indication left height_adjust transistion_adjust ".concat(Object($.g)(60))},r.a.createElement("div",{className:"audio_indicator audio_indicator_1"}),r.a.createElement("div",{className:"audio_indicator audio_indicator_2"}),r.a.createElement("div",{className:"audio_indicator audio_indicator_3"})))),r.a.createElement(Ee,{stream:o.video,muted:!1,id:o.video.id,inverse:c}),r.a.createElement("div",{onClick:this.props.handleVideoFullView,className:"VideofullView"},r.a.createElement("i",null,r.a.createElement(w.ab,null)," "))),r.a.createElement("span",{className:"ParticipantInfo lg"},n.displayName||n.nickName)),(a||!o||!o.video||this.props.callStatus&&this.props.callStatus.toLowerCase()!==Q.o&&this.props.callStatus.toLowerCase()!==Q.t)&&r.a.createElement("div",{className:"avatar-wrapper"},r.a.createElement("div",{className:"participantCallStatus audio"},a&&r.a.createElement("i",{title:"Participant has stopped the camera",className:"videoOffRemote"},r.a.createElement(w.zd,null)),t&&r.a.createElement("i",{title:"Participant is muted",className:"AudioOffRemote"},r.a.createElement(w.l,null)),!t&&r.a.createElement("div",{className:"audio_indication left height_adjust transistion_adjust ".concat(Object($.g)(60))},r.a.createElement("div",{className:"audio_indicator audio_indicator_1"}),r.a.createElement("div",{className:"audio_indicator audio_indicator_2"}),r.a.createElement("div",{className:"audio_indicator audio_indicator_3"})),this.props.setPinUser&&this.props.jid===this.props.pinUserJid&&r.a.createElement("i",{className:"pinned"},r.a.createElement(w.Mb,null))),r.a.createElement("div",{className:"avatar",id:"dominantSpeakerAvatar"},r.a.createElement("div",{className:"avatar-info "+(i?" v-detect":"")},r.a.createElement("span",{style:{transform:"scale("+l+")"},className:"voice"}),r.a.createElement(fe.a,{name:d,chatType:"chat",userToken:s,temporary:!1,imageToken:n.image}))),r.a.createElement("div",{onClick:this.props.handleVideoFullView,className:"VideofullView"},r.a.createElement("i",null,r.a.createElement(w.ab,null)," ")),r.a.createElement("span",{className:"ParticipantInfo lg"},n.displayName||n.nickName)))}}]),a}(r.a.Component)),Bl=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).getGroupMembers=function(e){var t=n.props.rosterData,a=(t=void 0===t?{}:t).data,r=void 0===a?[]:a;return e&&(Object(B.P)(e,r)||[])},n.openInvitePopup=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l,i,c,s,d,u,p,h,v,f,g,b,E,C;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.invite,r=n.props.invite,o=n.props||{},l=o.groupsMemberParticipantsListData,r&&(r!==a||!t.rosterData||t.rosterData.id!==n.props.rosterData.id||l!==t.groupsMemberParticipantsListData)){e.next=5;break}return e.abrupt("return");case 5:n.callConnectionData=JSON.parse(Object(le.e)("call_connection_status")),n.currentCallUsers=[],n.currentCallUsersArray=[],n.groupId="",i=null,c=null,s=n.callConnectionData.callMode,d=[],"",u=n.props.rosterData,p=(u=void 0===u?{}:u).data,h=void 0===p?[]:p,n.currentCallUsers=n.props.remoteStream.filter((function(e){var t,a,r,o=Object(Qn.d)(e.fromJid);if((null===(t=n.props)||void 0===t||null===(a=t.vCardData)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.fromUser)!==o)return o})),n.currentCallUsersArray=n.props.remoteStream.map((function(e){return Object(Qn.d)(e.fromJid)})),"onetomany"===s&&n.callConnectionData.groupId&&null!==n.callConnectionData.groupId&&""!==n.callConnectionData.groupId?("All members of the group are already in the call.",n.groupId=n.callConnectionData.groupId||n.callConnectionData.to,v=n.props||{},f=v.groupsMemberParticipantsListData,g=(f=void 0===f?{}:f).groupParticipants,(b=(void 0===g?{}:g)[n.groupId])&&b.length>0&&(d=n.getGroupMembers(b)),c=n.getGroupDetails(n.groupId.includes("@")?n.groupId.split("@")[0]:n.groupId),i=c.displayName):(d=h,"All the users of your contacts already in call."),E=[],C=[],null!==d&&d.map((function(e){var t,a,r,o={},l=e.userJid||e.GroupUser||e.username,i=l.includes("@")?l.split("@")[0]:l;i!==(null===(t=n.props)||void 0===t||null===(a=t.vCardData)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.fromUser)&&-1===n.currentCallUsersArray.indexOf(i)&&(e.isFriend||n.groupId)&&(o={userJid:l},E.push(l),C.push(o))})),!1,E.length,e.next=27;break;case 27:n.props.invitePopup({open:!0,modelType:"inviteParticipants",groupName:i,groupMembers:E,groupuniqueId:n.groupId,groupMemberDetails:C,makeGroupCall:n.invite,callType:n.callConnectionData.callType,currentCallUsersLength:n.currentCallUsers.length,closePopup:n.props.closePopup,currentCallUsers:n.currentCallUsersArray});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.invite=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,o,l,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"!==Object(le.e)("connection_status")){e.next=8;break}if(!((r=a).length>0)){e.next=8;break}return e.next=6,A.a.inviteUsers(r);case 6:200===(o=e.sent).statusCode?(l=c.a.getState().showConfrenceData,i=l.data,c.a.dispatch(Object(C.k)(Object(d.a)(Object(d.a)({},i||{}),{},{status:"REMOTESTREAM",remoteStream:Object(ne.b)()}))),Object($.j)(),Z.a.update(n.callConnectionData.roomId,{userList:r.join(",")})):re.b.error(o.message);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.callConnectionData={},n.currentCallUsers=[],n.groupId="",n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){this.openInvitePopup(e)}},{key:"getGroupDetails",value:function(e){var t,a={};return(null===(t=this.props.groupsData)||void 0===t?void 0:t.data).map((function(t){var n=t.groupId;return n===e&&(a.displayName=t.groupName,a.image=t.groupImage,a.jid=n,a.chatType="groupchat",a)})),a}},{key:"render",value:function(){return null}}]),a}(r.a.Component),_l={invitePopup:X.b},Vl=Object(o.b)((function(e){return{rosterData:e.rosterData,vCardData:e.vCardData,groupsData:e.groupsData,groupsMemberParticipantsListData:e.groupsMemberParticipantsListData}}),_l)(Bl),Gl=(a(722),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.videoMuted!==this.props.videoMuted||e.audioMuted!==this.props.audioMuted||e.name!==this.props.name||e.imageUrl!==this.props.imageUrl||e.userStatus!==this.props.userStatus}},{key:"render",value:function(){var e,t=this.props.userStatus,a=Object(le.e)("token"),n="";t&&t.toLowerCase()!==Q.q&&(n=t.toLowerCase()===Q.m?Q.a:t.toLowerCase()===Q.s?Q.h:t.toLowerCase()===Q.t?Q.i:Object(x.e)(t.toLowerCase()));return r.a.createElement("li",{key:null===(e=this.props.roster)||void 0===e?void 0:e.userId},r.a.createElement("div",null,r.a.createElement(fe.a,{name:this.props.initialName,chatType:"chat",userToken:a,temporary:!1,imageToken:this.props.imageUrl}),r.a.createElement("span",{className:"name"},this.props.name),"CONNECTED"===t?r.a.createElement("div",{className:"callStatusIcon"},r.a.createElement("i",{className:this.props.audioMuted?"audio mute":"audio"},this.props.audioMuted?r.a.createElement(w.l,null):r.a.createElement(w.m,null)),r.a.createElement("i",{className:this.props.videoMuted?"video mute":"video"},this.props.videoMuted?r.a.createElement(w.zd,null):r.a.createElement(w.Ad,null))):r.a.createElement("div",{className:"callStatusText"},n,function(e){var t=e&&e.toLowerCase();return t===Q.v||t===Q.p||t===Q.u||t===Q.n}(t)&&r.a.createElement("div",{className:"callingAnimation"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})))))}}]),a}(r.a.Component)),Hl=[],Jl=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleGridDimensions=function(){var e,t,a=document.querySelectorAll('[data-overlap-id="call-thumbnail-view"]'),r=a.length>0&&window.getComputedStyle(a[0],null).getPropertyValue("height");r=r&&r.replace("px","");var o=Object(x.y)(r,null===(e=n.props)||void 0===e||null===(t=e.remoteStream)||void 0===t?void 0:t.length),l=o.width,i=o.height;n.setState({tileViewStyle:{margin:"5px",width:"calc(".concat(l,"% - 10px)"),height:"calc(".concat(i,"px - 0px)")}})},n.updateWindowDimensions=function(e){n.state.tileView&&n.handleGridDimensions()},n.playReconnectingSound=function(){n.playAudio()},n.startTimer=function(){clearTimeout(n.visibleStateTimer),n.visibleStateTimer=setTimeout((function(){n.setState({visible:!1})}),5e3)},n.handleInvitePeople=function(){var e=n.getCallStatus();!e||e.toLowerCase()!==Q.o&&e.toLowerCase()!==Q.t||n.setState({invite:!n.state.invite})},n.handleParticipantListPopup=function(e){e.preventDefault(),n.setState({participantListPopup:!n.state.participantListPopup})},n.handleListPopupClose=function(){n.setState({participantListPopup:!1})},n.handleCloseInvitePeople=function(){n.setState({invite:!1}),c.a.dispatch(Object(X.a)())},n.handleHangUp=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.endCall();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleTileView=function(){n.setState((function(e){return{tileView:!e.tileView}}))},n.handleVideoFullView=function(){n.setState((function(e){return{fullView:!e.fullView}}))},n.endCall=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopAudio(),Object($.b)();case 2:case"end":return e.stop()}}),e)}))),n.renderStream=function(e){if(n.props.localStream&&n.props.remoteStream.length>1){Hl=Object(D.a)(n.props.remoteStream);var t=n.props.largeVideoUserJid;Object(le.a)("connecting");var a=0,o=Hl.length>2?"onetomany":"onetoone";return t&&Hl.length>2&&Hl.map((function(e,n){t===e.fromJid&&(a=n)})),n.renderVideoCallUI(o,e,a)}return r.a.createElement(r.a.Fragment,null)},n.renderVideoCallUI=function(e,t,a){var o=n.props.remoteAudioMuted,l=n.props.remoteVideoMuted,i=n.props.volumeLevel,c=n.props.volumeLevelVideo,s=n.props.showVoiceDetect,u=Object(d.a)({},n.props.vCardData.data),m=n.isThumbnailViewOverlap(),p="RemoteVideo-wrapper";n.state.visible&&(p="".concat(p," visible"),p=m?"".concat(p," top"):p);var h=null,v=null,f=null,g=!1,b=null,E=Hl.length>2;if("onetoone"===e)Hl.map((function(e){var t=e.fromJid;(t=t.includes("@")?t.split("@")[0]:t)!==u.fromUser&&(b=e)})),f=n.getCallStatus(b.fromJid),h=b.stream,v=b.fromJid;else{var C=(v=Hl[a].fromJid).includes("@")?v.split("@")[0]:v,y=n.props.largeVideoUserJid||"";(y=y.includes("@")?y.split("@")[0]:y)===u.fromUser?(t=Object(V.j)(y),h=n.props.localStream,g=!0,l[v]=n.state.localVideoMuted):(t=Object(V.j)(C),h=Hl[a].stream),f=n.getCallStatus(v)}return r.a.createElement(r.a.Fragment,null,!n.state.tileView&&r.a.createElement(Fl,{key:v,videoMuted:!!l[v]&&l[v],audioMuted:!!o[v]&&o[v],stream:h,rosterData:t,jid:v,showConfrenceDataId:n.props.showConfrenceDataId,remoteStreamLength:Hl.length,callStatus:f,volumeLevel:i,volumeVideo:c,showVoiceDetect:s,inverse:g,handleVideoFullView:n.handleVideoFullView,pinUserJid:n.props.pinUserJid,setPinUser:E}),"onetoone"===e&&b&&b.stream&&b.stream.audio&&r.a.createElement(Ce,{stream:b.stream.audio,id:b.stream.audio.id,muted:!1}),r.a.createElement("div",{className:p},r.a.createElement("div",{"data-overlap-id":"call-thumbnail-view",className:"RemoteVideo-list"},("onetomany"===e||n.state.tileView)&&n.renderVideoStreamMulti(E),n.renderLocalVideoStream(E))))},n.renderVideoStreamMulti=function(e){var t=!1,a=Object(D.a)(Hl),o=n.props.remoteAudioMuted,l=n.props.remoteVideoMuted,i=Object(d.a)({},n.props.vCardData.data);return Sn()(a,"length",0)>0?a.map((function(c,s){var d=c.fromJid;if((d=d.includes("@")?d.split("@")[0]:d)!==i.fromUser){var u,m,p,h,v,f,g,b,E=c.stream;E||(E={id:null,audio:null,video:null});var C=c.fromJid,y=C.includes("@")?C.split("@")[0]:C,O=Object(V.j)(y),j="",N=n.props.showConfrenceData,k=N&&N.data||{};j=k.callStatusText===Q.q||k.callStatusText===Q.u?k.callStatusText:c.status,e&&j&&(j=j.toLowerCase(),t=j===Q.o||j===Q.u||j===Q.t||j===Q.q);var S=!!l[c.fromJid]&&l[c.fromJid],w=!!o[c.fromJid]&&o[c.fromJid];if(d===i.fromUser&&n.state.tileView){var D=n.props.callLogData,M=(D=void 0===D?{}:D).callAudioMute,I=void 0!==M&&M;E=n.props.localStream,S=n.state.localVideoMuted,w=I}var T=(null===(u=E)||void 0===u||null===(m=u.video)||void 0===m?void 0:m.getVideoTracks().length)>0?null===(p=E)||void 0===p||null===(h=p.video)||void 0===h?void 0:h.getVideoTracks()[0].id:"",P=(null===(v=E)||void 0===v||null===(f=v.audio)||void 0===f?void 0:f.getAudioTracks().length)>0?null===(g=E)||void 0===g||null===(b=g.audio)||void 0===b?void 0:b.getAudioTracks()[0].id:"";return r.a.createElement(je,{elKey:"remote-user-video-".concat(C),videoMuted:S,audioMuted:w,stream:E,rosterData:O,jid:C,showConfrenceDataId:n.props.showConfrenceDataId,pinUserJid:n.props.pinUserJid,setPinUser:t,callStatus:j,userStatus:c.status,inverse:!1,usersCount:a.length,tileView:n.state.tileView,tileViewStyle:n.state.tileViewStyle,videoTrackId:T,audioTrackId:P})}return r.a.createElement(r.a.Fragment,null)})):r.a.createElement(r.a.Fragment,null)},n.renderLocalVideoStream=function(e){var t,a,o,l,i=n.props.callLogData,c=(i=void 0===i?{}:i).callAudioMute,s=void 0!==c&&c,u=n.props.localStream,m=Object(d.a)({},n.props.vCardData.data);m.nickname="You";var p=m.fromUser;p=p.includes(E.S)?p:p+"@"+E.S;var h=n.getCallStatus(),v=(null===u||void 0===u||null===(t=u.video)||void 0===t?void 0:t.getVideoTracks().length)>0?null===u||void 0===u||null===(a=u.video)||void 0===a?void 0:a.getVideoTracks()[0].id:"",f=(null===u||void 0===u||null===(o=u.audio)||void 0===o?void 0:o.getAudioTracks().length)>0?null===u||void 0===u||null===(l=u.audio)||void 0===l?void 0:l.getAudioTracks()[0].id:"";return r.a.createElement(je,{elKey:"local-user-video-".concat(m.fromUser),videoMuted:n.state.localVideoMuted,audioMuted:s,stream:u,rosterData:m,jid:p,showConfrenceDataId:n.props.showConfrenceDataId,pinUserJid:n.props.pinUserJid,setPinUser:e,callStatus:h,inverse:!0,usersCount:Hl.length,tileView:n.state.tileView,tileViewStyle:n.state.tileViewStyle,videoTrackId:v,audioTrackId:f})},n.handleHideCallScreen=function(e){e.stopPropagation(),c.a.dispatch(Object(C.d)({show:!1})),n.props.hideCallScreen()},n.handleMouseMove=function(){n.state.visible||(n.setState({visible:!0}),n.startTimer())},n.hanldeOnClick=function(){var e=n.state.visible;e||n.startTimer(),n.setState({visible:!e})},n.handleAudioMute=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=n.getCallStatus())||a.toLowerCase()!==Q.o&&a.toLowerCase()!==Q.t){e.next=6;break}return e.next=4,A.a.muteAudio(t);case 4:200===(null===(r=e.sent)||void 0===r?void 0:r.statusCode)&&(Object(ne.c)(t),c.a.dispatch(Object(C.e)(t)),c.a.dispatch(Object(C.k)(Object(d.a)(Object(d.a)({},null===(o=n.props.showConfrenceData)||void 0===o?void 0:o.data),{},{localAudioMuted:!t}))));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleVideoMute=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l,i,s,u,p,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=n.getCallStatus())||a.toLowerCase()!==Q.o&&a.toLowerCase()!==Q.t){e.next=15;break}return l=JSON.parse(Object(le.e)("call_connection_status")),i=l&&l.callMode||"",e.next=6,A.a.isAllUsersVideoMuted();case 6:if(!e.sent||"onetoone"!==i){e.next=10;break}return c.a.dispatch(Object(C.b)({status:"request_init"})),e.abrupt("return");case 10:return e.next=12,A.a.muteVideo(t);case 12:s=e.sent,console.log("Call videoMuteResult :>> ",null===s||void 0===s?void 0:s.statusCode,null===(r=n.props.showConfrenceData)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.localVideoMuted,t),200===(null===s||void 0===s?void 0:s.statusCode)?(Object(ne.d)(t),n.setState({localVideoMuted:t}),t&&Object($.l)(t)):500===(null===s||void 0===s?void 0:s.statusCode)&&(u=n.props.showConfrenceData||{},p=u.data,h=void 0===p?{}:p,c.a.dispatch(Object(C.k)(Object(d.a)(Object(d.a)({},h),{},{videoPermissionDisabled:!0}))));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setLocalVideoStatus=function(e){var t=n.props.popUpData.modalProps,a=t.callProcess,r=t.modelType,o=e.popUpData.modalProps,l=o.callProcess,i=o.modelType;r&&a&&l!==a&&i!==r&&["mediaAccessError","mediaPermissionDenied"].indexOf(r)>-1&&"videoUnMute"===a&&n.setState({localVideoMuted:!0})},n.getLargeVideoUserJid=function(){var e=n.props.remoteStream;if(e&&2===e.length){var t=Object(V.h)(),a="";return e.map((function(e){var n=e.fromJid;(n=n.includes("@")?n.split("@")[0]:n)!==t.fromUser&&(a=e.fromJid)})),a}return n.props.largeVideoUserJid},n.getCallStatus=function(e){var t=n.props.showConfrenceData,a=t&&t.data||{};if(a.callStatusText===Q.q||a.callStatusText===Q.u)return a.callStatusText;var r=Object(V.h)().fromUser,o=n.props.remoteStream;e||(e=r+"@"+E.S);var l=o.find((function(t){return t.fromJid===e}));return l&&l.status},n.isThumbnailViewOverlap=function(){var e=document.querySelectorAll('[data-overlap-id="call-controll-buttons"]'),t=document.querySelectorAll('[data-overlap-id="call-thumbnail-view"]'),a=document.querySelectorAll('[data-overlap-id="call-thumbnail-view-local"]');if(!e||!e[0]||(!t||!t[0])&&(!a||!a[0]))return!0;var n=(isNaN(e[0].offsetLeft)?0:e[0].offsetLeft)+100,r=0,o=0;return t&&t[0]&&(r=isNaN(t[0].offsetLeft)?r:t[0].offsetLeft),a&&a[0]&&(o=isNaN(a[0].offsetLeft)?o:a[0].offsetLeft),n>0&&(r>0&&r<=n||o>0&&o<=n)},n.handleScreenShare=function(){A.a.startScreenShare()},n.renderPartipantsPopup=function(){var e=n.props.callLogData,t=(e=void 0===e?{}:e).callAudioMute,a=void 0!==t&&t,o=Object(d.a)({},n.props.vCardData.data),l=n.props.remoteAudioMuted,i=n.props.remoteVideoMuted,c=Hl.filter((function(e){var t=e.fromJid;if((t=t.includes("@")?t.split("@")[0]:t)===o.fromUser)return e})),s=Hl.map((function(e){var t=e.fromJid;if((t=t.includes("@")?t.split("@")[0]:t)!==o.fromUser)return e})).filter((function(e){return void 0!==e}));return[].concat(Object(D.a)(s),Object(D.a)(c)).map((function(e){var t=e.fromJid;t=t.includes("@")?t.split("@")[0]:t;var c=Object(V.j)(t),s=!1,d=!1;return t===o.fromUser?(c.displayName="You",s=a,d=n.state.localVideoMuted):(s=l[e.fromJid],d=i[e.fromJid]),r.a.createElement(Gl,{userStatus:n.getCallStatus(e.fromJid),name:c.displayName,initialName:c.initialName,imageUrl:c.image,roster:c,audioMuted:s,videoMuted:d})}))},n.state={invite:!1,callState:!0,tileView:!1,tileViewStyle:{},visible:!0,localVideoMuted:n.props.localVideoMuted,isAllUserReconnecting:!1,ParticipantListPopup:!1,fullView:!1},n.visibleStateTimer=0,n.audio=new Audio("sounds/busySignal.mp3"),n}return Object(v.a)(a,[{key:"playAudio",value:function(){this.audio.play(),this.audio.loop=!0}},{key:"stopAudio",value:function(){this.audio.loop=!1,this.audio.pause(),this.audio.currentTime=0}},{key:"componentDidMount",value:function(){this.startTimer(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.localVideoMuted!==this.props.localVideoMuted&&this.setState({localVideoMuted:this.props.localVideoMuted});var n=this.getCallStatus();n&&n.toLowerCase()===Q.o&&this.stopAudio(),n&&n.toLowerCase()===Q.u&&this.playReconnectingSound(),this.setLocalVideoStatus(e),t.tileView===this.state.tileView&&e.showConfrenceDataId===this.props.showConfrenceDataId||(this.state.tileView?setTimeout((function(){a.handleGridDimensions()}),100):this.setState({tileViewStyle:{}}))}},{key:"componentWillUnmount",value:function(){this.stopAudio(),clearTimeout(this.visibleStateTimer)}},{key:"swapElement",value:function(e,t,a){var n=e[t];return e[t]=e[a],e[a]=n,e}},{key:"getGroupDetails",value:function(e){var t={},a=Object(ae.a)(e);return t.displayName=a.groupName,t.image=a.groupImage,t.jid=a.groupId,t.chatType="groupchat",t}},{key:"render",value:function(){var e=this,t=this.state.tileView,a=this.props,n=a.callLogData,o=(n=void 0===n?{}:n).callAudioMute,l=void 0!==o&&o,i=a.showConfrenceData,c=(i=void 0===i?{}:i).data,s=(c=void 0===c?{}:c).videoPermissionDisabled,d=void 0!==s&&s,u=this.state,m=u.invite,p=u.callState,h=JSON.parse(Object(le.e)("call_connection_status")),v={},f=Object(V.h)();if(h){var g="",b=this.getLargeVideoUserJid(),E=null;if(g=h.from,(h.from&&h.from.includes("@")?h.from.split("@")[0]:h.from===f.fromUser)&&(g=h.to),"onetoone"===h.callMode&&(g=b||g,v=Object(V.j)(g)),"onetomany"===h.callMode){var C,y=void 0!==h.groupId&&null!==h.groupId?h.groupId:h.from;if(h.groupId)E=this.getGroupDetails(y),v=Object(V.j)(b);else if(null===(C=this.props.remoteStream)||void 0===C?void 0:C.length){var O=this.props.remoteStream.map((function(e,t){return e.fromJid}));v=Object($.d)(O)}else v=Object(V.j)(b)}var j=this.getCallStatus(b);return r.a.createElement(r.a.Fragment,null,p&&r.a.createElement("div",{className:"CallingScreenWrapper fit-layout ".concat(t?"tileView":"group-video-call"," "),onMouseMove:this.handleMouseMove,onClick:this.hanldeOnClick,id:"webrtc-call-screen"},r.a.createElement("div",{className:this.state.visible?"subject visible":"subject"},r.a.createElement("div",{style:{visibility:"hidden"},className:"logosm"},r.a.createElement("img",{src:te.a,alt:"Logo"})),E?r.a.createElement("span",{className:"meeting-type-text"},E.displayName?E.displayName:Object(x.v)(h.from)):r.a.createElement("span",{className:"meeting-type-text"},v.displayName?v.displayName:Object(x.v)(h.from)),r.a.createElement("span",{className:"subject-conference-timer"},r.a.createElement(Wr,{callStatus:j}))),r.a.createElement("div",{className:this.state.visible?"optionButton visible":"optionButton"},r.a.createElement("div",null,r.a.createElement("span",{title:"Back to chat",className:"BackToChat",onClick:this.handleHideCallScreen},r.a.createElement("i",{className:"backIcon"},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(w.p,null)))),r.a.createElement("div",{className:"optionBtnGroup"},r.a.createElement("span",{className:"".concat(j&&j.toLowerCase()===Q.u?"disabled-btn":"").concat(t?" tileView ":" tileViewRemove "," "),title:"Toggle tile view"},r.a.createElement("i",{className:"tileView",onClick:this.handleTileView},r.a.createElement("span",{className:"toggleAnimation"}),t?r.a.createElement(w.md,null):r.a.createElement(w.ld,null))),j&&j.toLowerCase()!==Q.q&&Hl.length>2&&r.a.createElement(qe.a,{onOutsideClick:function(){e.setState({participantListPopup:!1})}},r.a.createElement("span",{className:"participant-list",title:""},r.a.createElement("i",{className:"invite",onClick:function(t){return e.handleParticipantListPopup(t)}},r.a.createElement("span",{className:"count-badge"},Hl.length),r.a.createElement(w.Kb,null)),this.state.participantListPopup&&r.a.createElement("div",{className:"CallParticipantList"},r.a.createElement("div",{className:"participant-popup"},r.a.createElement("div",{className:"header"},r.a.createElement("i",{onClick:function(){return e.handleListPopupClose}},r.a.createElement(w.N,null)),r.a.createElement("h5",null,"Participants")),r.a.createElement("div",{className:"body"},r.a.createElement("ul",null,this.renderPartipantsPopup())))))),j&&j.toLowerCase()!==Q.q&&r.a.createElement("span",{className:j&&j.toLowerCase()===Q.u?"invitePeople disabled-btn":"invitePeople",title:""},r.a.createElement("i",{className:"invite",onClick:this.handleInvitePeople},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(w.Db,null))))),r.a.createElement("div",{className:"".concat(this.state.fullView?"fullView":""," content-body")},this.renderStream(v)),r.a.createElement("div",{"data-overlap-id":"call-controll-buttons",className:this.state.visible?"button-group visible":"button-group"},r.a.createElement(ve,{cssClassName:j&&j.toLowerCase()===Q.u?"disabled-btn":"",videoMute:this.state.localVideoMuted,audioMute:l,handleEndCall:this.handleHangUp,handleAudioMute:this.handleAudioMute,handleVideoMute:this.handleVideoMute,audioControl:!0,videoControl:!0,videoPermissionDisabled:d})),r.a.createElement(Vl,{remoteStream:this.props.remoteStream,invite:m,closePopup:this.handleCloseInvitePeople})))}return null}}]),a}(r.a.Component),ql=Object(o.b)((function(e){var t=e.largeVideoUserData,a=e.pinUserData,n=a&&a.userJid,r=n||t&&t.userJid,o=t&&t.volumeLevelsBasedOnUserJid&&t.volumeLevelsBasedOnUserJid[r],l=t&&t.volumeLevelsBasedOnUserJid&&t.volumeLevelVideo,i=!!t.showVoiceDetect&&t.showVoiceDetect;return{callConnectionDate:e.callConnectionDate,showConfrenceData:e.showConfrenceData,largeVideoUserJid:r,pinUserJid:n,volumeLevel:o,showVoiceDetect:i,volumeLevelVideo:l,popUpData:e.popUpData,vCardData:e.vCardData,callLogData:e.callLogData,rosterData:e.rosterData}}),null)(Jl),Wl=a(36),Kl=a(82),zl=a(263),Yl=function(){setTimeout((function(){c.a.dispatch(Object(fo.a)(!0)),Object(B.W)()&&null===Object(le.f)("isLogout")&&Object(zl.a)()}),1500)},Zl=function(){c.a.dispatch(Object(fo.a)(!1)),Object(le.c)("connection_status",Le.j),Object(R.d)(Le.j),c.a.dispatch(Object(Kl.a)(Le.j))};var Xl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.regMobileNo,a=void 0===t?{}:t,o=e.handleChanges,l=e.errorHide,i=void 0!==l&&l,c=e.sendOtp,s=Object(n.useState)(i),d=Object(Re.a)(s,2),u=d[0],m=d[1],p=Object(n.useState)(""),h=Object(Re.a)(p,2),v=h[0],f=h[1],g=function(){if(!Object(x.a)()){var e=a.mobileNumber;a.countryCode?""===e?m("Please enter your mobile number"):e.length<7||e.length>15||isNaN(e)?m("Please enter valid mobile number"):(m(""),c()):f("Please select country code")}},b=function(e){e.target.value&&v&&f(""),o(e)},C=function(e){var t=(e.clipboardData||window.clipboardData).getData("text");e.preventDefault(),o({target:{name:"mobileNumber",value:t.replace(/\D/g,"").slice(0,15)}})};return r.a.createElement("form",{id:"loginForm",className:"loginForm",action:""},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"inputGroup"},r.a.createElement("label",{htmlFor:"country",className:"dropArrow"},r.a.createElement(w.bb,null)),r.a.createElement("select",{id:"country",className:"countrySelect",value:a.country,onChange:b,name:"country"},r.a.createElement("option",{value:"",disabled:!0},"Please Select"),dl.map((function(e){return r.a.createElement("option",{value:e.code,defaultValue:e.name,key:e.code},e.name)}))),v&&r.a.createElement("span",{id:"phone-error",className:"error"},v))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"inputGroup countryInput"},r.a.createElement("span",{className:"countryCode",id:"countryCode"},a.countryCode),r.a.createElement("input",{onKeyPress:ul,value:a.mobileNumber,onChange:o,name:"mobileNumber",placeholder:"Enter Mobile Number",type:"text",onPaste:C}),u&&r.a.createElement("span",{id:"phone-error",className:"error"},u))),r.a.createElement("button",{id:"GetOtp",onClick:g,type:"button"},"Continue"),r.a.createElement("div",{className:"privary_policy_wrapper"},r.a.createElement("p",null,"By clicking continue you agree to MirrorFly"),r.a.createElement("div",{className:"privary_policy_Link"},r.a.createElement("a",{target:"_blank",href:"".concat(E.R),rel:"noopener noreferrer"},"Terms and Conditions,")," ",r.a.createElement("a",{target:"_blank",href:"".concat(E.K),rel:"noopener noreferrer"},"Privacy Policy."))))},Ql=r.a.memo((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e||{},a=t.onBlur,n=t.onChange,o=t.id,l=void 0===o?"":o,i=t.name,c=void 0===i?"":i,s=t.value,d=void 0===s?"":s,u=t.type,m=void 0===u?"text":u,p=t.className,h=void 0===p?"":p,v=t.placeholder,f=void 0===v?"":v,g=t.readOnly,b=void 0!==g&&g,E=t.required,C=void 0!==E&&E,y=t.autoFocus,O=void 0!==y&&y,j=t.errMsg,N=void 0===j?"":j,k=t.maxLength,S=void 0===k?"":k,w=t.onKeyUp,D=t.onPaste,I=t.autoComplete,T=void 0!==I&&I,P=Object(M.a)(t,["onBlur","onChange","id","name","value","type","className","placeholder","readOnly","required","autoFocus","errMsg","maxLength","onKeyUp","onPaste","autoComplete"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({formNoValidate:!0,id:l||"",autoComplete:T?"on":"off",onChange:n,name:c||"",value:d||"",type:m||"text",onBlur:a||null,required:C||"",readOnly:b||!1,className:h||"",placeholder:f||"",autoFocus:!0===O,maxLength:S||"",onKeyUp:w,onPaste:D||null},P)),r.a.createElement("span",{className:"error"},N||null))}));var $l,ei=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(""),a=Object(Re.a)(t,2),o=a[0],l=a[1],i=e.toast,c=e.sendOtp,s=e.otp,d=void 0===s?{}:s,u=e.regMobileNo,h=e.handleChanges,v=e.fullPageLoader,f=e.handleOtpverify,g=e.handleReEnterNo,b=e.handleBlockedInfo,E=void 0===b?function(){}:b,C=function(){Object(x.a)()||(l(""),v(!0),c())},y=function(){if(!Object(x.a)()){v(!1);for(var e="",t=Object.keys(d),a=0;a<t.length;a++)e+=d[t[a]];0===e.length?l("Please enter OTP"):6!==e.length||isNaN(e)?l("Please enter valid OTP"):(l(""),window.confirmationResult?(v(!0),window.confirmationResult.confirm(e).then(function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,o,l,c,s,d,p,h,g,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.user){e.next=22;break}return a="".concat(u.countryCode.replace("+","")).concat(u.mobileNumber),e.next=4,A.a.register(a);case 4:if(200!==(n=e.sent).statusCode){e.next=19;break}if(r=n.data,o=(r=void 0===r?{}:r).username,l=void 0===o?"":o,c=r.password,s=void 0===c?"":c,d=r.token,p=void 0===d?"":d,h=r.isProfileUpdated,g=void 0!==h&&h,!l||!s){e.next=16;break}return e.next=12,A.a.connect(l,s);case 12:200===e.sent.statusCode&&(b={username:l,password:s,type:"web"},g&&Object(le.c)("auth_user",b),Object(le.c)("token",p),A.a.setUserToken(p),f(a,n.data,b)),e.next=17;break;case 16:i.error("Login Failed!");case 17:e.next=20;break;case 19:403===n.statusCode?(v(!1),E()):(v(!1),i.error(n.message));case 20:e.next=23;break;case 22:i.error("The server is not responding. Please try again later");case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("OTP Validation Error :>> ",e),v(!1),"auth/invalid-verification-code"===e.code?l("OTP mismatched. Please enter the valid OTP."):"auth/code-expired"===e.code?i.error("OTP expired, Enter new OTP and try again!"):"auth/network-request-failed"===e.code?i.error("Please check your Internet connectivity"):i.error("The server is not responding. Please try again later")}))):(v(!1),i.error("The server is not responding. Please try again later")))}},O=function(e){e.preventDefault();var t=e.keyCode?e.keyCode:e.charCode;if(13===t)y();else if("Delete"===e.key||"Backspace"===e.key){var a=e.target.tabIndex-2;a>-1&&e.target.form.elements[a].focus()}else if(t>=48&&t<=57){var n=e.target.tabIndex;n<6&&e.target.value&&e.target.form.elements[n].focus()}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"otpForm",id:"otpForm"},r.a.createElement("div",{className:"heading"},r.a.createElement("h4",null,"Verify OTP")),r.a.createElement("div",{className:"register_help_text"},r.a.createElement("span",{className:""},"We have sent you a SMS. To complete the Registration, enter the 6 digit activation code below")),r.a.createElement("div",{className:"otp-input"},Array(6).fill(null).map((function(e,t){return r.a.createElement(Ql,{key:t+1,type:"text",name:"otp".concat(t+1),id:"otp".concat(t+1),maxLength:"1",value:d["otp".concat(t+1)],onChange:function(e){return h("otp".concat(t+1),e)},onKeyUp:O,onKeyPress:ul,tabIndex:t+1,autoComplete:!1})})),o&&r.a.createElement("span",{id:"otp-error",className:"error"},o)),r.a.createElement("button",{onClick:y,id:"VerifyOtp",type:"button"},"Verify OTP"),r.a.createElement("div",{className:"Links"},r.a.createElement("span",{onClick:g,className:"changeNum",id:"changeNum"},"Change Number"),r.a.createElement("span",{onClick:C,className:"resendOtp",id:"resendOtp"},"Resend OTP"))))},ti=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).cropImageProfileImg=function(){$l.result({type:"base64",size:"original"}).then((function(e){n.props.profileImageValidate(Object(x.j)(e,n.state.filename||"")),n.handleProfileCameraPopupClose()}))},n.updateProfileImg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if($l&&$l.destroy(),e){var t=e.name,a=void 0===t?"":t;n.setState({filename:a,camImage:e,cameraPopup:!0},(function(){var t=document.getElementById("CameraContainer");$l=new mt.a(t,vt);var a=new FileReader;a.onload=function(e){$l.bind({url:e.target.result}).then((function(){Object.assign(document.querySelector(".cr-viewport").style,{width:"200px",height:"200px"}),$l.setZoom(0)}))},a.readAsDataURL(e)}))}},n.removeProfileImage=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(x.a)()){e.next=2;break}return e.abrupt("return");case 2:n.props.removeProfileImage(),n.setState({profileImg:"",showImgDropDown:!1,showProfilePhotoRemove:!1});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setWebcamImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.size>0){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var a=t.result;n.setState({photoTaken:!0,camImageDisplay:a,camImage:e},(function(){return n.updateProfileImg(e)}))}}else n.setState({showProfileCamera:!0})},n.onCameraCheck=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=void 0===t?"":t;"NotAllowedError"===a?n.setState({onCameraPermissionDenied:!0}):"NotFoundError"===a&&n.setState({onCameraError:!0})},n.handleProfileImgDropDown=function(e){n.state.showImgDropDown?(n.setState({showImgDropDown:!1}),c.a.dispatch(Object(k.j)(!1))):(n.setState({showImgDropDown:!0}),c.a.dispatch(Object(k.j)(!0)))},n.handleProfileImageShow=function(){n.setState({showProfileImg:!0,showImgDropDown:!1}),c.a.dispatch(Object(k.j)(!0))},n.handleProfileImgClose=function(){n.setState({showProfileImg:!1}),c.a.dispatch(Object(k.j)(!1))},n.handleProfileCameraShow=function(e,t){"reset"!==t&&Object(x.a)()||n.setState({showProfileCamera:!0,showImgDropDown:!1,photoTaken:!1})},n.handleProfilePhotoRemoveShow=function(e){Object(x.a)()||n.setState({showProfilePhotoRemove:!0,showImgDropDown:!1})},n.handleProfileRemovephotoClose=function(e){n.setState({showProfilePhotoRemove:!1})},n.handleProfileCameraClose=function(e){n.handleProfileCameraPopupClose()},n.handleProfileCameraPopupClose=function(){n.setState({showProfileCamera:!1,photoTaken:!0,onCameraError:!1,onCameraPermissionDenied:!1,loaderIcon:!1,cameraPopup:!1,showImgDropDown:!1})},n.state={profileImg:"",onCameraError:!1,showProfileImg:!1,profileCamera:!1,showImgDropDown:!1,showProfileCamera:!1,onCameraPermissionDenied:!1,photoTaken:!1,camImage:"",cameraPopup:!1,filename:"image",loaderIcon:!1},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){e.profileImg!==this.props.profileImg&&this.setState({profileImg:this.props.profileImg})}},{key:"handleCropImageProfileUpdate",value:function(){var e=this;this.setState({loaderIcon:!0},(function(){return e.cropImageProfileImg()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.showProfileImg,o=t.showProfileCamera,l=t.showProfilePhotoRemove,i=t.onCameraPermissionDenied,s=t.photoTaken,d=t.showImgDropDown,u=t.profileImg,m=t.onCameraError,p=t.loaderIcon,h=t.cameraPopup;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"userprofile-popup"},r.a.createElement("div",{className:"profile-image"},r.a.createElement(qe.a,{onOutsideClick:function(){c.a.dispatch(Object(k.j)(!1)),e.setState({showImgDropDown:!1})}},r.a.createElement(z.a,{chatType:"loginProfile",blocked:!1,temporary:!1,imageToken:u,onclickHandler:function(t){return u!==w.Qc?e.handleProfileImageShow(t):null}}),r.a.createElement("i",{className:"camera-edit",onClick:function(t){return e.handleProfileImgDropDown(t)}},r.a.createElement(w.db,null)),a&&r.a.createElement("div",{className:"Viewphoto-container"},r.a.createElement("div",{className:"Viewphoto-preview"},r.a.createElement("img",{src:u,alt:"vcard-profile"}),r.a.createElement("i",{className:"preview-close",onClick:function(t){return e.handleProfileImgClose(t)}},r.a.createElement(w.N,null)))),d&&r.a.createElement("ul",{className:"profile-dropdown"},u&&r.a.createElement("li",{title:E.Z,onClick:function(t){return e.handleProfileImageShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.Bd,null)),r.a.createElement("span",null,E.Z)),r.a.createElement("li",{title:E.X,onClick:function(t){return e.handleProfileCameraShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.id,null)),r.a.createElement("span",null,E.X)),u&&r.a.createElement("li",{title:E.U,onClick:function(t){return e.handleProfilePhotoRemoveShow(t)}},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.Lc,null)),r.a.createElement("span",null,E.U)),r.a.createElement("li",{title:E.Y},r.a.createElement("i",{className:"profileedit-options"},r.a.createElement(w.td,null)),r.a.createElement("span",{className:"uploadphoto"},r.a.createElement("span",null,E.Y),r.a.createElement(gt,{type:E.t,loader:p,cameraPopup:h,cropImage:this.cropImageProfileImg,updateProfileImage:this.updateProfileImg,closePopUp:this.handleProfileCameraPopupClose})))),l&&r.a.createElement(yt,{removeProfileImage:this.removeProfileImage,handleProfileRemovephotoClose:this.handleProfileRemovephotoClose}),o&&r.a.createElement("div",{className:"camera-container"},m&&r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.e),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.d),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",name:"btn-cancel",className:"btn-okay",onClick:this.handleProfileCameraClose},"Okay"))),!m&&!i&&r.a.createElement("div",{className:"camera-popup-visible"},r.a.createElement("div",{className:"userprofile-header"},r.a.createElement("i",{onClick:function(t){return e.handleProfileCameraClose(t)}},r.a.createElement(w.N,null)),s?r.a.createElement("h5",null,E.i):r.a.createElement("h5",null,E.X)),r.a.createElement("div",{className:"cameraview"},s&&r.a.createElement("div",{id:"CameraContainer"}),!s&&r.a.createElement(Ct,{sendFile:this.setWebcamImage,onCameraCheck:this.onCameraCheck})),s&&r.a.createElement("div",{className:"popup-controls"},!this.state.loaderIcon&&r.a.createElement("i",{title:"Re capture"},r.a.createElement(w.Nc,{onClick:function(t){return e.handleProfileCameraShow(t,"reset")}})),this.state.loaderIcon?r.a.createElement("img",{src:w.Md,alt:"loader"}):r.a.createElement("i",{title:"Update Profile",onClick:function(t){return e.handleCropImageProfileUpdate()}},r.a.createElement(w.jd,null)))),i&&r.a.createElement("div",{className:"camera-popup"},r.a.createElement("h4",null,E.s),r.a.createElement("i",null,r.a.createElement(w.y,null)),r.a.createElement("p",null,E.f),r.a.createElement("div",{className:"popup-controls"},r.a.createElement("button",{type:"button",className:"btn-okay",name:"btn-cancel",onClick:function(t){return e.handleProfileCameraClose(t)}},"Okay"))))))))}}]),a}(r.a.Component);var ai=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleProfileDetails,a=e.handleChangesProfile,o=e.removeProfileImage,l=e.profileDetails,i=void 0===l?{}:l,c=e.toast,u=e.fromPage,h=void 0===u?"":u,v=e.fullPageLoader,f=Object(n.useState)({username:"",email:"",status:""}),g=Object(Re.a)(f,2),b=g[0],C=g[1],y=function(){var e=Object(p.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.loginData&&Object(le.c)("auth_user",i.loginData),e.next=3,A.a.setUserProfile(i.username,i.profileImage,i.status,i.mobileNo,i.email);case 3:a=e.sent,t(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){var n="";switch(e){case"email":t&&""!==t.trim()?Object(x.eb)(t)||(n="Please enter valid email"):n="Please enter your email";break;case"username":t&&""!==t.trim()?t.length>E.L?n="Maximum ".concat(E.L," characters allowed"):t.length<3&&(n="Username is too short"):n="Please enter your username";break;case"status":t&&""!==t.trim()?t.length>E.Q&&(n="Maximum ".concat(E.Q," characters allowed")):n="Please enter your status"}return""!==a&&C(Object(d.a)(Object(d.a)({},b),{},Object(s.a)({},e,n))),n},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("profileImage"!==e){if(O(e,t.target.value,"onchange"),"username"===e&&t.target.value.length>E.L||"status"===e&&t.target.value.length>E.Q)return;a(e,t.target.value)}else C(n),a(e,t)},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["image/png","image/jpeg","image.jpg"];t.includes(e.type)?j("profileImage",e):c.error("Image type only allowed to upload")},k=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,o,l,c,s,u,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(x.a)()){e.next=2;break}return e.abrupt("return");case 2:if(t=i.username,a=void 0===t?"":t,n=i.email,r=void 0===n?"":n,o=i.status,l=void 0===o?"":o,c=O("username",a),s=O("email",r),u=O("status",l),!(s||c||u)){e.next=11;break}return p={},s&&(p.email=s),c&&(p.username=c),u&&(p.status=u),C(p),e.abrupt("return");case 11:v(!0),C(Object(d.a)(Object(d.a)({},b),{},{profileName:""})),y();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){var t=(e.clipboardData||window.clipboardData).getData("text"),a=i[e.target.name]+t;e.preventDefault();var n="";"username"===e.target.name&&(n=E.L),"status"===e.target.name&&(n=E.Q),O(e.target.name,e.target.value,"onpaste"),j(e.target.name,{target:{name:e.target.name,value:a.slice(0,n)}})};return r.a.createElement("form",{id:"profileForm",className:"profileForm",action:""},r.a.createElement("div",{className:"heading"},r.a.createElement("h4",null,"Profile")),r.a.createElement("div",{className:"profileImg"},r.a.createElement(ti,{chatType:"loginProfile",loginProfileUpdate:!0,profileImg:i.profileImage?window.URL.createObjectURL(i.profileImage):"",fromPage:h,profileImageValidate:N,removeProfileImage:o})),r.a.createElement("div",{className:"form-group form-group-profile"},r.a.createElement("div",{className:"usenameInfo  ".concat(i.username?"":"edit")},r.a.createElement(Ql,{placeholder:"Username",id:"username",name:"username",value:i.username,onChange:function(e){return j("username",e)},className:"ProfileName",onBlur:function(e){return O(e.target.name,e.target.value,"onblur")},onPaste:S}),r.a.createElement("label",{htmlFor:"username",className:"usernameEdit"},r.a.createElement(w.cb,null))),b.username&&r.a.createElement("span",{id:"profile-name-error",className:"error center"},b.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Email"),r.a.createElement(Ql,{name:"email",value:i.email,onChange:function(e){return j("email",e)},className:"Email",onBlur:function(e){return O(e.target.name,e.target.value,"onblur")}}),b.email&&r.a.createElement("span",{id:"profile-email-error",className:"error"},b.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Mobile Number"),r.a.createElement(Ql,{name:"mobileNo",value:i.mobileNo,className:"phone",readOnly:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Status"),r.a.createElement(Ql,{name:"status",value:i.status,onChange:function(e){return j("status",e)},className:"Status",onBlur:function(e){return O(e.target.name,e.target.value,"onblur")},onPaste:S}),b.status&&r.a.createElement("span",{id:"profile-status-error",className:"error"},b.status)),r.a.createElement("div",{className:"info-text"},r.a.createElement("i",null," ",r.a.createElement(w.dc,null)," "),r.a.createElement("span",{className:"text-info"},E.ab)),r.a.createElement("button",{onClick:k,id:"ProfileUpdate",type:"button"},"Save"))},ni=(a(723),a(724));a(738),a(727);ni.a.initializeApp({apiKey:"AIzaSyBsDgqVCPQkReMH5BlmXGxRirPYzKgSdE0",authDomain:"mirrorfly-uikit.firebaseapp.com",databaseURL:"",projectId:"mirrorfly-uikit",storageBucket:"",messagingSenderId:""});var ri=ni.a,oi=(a(729),a(730)),li=a.n(oi);var ii=function(){return r.a.createElement("div",{className:"login-container blocked_from_application"},r.a.createElement("div",{className:"mirrorfly newLoginScreen"},r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("div",{className:"login-content"},r.a.createElement("div",{className:"blocked_user_wraper"},r.a.createElement("div",{className:"logo_container"},r.a.createElement("img",{src:w.oc,alt:"logo"})),r.a.createElement("img",{className:"icon_blocked",src:li.a,alt:"blocked icon"}),r.a.createElement("p",null,"This application is no longer available for you."),r.a.createElement("span",null,"Please contact admin if you have any query."),r.a.createElement("a",{href:"mailto:".concat(E.C)},E.C))))))},ci=Xt.a.helpUrl,si={otp1:"",otp2:"",otp3:"",otp4:"",otp5:"",otp6:""},di=!1;var ui=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleLoginSuccess,a=e.qrCode,o=void 0===a?"":a,l=e.handleSDKIntialize,i=Object(n.useState)({}),c=Object(Re.a)(i,2),u=c[0],h=c[1],v=Object(n.useState)(!1),f=Object(Re.a)(v,2),g=f[0],b=f[1],E=Object(n.useState)(!1),C=Object(Re.a)(E,2),y=C[0],O=C[1],j=Object(n.useState)(!1),N=Object(Re.a)(j,2),k=N[0],S=N[1],D=Object(n.useState)({mobileNumber:"",country:"",countryCode:""}),M=Object(Re.a)(D,2),I=M[0],T=M[1],P=Object(n.useState)(si),A=Object(Re.a)(P,2),L=A[0],x=A[1],U=Object(n.useState)({getMobileNo:!0,getOtpVerfied:!1,getProfileDetails:!1}),R=Object(Re.a)(U,2),F=R[0],B=R[1],_=Object(n.useState)({profileImg:"",username:"",email:"",mobileNo:"",status:Le.m}),V=Object(Re.a)(_,2),G=V[0],H=V[1],J=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://geolocation-db.com/json/").then((function(e){return e.json()})).then((function(e){if(null===e||void 0===e?void 0:e.country_code){var t=dl.find((function(t){return t.code===e.country_code}));t&&!di&&T(Object(d.a)(Object(d.a)({},I),{},{country:t.code,countryCode:t.dial_code}))}})).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return window.recaptchaVerifier=new ri.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible"}),J(),function(){di=!0}}),[]);var q=function(e){B(Object(d.a)(Object(d.a)({},F),{},{getMobileNo:!1,getOtpVerfied:!0})),b(!1)},W=function(e){T(Object(d.a)(Object(d.a)({},I),{},{countryCode:e.target.value}))},K=function(e){var t=e.target,a=t.name,n=t.value;if("country"===a){var r,o=dl.find((function(e){return e.code===n}));T(Object(d.a)(Object(d.a)({},I),{},(r={},Object(s.a)(r,a,n),Object(s.a)(r,"countryCode",o.dial_code),r)))}else T(Object(d.a)(Object(d.a)({},I),{},Object(s.a)({},a,n)));O("")},z=function(e,t){x(Object(d.a)(Object(d.a)({},L),{},Object(s.a)({},e,t.target.value)))},Y=function(){var e=Object(p.a)(m.a.mark((function e(a,n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h({register:n,login:r}),(null===n||void 0===n?void 0:n.isProfileUpdated)?t(n,r):(H(Object(d.a)(Object(d.a)({},G),{},{mobileNo:a,loginData:r,registerData:n})),B(Object(d.a)(Object(d.a)({},F),{},{getOtpVerfied:!1,getProfileDetails:!0})),b(!1));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Z=function(){B(Object(d.a)(Object(d.a)({},F),{},{getMobileNo:!0,getOtpVerfied:!1})),x(si),l(),b(!1)},X=function(){var e=Object(p.a)(m.a.mark((function e(a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(u.register,u.login);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Q=function(e,t){H(Object(d.a)(Object(d.a)({},G),{},Object(s.a)({},e,t)))},$=function(){H(Object(d.a)(Object(d.a)({},G),{},{profileImage:""}))},ee=function(e){b(e)},te=function(){B(Object(d.a)(Object(d.a)({},F),{},{getOtpVerfied:!1})),S(!0)},ae=function(){setTimeout((function(){return ee(!0)}),100);var e=I.countryCode,t=I.mobileNumber,a="".concat(e).concat(t);x(si),ri.auth().signInWithPhoneNumber(a,window.recaptchaVerifier).then((function(e){window.confirmationResult=e,q(),re.b.info("OTP is sent to your mobile number")})).catch((function(e){ee(!1),console.log("Login Error :>> ",e),"auth/too-many-requests"===e.code?re.b.error("Too Many Requests. Try again later!"):"auth/network-request-failed"===e.code?re.b.error("Please check your Internet connectivity"):"auth/invalid-phone-number"===e.code?re.b.error("Please enter a valid mobile number"):"auth/captcha-check-failed"===e.code?re.b.error("Captcha Check Failed"):re.b.error("The server is not responding. Please try again later")}))},ne=function(){var e=document.getElementById("recaptcha-container").hasChildNodes();g&&e&&b(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"mirrorfly newLoginScreen"},r.a.createElement("div",{className:"login-wrapper ".concat(F.getMobileNo?" otpWrapper ":""," ").concat(F.getOtpVerfied?" getotpWrapper ":""," ").concat(F.getProfileDetails?" profileWrapper ":"")},r.a.createElement("div",{className:"login-content"},F.getMobileNo&&r.a.createElement("div",{className:"left-col"},o||"",r.a.createElement("div",{className:"getStarted"},r.a.createElement("a",{className:"",target:"_blank",rel:"noopener noreferrer",href:ci},"Need help to get started?")),r.a.createElement("div",{className:"login_desc"},r.a.createElement("h3",null,"Log in with QR Code"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"1. Open ",r.a.createElement("strong",null,"MirrorFly")," on your phone.")),r.a.createElement("li",null,r.a.createElement("p",null,"2. Tap ",r.a.createElement("strong",null,"Menu")," ",r.a.createElement("i",{className:"iconOption"},r.a.createElement(w.gc,null))," ","or ",r.a.createElement("span",{className:"ios-icon"},"+")," and select ",r.a.createElement("strong",null,"Web."))),r.a.createElement("li",null,r.a.createElement("p",null,"3. Scan the ",r.a.createElement("strong",null,"QR Code ")," and get ",r.a.createElement("strong",null,"Logged in.")))))),r.a.createElement("div",{className:"right-col ".concat(F.getMobileNo?"otpPage":""," ").concat(F.getOtpVerfied?"getotpPage":""," ").concat(F.getProfileDetails?"profilePage":"")},r.a.createElement("div",{className:"form"},F.getMobileNo&&r.a.createElement("div",{className:"form-inner"},r.a.createElement("div",{className:"company_logo"},r.a.createElement("img",{src:w.oc,alt:"logo"})),r.a.createElement("div",{className:"heading"},r.a.createElement("h4",null,"Register Mobile Number")),r.a.createElement("div",{className:"register_help_text"},r.a.createElement("span",{className:""},"Please choose your country code and enter your mobile number to get the verification code.")),r.a.createElement(Xl,{regMobileNo:I,handleRegMobileNo:function(e){return q(e)},handleChanges:K,toast:re.b,fullPageLoader:function(e){return ee(e)},setCountryCode:function(e){return W(e)},errorHide:y,sendOtp:ae})),F.getOtpVerfied&&r.a.createElement(ei,{handleBlockedInfo:te,regMobileNo:I,otp:L,handleOtpverify:Y,handleReEnterNo:Z,handleChanges:z,toast:re.b,fullPageLoader:function(e){return ee(e)},sendOtp:ae}),F.getProfileDetails&&r.a.createElement(ai,{regMobileNo:I,profileDetails:G,handleChangesProfile:Q,handleProfileDetails:X,fullPageLoader:function(e){return ee(e)},removeProfileImage:$,toast:re.b,fromPage:"otpPage"}),k&&r.a.createElement(ii,null)),r.a.createElement(qe.a,{onOutsideClick:ne},r.a.createElement("div",{id:"recaptcha-container",className:"recaptcha-container"})))))),r.a.createElement(re.a,null),g&&r.a.createElement("div",{className:"pageLoader"},r.a.createElement(w.ib,null)))},mi=function(e){var t=e.participantsData,a=void 0===t?[]:t,l=e.displayName,i=void 0===l?"":l,c=e.handleTryAgain,s=e.handleCancel,d=e.handleJoinCall,u=Object(o.d)((function(e){return e.appOnlineStatus})).isOnline,m=void 0===u||u;return Object(n.useEffect)((function(){m&&0===(null===a||void 0===a?void 0:a.length)&&c()}),[a]),r.a.createElement("div",{className:"m_participant_wrapper"},r.a.createElement("div",{className:"m_participant_details"},r.a.createElement("div",{className:"brand_logo"},r.a.createElement("img",{src:w.oc,alt:w.oc})),r.a.createElement("h2",null,"Ready to join ?"),r.a.createElement("div",{className:"meeting_participant_list"},null===a||void 0===a?void 0:a.map((function(e,t){return t<3&&r.a.createElement("div",{className:"calleeProfiles",key:t},r.a.createElement(z.a,{chatType:"chat",imageToken:e.image,name:e.initialName}))})),(null===a||void 0===a?void 0:a.length)>3&&r.a.createElement("div",{className:"participant-count"},r.a.createElement("span",{className:"moreText"},"+",(null===a||void 0===a?void 0:a.length)-3))),r.a.createElement("p",{className:"participant-names"},i),(null===a||void 0===a?void 0:a.length)==Object($.f)()?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"action-btns"},r.a.createElement("button",{type:"button",onClick:c,className:"Meeting_join"},"Try Again"),r.a.createElement("button",{type:"button",onClick:s,className:"Meeting_join cancel"},"Cancel")),r.a.createElement("p",{className:"internet show"},"Maximum ",Object($.f)()," members allowed in call")):r.a.createElement("button",{type:"button",onClick:d,className:"Meeting_join"},"Join Now"),!m&&r.a.createElement("p",{className:"internet show"},"Please check your internet connection")))},pi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleBack,a=e.callEndScreen,n=void 0===a||a;return r.a.createElement("div",{className:"m_participant_wrapper call_end"},r.a.createElement("div",{className:"m_participant_details"},r.a.createElement("div",{className:"brand_logo"},r.a.createElement("img",{src:w.oc,alt:w.oc})),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"invalidLink"},r.a.createElement(w.w,{className:"endimg"})),r.a.createElement("h2",null,"Call Ended!"),r.a.createElement("p",null,"No one else is here")):r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"invalidLink"},r.a.createElement(w.Cb,{className:"endimg"})),r.a.createElement("h2",null,"Invalid call link"),r.a.createElement("button",{onClick:t,className:"ReturnBack"},"Return to chat"))))},hi=function(){return r.a.createElement("div",{className:"m_participant_wrapper call_end"},r.a.createElement("div",{className:"m_participant_details"},r.a.createElement("div",{className:"brand_logo"},r.a.createElement("img",{src:w.oc,alt:w.oc})),r.a.createElement("i",{className:"invalidLink"},r.a.createElement(w.w,{className:"endimg"})),r.a.createElement("h2",null,"Maximum ",Object($.f)()," members allowed in call!")))},vi=function(){var e,t,a,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=Object(n.useState)(!1),s=Object(Re.a)(i,2),u=s[0],h=s[1],v=Object(n.useState)(!1),f=Object(Re.a)(v,2),g=f[0],b=f[1],E=Object(n.useState)({loading:!0,readyToJoin:!1,callEnd:!1,invalidLink:!1,maxParticipants:!1}),y=Object(Re.a)(E,2),O=y[0],j=y[1],N=Object(n.useState)({}),k=Object(Re.a)(N,2),S=k[0],D=k[1],M=Object(o.d)((function(e){return e.showConfrenceData})),I=M.data,T=void 0===I?{}:I,P=Object(o.d)((function(e){return e.appOnlineStatus})),L=P.isOnline,x=void 0===L||L,U=Object(o.d)((function(e){return e.callIntermediateScreen})),R=U.data,F=void 0===R?{}:R;Object(n.useEffect)((function(){var e,t;if(null===(e=F.usersList)||void 0===e?void 0:e.length){var a=Object($.d)(F.usersList||[],"subscribe");D(a)}else 0===(null===(t=F.usersList)||void 0===t?void 0:t.length)&&O.readyToJoin&&(A.a.unsubscribeCall(),j(Object(d.a)(Object(d.a)({},O),{},{loading:!1,readyToJoin:!1,callEnd:!0})))}),[F.usersList]);var B=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null===(t=l.callData)||void 0===t?void 0:t.link,n=Object(V.h)(),r=Object(d.a)(Object(d.a)({},O),{},{loading:!1}),a&&n.nickName?A.a.subscribeCall(a,n.nickName,(function(e,t){console.log("subscribeCall :>> ",e,t),t?100601===t.statusCode?r.invalidLink=!0:100602===t.statusCode?r.callEnd=!0:100603===t.statusCode&&(r.readyToJoin=!1,r.maxParticipants=!0):100500===e.statusCode&&(r.readyToJoin=!0),j(r)})):j(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){B()}),[]),Object(n.useEffect)((function(){var e=T||{},t=e.callStatusText,a=void 0===t?"":t,n=e.status,r=void 0===n?"":n;O.loading&&a===Q.o&&"LOCALSTREAM"===r&&c.a.dispatch(Object(C.d)({show:!1}))}),[T]),Object(n.useEffect)((function(){Object.keys(T).length&&T.localVideoMuted!==g&&b(T.localVideoMuted)}),[T.localVideoMuted]);var _=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.muteAudio(!u);case 2:t=e.sent,console.log("Intermediate audioMuteResult :>> ",null===t||void 0===t?void 0:t.statusCode),200===(null===t||void 0===t?void 0:t.statusCode)?(Object(ne.c)(!u),h(!u),c.a.dispatch(Object(C.e)(!u)),c.a.dispatch(Object(C.k)(Object(d.a)(Object(d.a)({},T),{},{localAudioMuted:!u})))):500===(null===t||void 0===t?void 0:t.statusCode)&&c.a.dispatch(Object(X.b)({open:!0,modelType:"mediaPermissionDenied",statusCode:100606}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.muteVideo(!g);case 2:t=e.sent,console.log("Intermediate videoMuteResult :>> ",null===t||void 0===t?void 0:t.statusCode),200===(null===t||void 0===t?void 0:t.statusCode)?(Object(ne.d)(!g),b(!g),c.a.dispatch(Object(C.k)(Object(d.a)(Object(d.a)({},T),{},{localVideoMuted:!g})))):500===(null===t||void 0===t?void 0:t.statusCode)&&(c.a.dispatch(Object(X.b)({open:!0,modelType:"mediaPermissionDenied",statusCode:100607})),c.a.dispatch(Object(C.k)(Object(d.a)(Object(d.a)({},T),{},{videoPermissionDisabled:!0}))));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){B()},J=function(){A.a.unsubscribeCall(),Object(ne.f)(),j(Object(d.a)(Object(d.a)({},O),{},{loading:!1})),c.a.dispatch(Object(C.d)({show:!1,toggleCallScreen:!1}))},q=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x&&(j(Object(d.a)(Object(d.a)({},O),{},{loading:!0})),A.a.joinCall((function(e,t){if(console.log("joinCall result :>> ",e,t),t){var a=Object(d.a)(Object(d.a)({},O),{},{loading:!1});100602===t.statusCode?(a.callEnd=!0,a.readyToJoin=!1):100603===t.statusCode?(a.readyToJoin=!1,a.maxParticipants=!0):100605===t.statusCode&&re.b.error("The server is not responding. Please try again later"),j(a)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=O.loading,K=O.readyToJoin,z=O.callEnd,Y=O.invalidLink,Z=O.maxParticipants;return r.a.createElement("div",{className:"join_meeting_wrapper"},r.a.createElement("div",{className:"optionButton"},r.a.createElement("span",{title:"Back to chat",className:"BackToChat",onClick:J},r.a.createElement("i",{className:"backIcon"},r.a.createElement("span",{className:"toggleAnimation"}),r.a.createElement(w.q,null)))),r.a.createElement("div",{className:"meeting_video_container",style:{background:z||Y?"url(".concat(w.Yb,") no-repeat left center"):"#fff"}},W&&r.a.createElement("div",{className:"page-loader"},r.a.createElement("img",{src:w.ac,alt:"message-history"})),K&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"m_video_container_wrapper"},r.a.createElement("div",{className:"m_video_container"},r.a.createElement("div",{className:"video_container"},r.a.createElement("div",{className:"alert-badge"},(null===T||void 0===T?void 0:T.localAudioMuted)&&r.a.createElement("div",{className:"badge-list ".concat((null===T||void 0===T?void 0:T.localVideoMuted)?"":"videoOn")},r.a.createElement(w.l,null)," ",r.a.createElement("span",null,"Microphone off"))),(null===T||void 0===T?void 0:T.localVideoMuted)?r.a.createElement("div",{className:"CameraOffAlert"},r.a.createElement("span",null,"Camera off")):r.a.createElement(Ee,{stream:null===T||void 0===T||null===(e=T.localStream)||void 0===e?void 0:e.video,muted:null===T||void 0===T?void 0:T.localVideoMuted,id:null===T||void 0===T||null===(t=T.localStream)||void 0===t||null===(a=t.video)||void 0===a?void 0:a.id,inverse:!0}),r.a.createElement("div",{className:"m_call_action"},r.a.createElement("button",{onClick:_,className:u?"audioBtnAction mute":"audioBtnAction ",type:"button"},r.a.createElement("i",{className:u?"audioBtn mute":"audioBtn "},u?r.a.createElement(w.l,null):r.a.createElement(w.m,null))),r.a.createElement("button",{onClick:G,className:g?"videoBtnAction mute":"videoBtnAction ",type:"button"},r.a.createElement("i",{className:g?"videoBtn mute":"videoBtn "},g?r.a.createElement(w.zd,null):r.a.createElement(w.Ad,null))))))),r.a.createElement(mi,{displayName:null===S||void 0===S?void 0:S.displayName,participantsData:null===S||void 0===S?void 0:S.participantsData,handleTryAgain:H,handleCancel:J,handleJoinCall:q})),Z&&r.a.createElement(hi,null),(z||Y)&&r.a.createElement(pi,{handleBack:J,callEndScreen:z})))},fi=a(109),gi=((0,a(468).createBrowserHistory)(),""),bi=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleContactPermissionPopup=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n.setState({contactPermissionPopup:e,contactPermissionPopupText:t||Le.T})},n.handleIframeTask=function(e){"returntoChat"===e.data&&n.setState({hideCallScreen:!0}),"endcall"===e.data&&c.a.dispatch(Object(C.k)({showComponent:!1}))},n.endOngoingCall=function(){A.a.endCall(),Object(le.c)("callingComponent",!1),Object(le.a)("roomName"),Object(le.a)("callType"),Object(le.a)("call_connection_status"),Object(le.c)("hideCallScreen",!1),Object(ne.f)()},n.handleOnStorageChange=function(){null===Object(le.f)("sessionId")||Object(le.e)("sessionId")===Object(le.f)("sessionId")||n.state.newSession||(n.endOngoingCall(),Object(le.b)("sessionId"),document.getElementById("root").classList.remove("boxLayout"),n.setState({newSession:!0}),document.title=Le.l,Object(B.ib)("error"))},n.handleShowCallScreen=function(){var e,t;Object(le.c)("hideCallScreen",!1),n.setState({hideCallScreen:!1}),(null===(e=n.props.callIntermediateScreen)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.hideCallScreen)&&c.a.dispatch(Object(C.d)({hideCallScreen:!1}))},n.hideCallScreen=function(){Object(le.c)("hideCallScreen",!0),n.setState({hideCallScreen:!0})},n.handleSDKIntialize=Object(p.a)(m.a.mark((function e(){var t,a,r,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(x.A)(),e.next=3,A.a.initializeSDK(t);case 3:if(a=e.sent,r={statusCode:200},200!==a.statusCode||200!==r.statusCode){e.next=15;break}if(A.a.setMediaEncryption(!0),window.location.hostname!==E.B){e.next=12;break}return o=Object(x.p)(),console.log("staticCredential :>> ",o),n.setState({webChatStatus:!0},(function(){n.handleLogin(o)})),e.abrupt("return");case 12:null!==Object(le.e)("auth_user")?(l=Object(le.e)("auth_user"),Object(B.U)()?n.setState({webChatStatus:!0},(function(){n.handleLogin(l)})):n.setState({loaderStatus:!1},(function(){n.handleQRCode()}))):n.setState({loaderStatus:!1},(function(){n.handleQRCode()})),e.next=16;break;case 15:console.log("Intialize error, ",a);case 16:case"end":return e.stop()}}),e)}))),n.handleLoginSuccess=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r,o,l,i,s,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200===(a=A.a.getCurrentUserJid()).statusCode&&Object(le.c)("loggedInUserJidWithResource",a.userJid),e.next=4,A.a.getUserToken(t.username,t.password);case 4:return 200===(r=e.sent).statusCode&&Object(le.c)("token",r.userToken),Object(le.b)("isLogout"),Object(le.c)("recordingStatus",!0),Object(le.c)("auth_user",t),Object(x.T)()&&document.getElementById("root").classList.add("boxLayout"),e.next=12,A.a.getUserProfile(Object(V.c)(t.username));case 12:return e.next=14,A.a.getUsersIBlocked();case 14:return(o=e.sent)&&200===o.statusCode&&(l=Object(at.a)(o.data),c.a.dispatch(Object(tt.a)(l))),e.next=18,A.a.getUsersWhoBlockedMe();case 18:return(i=e.sent)&&200===i.statusCode&&(s=Object(at.a)(i.data),Object(at.c)(s)),c.a.dispatch(Object(Dn.c)(!0)),c.a.dispatch(Object(Dn.a)([])),e.next=24,A.a.getGroupsList();case 24:(d=e.sent)&&200===d.statusCode&&(d.data.map(function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(V.c)(t.groupId,Le.f),e.next=3,A.a.getGroupParticipants(a);case 3:(n=e.sent)&&200===n.statusCode&&Object(ae.e)(a,n.data.participants);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c.a.dispatch(Object(Wl.b)(d.data))),Object(B.R)(),setTimeout((function(){n.setState({webChatStatus:!0},Object(p.a)(m.a.mark((function e(){var t,a,r,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.getRecentChats();case 2:return(r=e.sent)&&200===r.statusCode&&c.a.dispatch(Object(k.c)(r.data)),(o=(null===(t=n.props.location)||void 0===t?void 0:t.pathname)?null===(a=n.props.location)||void 0===a?void 0:a.pathname.split("/"):[]).length>1&&o[1]&&(c.a.dispatch(Object(C.d)({show:!0,link:o[1]})),n.props.history.replace({pathname:"/"})),e.next=8,A.a.getAllFavouriteMessages();case 8:l=e.sent,c.a.dispatch(Object(Wo.d)(l.data));case 10:case"end":return e.stop()}}),e)}))))}),100);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleSandboxProfileUpdate=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t.isProfileUpdated){e.next=3;break}return e.next=3,A.a.setUserProfile(t.username,"","","","");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(s.a)({},a,r))}))},n.submitLogin=Object(p.a)(m.a.mark((function e(){var t,a,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},a=n.state,r=a.username,o=a.password,t.username=r,t.password=o,t.username&&t.password&&n.handleLogin(t);case 5:case"end":return e.stop()}}),e)}))),n.qrCodeStatus=function(){return n.state.onLineStatus?"Generating QR code":E.h},n.qaCanvas=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{id:"divQRCode"}),n.state.connectionStatusLoader&&r.a.createElement("div",{className:"qr-load-container"},r.a.createElement("img",{className:"qr-load",src:w.Ld,alt:"loader"})))},n.renderQRTemplate=function(){return r.a.createElement("div",{className:"qr-image"},r.a.createElement("img",{src:w.Tc,alt:"scan-logo",id:"qr-logo"}),n.state.loaderStatus?r.a.createElement("span",{className:"loader-text"},n.qrCodeStatus()):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"loader-text"},n.qrCodeStatus()),n.qaCanvas()))},n.openJoinCallPopup=function(){n.setState({joinCallPopup:!0})},n.cancelJoinCallPopup=function(){n.setState({joinCallPopup:!1})},n.renderUsernamePasswordTemplate=function(){return r.a.createElement("div",{className:"mirrorfly newLoginScreen"},r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("div",{className:"login-content skip-login-form"},r.a.createElement("form",{className:"form-login"},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{name:"username",className:"login-input",value:n.state.username,onChange:n.handleInputChange})),!Object(x.W)()&&r.a.createElement("div",{className:"form-control"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",className:"login-input",value:n.state.password,onChange:n.handleInputChange})),r.a.createElement("div",{className:"form-control"},r.a.createElement("button",{type:"button",className:"login-btn",onClick:n.submitLogin},"Login"))))))},n.renderLoginTemplate=function(){return"true"===E.O?n.renderUsernamePasswordTemplate():r.a.createElement(ui,{qrCode:n.renderQRTemplate(),handleLoginSuccess:n.handleLoginSuccess,handleSDKIntialize:n.handleSDKIntialize})},n.handleMediaClose=function(e){c.a.dispatch(Object(S.c)()),c.a.dispatch({type:j.V,payload:{}}),n.setState({isShowPreviewMedia:!1})},n.messageInfoShow=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setState({showMessageinfo:e})},n.handleWebChatConnect=function(){var e,t,a,o,l,i,c,s,d,u,m=n.state,p=m.webChatStatus,h=m.hideCallScreen,v=m.isShowPreviewMedia,f=n.props,g=f.SingleChatSelectedMediaData,b=(g=void 0===g?{}:g).data,E=void 0===b?{}:b,C=f.GroupChatSelectedMediaData,y=(C=void 0===C?{}:C).data,O=void 0===y?{}:y,j=E.jid?E:O,N=JSON.parse(Object(le.e)("call_connection_status"));null!==N&&void 0!==N||(h=!1),h=!(!h||!0!==Object(le.e)("hideCallScreen"));var k="";if(N&&N.from&&(null===(e=n.props.showConfrenceData)||void 0===e?void 0:e.data)){var S,w,D;if((null===(S=n.props.showConfrenceData)||void 0===S||null===(w=S.data)||void 0===w?void 0:w.callStatusText)&&(gi=n.props.showConfrenceData.data.callStatusText),"onetoone"===N.callMode)k=N.from,(N.from.includes("@")?N.from.split("@")[0]:N.from===(null===(D=n.props.vcardData)||void 0===D?void 0:D.data.fromUser))&&(k=(k=N.to).includes("@")?k.split("@")[0]:k);"onetomany"===N.callMode&&(k=(k=void 0!==N.groupId&&null!==N.groupId?N.groupId:N.from).includes("@")?k.split("@")[0]:k)}var M=n.state.accountDeletedToast;return M&&setTimeout((function(){Object(le.a)("deleteAccount"),n.setState({accountDeletedToast:!1})}),3e3),p?r.a.createElement("div",{className:"container containerLayout",id:"container"},n.props.showConfrenceData&&n.props.showConfrenceData.data&&n.props.showConfrenceData.data.showCalleComponent&&r.a.createElement("div",{className:"".concat(h?"BackToConversion":"")},r.a.createElement(se,{callStatus:n.props.showConfrenceData.data.callStatusText,stopSound:n.props.showConfrenceData.data.stopSound||"",hideCallScreen:n.hideCallScreen})),(null===(t=n.props.callIntermediateScreen)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.show)&&r.a.createElement(vi,{callData:null===(o=n.props.callIntermediateScreen)||void 0===o?void 0:o.data}),n.props.showConfrenceData&&n.props.showConfrenceData.data&&!0===Object(le.e)("callingComponent")&&r.a.createElement("div",{className:"".concat(h?"BackToConversion":"")},r.a.createElement(ke,{callStatus:n.props.showConfrenceData.data.callStatusText,stopSound:n.props.showConfrenceData.data.stopSound||"",soundPath:n.props.showConfrenceData.data.soundPath||"",hideCallScreen:n.hideCallScreen})),r.a.createElement(Rl,{handleConversationSectionDisplay:n.handleConversationSectionDisplay,callUserJID:k,callStatus:gi,handleShowCallScreen:n.handleShowCallScreen,callType:N&&N.callType||"",handlePopupState:n.handlePopupState,callMode:N&&N.callMode||"",handleContactPermissionPopup:n.handleContactPermissionPopup}),r.a.createElement(zr,{showMessageinfo:n.state.showMessageinfo,messageInfoShow:n.messageInfoShow,conversationSectionDisplay:n.state.conversationSectionDisplay,handleConversationSectionDisplay:n.handleConversationSectionDisplay,showonGoingcallDuration:h,handleShowCallScreen:n.handleShowCallScreen,showCallerName:N&&N.from,openStatus:n.state.openStatus,handlePopupState:n.handlePopupState}),v&&r.a.createElement(q,{jid:j.jid,chatType:j.chatType,selectedMessageData:j.selectedMessageData,handleMediaClose:function(e){return n.handleMediaClose(e)}}),n.props.showConfrenceData&&n.props.showConfrenceData.data&&n.props.vCardData&&n.props.vCardData.data&&n.props.showConfrenceData.data.showComponent&&r.a.createElement("div",{className:"connecting webrtc  ".concat(h?"visible":"")},r.a.createElement(be,{jid:n.props.jid,fromuser:n.props.vCardData.data.fromuser,hideCallScreen:n.hideCallScreen})),n.props.showConfrenceData&&n.props.showConfrenceData.data&&n.props.showConfrenceData.data.showStreamingComponent&&N&&r.a.createElement("div",{className:"connecting  ".concat(h?"visible":"")},r.a.createElement(ql,{showConfrenceDataId:n.props.showConfrenceData.id,remoteVideoMuted:n.props.showConfrenceData.data.remoteVideoMuted,remoteAudioMuted:n.props.showConfrenceData.data.remoteAudioMuted,localVideoMuted:n.props.showConfrenceData.data.localVideoMuted,localAudioMuted:n.props.showConfrenceData.data.localAudioMuted,hideCallScreen:n.hideCallScreen,fromJid:n.props.showConfrenceData.data.fromJid,status:n.props.showConfrenceData.data.status,localStream:n.props.showConfrenceData.data.localStream,remoteStream:n.props.showConfrenceData.data.remoteStream})),r.a.createElement(re.a,null),(null===(l=n.props.adminBlockData)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.toUserId)&&(null===(c=n.props.adminBlockData)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.toUserId)===(null===(d=n.props.vCardData)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.fromUser)&&r.a.createElement(ii,null),n.state.contactPermissionPopup&&!n.props.contactPermission&&r.a.createElement(Dt,{textActionBtn:"Ok",handleAction:function(){return n.handleContactPermissionPopup(!1)},textHeading:"Contact permission",textInfo:n.state.contactPermissionPopupText})):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"login-container",id:"login-container"},n.renderLoginTemplate(),M&&r.a.createElement("div",{className:"toast_container"},r.a.createElement("span",null,"Your MirrorFly account has been deleted."))))},n.handleConversationSectionDisplay=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n.setState({openStatus:!0,showMessageinfo:!1}),t){var a=t.recent,r=(a=void 0===a?{}:a).chatType,o=a.fromUserId;return r&&o?(t.chatType=r,t.chatId=o,t.chatJid=Object(V.c)(o,r),c.a.dispatch(Object(k.a)(t))):void 0}},n.handlePopupState=function(e){n.setState({openStatus:e})},n.handleUseHere=function(){if(n.props.isAppOnline){var e=Object(le.f)("sessionId");if(Object(le.c)("sessionId",e),Object(B.ib)(""),null!==Object(le.e)("auth_user")){var t=Object(le.e)("auth_user");n.setState({webChatStatus:!0,newSession:!1},(function(){Object(B.fb)(),n.handleLogin(t)}))}else n.setState({webChatStatus:!1,loaderStatus:!1,newSession:!1,connectionStatusLoader:!1},(function(){n.handleQRCode()}))}else re.b.error(_.F)},n.state={loaderStatus:!0,webChatStatus:!1,onLineStatus:!0,connectionStatusLoader:!1,conversationSectionDisplay:{display:"none"},hideCallScreen:!1,isShowPreviewMedia:!1,username:"",password:"",newSession:!1,openStatus:!0,showMessageinfo:!1,joinCallPopup:!1,contactPermissionPopup:!1,contactPermissionPopupText:"",accountDeletedToast:Object(le.e)("deleteAccount")},n.handleQRCode=n.handleQRCode.bind(Object(f.a)(n)),n.handleLogin=n.handleLogin.bind(Object(f.a)(n)),Object(le.c)("hideCallScreen",!1),window.addEventListener?(window.addEventListener("online",(function(){return Yl()}),!1),window.addEventListener("offline",(function(){return Zl()}),!1)):(document.body.ononline=Yl,document.body.onoffline=Zl),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){Object(B.nb)(),this.handleSDKIntialize(),window.addEventListener("message",this.handleIframeTask),window.addEventListener("storage",this.handleOnStorageChange,!1),bo.init(),Eo.a.init()}},{key:"componentDidUpdate",value:function(e,t){var a,n,r,o,l=this;e.ConnectionStateData&&e.ConnectionStateData.id!==this.props.ConnectionStateData.id&&"CONNECTED"===this.props.ConnectionStateData.data&&this.setState({connectionStatusLoader:!0,onLineStatus:!0}),e.messageData&&this.props.messageData&&e.messageData.id!==this.props.messageData.id&&"logout"===this.props.messageData.data.msgType&&Object(x.X)(),e.SingleChatSelectedMediaData&&this.props.SingleChatSelectedMediaData&&e.SingleChatSelectedMediaData.id!==this.props.SingleChatSelectedMediaData.id&&null!==this.props.SingleChatSelectedMediaData.id&&this.setState({isShowPreviewMedia:!0}),e.GroupChatSelectedMediaData&&this.props.GroupChatSelectedMediaData&&e.GroupChatSelectedMediaData.id!==this.props.GroupChatSelectedMediaData.id&&null!==this.props.GroupChatSelectedMediaData.id&&this.setState({isShowPreviewMedia:!0}),e.isAppOnline!==this.props.isAppOnline&&(this.props.isAppOnline?this.setState({loaderStatus:!1,onLineStatus:!0},(function(){!l.state.webChatStatus&&l.handleQRCode()})):this.setState({loaderStatus:!0,onLineStatus:!1}));var i=this.props.callIntermediateScreen,c=(i=void 0===i?{}:i).data,s=(c=void 0===c?{}:c).toggleCallScreen,d=c.hideCallScreen;s!==(null===(a=e.callIntermediateScreen)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.toggleCallScreen)&&(Object(le.c)("hideCallScreen",s),this.setState({hideCallScreen:s})),d!==this.state.hideCallScreen&&d!==(null===(r=e.callIntermediateScreen)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.hideCallScreen)&&(d?this.hideCallScreen():this.handleShowCallScreen())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("storage",this.handleOnStorageChange)}},{key:"handleQRCode",value:function(){var e=this;try{Object(B.mb)(Date.now()),"true"!==E.O&&A.a.generateQrCode(document.getElementById("divQRCode"),document.getElementById("qr-logo"),E.P,(function(t){if(t&&200===t.statusCode){var a={username:t.username,password:t.password,type:"web"};return e.handleLoginToken(a)}return!0}))}catch(t){console.log("handleQRCode error: ",t)}}},{key:"handleLoginToken",value:function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.handleLoginSuccess(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleLogin",value:function(e){var t=this,a={username:e.username,password:e.password,type:"web"},n=Date.now();A.a.connect(e.username,e.password).then(function(){var r=Object(p.a)(m.a.mark((function r(o){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(200!==o.statusCode){r.next=6;break}return Object(B.mb)(n),t.handleLoginToken(a),r.abrupt("return");case 6:if(403!==o.statusCode){r.next=10;break}return c.a.dispatch(Object(fi.a)({toUserId:e.username,isAdminBlocked:!0})),Object(x.X)("block"),r.abrupt("return");case 10:throw new Error("login Failed");case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){console.log("handleLogin error, ",e),Object(le.a)("auth_user"),t.setState({webChatStatus:!1,loaderStatus:!1})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.newSession?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"popup-wraper"},r.a.createElement("div",{className:"popup-inner"},r.a.createElement("div",{className:"popup-header"},r.a.createElement("label",null,"MirrorFly is open in another window.\n                  Click \u201cUse Here\u201d to use MirrorFly in this window.")),r.a.createElement("div",{className:"popup-footer"},r.a.createElement("button",{type:"button",className:"btn-action",name:"btn-action",onClick:this.handleUseHere},"Use Here")))),r.a.createElement(re.a,null)):this.handleWebChatConnect())}}]),a}(r.a.Component),Ei=Object(o.b)((function(e,t){var a,n;return{ConnectionStateData:e.ConnectionStateData,messageData:e.messageData,showConfrenceData:e.showConfrenceData,vCardData:e.vCardData,SingleChatSelectedMediaData:e.SingleChatSelectedMediaData,GroupChatSelectedMediaData:e.GroupChatSelectedMediaData,isAppOnline:null===e||void 0===e||null===(a=e.appOnlineStatus)||void 0===a?void 0:a.isOnline,callIntermediateScreen:null===e||void 0===e?void 0:e.callIntermediateScreen,contactPermission:null===e||void 0===e||null===(n=e.contactPermission)||void 0===n?void 0:n.data,adminBlockData:e.adminBlockData}}),null)(bi),Ci=(a(731),a(732),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"help-container"},r.a.createElement("h4",null,"Pairing your phone with the MirrorFly on desktop"),r.a.createElement("div",null,r.a.createElement("ol",null,r.a.createElement("li",null,"1. Open MirrorFly on your computer or visit ",r.a.createElement(l.b,{to:"/"},E.N)," on your computer. (Make sure it is the official client or website)"),r.a.createElement("li",null,"2. When prompted with a QR code, use the QR scanner within MirrorFly to scan the QR code.",r.a.createElement("ul",null,r.a.createElement("li",null,"On Mobile: in the Chats screen > Menu > Web."))),r.a.createElement("li",null,"3. To do so, open MirrorFly on your phone."),r.a.createElement("li",null,"4. Scan the QR Code on your computer screen from your phone.")),r.a.createElement("p",null,"If you believe someone has scanned your QR code and has access to your account via MirrorFly Web, use the instruction above to log out of all your active web sessions in MirrorFly on your mobile phone."),r.a.createElement("p",null,"Note: If you are unable to scan the QR code, ensure that the main camera on your phone is functioning properly. If the camera is not able to auto-focus, blurry or is broken, you may not be able to scan the barcode. Currently, there is no other way of logging into MirrorFly on your desktop."),r.a.createElement(l.b,{to:"/"},"Home"))))}}]),a}(r.a.Component)),yi=(0,a(468).createBrowserHistory)();t.default=function(){return r.a.createElement(o.a,{store:c.a},r.a.createElement(l.a,{history:yi},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:Ei}),r.a.createElement(i.a,{exact:!0,path:"/:roomLink",component:Ei}),r.a.createElement(i.a,{path:"/help",component:Ci}))))}}}]);
//# sourceMappingURL=4.0c76daea.chunk.js.map